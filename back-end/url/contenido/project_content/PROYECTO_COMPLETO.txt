# PROYECTO COMPLETO - SpeakLexi
# Backend: 37 archivos
# Frontend: 167 archivos
# Docs: 9 archivos
# Otros: 1 archivos
# Total: 214 archivos
# Generado: 2025-10-28 23:00:06


################################################################################
# BACKEND
################################################################################


================================================================================
# ARCHIVO: back-end/README.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/README.md
================================================================================




================================================================================
# ARCHIVO: back-end/app.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/app.py
================================================================================

# back-end/app.py
from flask import Flask, redirect
from flask_cors import CORS
from config.settings import Config
from config.database import init_db
from extensions import db, bcrypt, jwt, mail
from flask_jwt_extended import JWTManager
import logging
from logging.handlers import RotatingFileHandler
import os

# ========================================
# ‚≠ê IMPORTAR TODOS LOS MODELOS
# ========================================
# Importante: Importar ANTES de init_db() para que SQLAlchemy los registre
from models.usuario import Usuario, PerfilUsuario, PerfilEstudiante, PerfilProfesor, PerfilAdministrador
from models.leccion import Leccion, Actividad, leccion_multimedia
from models.multimedia import Multimedia, ConfiguracionMultimedia
from models.cursos import Curso, ProgresoCurso

# ========================================
# IMPORTAR BLUEPRINTS
# ========================================
from routes.auth import auth_bp
from routes.usuario_routes import usuario_bp
from routes.leccion_routes import leccion_bp
from routes.multimedia_routes import multimedia_bp
from routes.curso_routes import curso_bp
from routes.actividades_routes import actividades_bp


def create_app(config_class=Config):
    """Factory para crear la aplicaci√≥n Flask"""
    app = Flask(__name__)
    app.config.from_object(config_class)
    
    # FIX CR√çTICO: Deshabilitar trailing slash redirect
    app.url_map.strict_slashes = False
    
    # ========================================
    # CONFIGURACI√ìN CORS
    # ========================================
    CORS(app, resources={
        r"/api/*": {
            "origins": ["http://localhost:3000", "http://localhost:3001"],
            "methods": ["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"],
            "allow_headers": ["Content-Type", "Authorization", "x-user-id"],
            "supports_credentials": True,
            "expose_headers": ["Content-Type", "Authorization"]
        }
    })
    
    # ========================================
    # INICIALIZAR EXTENSIONES
    # ========================================
    db.init_app(app)
    bcrypt.init_app(app)
    jwt.init_app(app)
    mail.init_app(app)

    # ========================================
    # CONFIGURAR JWT
    # ========================================
    @jwt.user_identity_loader
    def user_identity_lookup(identity):
        """Convierte cualquier identidad num√©rica en string para evitar errores con JWT"""
        return str(identity)

    @jwt.user_lookup_loader
    def user_lookup_callback(_jwt_header, jwt_data):
        """Cargar usuario desde JWT (opcional)"""
        identity = jwt_data["sub"]
        return Usuario.query.filter_by(id=int(identity)).one_or_none()

    # ========================================
    # LOGGING
    # ========================================
    if not app.debug:
        if not os.path.exists('logs'):
            os.mkdir('logs')
        
        file_handler = RotatingFileHandler(
            'logs/speaklexi.log',
            maxBytes=10240000,
            backupCount=10
        )
        file_handler.setFormatter(logging.Formatter(
            '%(asctime)s %(levelname)s: %(message)s [in %(pathname)s:%(lineno)d]'
        ))
        file_handler.setLevel(logging.INFO)
        app.logger.addHandler(file_handler)
        app.logger.setLevel(logging.INFO)
        app.logger.info('SpeakLexi startup')
    
    # ========================================
    # BEFORE REQUEST FIXES
    # ========================================
    @app.before_request
    def handle_request_fixes():
        from flask import request
        
        # Remover trailing slash (excepto root)
        if request.path != '/' and request.path.endswith('/'):
            return redirect(request.path[:-1], code=308)
    
    # ========================================
    # REGISTRAR BLUEPRINTS
    # ========================================
    app.register_blueprint(auth_bp)
    app.register_blueprint(usuario_bp)
    app.register_blueprint(leccion_bp)
    app.register_blueprint(multimedia_bp)
    app.register_blueprint(curso_bp)
    app.register_blueprint(actividades_bp)
    
    # Log de rutas registradas (√∫til para debugging)
    if app.debug:
        print("\n" + "="*60)
        print("üìã RUTAS REGISTRADAS:")
        print("="*60)
        for rule in app.url_map.iter_rules():
            if rule.endpoint != 'static':
                methods = ','.join(sorted(rule.methods - {'HEAD', 'OPTIONS'}))
                print(f"{methods:20s} {rule}")
        print("="*60 + "\n")
    
    # ========================================
    # CREAR TABLAS Y DATOS INICIALES
    # ========================================
    with app.app_context():
        init_db()
    
    # ========================================
    # ENDPOINTS B√ÅSICOS
    # ========================================
    @app.route('/')
    def index():
        return {
            'mensaje': 'API SpeakLexi funcionando correctamente',
            'version': '3.0.0',
            'modulos': {
                'autenticacion': '‚úÖ',
                'usuarios': '‚úÖ',
                'cursos': '‚úÖ',
                'lecciones': '‚úÖ',
                'actividades': '‚úÖ',
                'multimedia': '‚úÖ',
                'progreso': '‚úÖ'
            },
            'endpoints': {
                'auth': '/api/auth',
                'usuarios': '/api/usuario',
                'cursos': '/api/cursos',
                'lecciones': '/api/lecciones',
                'actividades': '/api/actividades',
                'multimedia': '/api/multimedia'
            }
        }
    
    @app.route('/health')
    def health():
        """Endpoint de health check"""
        try:
            # Verificar conexi√≥n a BD
            db.session.execute(db.text('SELECT 1'))
            
            # Contar recursos
            total_usuarios = Usuario.query.count()
            total_cursos = Curso.query.count()
            total_lecciones = Leccion.query.count()
            total_actividades = Actividad.query.count()
            total_multimedia = Multimedia.query.count()
            
            return {
                'status': 'healthy',
                'database': 'connected',
                'version': '3.0.0',
                'recursos': {
                    'usuarios': total_usuarios,
                    'cursos': total_cursos,
                    'lecciones': total_lecciones,
                    'actividades': total_actividades,
                    'multimedia': total_multimedia
                }
            }
        except Exception as e:
            return {
                'status': 'unhealthy',
                'database': 'disconnected',
                'error': str(e)
            }, 503
    
    @app.errorhandler(404)
    def not_found(error):
        return {
            'success': False,
            'error': 'Endpoint no encontrado',
            'mensaje': str(error)
        }, 404
    
    @app.errorhandler(500)
    def internal_error(error):
        db.session.rollback()
        return {
            'success': False,
            'error': 'Error interno del servidor',
            'mensaje': str(error)
        }, 500
    
    return app


# ========================================
# CREAR LA APLICACI√ìN
# ========================================
app = create_app()

if __name__ == '__main__':
    print("\n" + "="*60)
    print("üöÄ INICIANDO SPEAKLEXI v3.0")
    print("="*60)
    print(f"üåê Servidor: http://localhost:5000")
    print(f"üìù Documentaci√≥n: http://localhost:5000/")
    print(f"üíö Health check: http://localhost:5000/health")
    print("="*60)
    print("üì¶ M√≥dulos Cargados:")
    print("   ‚úÖ Autenticaci√≥n (JWT)")
    print("   ‚úÖ Usuarios y Perfiles")
    print("   ‚úÖ Sistema de Cursos")
    print("   ‚úÖ Lecciones Din√°micas")
    print("   ‚úÖ Actividades Gamificadas")
    print("   ‚úÖ Multimedia")
    print("   ‚úÖ Seguimiento de Progreso")
    print("="*60 + "\n")
    
    app.run(
        host='0.0.0.0',
        port=5000,
        debug=True
    )


================================================================================
# ARCHIVO: back-end/config/__init__.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/__init__.py
================================================================================




================================================================================
# ARCHIVO: back-end/config/database.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/database.py
================================================================================

"""
Configuraci√≥n de la base de datos para SpeakLexi
Inicializa SQLAlchemy y proporciona utilidades para la DB
"""

import os
from dotenv import load_dotenv

# Cargar variables de entorno
load_dotenv()

# Importar db desde extensions (instancia √∫nica)
from extensions import db


def init_db():
    """
    Crea todas las tablas y verifica la conexi√≥n
    IMPORTANTE: Se debe llamar DESPU√âS de db.init_app(app)
    """
    try:
        # Crear todas las tablas si no existen
        db.create_all()
        print("‚úÖ Tablas creadas correctamente en la base de datos")
        
        # Verificar conexi√≥n
        db.session.execute(db.text('SELECT 1'))
        print(f"‚úÖ Conexi√≥n exitosa a la base de datos: {os.getenv('DB_NAME', 'SpeakLexi')}")
        
    except Exception as e:
        print(f"‚ùå Error al conectar con la base de datos: {str(e)}")
        raise


def get_db():
    """
    Obtiene la instancia de la base de datos
    
    Returns:
        SQLAlchemy: Instancia de la base de datos
    """
    return db


# Configuraci√≥n de la base de datos desde variables de entorno
DATABASE_CONFIG = {
    'host': os.getenv('DB_HOST', 'localhost'),
    'port': int(os.getenv('DB_PORT', 3306)),
    'user': os.getenv('DB_USER', 'root'),
    'password': os.getenv('DB_PASSWORD', ''),
    'database': os.getenv('DB_NAME', 'SpeakLexi'),
    'charset': 'utf8mb4',
    'collation': 'utf8mb4_unicode_ci'
}


def get_database_uri():
    """
    Genera la URI de conexi√≥n a la base de datos
    
    Returns:
        str: URI de conexi√≥n en formato SQLAlchemy
    """
    return (f"mysql+pymysql://{DATABASE_CONFIG['user']}:{DATABASE_CONFIG['password']}"
            f"@{DATABASE_CONFIG['host']}:{DATABASE_CONFIG['port']}/{DATABASE_CONFIG['database']}"
            f"?charset={DATABASE_CONFIG['charset']}")


def test_connection():
    """
    Prueba la conexi√≥n a la base de datos
    
    Returns:
        bool: True si la conexi√≥n es exitosa, False en caso contrario
    """
    try:
        from sqlalchemy import create_engine
        engine = create_engine(get_database_uri())
        connection = engine.connect()
        connection.close()
        print("‚úÖ Prueba de conexi√≥n exitosa")
        return True
    except Exception as e:
        print(f"‚ùå Error en prueba de conexi√≥n: {str(e)}")
        return False


================================================================================
# ARCHIVO: back-end/config/settings.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/settings.py
================================================================================

"""
Archivo de configuraci√≥n de la aplicaci√≥n SpeakLexi
Lee las variables de entorno desde el archivo .env
"""

import os
from dotenv import load_dotenv
from datetime import timedelta

# Cargar variables de entorno desde el archivo .env
load_dotenv()

# ==========================================================
# LEER VARIABLES DE ENTORNO (Se leen aqu√≠, pero se usan dentro de la clase Config)
# ==========================================================
DB_HOST = os.getenv('DB_HOST', 'localhost')
DB_PORT = os.getenv('DB_PORT', '3306')
DB_USER = os.getenv('DB_USER', 'root')
DB_PASSWORD = os.getenv('DB_PASSWORD', '') # Aseg√∫rate que tu .env tenga DB_PASSWORD
DB_NAME = os.getenv('DB_NAME', 'SpeakLexi')

SECRET_KEY_ENV = os.getenv('SECRET_KEY', 'clave_super_secreta_por_defecto')
DEBUG_ENV = os.getenv('DEBUG', 'True').lower() == 'true' # Convertir a booleano

JWT_SECRET_KEY_ENV = os.getenv('JWT_SECRET_KEY', SECRET_KEY_ENV) # Usa SECRET_KEY_ENV como fallback
JWT_ACCESS_TOKEN_EXPIRES_ENV = int(os.getenv('JWT_ACCESS_TOKEN_EXPIRES', 3600))

MAIL_SERVER_ENV = os.getenv('MAIL_SERVER', 'smtp.gmail.com')
MAIL_PORT_ENV = int(os.getenv('MAIL_PORT', 587))
MAIL_USE_TLS_ENV = os.getenv('MAIL_USE_TLS', 'True').lower() == 'true'
MAIL_USERNAME_ENV = os.getenv('MAIL_USERNAME')
MAIL_PASSWORD_ENV = os.getenv('MAIL_PASSWORD')
MAIL_DEFAULT_SENDER_ENV = os.getenv('MAIL_DEFAULT_SENDER')

UPLOAD_FOLDER_ENV = os.getenv('UPLOAD_FOLDER', 'uploads')
MAX_CONTENT_LENGTH_ENV = int(os.getenv('MAX_CONTENT_LENGTH', 16777216)) # 16MB
ALLOWED_EXTENSIONS_ENV = set(os.getenv('ALLOWED_EXTENSIONS', 'png,jpg,jpeg,gif,mp3,mp4,pdf').split(','))

CORS_ORIGINS_ENV = os.getenv('CORS_ORIGINS', 'http://localhost:3000').split(',')

# ==========================================================
# CLASE CONFIG PARA FLASK
# ==========================================================
class Config:
    """Clase de configuraci√≥n para Flask"""

    # --- CORRECCI√ìN: Construir URI dentro de la clase ---
    # Base de datos
    SQLALCHEMY_DATABASE_URI = f"mysql+pymysql://{DB_USER}:{DB_PASSWORD}@{DB_HOST}:{DB_PORT}/{DB_NAME}"
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    # --- FIN CORRECCI√ìN ---

    # Aplicaci√≥n
    SECRET_KEY = SECRET_KEY_ENV
    DEBUG = DEBUG_ENV

    # JWT
    JWT_SECRET_KEY = JWT_SECRET_KEY_ENV
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(seconds=JWT_ACCESS_TOKEN_EXPIRES_ENV)
    # Configuraci√≥n CSRF (deshabilitado como antes)
    JWT_CSRF_CHECK_FORM = False
    JWT_CSRF_IN_COOKIES = False
    JWT_CSRF_METHODS = [] 

    # Correo
    MAIL_SERVER = MAIL_SERVER_ENV
    MAIL_PORT = MAIL_PORT_ENV
    MAIL_USE_TLS = MAIL_USE_TLS_ENV
    MAIL_USERNAME = MAIL_USERNAME_ENV
    MAIL_PASSWORD = MAIL_PASSWORD_ENV
    # Ajuste para MAIL_DEFAULT_SENDER si viene del .env o se construye
    if MAIL_DEFAULT_SENDER_ENV:
         MAIL_DEFAULT_SENDER = MAIL_DEFAULT_SENDER_ENV
    else:
         mail_sender_name = "SpeakLexi"
         mail_sender_email = MAIL_USERNAME_ENV or 'noreply@speaklexi.com'
         MAIL_DEFAULT_SENDER = (mail_sender_name, mail_sender_email)

    # Archivos
    UPLOAD_FOLDER = UPLOAD_FOLDER_ENV
    MAX_CONTENT_LENGTH = MAX_CONTENT_LENGTH_ENV
    ALLOWED_EXTENSIONS = ALLOWED_EXTENSIONS_ENV

    # CORS (Aunque flask_cors lo maneja en app.py, lo mantenemos aqu√≠ por consistencia)
    CORS_ORIGINS = CORS_ORIGINS_ENV


# ==========================================================
# IMPRIMIR CONFIGURACI√ìN AL INICIAR (Solo en desarrollo)
# ==========================================================
# Usar la variable DEBUG_ENV le√≠da directamente del entorno
if DEBUG_ENV:
    # A√±adimos un print para confirmar la URI que se est√° usando
    print("\n" + "="*60)
    print("‚öôÔ∏è  CONFIGURACI√ìN DE SPEAKLEXI (Le√≠da desde .env)")
    print("="*60)
    print(f"üî© Debug Mode: {DEBUG_ENV}")
    print(f"üîë Secret Key: {'*' * len(SECRET_KEY_ENV) if SECRET_KEY_ENV else 'No definida'}")
    print(f"üîë JWT Secret Key: {'*' * len(JWT_SECRET_KEY_ENV) if JWT_SECRET_KEY_ENV else 'Usando SECRET_KEY'}")
    print(f"‚è≥ JWT Expiraci√≥n: {JWT_ACCESS_TOKEN_EXPIRES_ENV} segundos")
    print("-" * 60)
    print(f"üóÑÔ∏è  Base de datos: {DB_NAME}")
    print(f"üîó Host: {DB_HOST}:{DB_PORT}")
    print(f"üë§ Usuario DB: {DB_USER}")
    # ¬°Importante! No imprimir la contrase√±a de la BD en producci√≥n
    print(f"üîí Password DB: {'S√≠' if DB_PASSWORD else 'No'}") 
    # Imprimir la URI construida para depuraci√≥n
    print(f"URI Construida: mysql+pymysql://{DB_USER}:{'****' if DB_PASSWORD else ''}@{DB_HOST}:{DB_PORT}/{DB_NAME}")
    print("-" * 60)
    print(f"üìß Correo: {MAIL_USERNAME_ENV or 'No definido'}")
    print(f"‚úâÔ∏è Remitente: {Config.MAIL_DEFAULT_SENDER}") # Usar el valor final de la clase Config
    print("-" * 60)
    print(f"üåê Or√≠genes CORS Permitidos: {', '.join(CORS_ORIGINS_ENV)}")
    print("="*60 + "\n")

    # A√±adir el print que ten√≠as para la clave JWT cargada
    print(f"üîë JWT Secret Key cargada en Config: '{Config.JWT_SECRET_KEY}'") 




================================================================================
# ARCHIVO: back-end/extensions.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/extensions.py
================================================================================

"""
Extensiones de Flask - SpeakLexi
Inicializaci√≥n centralizada de todas las extensiones
"""

from flask_sqlalchemy import SQLAlchemy
from flask_bcrypt import Bcrypt
from flask_jwt_extended import JWTManager
from flask_mail import Mail

# Inicializar extensiones sin app (se vinculan despu√©s con init_app)
db = SQLAlchemy()
bcrypt = Bcrypt()
jwt = JWTManager()
mail = Mail()


================================================================================
# ARCHIVO: back-end/models/cursos.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/cursos.py
================================================================================

# back-end/models/cursos.py
from extensions import db
from sqlalchemy.dialects.mysql import JSON
from datetime import datetime, date
from decimal import Decimal


class Curso(db.Model):
    """Modelo para cursos organizados por niveles CEFR (A1-C2)"""
    __tablename__ = 'cursos'
    
    id = db.Column(db.Integer, primary_key=True)
    nombre = db.Column(db.String(100), nullable=False)
    nivel = db.Column(db.String(10), nullable=False)  # A1, A2, B1, B2, C1, C2
    descripcion = db.Column(db.Text)
    idioma = db.Column(db.String(50), nullable=False, default='ingles')
    codigo = db.Column(db.String(20), unique=True, nullable=False)
    profesor_id = db.Column(db.Integer, db.ForeignKey('usuarios.id'))
    imagen_portada = db.Column(db.String(500))
    orden = db.Column(db.Integer, default=0)
    activo = db.Column(db.Boolean, default=True)
    total_lecciones = db.Column(db.Integer, default=0)
    duracion_estimada_total = db.Column(db.Integer, default=0)
    requisitos_previos = db.Column(JSON)
    objetivos_aprendizaje = db.Column(JSON)
    creado_en = db.Column(db.DateTime, default=datetime.utcnow)
    actualizado_en = db.Column(db.DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    # Relaciones
    lecciones = db.relationship('Leccion', backref='curso', lazy='dynamic')
    progresos = db.relationship('ProgresoCurso', backref='curso', lazy='dynamic')
    profesor = db.relationship('Usuario', foreign_keys=[profesor_id], backref='cursos_impartidos')
    
    def to_dict(self, incluir_lecciones=False, incluir_profesor=False):
        """Convierte el curso a diccionario"""
        data = {
            'id': self.id,
            'nombre': self.nombre,
            'nivel': self.nivel,
            'descripcion': self.descripcion,
            'idioma': self.idioma,
            'codigo': self.codigo,
            'profesor_id': self.profesor_id,
            'imagen_portada': self.imagen_portada,
            'orden': self.orden,
            'activo': self.activo,
            'total_lecciones': self.total_lecciones,
            'duracion_estimada_total': self.duracion_estimada_total,
            'requisitos_previos': self.requisitos_previos or [],
            'objetivos_aprendizaje': self.objetivos_aprendizaje or [],
            'creado_en': self.creado_en.isoformat() if self.creado_en else None,
            'actualizado_en': self.actualizado_en.isoformat() if self.actualizado_en else None
        }
        
        if incluir_profesor and self.profesor:
            data['profesor'] = {
                'id': self.profesor.id,
                'nombre': self.profesor.nombre,
                'primer_apellido': self.profesor.primer_apellido,
                'correo': self.profesor.correo
            }
        
        if incluir_lecciones:
            from models.leccion import Leccion
            lecciones = Leccion.query.filter_by(curso_id=self.id).order_by(Leccion.orden).all()
            data['lecciones'] = [l.to_dict() for l in lecciones]
        
        return data
    
    def tiene_prerequisitos_cumplidos(self, usuario_id):
        """Verifica si el usuario cumple con los prerequisitos"""
        if not self.requisitos_previos:
            return True
        
        from models.cursos import ProgresoCurso
        for curso_prereq_id in self.requisitos_previos:
            progreso = ProgresoCurso.query.filter_by(
                usuario_id=usuario_id,
                curso_id=curso_prereq_id,
                estado='completado'
            ).first()
            
            if not progreso:
                return False
        
        return True
    
    def __repr__(self):
        return f'<Curso {self.codigo}: {self.nombre}>'


class ProgresoCurso(db.Model):
    """Modelo para seguimiento del progreso de los usuarios en los cursos"""
    __tablename__ = 'progreso_cursos'
    
    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey('usuarios.id'), nullable=False)
    curso_id = db.Column(db.Integer, db.ForeignKey('cursos.id'), nullable=False)
    lecciones_completadas = db.Column(db.Integer, default=0)
    lecciones_totales = db.Column(db.Integer, default=0)
    porcentaje_completado = db.Column(db.Numeric(5, 2), default=0.00)
    fecha_inicio = db.Column(db.Date)
    fecha_completado = db.Column(db.Date)
    estado = db.Column(
        db.Enum('no_iniciado', 'en_progreso', 'completado', 'abandonado'),
        default='no_iniciado'
    )
    tiempo_dedicado = db.Column(db.Integer, default=0)  # en minutos
    puntuacion_promedio = db.Column(db.Numeric(5, 2))
    ultima_leccion_id = db.Column(db.Integer, db.ForeignKey('lecciones.id'))
    
    # Relaciones
    usuario = db.relationship('Usuario', backref='progresos_cursos')
    ultima_leccion = db.relationship('Leccion', foreign_keys=[ultima_leccion_id])
    
    __table_args__ = (
        db.UniqueConstraint('usuario_id', 'curso_id', name='unique_usuario_curso'),
    )
    
    def to_dict(self, incluir_curso=False, incluir_usuario=False):
        """Convierte el progreso a diccionario"""
        data = {
            'id': self.id,
            'usuario_id': self.usuario_id,
            'curso_id': self.curso_id,
            'lecciones_completadas': self.lecciones_completadas,
            'lecciones_totales': self.lecciones_totales,
            'porcentaje_completado': float(self.porcentaje_completado) if self.porcentaje_completado else 0.0,
            'fecha_inicio': self.fecha_inicio.isoformat() if self.fecha_inicio else None,
            'fecha_completado': self.fecha_completado.isoformat() if self.fecha_completado else None,
            'estado': self.estado,
            'tiempo_dedicado': self.tiempo_dedicado,
            'puntuacion_promedio': float(self.puntuacion_promedio) if self.puntuacion_promedio else None,
            'ultima_leccion_id': self.ultima_leccion_id
        }
        
        if incluir_curso and self.curso:
            data['curso'] = self.curso.to_dict()
        
        if incluir_usuario and self.usuario:
            data['usuario'] = {
                'id': self.usuario.id,
                'nombre': self.usuario.nombre,
                'primer_apellido': self.usuario.primer_apellido,
                'correo': self.usuario.correo
            }
        
        return data
    
    def actualizar_progreso(self):
        """Actualiza el porcentaje de completado"""
        if self.lecciones_totales > 0:
            self.porcentaje_completado = Decimal(
                round((self.lecciones_completadas / self.lecciones_totales) * 100, 2)
            )
            
            if self.porcentaje_completado >= 100 and self.estado != 'completado':
                self.estado = 'completado'
                if not self.fecha_completado:
                    self.fecha_completado = date.today()
    
    def __repr__(self):
        return f'<ProgresoCurso Usuario:{self.usuario_id} Curso:{self.curso_id} {self.porcentaje_completado}%>'



================================================================================
# ARCHIVO: back-end/models/leccion.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/leccion.py
================================================================================

# back-end/models/leccion.py
from __future__ import annotations
from datetime import datetime
from typing import Any, Dict, List, Optional

from config.database import db
from sqlalchemy import Enum as SQLEnum
import enum


# -------------------- Mixins --------------------
class TimestampMixin:
    """Mixin para columnas de auditor√≠a comunes."""
    creado_en = db.Column(db.DateTime, default=datetime.utcnow, nullable=False)
    actualizado_en = db.Column(
        db.DateTime,
        default=datetime.utcnow,
        onupdate=datetime.utcnow,
        nullable=False,
    )


class SerializableMixin:
    """Mixin simple para exponer to_dict (puede ser sobreescrito)."""
    def to_dict_base(self) -> Dict[str, Any]:
        return {}


# -------------------- Enums --------------------
class NivelDificultad(enum.Enum):
    """Enum para niveles de dificultad de lecciones"""
    PRINCIPIANTE = "principiante"
    INTERMEDIO = "intermedio"
    AVANZADO = "avanzado"


class TipoActividad(enum.Enum):
    """Enum para tipos de actividades disponibles"""
    MULTIPLE_CHOICE = "multiple_choice"
    FILL_BLANK = "fill_blank"
    MATCHING = "matching"
    TRANSLATION = "translation"
    LISTEN_REPEAT = "listen_repeat"
    TRUE_FALSE = "true_false"
    WORD_ORDER = "word_order"


class EstadoLeccion(enum.Enum):
    """Enum para estados de publicaci√≥n de lecciones"""
    BORRADOR = "borrador"
    PUBLICADA = "publicada"
    ARCHIVADA = "archivada"


# -------------------- Models: Leccion + Actividad --------------------
class Leccion(db.Model, TimestampMixin, SerializableMixin):
    """
    Modelo para almacenar lecciones del sistema.
    """
    __tablename__ = 'lecciones'

    # Identificaci√≥n
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    
    # ‚≠ê AGREGAR: Foreign Key al curso
    curso_id = db.Column(db.Integer, db.ForeignKey('cursos.id'), nullable=True, index=True)
    
    titulo = db.Column(db.String(200), nullable=False, index=True)
    descripcion = db.Column(db.Text)

    # Contenido
    contenido = db.Column(db.JSON, nullable=False, default=dict)

    # Clasificaci√≥n
    nivel = db.Column(
        SQLEnum(
            NivelDificultad,
            values_callable=lambda x: [e.value for e in x],
            native_enum=False
        ),
        nullable=False,
        index=True,
        default=NivelDificultad.PRINCIPIANTE
    )
    idioma = db.Column(db.String(50), nullable=False, index=True, default='ingles')
    categoria = db.Column(db.String(100), index=True)
    etiquetas = db.Column(db.JSON, default=list)

    # Orden y estructura
    orden = db.Column(db.Integer, index=True)
    requisitos = db.Column(db.JSON, default=list)

    # Metadata de aprendizaje
    duracion_estimada = db.Column(db.Integer, default=10)
    puntos_xp = db.Column(db.Integer, default=50, nullable=False)

    # Estado
    estado = db.Column(
        SQLEnum(
            EstadoLeccion,
            values_callable=lambda x: [e.value for e in x],
            native_enum=False
        ),
        nullable=False,
        default=EstadoLeccion.BORRADOR,
        index=True
    )

    # Auditor√≠a
    creado_por = db.Column(db.Integer, db.ForeignKey('usuarios.id'), nullable=False)

    # Relaciones
    actividades = db.relationship(
        'Actividad',
        backref='leccion',
        lazy='select',
        cascade='all, delete-orphan',
        order_by='Actividad.orden'
    )

    recursos_multimedia = db.relationship(
        'Multimedia',
        secondary='leccion_multimedia',
        backref=db.backref('lecciones', lazy='select')
    )

    creador = db.relationship('Usuario', foreign_keys=[creado_por])
    
    # ‚≠ê NO definir relaci√≥n de vuelta con Curso aqu√≠, ya est√° en Curso.lecciones

    # √çndices compuestos
    __table_args__ = (
        db.Index('idx_leccion_nivel_idioma', 'nivel', 'idioma'),
        db.Index('idx_leccion_estado_orden', 'estado', 'orden'),
        db.Index('idx_leccion_curso_orden', 'curso_id', 'orden'),
    )

    def __repr__(self) -> str:
        return f'<Leccion {self.id}: {self.titulo}>'

    # -------------------- Serializaci√≥n --------------------
    def to_dict(self, incluir_actividades: bool = False, incluir_multimedia: bool = False) -> Dict[str, Any]:
        data: Dict[str, Any] = {
            'id': self.id,
            'curso_id': self.curso_id,  # ‚≠ê Incluir curso_id
            'titulo': self.titulo,
            'descripcion': self.descripcion,
            'contenido': self.contenido,
            'nivel': self.nivel.value if isinstance(self.nivel, NivelDificultad) else self.nivel,
            'idioma': self.idioma,
            'categoria': self.categoria,
            'etiquetas': self.etiquetas or [],
            'orden': self.orden,
            'requisitos': self.requisitos or [],
            'duracion_estimada': self.duracion_estimada,
            'puntos_xp': self.puntos_xp,
            'estado': self.estado.value if isinstance(self.estado, EstadoLeccion) else self.estado,
            'creado_por': self.creado_por,
            'creado_en': self.creado_en.isoformat() if getattr(self, 'creado_en', None) else None,
            'actualizado_en': self.actualizado_en.isoformat() if getattr(self, 'actualizado_en', None) else None,
        }

        if incluir_actividades:
            data['actividades'] = [actividad.to_dict() for actividad in list(self.actividades)]

        if incluir_multimedia:
            data['multimedia'] = [recurso.to_dict() for recurso in self.recursos_multimedia]

        return data

    # -------------------- Utilidades --------------------
    @classmethod
    def get_by_id(cls, _id: int) -> Optional['Leccion']:
        return cls.query.get(_id)

    @classmethod
    def search(cls, q: str, limit: int = 20) -> List['Leccion']:
        """B√∫squeda simple por t√≠tulo y descripci√≥n (case-insensitive)."""
        like_q = f"%{q}%"
        return (
            cls.query.filter(
                db.or_(cls.titulo.ilike(like_q), cls.descripcion.ilike(like_q))
            )
            .order_by(cls.orden)
            .limit(limit)
            .all()
        )

    @classmethod
    def paginate(cls, page: int = 1, per_page: int = 20):
        return cls.query.order_by(cls.orden).paginate(page=page, per_page=per_page, error_out=False)

    def validar_requisitos_cumplidos(self, lecciones_completadas: List[int]) -> bool:
        if not self.requisitos:
            return True
        return all(req_id in lecciones_completadas for req_id in (self.requisitos or []))

    def publicar(self) -> None:
        if self.estado == EstadoLeccion.BORRADOR:
            self.estado = EstadoLeccion.PUBLICADA
            self.actualizado_en = datetime.utcnow()

    def archivar(self) -> None:
        self.estado = EstadoLeccion.ARCHIVADA
        self.actualizado_en = datetime.utcnow()


class Actividad(db.Model, TimestampMixin, SerializableMixin):
    """
    Modelo para actividades dentro de las lecciones.
    """
    __tablename__ = 'actividades'

    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    leccion_id = db.Column(
        db.Integer,
        db.ForeignKey('lecciones.id', ondelete='CASCADE'),
        nullable=False,
        index=True
    )

    # Tipo y contenido
    tipo = db.Column(
        SQLEnum(
            TipoActividad,
            values_callable=lambda x: [e.value for e in x],
            native_enum=False
        ),
        nullable=False
    )
    pregunta = db.Column(db.Text, nullable=False)
    instrucciones = db.Column(db.Text)

    # Opciones y respuestas
    opciones = db.Column(db.JSON, default=dict)
    respuesta_correcta = db.Column(db.JSON, nullable=False)

    # Retroalimentaci√≥n
    retroalimentacion = db.Column(db.JSON, default=dict)
    pista = db.Column(db.Text)

    # Metadata
    puntos = db.Column(db.Integer, default=10, nullable=False)
    orden = db.Column(db.Integer, nullable=False)
    tiempo_limite = db.Column(db.Integer)

    # Multimedia asociado
    multimedia_id = db.Column(db.Integer, db.ForeignKey('multimedia.id'))

    __table_args__ = (
        db.Index('idx_actividad_leccion_orden', 'leccion_id', 'orden'),
    )

    def __repr__(self) -> str:
        tipo_val = self.tipo.value if isinstance(self.tipo, TipoActividad) else self.tipo
        return f'<Actividad {self.id} - {tipo_val}>'

    def to_dict(self, incluir_respuesta: bool = False) -> Dict[str, Any]:
        data: Dict[str, Any] = {
            'id': self.id,
            'leccion_id': self.leccion_id,
            'tipo': self.tipo.value if isinstance(self.tipo, TipoActividad) else self.tipo,
            'pregunta': self.pregunta,
            'instrucciones': self.instrucciones,
            'opciones': self.opciones,
            'retroalimentacion': self.retroalimentacion,
            'pista': self.pista,
            'puntos': self.puntos,
            'orden': self.orden,
            'tiempo_limite': self.tiempo_limite,
            'multimedia_id': self.multimedia_id,
            'creado_en': self.creado_en.isoformat() if getattr(self, 'creado_en', None) else None,
            'actualizado_en': self.actualizado_en.isoformat() if getattr(self, 'actualizado_en', None) else None,
        }

        if incluir_respuesta:
            data['respuesta_correcta'] = self.respuesta_correcta

        return data

    def verificar_respuesta(self, respuesta_usuario: Any) -> Dict[str, Any]:
        correcta = self._comparar_respuesta(respuesta_usuario)
        retro = self.retroalimentacion.get('correcta' if correcta else 'incorrecta')
        return {
            'correcta': correcta,
            'retroalimentacion': retro or ('Respuesta correcta' if correcta else 'Respuesta incorrecta'),
            'puntos': self.puntos if correcta else 0
        }

    def _comparar_respuesta(self, respuesta_usuario: Any) -> bool:
        """Compara respuesta del usuario con la correcta seg√∫n el tipo."""
        def _norm(x: Any) -> Any:
            if x is None:
                return x
            if isinstance(x, str):
                return x.strip().lower()
            return x

        if self.tipo == TipoActividad.MULTIPLE_CHOICE:
            return _norm(str(respuesta_usuario)) == _norm(str(self.respuesta_correcta))

        if self.tipo == TipoActividad.TRUE_FALSE:
            return bool(respuesta_usuario) == bool(self.respuesta_correcta)

        if self.tipo == TipoActividad.FILL_BLANK:
            return _norm(str(respuesta_usuario)) == _norm(str(self.respuesta_correcta))

        if self.tipo == TipoActividad.MATCHING:
            return respuesta_usuario == self.respuesta_correcta

        if self.tipo == TipoActividad.WORD_ORDER:
            return respuesta_usuario == self.respuesta_correcta

        if self.tipo == TipoActividad.TRANSLATION:
            return _norm(str(respuesta_usuario)) == _norm(str(self.respuesta_correcta))

        return respuesta_usuario == self.respuesta_correcta


# Tabla de asociaci√≥n para relaci√≥n muchos-a-muchos
leccion_multimedia = db.Table(
    'leccion_multimedia',
    db.Column('leccion_id', db.Integer, db.ForeignKey('lecciones.id', ondelete='CASCADE'), primary_key=True),
    db.Column('multimedia_id', db.Integer, db.ForeignKey('multimedia.id', ondelete='CASCADE'), primary_key=True),
    db.Column('orden', db.Integer, default=0),
    db.Column('creado_en', db.DateTime, default=datetime.utcnow)
)


================================================================================
# ARCHIVO: back-end/models/multimedia.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/multimedia.py
================================================================================

# multimedia.py
from __future__ import annotations
from datetime import datetime
from typing import Any, Dict, Optional

from config.database import db
from sqlalchemy import Enum as SQLEnum
import enum


class TipoMultimedia(enum.Enum):
    """Enum para tipos de recursos multimedia"""
    IMAGEN = "imagen"
    AUDIO = "audio"
    VIDEO = "video"
    DOCUMENTO = "documento"


class EstadoMultimedia(enum.Enum):
    """Enum para estados de procesamiento de multimedia"""
    PENDIENTE = "pendiente"
    PROCESANDO = "procesando"
    DISPONIBLE = "disponible"
    ERROR = "error"


class Multimedia(db.Model):
    """
    Modelo para almacenar recursos multimedia del sistema.
    """
    __tablename__ = 'multimedia'

    # Identificaci√≥n
    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    nombre_archivo = db.Column(db.String(255), nullable=False)
    nombre_almacenado = db.Column(db.String(255), unique=True, nullable=False, index=True)

    # Tipo y clasificaci√≥n
    tipo = db.Column(SQLEnum(TipoMultimedia), nullable=False, index=True)
    mime_type = db.Column(db.String(100), nullable=False)
    categoria = db.Column(db.String(50), index=True)  # vocabulario, gramatica, pronunciacion, etc.

    # URLs y almacenamiento
    url = db.Column(db.String(500), nullable=False)
    url_thumbnail = db.Column(db.String(500))
    ruta_local = db.Column(db.String(500))  # Ruta en el servidor si aplica

    # Propiedades del archivo
    tamano = db.Column(db.Integer)  # En bytes
    duracion = db.Column(db.Integer)  # En segundos (para audio/video)
    dimensiones = db.Column(db.JSON)  # {"ancho": 1920, "alto": 1080}

    # Estado y procesamiento
    estado = db.Column(
        SQLEnum(EstadoMultimedia),
        nullable=False,
        default=EstadoMultimedia.PENDIENTE,
        index=True
    )
    mensaje_error = db.Column(db.Text)  # Si estado es ERROR

    # Informaci√≥n adicional
    descripcion = db.Column(db.Text)
    alt_text = db.Column(db.String(200))  # Para accesibilidad
    transcripcion = db.Column(db.Text)  # Para audio/video
    etiquetas = db.Column(db.JSON, default=list)

    # Usar meta_data en Python, columna 'meta' en DB (metadata es reservado)
    meta_data = db.Column('meta', db.JSON, default=dict)

    # Uso y estad√≠sticas
    veces_usado = db.Column(db.Integer, default=0)
    ultima_vez_usado = db.Column(db.DateTime)

    # Auditor√≠a
    subido_por = db.Column(db.Integer, db.ForeignKey('usuarios.id'), nullable=False)
    creado_en = db.Column(db.DateTime, default=datetime.utcnow, nullable=False)
    actualizado_en = db.Column(
        db.DateTime,
        default=datetime.utcnow,
        onupdate=datetime.utcnow,
        nullable=False
    )

    # Relaciones
    subidor = db.relationship('Usuario', foreign_keys=[subido_por])

    # √çndices compuestos
    __table_args__ = (
        db.Index('idx_multimedia_tipo_estado', 'tipo', 'estado'),
        db.Index('idx_multimedia_categoria', 'categoria'),
    )

    def __repr__(self) -> str:
        return f'<Multimedia {self.id}: {self.nombre_archivo}>'

    def to_dict(self, incluir_metadata: bool = False) -> Dict[str, Any]:
        data: Dict[str, Any] = {
            'id': self.id,
            'nombre_archivo': self.nombre_archivo,
            'tipo': self.tipo.value if isinstance(self.tipo, TipoMultimedia) else self.tipo,
            'mime_type': self.mime_type,
            'categoria': self.categoria,
            'url': self.url,
            'url_thumbnail': self.url_thumbnail,
            'tamano': self.tamano,
            'tamano_formateado': self._formatear_tamano(),
            'duracion': self.duracion,
            'duracion_formateada': self._formatear_duracion(),
            'dimensiones': self.dimensiones,
            'estado': self.estado.value if isinstance(self.estado, EstadoMultimedia) else self.estado,
            'descripcion': self.descripcion,
            'alt_text': self.alt_text,
            'transcripcion': self.transcripcion,
            'etiquetas': self.etiquetas or [],
            'veces_usado': self.veces_usado,
            'subido_por': self.subido_por,
            'creado_en': self.creado_en.isoformat() if getattr(self, 'creado_en', None) else None,
            'actualizado_en': self.actualizado_en.isoformat() if getattr(self, 'actualizado_en', None) else None,
        }

        if incluir_metadata:
            data['metadata'] = self.meta_data or {}
            data['nombre_almacenado'] = self.nombre_almacenado
            data['ruta_local'] = self.ruta_local
            data['mensaje_error'] = self.mensaje_error

        return data

    def _formatear_tamano(self) -> str:
        """Formatea el tama√±o sin mutar self.tamano."""
        if self.tamano is None:
            return "Desconocido"
        tam = float(self.tamano)
        unidades = ['B', 'KB', 'MB', 'GB', 'TB']
        idx = 0
        while tam >= 1024.0 and idx < len(unidades) - 1:
            tam /= 1024.0
            idx += 1
        return f"{tam:.2f} {unidades[idx]}"

    def _formatear_duracion(self) -> Optional[str]:
        if self.duracion is None:
            return None
        segundos_total = int(self.duracion)
        horas = segundos_total // 3600
        minutos = (segundos_total % 3600) // 60
        segundos = segundos_total % 60
        if horas > 0:
            return f"{horas}:{minutos:02d}:{segundos:02d}"
        return f"{minutos}:{segundos:02d}"

    def marcar_disponible(self) -> None:
        self.estado = EstadoMultimedia.DISPONIBLE
        self.actualizado_en = datetime.utcnow()

    def marcar_error(self, mensaje_error: str) -> None:
        self.estado = EstadoMultimedia.ERROR
        self.mensaje_error = mensaje_error
        self.actualizado_en = datetime.utcnow()

    def incrementar_uso(self) -> None:
        self.veces_usado = (self.veces_usado or 0) + 1
        self.ultima_vez_usado = datetime.utcnow()

    def es_imagen(self) -> bool:
        return self.tipo == TipoMultimedia.IMAGEN

    def es_audio(self) -> bool:
        return self.tipo == TipoMultimedia.AUDIO

    def es_video(self) -> bool:
        return self.tipo == TipoMultimedia.VIDEO

    def puede_tener_thumbnail(self) -> bool:
        return self.tipo in [TipoMultimedia.IMAGEN, TipoMultimedia.VIDEO]

    @staticmethod
    def generar_nombre_unico(nombre_original: str) -> str:
        import uuid
        from pathlib import Path
        extension = Path(nombre_original).suffix
        return f"{uuid.uuid4().hex}{extension}"

    @staticmethod
    def validar_tipo_archivo(mime_type: str, tipo_esperado: TipoMultimedia) -> bool:
        tipos_validos = {
            TipoMultimedia.IMAGEN: [
                'image/jpeg', 'image/jpg', 'image/png', 'image/gif',
                'image/webp', 'image/svg+xml'
            ],
            TipoMultimedia.AUDIO: [
                'audio/mpeg', 'audio/mp3', 'audio/wav', 'audio/ogg',
                'audio/webm', 'audio/aac'
            ],
            TipoMultimedia.VIDEO: [
                'video/mp4', 'video/webm', 'video/ogg', 'video/quicktime'
            ],
            TipoMultimedia.DOCUMENTO: [
                'application/pdf', 'application/msword',
                'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                'text/plain'
            ]
        }
        return mime_type in tipos_validos.get(tipo_esperado, [])

    @staticmethod
    def obtener_extension_mime(mime_type: str) -> str:
        extensiones = {
            'image/jpeg': '.jpg',
            'image/jpg': '.jpg',
            'image/png': '.png',
            'image/gif': '.gif',
            'image/webp': '.webp',
            'audio/mpeg': '.mp3',
            'audio/mp3': '.mp3',
            'audio/wav': '.wav',
            'audio/ogg': '.ogg',
            'video/mp4': '.mp4',
            'video/webm': '.webm',
            'application/pdf': '.pdf',
            'text/plain': '.txt'
        }
        return extensiones.get(mime_type, '.bin')


class ConfiguracionMultimedia(db.Model):
    """
    Modelo para configuraci√≥n global de multimedia.
    """
    __tablename__ = 'configuracion_multimedia'

    id = db.Column(db.Integer, primary_key=True, autoincrement=True)
    clave = db.Column(db.String(100), unique=True, nullable=False, index=True)
    valor = db.Column(db.Text, nullable=False)
    descripcion = db.Column(db.Text)
    actualizado_en = db.Column(
        db.DateTime,
        default=datetime.utcnow,
        onupdate=datetime.utcnow
    )

    @staticmethod
    def obtener_valor(clave: str, valor_por_defecto: Optional[Any] = None) -> Any:
        config = ConfiguracionMultimedia.query.filter_by(clave=clave).first()
        return config.valor if config else valor_por_defecto

    @staticmethod
    def establecer_valor(clave: str, valor: Any, descripcion: Optional[str] = None) -> 'ConfiguracionMultimedia':
        config = ConfiguracionMultimedia.query.filter_by(clave=clave).first()
        if config:
            config.valor = str(valor)
            config.actualizado_en = datetime.utcnow()
        else:
            config = ConfiguracionMultimedia(clave=clave, valor=str(valor), descripcion=descripcion)
            db.session.add(config)
        db.session.commit()
        return config

    def __repr__(self) -> str:
        return f'<ConfigMultimedia {self.clave}: {self.valor}>'


# Valores por defecto de configuraci√≥n
CONFIGURACION_POR_DEFECTO = {
    'max_tamano_imagen': '5242880',  # 5 MB en bytes
    'max_tamano_audio': '10485760',  # 10 MB
    'max_tamano_video': '52428800',  # 50 MB
    'max_tamano_documento': '10485760',  # 10 MB
    'ruta_almacenamiento': 'uploads/multimedia',
    'generar_thumbnails': 'true',
    'thumbnail_ancho': '300',
    'thumbnail_alto': '300',
    'calidad_compresion_imagen': '85',
    'formatos_permitidos_imagen': 'jpg,jpeg,png,gif,webp',
    'formatos_permitidos_audio': 'mp3,wav,ogg',
    'formatos_permitidos_video': 'mp4,webm',
    'formatos_permitidos_documento': 'pdf,txt'
}


================================================================================
# ARCHIVO: back-end/models/usuario.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/usuario.py
================================================================================

from config.database import db
from werkzeug.security import generate_password_hash, check_password_hash 
from datetime import datetime
from sqlalchemy import Date, JSON, Numeric

# ============================================================
# MODELO USUARIO (SIN CAMBIOS)
# ============================================================

class Usuario(db.Model):
    __tablename__ = "usuarios"

    id = db.Column(db.Integer, primary_key=True)
    id_publico = db.Column(db.String(20), unique=True, nullable=True) 
    nombre = db.Column(db.String(100), nullable=False)
    primer_apellido = db.Column(db.String(100), nullable=False)
    segundo_apellido = db.Column(db.String(100), nullable=True)
    correo = db.Column(db.String(255), unique=True, nullable=False) 
    contrasena_hash = db.Column(db.String(255), nullable=False) 
    rol = db.Column(db.String(50), default="alumno") 
    
    # Verificaci√≥n de correo
    correo_verificado = db.Column(db.Boolean, default=False)
    codigo_verificacion = db.Column(db.String(6), nullable=True)
    expira_verificacion = db.Column(db.DateTime, nullable=True)
    
    # Recuperaci√≥n de contrase√±a
    token_recuperacion = db.Column(db.String(256), nullable=True, unique=True)
    expira_token_recuperacion = db.Column(db.DateTime, nullable=True)
    
    # Estado de cuenta (soft delete)
    estado_cuenta = db.Column(db.String(20), default="activo", nullable=False) 
    fecha_desactivacion = db.Column(db.DateTime, nullable=True)
    
    # Timestamps
    creado_en = db.Column(db.DateTime, default=db.func.now()) 
    actualizado_en = db.Column(db.DateTime, default=db.func.now(), onupdate=db.func.now())

    # Relaciones (ACTUALIZADAS)
    perfil = db.relationship("PerfilUsuario", back_populates="usuario", uselist=False, cascade="all, delete-orphan")
    perfil_estudiante = db.relationship("PerfilEstudiante", back_populates="usuario", uselist=False, cascade="all, delete-orphan")
    perfil_profesor = db.relationship("PerfilProfesor", back_populates="usuario", uselist=False, cascade="all, delete-orphan")
    perfil_admin = db.relationship("PerfilAdministrador", back_populates="usuario", uselist=False, cascade="all, delete-orphan")

    def set_password(self, password):
        """Genera el hash de la contrase√±a"""
        self.contrasena_hash = generate_password_hash(password)

    def check_password(self, password):
        """Verifica la contrase√±a"""
        if not self.contrasena_hash:
            return False
        return check_password_hash(self.contrasena_hash, password)

    def __repr__(self):
        return f"<Usuario {self.id}: {self.correo}>"


# ============================================================
# PERFIL BASE (MODIFICADO - SIN CAMPOS DE ESTUDIANTE)
# ============================================================

class PerfilUsuario(db.Model):
    __tablename__ = "perfil_usuarios"

    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey("usuarios.id"), unique=True, nullable=False) 
    nombre_completo = db.Column(db.String(255), nullable=False) 
    id_publico = db.Column(db.String(20), nullable=True)
    
    # Informaci√≥n general (para todos los roles)
    foto_perfil = db.Column(db.String(500), nullable=True)
    biografia = db.Column(db.Text, nullable=True)
    
    # ELIMINADOS: idioma, nivel_actual, curso_actual, total_xp, dias_racha, ultima_actividad
    # Esos campos ahora est√°n en PerfilEstudiante
    
    # Timestamps
    creado_en = db.Column(db.DateTime, default=db.func.now()) 
    actualizado_en = db.Column(db.DateTime, default=db.func.now(), onupdate=db.func.now())

    # Relaci√≥n inversa con Usuario
    usuario = db.relationship("Usuario", back_populates="perfil")

    def __repr__(self):
        return f"<PerfilUsuario {self.nombre_completo}>"


# ============================================================
# PERFIL ESTUDIANTE (NUEVO)
# ============================================================

class PerfilEstudiante(db.Model):
    __tablename__ = "perfil_estudiantes"

    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey("usuarios.id"), unique=True, nullable=False)
    
    # Informaci√≥n acad√©mica
    nivel_actual = db.Column(db.String(50), nullable=True)
    idioma_aprendizaje = db.Column(db.String(100), nullable=True)
    
    # Gamificaci√≥n
    total_xp = db.Column(db.Integer, default=0)
    nivel_usuario = db.Column(db.Integer, default=1)
    dias_racha = db.Column(db.Integer, default=0)
    ultima_actividad = db.Column(db.Date, nullable=True)
    racha_maxima = db.Column(db.Integer, default=0)
    
    # Progreso
    lecciones_completadas = db.Column(db.Integer, default=0)
    tiempo_estudio_total = db.Column(db.Integer, default=0)  # en minutos
    
    # Configuraci√≥n
    meta_diaria = db.Column(db.Integer, default=30)  # minutos
    notificaciones_habilitadas = db.Column(db.Boolean, default=True)
    
    # Relaci√≥n con Usuario
    usuario = db.relationship("Usuario", back_populates="perfil_estudiante")

    def __repr__(self):
        return f"<PerfilEstudiante Usuario:{self.usuario_id}>"


# ============================================================
# PERFIL PROFESOR (NUEVO)
# ============================================================

class PerfilProfesor(db.Model):
    __tablename__ = "perfil_profesores"

    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey("usuarios.id"), unique=True, nullable=False)
    
    # Informaci√≥n profesional
    especialidad = db.Column(db.String(200), nullable=True)
    a√±os_experiencia = db.Column(db.Integer, nullable=True)
    idiomas_ensena = db.Column(JSON, nullable=True)  # Array: ["ingl√©s", "franc√©s"]
    niveles_ensena = db.Column(JSON, nullable=True)  # Array: ["principiante", "intermedio"]
    certificaciones = db.Column(db.Text, nullable=True)
    descripcion_profesional = db.Column(db.Text, nullable=True)
    
    # Estad√≠sticas
    estudiantes_totales = db.Column(db.Integer, default=0)
    cursos_creados = db.Column(db.Integer, default=0)
    calificacion_promedio = db.Column(Numeric(3, 2), default=0.00)
    total_resenas = db.Column(db.Integer, default=0)
    
    # Relaci√≥n con Usuario
    usuario = db.relationship("Usuario", back_populates="perfil_profesor")

    def __repr__(self):
        return f"<PerfilProfesor Usuario:{self.usuario_id}>"


# ============================================================
# PERFIL ADMINISTRADOR (NUEVO)
# ============================================================

class PerfilAdministrador(db.Model):
    __tablename__ = "perfil_administradores"

    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey("usuarios.id"), unique=True, nullable=False)
    
    # Informaci√≥n administrativa
    departamento = db.Column(db.String(100), nullable=True)
    nivel_acceso = db.Column(db.String(50), default="admin")  # admin, superadmin, mantenimiento
    permisos = db.Column(JSON, nullable=True)  # Array de permisos
    ultimo_acceso_admin = db.Column(db.DateTime, nullable=True)
    
    # Relaci√≥n con Usuario
    usuario = db.relationship("Usuario", back_populates="perfil_admin")

    def __repr__(self):
        return f"<PerfilAdministrador Usuario:{self.usuario_id}>"


================================================================================
# ARCHIVO: back-end/requirements.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/requirements.txt
================================================================================

# ==========================================================
# DEPENDENCIAS DE SPEAKLEXI BACKEND
# ==========================================================

# Framework principal
Flask==2.3.3
Werkzeug==2.3.7

# Base de datos
Flask-SQLAlchemy==3.0.5
SQLAlchemy==2.0.20
PyMySQL==1.1.0

# Autenticaci√≥n y seguridad
Flask-JWT-Extended==4.5.2
Flask-Bcrypt==1.0.1

# Correo electr√≥nico
Flask-Mail==0.9.1

# CORS (Cross-Origin Resource Sharing)
Flask-CORS==4.0.0

# Variables de entorno
python-dotenv==1.0.0

# Validaci√≥n de datos
Flask-WTF==1.1.1
WTForms==3.0.1

# Utilidades
python-dateutil==2.8.2

# Testing (opcional)
pytest==7.4.2
pytest-flask==1.2.0


================================================================================
# ARCHIVO: back-end/routes/__init__.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/__init__.py
================================================================================

from routes.auth import auth_bp
from routes.usuario_routes import usuario_bp
from routes.leccion_routes import leccion_bp
from routes.multimedia_routes import multimedia_bp
from routes.curso_routes import curso_bp  # ‚Üê AGREGAR
from routes.actividades_routes import actividades_bp  # ‚Üê AGREGAR

def register_routes(app):
    app.register_blueprint(auth_bp)
    app.register_blueprint(usuario_bp)
    app.register_blueprint(leccion_bp)
    app.register_blueprint(multimedia_bp)
    app.register_blueprint(curso_bp)  # ‚Üê AGREGAR
    app.register_blueprint(actividades_bp)  # ‚Üê AGREGAR


================================================================================
# ARCHIVO: back-end/routes/actividades_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/actividades_routes.py
================================================================================

# back-end/routes/actividades_routes.py
from flask import Blueprint, request, jsonify
from flask_jwt_extended import jwt_required, get_jwt_identity
from models.leccion import Actividad, Leccion
from models.usuario import Usuario
from extensions import db

actividades_bp = Blueprint('actividades', __name__, url_prefix='/api/actividades')


@actividades_bp.route('', methods=['POST'])
@jwt_required()
def crear_actividad():
    """
    Crear nueva actividad para una lecci√≥n
    Body:
    {
        "leccion_id": 1,
        "tipo": "multiple_choice",
        "pregunta": "What is the capital of France?",
        "instrucciones": "Select the correct answer",
        "opciones": ["London", "Paris", "Berlin", "Madrid"],
        "respuesta_correcta": "Paris",
        "pista": "It's known as the City of Light",
        "puntos": 10,
        "orden": 1,
        "multimedia_id": null
    }
    """
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        data = request.json
        
        # Validar campos requeridos
        if 'leccion_id' not in data or 'tipo' not in data or 'pregunta' not in data:
            return jsonify({
                'success': False,
                'error': 'Campos requeridos: leccion_id, tipo, pregunta'
            }), 400
        
        # Validar que la lecci√≥n existe
        leccion = Leccion.query.get(data['leccion_id'])
        if not leccion:
            return jsonify({'success': False, 'error': 'Lecci√≥n no encontrada'}), 404
        
        # Validar tipo de actividad
        tipos_validos = ['multiple_choice', 'fill_blank', 'matching', 'translation', 
                        'listen_repeat', 'true_false', 'word_order']
        if data['tipo'] not in tipos_validos:
            return jsonify({
                'success': False,
                'error': f'Tipo inv√°lido. Use: {", ".join(tipos_validos)}'
            }), 400
        
        # Si es profesor, verificar que sea su lecci√≥n
        if usuario.rol == 'profesor':
            if leccion.curso_id:
                from models.cursos import Curso
                curso = Curso.query.get(leccion.curso_id)
                if curso and curso.profesor_id != usuario_id:
                    return jsonify({
                        'success': False,
                        'error': 'No puedes crear actividades en esta lecci√≥n'
                    }), 403
        
        # Determinar el siguiente orden si no se especifica
        if 'orden' not in data:
            ultima_actividad = Actividad.query.filter_by(
                leccion_id=data['leccion_id']
            ).order_by(Actividad.orden.desc()).first()
            data['orden'] = (ultima_actividad.orden + 1) if ultima_actividad else 1
        
        # Crear actividad
        nueva_actividad = Actividad(
            leccion_id=data['leccion_id'],
            tipo=data['tipo'],
            pregunta=data['pregunta'],
            instrucciones=data.get('instrucciones'),
            opciones=data.get('opciones'),
            respuesta_correcta=data.get('respuesta_correcta', {}),
            retroalimentacion=data.get('retroalimentacion'),
            pista=data.get('pista'),
            puntos=data.get('puntos', 10),
            orden=data['orden'],
            tiempo_limite=data.get('tiempo_limite'),
            multimedia_id=data.get('multimedia_id')
        )
        
        db.session.add(nueva_actividad)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': 'Actividad creada exitosamente',
            'actividad': nueva_actividad.to_dict()
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/leccion/<int:leccion_id>', methods=['GET'])
def obtener_actividades_leccion(leccion_id):
    """Obtener todas las actividades de una lecci√≥n"""
    try:
        leccion = Leccion.query.get_or_404(leccion_id)
        
        actividades = Actividad.query.filter_by(
            leccion_id=leccion_id
        ).order_by(Actividad.orden).all()
        
        return jsonify({
            'success': True,
            'leccion_id': leccion_id,
            'actividades': [a.to_dict() for a in actividades],
            'total': len(actividades)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/<int:actividad_id>', methods=['GET'])
def obtener_actividad(actividad_id):
    """Obtener una actividad espec√≠fica"""
    try:
        actividad = Actividad.query.get_or_404(actividad_id)
        
        return jsonify({
            'success': True,
            'actividad': actividad.to_dict()
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/<int:actividad_id>', methods=['PUT'])
@jwt_required()
def actualizar_actividad(actividad_id):
    """Actualizar una actividad"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        actividad = Actividad.query.get_or_404(actividad_id)
        
        # Si es profesor, verificar permisos
        if usuario.rol == 'profesor':
            leccion = Leccion.query.get(actividad.leccion_id)
            if leccion.curso_id:
                from models.cursos import Curso
                curso = Curso.query.get(leccion.curso_id)
                if curso and curso.profesor_id != usuario_id:
                    return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        data = request.json
        
        # Actualizar campos permitidos
        campos_permitidos = [
            'pregunta', 'instrucciones', 'opciones', 'respuesta_correcta',
            'retroalimentacion', 'pista', 'puntos', 'orden', 'tiempo_limite',
            'multimedia_id'
        ]
        
        for campo in campos_permitidos:
            if campo in data:
                setattr(actividad, campo, data[campo])
        
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': 'Actividad actualizada',
            'actividad': actividad.to_dict()
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/<int:actividad_id>', methods=['DELETE'])
@jwt_required()
def eliminar_actividad(actividad_id):
    """Eliminar una actividad"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        actividad = Actividad.query.get_or_404(actividad_id)
        
        # Verificar permisos si es profesor
        if usuario.rol == 'profesor':
            leccion = Leccion.query.get(actividad.leccion_id)
            if leccion.curso_id:
                from models.cursos import Curso
                curso = Curso.query.get(leccion.curso_id)
                if curso and curso.profesor_id != usuario_id:
                    return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        leccion_id = actividad.leccion_id
        pregunta = actividad.pregunta
        
        db.session.delete(actividad)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': f'Actividad eliminada: {pregunta}'
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/<int:actividad_id>/validar', methods=['POST'])
@jwt_required()
def validar_respuesta(actividad_id):
    """
    Validar respuesta de estudiante
    Body: {"respuesta": "..."}
    """
    try:
        usuario_id = get_jwt_identity()
        
        actividad = Actividad.query.get_or_404(actividad_id)
        data = request.json
        
        if 'respuesta' not in data:
            return jsonify({
                'success': False,
                'error': 'Campo requerido: respuesta'
            }), 400
        
        respuesta_usuario = data['respuesta']
        respuesta_correcta = actividad.respuesta_correcta
        
        # Validar seg√∫n tipo de actividad
        es_correcta = False
        
        if actividad.tipo == 'multiple_choice':
            es_correcta = str(respuesta_usuario).lower() == str(respuesta_correcta).lower()
        
        elif actividad.tipo == 'true_false':
            es_correcta = bool(respuesta_usuario) == bool(respuesta_correcta)
        
        elif actividad.tipo == 'fill_blank':
            # Normalizar y comparar
            es_correcta = str(respuesta_usuario).strip().lower() == str(respuesta_correcta).strip().lower()
        
        elif actividad.tipo == 'matching':
            # Comparar diccionarios o arrays
            es_correcta = respuesta_usuario == respuesta_correcta
        
        elif actividad.tipo == 'word_order':
            # Validar orden de palabras
            es_correcta = respuesta_usuario == respuesta_correcta
        
        elif actividad.tipo == 'translation':
            # Para traducciones, podr√≠a ser m√°s flexible
            es_correcta = str(respuesta_usuario).strip().lower() == str(respuesta_correcta).strip().lower()
        
        # Obtener retroalimentaci√≥n
        retroalimentacion = None
        if actividad.retroalimentacion:
            if isinstance(actividad.retroalimentacion, dict):
                retroalimentacion = actividad.retroalimentacion.get(
                    'correcta' if es_correcta else 'incorrecta'
                )
            else:
                retroalimentacion = actividad.retroalimentacion
        
        puntos_ganados = actividad.puntos if es_correcta else 0
        
        return jsonify({
            'success': True,
            'correcta': es_correcta,
            'puntos_ganados': puntos_ganados,
            'respuesta_correcta': respuesta_correcta if not es_correcta else None,
            'retroalimentacion': retroalimentacion,
            'pista': actividad.pista if not es_correcta else None
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@actividades_bp.route('/tipos', methods=['GET'])
def obtener_tipos_actividades():
    """Obtener lista de tipos de actividades disponibles"""
    tipos = [
        {
            'value': 'multiple_choice',
            'label': 'Opci√≥n M√∫ltiple',
            'icon': 'üéØ',
            'descripcion': 'Seleccionar la respuesta correcta entre varias opciones'
        },
        {
            'value': 'fill_blank',
            'label': 'Completar Espacios',
            'icon': '‚úèÔ∏è',
            'descripcion': 'Llenar espacios en blanco en una oraci√≥n'
        },
        {
            'value': 'matching',
            'label': 'Emparejar',
            'icon': 'üîó',
            'descripcion': 'Conectar elementos relacionados'
        },
        {
            'value': 'translation',
            'label': 'Traducci√≥n',
            'icon': 'üåê',
            'descripcion': 'Traducir palabras o frases'
        },
        {
            'value': 'listen_repeat',
            'label': 'Escuchar y Repetir',
            'icon': 'üé§',
            'descripcion': 'Pr√°ctica de pronunciaci√≥n con audio'
        },
        {
            'value': 'true_false',
            'label': 'Verdadero/Falso',
            'icon': '‚úì‚úó',
            'descripcion': 'Determinar si una afirmaci√≥n es verdadera o falsa'
        },
        {
            'value': 'word_order',
            'label': 'Ordenar Palabras',
            'icon': 'üìù',
            'descripcion': 'Organizar palabras en el orden correcto'
        }
    ]
    
    return jsonify({
        'success': True,
        'tipos': tipos
    }), 200


================================================================================
# ARCHIVO: back-end/routes/auth.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/auth.py
================================================================================

from flask import Blueprint, request, jsonify
# IMPORTACI√ìN ACTUALIZADA: Importar la clase Usuario directamente
from models.usuario import Usuario
# IMPORTACI√ìN NECESARIA para JWT
from flask_jwt_extended import create_access_token, create_refresh_token
# Importar el gestor (asumiendo que est√° actualizado para los nuevos perfiles)
from services.gestor_usuarios import GestorUsuarios

# ========================================
# BLUEPRINT DE AUTENTICACI√ìN
# ========================================
# ‚úÖ ESTA L√çNEA ES LA IMPORTANTE que faltaba o estaba incorrecta
auth_bp = Blueprint("auth", __name__, url_prefix="/api/auth")
gestor = GestorUsuarios() # Instancia del gestor

# ========================================
# MANEJO DE PREFLIGHT REQUESTS (CORS) - Opcional aqu√≠ si ya est√° en app.py
# ========================================
# Puedes mantener o quitar este bloque si ya lo gestionas globalmente en app.py
@auth_bp.before_request
def handle_preflight():
    """Permite manejar solicitudes OPTIONS de CORS"""
    if request.method == "OPTIONS":
        # Respuesta simple para preflight, flask_cors usualmente maneja los headers
        return "", 204

# ========================================
# REGISTRO Y VERIFICACI√ìN (Usa el gestor actualizado)
# ========================================
@auth_bp.route("/register", methods=["POST"])
def registrar():
    """Registra un nuevo usuario (asume rol 'alumno' por defecto)"""
    data = request.get_json()
    if not data:
        return jsonify({"error": "No se recibieron datos JSON"}), 400

    nombre = data.get("nombre")
    primer_apellido = data.get("primer_apellido")
    segundo_apellido = data.get("segundo_apellido")
    correo = data.get("correo")
    password = data.get("password")
    # Datos opcionales para perfil estudiante
    idioma = data.get("idioma", "Ingl√©s")
    nivel_actual = data.get("nivel_actual", "A1")

    # Validaci√≥n b√°sica
    campos_obligatorios = {'nombre': nombre, 'primer_apellido': primer_apellido, 'correo': correo, 'password': password}
    campos_faltantes = [k for k, v in campos_obligatorios.items() if not v]
    if campos_faltantes:
        return jsonify({"error": f"Faltan datos obligatorios: {', '.join(campos_faltantes)}"}), 400

    # Llamar al gestor para registrar (asume rol 'alumno')
    # El gestor ahora debe crear Usuario, PerfilUsuario (base) y PerfilEstudiante
    respuesta, codigo = gestor.registrar_usuario(
        nombre, primer_apellido, segundo_apellido,
        correo, password,
        # Pasar datos espec√≠ficos del perfil estudiante
        datos_perfil={'idioma_aprendizaje': idioma, 'nivel_actual': nivel_actual}
    )
    return jsonify(respuesta), codigo

@auth_bp.route("/verificar-email", methods=["POST"])
def verificar_email():
    """Verifica el correo con c√≥digo de 6 d√≠gitos"""
    data = request.get_json()
    correo = data.get("correo")
    codigo = data.get("codigo")

    if not correo or not codigo:
        return jsonify({"error": "Correo y c√≥digo son requeridos"}), 400

    respuesta, codigo_http = gestor.verificar_correo(correo, codigo)
    return jsonify(respuesta), codigo_http

@auth_bp.route("/reenviar-codigo", methods=["POST"])
def reenviar_codigo():
    """Reenv√≠a el c√≥digo de verificaci√≥n"""
    data = request.get_json()
    correo = data.get("correo")

    if not correo:
        return jsonify({"error": "Correo requerido"}), 400

    respuesta, codigo_http = gestor.reenviar_codigo(correo)
    return jsonify(respuesta), codigo_http

# ========================================
# AUTENTICACI√ìN (Usa gestor y a√±ade token)
# ========================================
@auth_bp.route("/login", methods=["POST"])
def login():
    """Inicia sesi√≥n, devuelve datos del usuario, perfil espec√≠fico y token JWT"""
    data = request.get_json()
    correo = data.get("correo")
    password = data.get("password")

    if not correo or not password:
        return jsonify({"error": "Faltan credenciales (correo y contrase√±a)"}), 400

    # Autenticar usando el gestor
    respuesta_auth, codigo_auth = gestor.autenticar_usuario(correo, password)

    # --- MANEJO DE ERRORES DE AUTENTICACI√ìN ---
    if codigo_auth != 200:
        # Si la cuenta est√° desactivada, a√±adir ID si es posible
        if codigo_auth == 403 and respuesta_auth.get("codigo") == "CUENTA_DESACTIVADA":
            try:
                # No necesitas importar Usuario aqu√≠ si ya lo hace el gestor
                usuario_desactivado = Usuario.query.filter_by(correo=correo).first()
                if usuario_desactivado:
                    respuesta_auth["usuario_id"] = usuario_desactivado.id
            except Exception as e:
                 print(f"‚ö†Ô∏è Error al buscar ID de usuario desactivado {correo}: {e}")
                 pass
        return jsonify(respuesta_auth), codigo_auth

    # --- LOGIN EXITOSO: Generar Token y Devolver Datos Completos ---
    try:
        # El gestor ahora deber√≠a devolver el usuario con su perfil espec√≠fico
        usuario_data_completa = respuesta_auth.get('usuario')
        if not usuario_data_completa or 'id' not in usuario_data_completa:
            print(f"‚ùå Error cr√≠tico: Gestor.autenticar_usuario no devolvi√≥ 'usuario' con 'id'. Respuesta: {respuesta_auth}")
            return jsonify({"error": "Error interno del servidor al procesar la autenticaci√≥n"}), 500

        usuario_id = usuario_data_completa['id']

        # Crear tokens JWT (identidad como string)
        access_token = create_access_token(identity=str(usuario_id))
        # refresh_token = create_refresh_token(identity=str(usuario_id)) # Opcional

        # Construir la respuesta final
        respuesta_final = {
            "mensaje": "Inicio de sesi√≥n exitoso",
            "access_token": access_token,
            # "refresh_token": refresh_token, # Incluir si se usa
            "usuario": usuario_data_completa # Ya incluye perfil base y espec√≠fico
        }

        return jsonify(respuesta_final), 200

    except Exception as e:
        print(f"‚ùå Error inesperado durante la generaci√≥n del token o construcci√≥n de respuesta para {correo}: {e}")
        return jsonify({"error": f"Error interno del servidor despu√©s de la autenticaci√≥n: {str(e)}"}), 500


# ========================================
# RECUPERACI√ìN DE CONTRASE√ëA (Usa gestor)
# ========================================
@auth_bp.route("/recuperar-password", methods=["POST"])
def recuperar_password():
    """Inicia el proceso de recuperaci√≥n de contrase√±a"""
    data = request.get_json()
    correo = data.get("correo")

    if not correo:
        return jsonify({"error": "Correo requerido"}), 400

    respuesta, codigo = gestor.solicitar_recuperacion_password(correo)
    return jsonify(respuesta), codigo

@auth_bp.route("/validar-token-recuperacion", methods=["POST"])
def validar_token():
    """Valida que el token de recuperaci√≥n sea v√°lido"""
    data = request.get_json()
    token = data.get("token")

    if not token:
        return jsonify({"error": "Token requerido"}), 400

    respuesta, codigo = gestor.validar_token_recuperacion(token)
    return jsonify(respuesta), codigo

@auth_bp.route("/restablecer-password", methods=["POST"])
def restablecer_password():
    """Restablece la contrase√±a usando el token"""
    data = request.get_json()
    token = data.get("token")
    nueva_password = data.get("nueva_password")

    if not token or not nueva_password:
        return jsonify({"error": "Token y nueva contrase√±a son requeridos"}), 400

    if len(nueva_password) < 8:
        return jsonify({"error": "La contrase√±a debe tener al menos 8 caracteres"}), 400

    respuesta, codigo = gestor.restablecer_password(token, nueva_password)
    return jsonify(respuesta), codigo

# ========================================
# RUTA DE PRUEBA (Opcional)
# ========================================
@auth_bp.route("/test", methods=["GET"])
def test():
    """Ruta de prueba para verificar que el blueprint funciona"""
    return jsonify({"mensaje": "Blueprint de auth funcionando correctamente"}), 200




================================================================================
# ARCHIVO: back-end/routes/curso_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/curso_routes.py
================================================================================

# back-end/routes/curso_routes.py
from flask import Blueprint, request, jsonify
from flask_jwt_extended import jwt_required, get_jwt_identity
from models.cursos import Curso, ProgresoCurso
from models.usuario import Usuario
from models.leccion import Leccion
from extensions import db
from sqlalchemy import func, or_

curso_bp = Blueprint('cursos', __name__, url_prefix='/api/cursos')


@curso_bp.route('', methods=['GET'])
def obtener_cursos():
    """
    Obtener lista de cursos con filtros opcionales
    Query params:
    - idioma: filtrar por idioma (default: ingles)
    - nivel: filtrar por nivel espec√≠fico (A1, A2, etc)
    - activos: solo cursos activos (default: true)
    - profesor_id: cursos de un profesor espec√≠fico
    """
    try:
        idioma = request.args.get('idioma', 'ingles')
        nivel = request.args.get('nivel')
        solo_activos = request.args.get('activos', 'true').lower() == 'true'
        profesor_id = request.args.get('profesor_id')
        
        query = Curso.query
        
        if solo_activos:
            query = query.filter_by(activo=True)
        
        query = query.filter_by(idioma=idioma)
        
        if nivel:
            query = query.filter_by(nivel=nivel)
        
        if profesor_id:
            query = query.filter_by(profesor_id=profesor_id)
        
        cursos = query.order_by(Curso.orden).all()
        
        return jsonify({
            'success': True,
            'cursos': [c.to_dict() for c in cursos],
            'total': len(cursos)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>', methods=['GET'])
def obtener_curso(curso_id):
    """Obtener detalles de un curso espec√≠fico"""
    try:
        incluir_lecciones = request.args.get('lecciones', 'false').lower() == 'true'
        
        curso = Curso.query.get_or_404(curso_id)
        
        return jsonify({
            'success': True,
            'curso': curso.to_dict(incluir_lecciones=incluir_lecciones)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('', methods=['POST'])
@jwt_required()
def crear_curso():
    """
    Crear nuevo curso (Solo Admin/Profesor)
    Body JSON:
    {
        "nombre": "Ingl√©s B√°sico A1",
        "nivel": "A1",
        "descripcion": "Curso para principiantes",
        "idioma": "ingles",
        "codigo": "ENG-A1",
        "profesor_id": 2,
        "objetivos_aprendizaje": ["Objetivo 1", "Objetivo 2"]
    }
    """
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({
                'success': False, 
                'error': 'No autorizado. Solo administradores y profesores pueden crear cursos.'
            }), 403
        
        data = request.json
        
        # Validar campos requeridos
        campos_requeridos = ['nombre', 'nivel', 'idioma', 'codigo']
        for campo in campos_requeridos:
            if campo not in data:
                return jsonify({
                    'success': False, 
                    'error': f'Campo requerido: {campo}'
                }), 400
        
        # Validar que el c√≥digo no exista
        if Curso.query.filter_by(codigo=data['codigo']).first():
            return jsonify({
                'success': False, 
                'error': 'El c√≥digo de curso ya existe'
            }), 400
        
        # Validar nivel
        niveles_validos = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2']
        if data['nivel'].upper() not in niveles_validos:
            return jsonify({
                'success': False, 
                'error': f'Nivel inv√°lido. Use: {", ".join(niveles_validos)}'
            }), 400
        
        # Si es profesor, asignarlo autom√°ticamente
        profesor_id = data.get('profesor_id')
        if usuario.rol == 'profesor' and not profesor_id:
            profesor_id = usuario_id
        
        nuevo_curso = Curso(
            nombre=data['nombre'],
            nivel=data['nivel'].upper(),
            descripcion=data.get('descripcion'),
            idioma=data['idioma'],
            codigo=data['codigo'].upper(),
            profesor_id=profesor_id,
            imagen_portada=data.get('imagen_portada'),
            orden=data.get('orden', 0),
            activo=data.get('activo', True),
            requisitos_previos=data.get('requisitos_previos'),
            objetivos_aprendizaje=data.get('objetivos_aprendizaje')
        )
        
        db.session.add(nuevo_curso)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': 'Curso creado exitosamente',
            'curso': nuevo_curso.to_dict()
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>', methods=['PUT'])
@jwt_required()
def actualizar_curso(curso_id):
    """Actualizar curso existente"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        curso = Curso.query.get_or_404(curso_id)
        
        # Si es profesor, verificar que sea su curso
        if usuario.rol == 'profesor' and curso.profesor_id != usuario_id:
            return jsonify({
                'success': False, 
                'error': 'No puedes editar este curso'
            }), 403
        
        data = request.json
        
        # Actualizar campos permitidos
        campos_actualizables = [
            'nombre', 'descripcion', 'profesor_id', 'imagen_portada', 
            'activo', 'requisitos_previos', 'objetivos_aprendizaje', 'orden'
        ]
        
        for campo in campos_actualizables:
            if campo in data:
                setattr(curso, campo, data[campo])
        
        curso.actualizado_en = db.func.now()
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': 'Curso actualizado exitosamente',
            'curso': curso.to_dict()
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>', methods=['DELETE'])
@jwt_required()
def eliminar_curso(curso_id):
    """Eliminar curso (Solo Admin)"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol != 'admin':
            return jsonify({'success': False, 'error': 'Solo administradores'}), 403
        
        curso = Curso.query.get_or_404(curso_id)
        
        # Verificar si tiene lecciones
        if curso.total_lecciones > 0:
            return jsonify({
                'success': False,
                'error': 'No se puede eliminar un curso con lecciones. Elimina las lecciones primero.'
            }), 400
        
        db.session.delete(curso)
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': f'Curso {curso.codigo} eliminado exitosamente'
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/lecciones', methods=['GET'])
def obtener_lecciones_curso(curso_id):
    """Obtener todas las lecciones de un curso"""
    try:
        curso = Curso.query.get_or_404(curso_id)
        
        estado = request.args.get('estado', 'publicada')
        
        query = curso.lecciones
        if estado:
            query = query.filter_by(estado=estado)
        
        lecciones = query.order_by(Leccion.orden).all()
        
        return jsonify({
            'success': True,
            'curso_id': curso_id,
            'curso_nombre': curso.nombre,
            'lecciones': [l.to_dict() for l in lecciones],
            'total': len(lecciones)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/progreso', methods=['GET'])
@jwt_required()
def obtener_progreso_curso(curso_id):
    """Obtener progreso del usuario autenticado en un curso"""
    try:
        usuario_id = get_jwt_identity()
        
        progreso = ProgresoCurso.query.filter_by(
            usuario_id=usuario_id,
            curso_id=curso_id
        ).first()
        
        if not progreso:
            # Crear registro de progreso si no existe
            curso = Curso.query.get_or_404(curso_id)
            progreso = ProgresoCurso(
                usuario_id=usuario_id,
                curso_id=curso_id,
                lecciones_totales=curso.total_lecciones
            )
            db.session.add(progreso)
            db.session.commit()
        
        return jsonify({
            'success': True,
            'progreso': progreso.to_dict(incluir_curso=True)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/inscribir', methods=['POST'])
@jwt_required()
def inscribir_en_curso(curso_id):
    """Inscribir al usuario en un curso"""
    try:
        usuario_id = get_jwt_identity()
        
        curso = Curso.query.get_or_404(curso_id)
        
        if not curso.activo:
            return jsonify({
                'success': False,
                'error': 'Este curso no est√° activo'
            }), 400
        
        # Verificar si ya est√° inscrito
        progreso_existente = ProgresoCurso.query.filter_by(
            usuario_id=usuario_id,
            curso_id=curso_id
        ).first()
        
        if progreso_existente:
            return jsonify({
                'success': False,
                'error': 'Ya est√°s inscrito en este curso',
                'progreso': progreso_existente.to_dict()
            }), 400
        
        # Verificar prerequisitos
        if not curso.tiene_prerequisitos_cumplidos(usuario_id):
            return jsonify({
                'success': False,
                'error': 'No cumples con los prerequisitos de este curso'
            }), 400
        
        # Crear progreso
        from datetime import date
        nuevo_progreso = ProgresoCurso(
            usuario_id=usuario_id,
            curso_id=curso_id,
            lecciones_totales=curso.total_lecciones,
            fecha_inicio=date.today(),
            estado='en_progreso'
        )
        
        db.session.add(nuevo_progreso)
        
        # Actualizar perfil del estudiante
        from models.usuario import PerfilEstudiante
        perfil = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
        if perfil:
            perfil.curso_actual_id = curso_id
            perfil.nivel_asignado = curso.nivel
        
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': f'Te has inscrito en {curso.nombre}',
            'progreso': nuevo_progreso.to_dict(incluir_curso=True)
        }), 201
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/estadisticas', methods=['GET'])
@jwt_required()
def obtener_estadisticas_curso(curso_id):
    """Obtener estad√≠sticas generales del curso (Admin/Profesor)"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        curso = Curso.query.get_or_404(curso_id)
        
        # Si es profesor, verificar que sea su curso
        if usuario.rol == 'profesor' and curso.profesor_id != usuario_id:
            return jsonify({'success': False, 'error': 'No es tu curso'}), 403
        
        # Estad√≠sticas de estudiantes
        total_estudiantes = ProgresoCurso.query.filter_by(curso_id=curso_id).count()
        estudiantes_completado = ProgresoCurso.query.filter_by(
            curso_id=curso_id, 
            estado='completado'
        ).count()
        estudiantes_en_progreso = ProgresoCurso.query.filter_by(
            curso_id=curso_id,
            estado='en_progreso'
        ).count()
        
        # Promedio de progreso
        promedio_progreso = db.session.query(
            func.avg(ProgresoCurso.porcentaje_completado)
        ).filter_by(curso_id=curso_id).scalar() or 0
        
        # Promedio de puntuaci√≥n
        promedio_puntuacion = db.session.query(
            func.avg(ProgresoCurso.puntuacion_promedio)
        ).filter_by(curso_id=curso_id).scalar() or 0
        
        # Tiempo promedio dedicado
        tiempo_promedio = db.session.query(
            func.avg(ProgresoCurso.tiempo_dedicado)
        ).filter_by(curso_id=curso_id).scalar() or 0
        
        return jsonify({
            'success': True,
            'estadisticas': {
                'curso_id': curso_id,
                'curso_nombre': curso.nombre,
                'nivel': curso.nivel,
                'total_lecciones': curso.total_lecciones,
                'duracion_total': curso.duracion_estimada_total,
                'estudiantes': {
                    'total': total_estudiantes,
                    'completado': estudiantes_completado,
                    'en_progreso': estudiantes_en_progreso,
                    'no_iniciado': total_estudiantes - estudiantes_completado - estudiantes_en_progreso
                },
                'promedios': {
                    'progreso': round(float(promedio_progreso), 2),
                    'puntuacion': round(float(promedio_puntuacion), 2) if promedio_puntuacion else None,
                    'tiempo_dedicado': round(float(tiempo_promedio), 2)
                }
            }
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/estudiantes', methods=['GET'])
@jwt_required()
def obtener_estudiantes_curso(curso_id):
    """Obtener lista de estudiantes inscritos en el curso (Admin/Profesor)"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol not in ['admin', 'profesor']:
            return jsonify({'success': False, 'error': 'No autorizado'}), 403
        
        curso = Curso.query.get_or_404(curso_id)
        
        if usuario.rol == 'profesor' and curso.profesor_id != usuario_id:
            return jsonify({'success': False, 'error': 'No es tu curso'}), 403
        
        progresos = ProgresoCurso.query.filter_by(curso_id=curso_id).all()
        
        estudiantes = []
        for progreso in progresos:
            estudiantes.append({
                **progreso.to_dict(incluir_usuario=True),
            })
        
        return jsonify({
            'success': True,
            'curso': curso.to_dict(incluir_profesor=False),
            'estudiantes': estudiantes,
            'total': len(estudiantes)
        }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/<int:curso_id>/activar', methods=['PATCH'])
@jwt_required()
def cambiar_estado_curso(curso_id):
    """Activar/Desactivar curso (Solo Admin)"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol != 'admin':
            return jsonify({'success': False, 'error': 'Solo administradores'}), 403
        
        curso = Curso.query.get_or_404(curso_id)
        curso.activo = not curso.activo
        
        db.session.commit()
        
        return jsonify({
            'success': True,
            'mensaje': f'Curso {"activado" if curso.activo else "desactivado"}',
            'activo': curso.activo
        }), 200
        
    except Exception as e:
        db.session.rollback()
        return jsonify({'success': False, 'error': str(e)}), 500


@curso_bp.route('/mis-cursos', methods=['GET'])
@jwt_required()
def obtener_mis_cursos():
    """Obtener cursos del usuario autenticado"""
    try:
        usuario_id = get_jwt_identity()
        usuario = Usuario.query.get(usuario_id)
        
        if usuario.rol == 'profesor':
            # Cursos que imparte
            cursos = Curso.query.filter_by(profesor_id=usuario_id).order_by(Curso.orden).all()
            return jsonify({
                'success': True,
                'tipo': 'profesor',
                'cursos': [c.to_dict() for c in cursos],
                'total': len(cursos)
            }), 200
        
        elif usuario.rol == 'alumno':
            # Cursos en los que est√° inscrito
            progresos = ProgresoCurso.query.filter_by(usuario_id=usuario_id).all()
            cursos_data = [p.to_dict(incluir_curso=True) for p in progresos]
            
            return jsonify({
                'success': True,
                'tipo': 'estudiante',
                'cursos': cursos_data,
                'total': len(cursos_data)
            }), 200
        
        else:
            # Admin ve todos
            cursos = Curso.query.order_by(Curso.orden).all()
            return jsonify({
                'success': True,
                'tipo': 'admin',
                'cursos': [c.to_dict() for c in cursos],
                'total': len(cursos)
            }), 200
        
    except Exception as e:
        return jsonify({'success': False, 'error': str(e)}), 500


================================================================================
# ARCHIVO: back-end/routes/leccion_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/leccion_routes.py
================================================================================

"""
Rutas API para gesti√≥n de lecciones y actividades - SpeakLexi
Endpoints REST para el m√≥dulo de lecciones
"""

from flask import Blueprint, request, jsonify
from services.gestor_lecciones import gestor_lecciones
from functools import wraps

# Crear blueprint
leccion_bp = Blueprint('lecciones', __name__, url_prefix='/api/lecciones')


# ========== DECORADORES ==========

def validar_usuario_id(f):
    """Decorador para validar que exista usuario_id en la sesi√≥n/headers"""
    @wraps(f)
    def decorated(*args, **kwargs):
        # TODO: Implementar autenticaci√≥n real con JWT o sesiones
        # Por ahora asumimos usuario_id = 1 para desarrollo
        usuario_id = request.headers.get('X-User-ID', 1)
        request.usuario_id = int(usuario_id)
        return f(*args, **kwargs)
    return decorated


def validar_permisos_admin(f):
    """Decorador para validar permisos de administrador"""
    @wraps(f)
    def decorated(*args, **kwargs):
        # TODO: Implementar verificaci√≥n real de roles
        # Por ahora permite todas las operaciones
        return f(*args, **kwargs)
    return decorated


# ========== ENDPOINTS DE LECCIONES ==========

@leccion_bp.route('/', methods=['GET'])
def listar_lecciones():
    """
    GET /api/lecciones
    Lista todas las lecciones con filtros opcionales
    
    Query params:
        - nivel: principiante|intermedio|avanzado
        - idioma: ingles|espanol|etc
        - categoria: vocabulario|gramatica|etc
        - estado: borrador|publicada|archivada
        - buscar: t√©rmino de b√∫squeda
        - etiqueta: etiqueta espec√≠fica
        - pagina: n√∫mero de p√°gina (default: 1)
        - por_pagina: items por p√°gina (default: 20)
    """
    try:
        # Obtener par√°metros de consulta
        filtros = {
            'nivel': request.args.get('nivel'),
            'idioma': request.args.get('idioma'),
            'categoria': request.args.get('categoria'),
            'estado': request.args.get('estado'),
            'buscar': request.args.get('buscar'),
            'etiqueta': request.args.get('etiqueta')
        }
        
        # Remover valores None
        filtros = {k: v for k, v in filtros.items() if v is not None}
        
        pagina = request.args.get('pagina', 1, type=int)
        por_pagina = request.args.get('por_pagina', 20, type=int)
        
        resultado, codigo = gestor_lecciones.listar_lecciones(
            filtros=filtros,
            pagina=pagina,
            por_pagina=por_pagina
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al listar lecciones: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>', methods=['GET'])
def obtener_leccion(leccion_id):
    """
    GET /api/lecciones/<id>
    Obtiene una lecci√≥n espec√≠fica
    
    Query params:
        - incluir_actividades: true|false (default: false)
        - incluir_multimedia: true|false (default: false)
    """
    try:
        incluir_actividades = request.args.get('incluir_actividades', 'false').lower() == 'true'
        incluir_multimedia = request.args.get('incluir_multimedia', 'false').lower() == 'true'
        
        resultado, codigo = gestor_lecciones.obtener_leccion(
            leccion_id,
            incluir_actividades=incluir_actividades,
            incluir_multimedia=incluir_multimedia
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al obtener lecci√≥n: {str(e)}"}), 500


@leccion_bp.route('/', methods=['POST'])
@validar_usuario_id
@validar_permisos_admin
def crear_leccion():
    """
    POST /api/lecciones
    Crea una nueva lecci√≥n
    
    Body JSON:
    {
        "titulo": "string (requerido)",
        "descripcion": "string",
        "contenido": {}, // JSON con contenido estructurado
        "nivel": "principiante|intermedio|avanzado",
        "idioma": "string",
        "categoria": "string",
        "etiquetas": ["tag1", "tag2"],
        "orden": int,
        "requisitos": [id1, id2], // IDs de lecciones previas
        "duracion_estimada": int, // minutos
        "puntos_xp": int
    }
    """
    try:
        datos = request.get_json()
        
        if not datos:
            return jsonify({"error": "No se proporcionaron datos"}), 400
        
        resultado, codigo = gestor_lecciones.crear_leccion(
            datos,
            request.usuario_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al crear lecci√≥n: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>', methods=['PUT', 'PATCH'])
@validar_usuario_id
@validar_permisos_admin
def actualizar_leccion(leccion_id):
    """
    PUT/PATCH /api/lecciones/<id>
    Actualiza una lecci√≥n existente
    
    Body JSON: Campos a actualizar (mismos que POST)
    """
    try:
        datos = request.get_json()
        
        if not datos:
            return jsonify({"error": "No se proporcionaron datos"}), 400
        
        resultado, codigo = gestor_lecciones.actualizar_leccion(
            leccion_id,
            datos,
            request.usuario_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al actualizar lecci√≥n: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>', methods=['DELETE'])
@validar_usuario_id
@validar_permisos_admin
def eliminar_leccion(leccion_id):
    """
    DELETE /api/lecciones/<id>
    Elimina (archiva) una lecci√≥n
    """
    try:
        resultado, codigo = gestor_lecciones.eliminar_leccion(
            leccion_id,
            request.usuario_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al eliminar lecci√≥n: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>/publicar', methods=['POST'])
@validar_usuario_id
@validar_permisos_admin
def publicar_leccion(leccion_id):
    """
    POST /api/lecciones/<id>/publicar
    Publica una lecci√≥n (cambia estado de borrador a publicada)
    """
    try:
        resultado, codigo = gestor_lecciones.publicar_leccion(
            leccion_id,
            request.usuario_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al publicar lecci√≥n: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>/estadisticas', methods=['GET'])
def obtener_estadisticas_leccion(leccion_id):
    """
    GET /api/lecciones/<id>/estadisticas
    Obtiene estad√≠sticas de una lecci√≥n
    """
    try:
        resultado, codigo = gestor_lecciones.obtener_estadisticas_leccion(leccion_id)
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al obtener estad√≠sticas: {str(e)}"}), 500


@leccion_bp.route('/nivel/<string:nivel>', methods=['GET'])
def obtener_lecciones_por_nivel(nivel):
    """
    GET /api/lecciones/nivel/<nivel>
    Obtiene lecciones por nivel de dificultad
    
    Query params:
        - idioma: filtro opcional por idioma
    """
    try:
        idioma = request.args.get('idioma')
        resultado, codigo = gestor_lecciones.obtener_lecciones_por_nivel(nivel, idioma)
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al obtener lecciones: {str(e)}"}), 500


# ========== ENDPOINTS DE ACTIVIDADES ==========

@leccion_bp.route('/<int:leccion_id>/actividades', methods=['POST'])
@validar_usuario_id
@validar_permisos_admin
def agregar_actividad(leccion_id):
    """
    POST /api/lecciones/<id>/actividades
    Agrega una actividad a una lecci√≥n
    
    Body JSON:
    {
        "tipo": "multiple_choice|fill_blank|matching|translation|listen_repeat|true_false|word_order",
        "pregunta": "string (requerido)",
        "instrucciones": "string",
        "opciones": {}, // Estructura var√≠a seg√∫n tipo
        "respuesta_correcta": {}, // Estructura var√≠a seg√∫n tipo
        "retroalimentacion": {
            "correcta": "mensaje",
            "incorrecta": "mensaje"
        },
        "pista": "string",
        "puntos": int,
        "orden": int,
        "tiempo_limite": int, // segundos
        "multimedia_id": int
    }
    """
    try:
        datos = request.get_json()
        
        if not datos:
            return jsonify({"error": "No se proporcionaron datos"}), 400
        
        resultado, codigo = gestor_lecciones.agregar_actividad(leccion_id, datos)
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al agregar actividad: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>/actividades/<int:actividad_id>', methods=['PUT', 'PATCH'])
@validar_usuario_id
@validar_permisos_admin
def actualizar_actividad(leccion_id, actividad_id):
    """
    PUT/PATCH /api/lecciones/<leccion_id>/actividades/<actividad_id>
    Actualiza una actividad
    
    Body JSON: Campos a actualizar (mismos que POST)
    """
    try:
        datos = request.get_json()
        
        if not datos:
            return jsonify({"error": "No se proporcionaron datos"}), 400
        
        resultado, codigo = gestor_lecciones.actualizar_actividad(actividad_id, datos)
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al actualizar actividad: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>/actividades/<int:actividad_id>', methods=['DELETE'])
@validar_usuario_id
@validar_permisos_admin
def eliminar_actividad(leccion_id, actividad_id):
    """
    DELETE /api/lecciones/<leccion_id>/actividades/<actividad_id>
    Elimina una actividad
    """
    try:
        resultado, codigo = gestor_lecciones.eliminar_actividad(actividad_id)
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al eliminar actividad: {str(e)}"}), 500


@leccion_bp.route('/<int:leccion_id>/actividades/<int:actividad_id>/verificar', methods=['POST'])
@validar_usuario_id
def verificar_respuesta(leccion_id, actividad_id):
    """
    POST /api/lecciones/<leccion_id>/actividades/<actividad_id>/verificar
    Verifica la respuesta de un usuario a una actividad
    
    Body JSON:
    {
        "respuesta": <any> // Formato depende del tipo de actividad
    }
    """
    try:
        datos = request.get_json()
        
        if not datos or 'respuesta' not in datos:
            return jsonify({"error": "Debe proporcionar una respuesta"}), 400
        
        resultado, codigo = gestor_lecciones.verificar_respuesta_actividad(
            actividad_id,
            datos['respuesta']
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al verificar respuesta: {str(e)}"}), 500


# ========== MANEJO DE ERRORES ==========

@leccion_bp.errorhandler(404)
def not_found(error):
    return jsonify({"error": "Recurso no encontrado"}), 404


@leccion_bp.errorhandler(500)
def internal_error(error):
    return jsonify({"error": "Error interno del servidor"}), 500


# ========== INFORMACI√ìN DEL BLUEPRINT ==========

@leccion_bp.route('/info', methods=['GET'])
def info():
    """Informaci√≥n sobre los endpoints disponibles"""
    return jsonify({
        "nombre": "API de Lecciones - SpeakLexi",
        "version": "1.0.0",
        "endpoints": {
            "lecciones": {
                "GET /api/lecciones": "Listar lecciones con filtros",
                "GET /api/lecciones/<id>": "Obtener lecci√≥n espec√≠fica",
                "POST /api/lecciones": "Crear nueva lecci√≥n",
                "PUT /api/lecciones/<id>": "Actualizar lecci√≥n",
                "DELETE /api/lecciones/<id>": "Eliminar lecci√≥n",
                "POST /api/lecciones/<id>/publicar": "Publicar lecci√≥n",
                "GET /api/lecciones/<id>/estadisticas": "Estad√≠sticas de lecci√≥n",
                "GET /api/lecciones/nivel/<nivel>": "Lecciones por nivel"
            },
            "actividades": {
                "POST /api/lecciones/<id>/actividades": "Agregar actividad",
                "PUT /api/lecciones/<id>/actividades/<aid>": "Actualizar actividad",
                "DELETE /api/lecciones/<id>/actividades/<aid>": "Eliminar actividad",
                "POST /api/lecciones/<id>/actividades/<aid>/verificar": "Verificar respuesta"
            }
        }
    }), 200


================================================================================
# ARCHIVO: back-end/routes/multimedia_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/multimedia_routes.py
================================================================================

"""
Rutas API para gesti√≥n de recursos multimedia - SpeakLexi
Endpoints REST para subir, gestionar y servir archivos multimedia
"""

from flask import Blueprint, request, jsonify, send_file
from services.gestor_multimedia import gestor_multimedia
from werkzeug.utils import secure_filename
from functools import wraps
from pathlib import Path
import os

# Crear blueprint
multimedia_bp = Blueprint('multimedia', __name__, url_prefix='/api/multimedia')


# ========== CONFIGURACI√ìN ==========

EXTENSIONES_PERMITIDAS = {
    'imagen': {'jpg', 'jpeg', 'png', 'gif', 'webp'},
    'audio': {'mp3', 'wav', 'ogg'},
    'video': {'mp4', 'webm'},
    'documento': {'pdf', 'txt'}
}


# ========== DECORADORES ==========

def validar_usuario_id(f):
    """Decorador para validar que exista usuario_id en la sesi√≥n/headers"""
    @wraps(f)
    def decorated(*args, **kwargs):
        # TODO: Implementar autenticaci√≥n real con JWT o sesiones
        # Por ahora asumimos usuario_id = 1 para desarrollo
        usuario_id = request.headers.get('X-User-ID', 1)
        request.usuario_id = int(usuario_id)
        return f(*args, **kwargs)
    return decorated


def validar_permisos_admin(f):
    """Decorador para validar permisos de administrador"""
    @wraps(f)
    def decorated(*args, **kwargs):
        # TODO: Implementar verificaci√≥n real de roles
        # Por ahora permite todas las operaciones
        return f(*args, **kwargs)
    return decorated


def archivo_permitido(filename, tipo=None):
    """
    Verifica si un archivo tiene extensi√≥n permitida
    
    Args:
        filename (str): Nombre del archivo
        tipo (str): Tipo de multimedia (imagen, audio, video, documento)
    
    Returns:
        bool: True si es permitido
    """
    if '.' not in filename:
        return False
    
    extension = filename.rsplit('.', 1)[1].lower()
    
    if tipo:
        return extension in EXTENSIONES_PERMITIDAS.get(tipo, set())
    
    # Si no se especifica tipo, verificar en todas las categor√≠as
    todas_extensiones = set()
    for exts in EXTENSIONES_PERMITIDAS.values():
        todas_extensiones.update(exts)
    
    return extension in todas_extensiones


# ========== ENDPOINTS DE MULTIMEDIA ==========

@multimedia_bp.route('/', methods=['GET'])
def listar_recursos():
    """
    GET /api/multimedia
    Lista todos los recursos multimedia con filtros opcionales
    
    Query params:
        - tipo: imagen|audio|video|documento
        - categoria: vocabulario|gramatica|pronunciacion|etc
        - estado: pendiente|procesando|disponible|error
        - buscar: t√©rmino de b√∫squeda
        - etiqueta: etiqueta espec√≠fica
        - pagina: n√∫mero de p√°gina (default: 1)
        - por_pagina: items por p√°gina (default: 20)
    """
    try:
        # Obtener par√°metros de consulta
        filtros = {
            'tipo': request.args.get('tipo'),
            'categoria': request.args.get('categoria'),
            'estado': request.args.get('estado'),
            'buscar': request.args.get('buscar'),
            'etiqueta': request.args.get('etiqueta')
        }
        
        # Remover valores None
        filtros = {k: v for k, v in filtros.items() if v is not None}
        
        pagina = request.args.get('pagina', 1, type=int)
        por_pagina = request.args.get('por_pagina', 20, type=int)
        
        resultado, codigo = gestor_multimedia.listar_recursos(
            filtros=filtros,
            pagina=pagina,
            por_pagina=por_pagina
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al listar recursos: {str(e)}"}), 500


@multimedia_bp.route('/<int:multimedia_id>', methods=['GET'])
def obtener_recurso(multimedia_id):
    """
    GET /api/multimedia/<id>
    Obtiene informaci√≥n de un recurso multimedia
    
    Query params:
        - incluir_metadata: true|false (default: false)
    """
    try:
        incluir_metadata = request.args.get('incluir_metadata', 'false').lower() == 'true'
        
        resultado, codigo = gestor_multimedia.obtener_recurso(
            multimedia_id,
            incluir_metadata=incluir_metadata
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al obtener recurso: {str(e)}"}), 500


@multimedia_bp.route('/upload', methods=['POST'])
@validar_usuario_id
def subir_archivo():
    """
    POST /api/multimedia/upload
    Sube un nuevo archivo multimedia
    
    Form data:
        - archivo: File (requerido)
        - descripcion: string
        - alt_text: string
        - categoria: string
        - etiquetas: JSON array como string
        - transcripcion: string (para audio/video)
    """
    try:
        # Verificar que se envi√≥ un archivo
        if 'archivo' not in request.files:
            return jsonify({"error": "No se proporcion√≥ ning√∫n archivo"}), 400
        
        archivo = request.files['archivo']
        
        if archivo.filename == '':
            return jsonify({"error": "No se seleccion√≥ ning√∫n archivo"}), 400
        
        # Obtener datos adicionales del formulario
        datos_adicionales = {
            'descripcion': request.form.get('descripcion'),
            'alt_text': request.form.get('alt_text'),
            'categoria': request.form.get('categoria'),
            'transcripcion': request.form.get('transcripcion')
        }
        
        # Procesar etiquetas si existen
        etiquetas_str = request.form.get('etiquetas')
        if etiquetas_str:
            try:
                import json
                datos_adicionales['etiquetas'] = json.loads(etiquetas_str)
            except:
                datos_adicionales['etiquetas'] = []
        
        # Subir archivo
        resultado, codigo = gestor_multimedia.subir_archivo(
            archivo,
            datos_adicionales,
            request.usuario_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al subir archivo: {str(e)}"}), 500


@multimedia_bp.route('/<int:multimedia_id>', methods=['PUT', 'PATCH'])
@validar_usuario_id
def actualizar_recurso(multimedia_id):
    """
    PUT/PATCH /api/multimedia/<id>
    Actualiza informaci√≥n de un recurso multimedia
    
    Body JSON:
    {
        "descripcion": "string",
        "alt_text": "string",
        "transcripcion": "string",
        "etiquetas": ["tag1", "tag2"],
        "categoria": "string"
    }
    """
    try:
        datos = request.get_json()
        
        if not datos:
            return jsonify({"error": "No se proporcionaron datos"}), 400
        
        resultado, codigo = gestor_multimedia.actualizar_recurso(
            multimedia_id,
            datos
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al actualizar recurso: {str(e)}"}), 500


@multimedia_bp.route('/<int:multimedia_id>', methods=['DELETE'])
@validar_usuario_id
@validar_permisos_admin
def eliminar_recurso(multimedia_id):
    """
    DELETE /api/multimedia/<id>
    Elimina un recurso multimedia
    
    Query params:
        - eliminar_archivo: true|false (default: true)
    """
    try:
        eliminar_archivo = request.args.get('eliminar_archivo', 'true').lower() == 'true'
        
        resultado, codigo = gestor_multimedia.eliminar_recurso(
            multimedia_id,
            eliminar_archivo=eliminar_archivo
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al eliminar recurso: {str(e)}"}), 500


@multimedia_bp.route('/<int:multimedia_id>/asociar-leccion/<int:leccion_id>', methods=['POST'])
@validar_usuario_id
@validar_permisos_admin
def asociar_con_leccion(multimedia_id, leccion_id):
    """
    POST /api/multimedia/<id>/asociar-leccion/<leccion_id>
    Asocia un recurso multimedia con una lecci√≥n
    
    Body JSON (opcional):
    {
        "orden": int
    }
    """
    try:
        datos = request.get_json() or {}
        orden = datos.get('orden', 0)
        
        resultado, codigo = gestor_multimedia.asociar_con_leccion(
            multimedia_id,
            leccion_id,
            orden=orden
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al asociar recurso: {str(e)}"}), 500


@multimedia_bp.route('/<int:multimedia_id>/desasociar-leccion/<int:leccion_id>', methods=['DELETE'])
@validar_usuario_id
@validar_permisos_admin
def desasociar_de_leccion(multimedia_id, leccion_id):
    """
    DELETE /api/multimedia/<id>/desasociar-leccion/<leccion_id>
    Desasocia un recurso multimedia de una lecci√≥n
    """
    try:
        resultado, codigo = gestor_multimedia.desasociar_de_leccion(
            multimedia_id,
            leccion_id
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al desasociar recurso: {str(e)}"}), 500


@multimedia_bp.route('/estadisticas', methods=['GET'])
def obtener_estadisticas():
    """
    GET /api/multimedia/estadisticas
    Obtiene estad√≠sticas generales del sistema multimedia
    """
    try:
        resultado, codigo = gestor_multimedia.obtener_estadisticas()
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error al obtener estad√≠sticas: {str(e)}"}), 500


@multimedia_bp.route('/archivo/<path:filename>', methods=['GET'])
def servir_archivo(filename):
    """
    GET /api/multimedia/archivo/<filename>
    Sirve un archivo multimedia est√°tico
    
    Este endpoint permite servir archivos directamente
    """
    try:
        from models.multimedia import ConfiguracionMultimedia
        
        # Obtener ruta base
        ruta_base = ConfiguracionMultimedia.obtener_valor(
            'ruta_almacenamiento',
            'uploads/multimedia'
        )
        
        # Construir ruta completa
        ruta_archivo = Path(ruta_base) / filename
        
        # Verificar que el archivo existe
        if not ruta_archivo.exists():
            return jsonify({"error": "Archivo no encontrado"}), 404
        
        # Verificar que la ruta no sale del directorio permitido
        if not str(ruta_archivo.resolve()).startswith(str(Path(ruta_base).resolve())):
            return jsonify({"error": "Acceso denegado"}), 403
        
        # Servir archivo
        return send_file(
            str(ruta_archivo),
            as_attachment=False,
            mimetype=None  # Flask detectar√° autom√°ticamente
        )
        
    except Exception as e:
        return jsonify({"error": f"Error al servir archivo: {str(e)}"}), 500


# ========== ENDPOINTS DE VALIDACI√ìN ==========

@multimedia_bp.route('/validar-extension', methods=['POST'])
def validar_extension():
    """
    POST /api/multimedia/validar-extension
    Valida si una extensi√≥n de archivo es permitida
    
    Body JSON:
    {
        "filename": "string",
        "tipo": "imagen|audio|video|documento" (opcional)
    }
    """
    try:
        datos = request.get_json()
        
        if not datos or 'filename' not in datos:
            return jsonify({"error": "Debe proporcionar un nombre de archivo"}), 400
        
        filename = datos['filename']
        tipo = datos.get('tipo')
        
        es_valido = archivo_permitido(filename, tipo)
        
        return jsonify({
            "valido": es_valido,
            "filename": filename,
            "tipo": tipo
        }), 200
        
    except Exception as e:
        return jsonify({"error": f"Error al validar extensi√≥n: {str(e)}"}), 500


@multimedia_bp.route('/extensiones-permitidas', methods=['GET'])
def listar_extensiones_permitidas():
    """
    GET /api/multimedia/extensiones-permitidas
    Lista todas las extensiones de archivo permitidas
    
    Query params:
        - tipo: imagen|audio|video|documento (opcional)
    """
    try:
        tipo = request.args.get('tipo')
        
        if tipo:
            extensiones = list(EXTENSIONES_PERMITIDAS.get(tipo, []))
        else:
            extensiones = EXTENSIONES_PERMITIDAS
        
        return jsonify({
            "extensiones": extensiones
        }), 200
        
    except Exception as e:
        return jsonify({"error": f"Error al listar extensiones: {str(e)}"}), 500


# ========== ENDPOINTS DE B√öSQUEDA AVANZADA ==========

@multimedia_bp.route('/buscar', methods=['POST'])
def buscar_recursos():
    """
    POST /api/multimedia/buscar
    B√∫squeda avanzada de recursos multimedia
    
    Body JSON:
    {
        "termino": "string",
        "filtros": {
            "tipo": "imagen|audio|video|documento",
            "categoria": "string",
            "etiquetas": ["tag1", "tag2"],
            "fecha_desde": "YYYY-MM-DD",
            "fecha_hasta": "YYYY-MM-DD",
            "tamano_min": int (bytes),
            "tamano_max": int (bytes)
        },
        "ordenar_por": "fecha|nombre|tamano|veces_usado",
        "orden": "asc|desc",
        "pagina": int,
        "por_pagina": int
    }
    """
    try:
        datos = request.get_json() or {}
        
        # Extraer par√°metros de b√∫squeda
        termino = datos.get('termino')
        filtros = datos.get('filtros', {})
        pagina = datos.get('pagina', 1)
        por_pagina = datos.get('por_pagina', 20)
        
        # Agregar t√©rmino de b√∫squeda a filtros
        if termino:
            filtros['buscar'] = termino
        
        resultado, codigo = gestor_multimedia.listar_recursos(
            filtros=filtros,
            pagina=pagina,
            por_pagina=por_pagina
        )
        
        return jsonify(resultado), codigo
        
    except Exception as e:
        return jsonify({"error": f"Error en b√∫squeda: {str(e)}"}), 500


# ========== MANEJO DE ERRORES ==========

@multimedia_bp.errorhandler(404)
def not_found(error):
    return jsonify({"error": "Recurso no encontrado"}), 404


@multimedia_bp.errorhandler(413)
def file_too_large(error):
    return jsonify({"error": "El archivo es demasiado grande"}), 413


@multimedia_bp.errorhandler(500)
def internal_error(error):
    return jsonify({"error": "Error interno del servidor"}), 500


# ========== INFORMACI√ìN DEL BLUEPRINT ==========

@multimedia_bp.route('/info', methods=['GET'])
def info():
    """Informaci√≥n sobre los endpoints disponibles"""
    return jsonify({
        "nombre": "API de Multimedia - SpeakLexi",
        "version": "1.0.0",
        "endpoints": {
            "recursos": {
                "GET /api/multimedia": "Listar recursos con filtros",
                "GET /api/multimedia/<id>": "Obtener recurso espec√≠fico",
                "POST /api/multimedia/upload": "Subir nuevo archivo",
                "PUT /api/multimedia/<id>": "Actualizar recurso",
                "DELETE /api/multimedia/<id>": "Eliminar recurso",
                "GET /api/multimedia/estadisticas": "Estad√≠sticas generales",
                "GET /api/multimedia/archivo/<filename>": "Servir archivo est√°tico"
            },
            "asociaciones": {
                "POST /api/multimedia/<id>/asociar-leccion/<lid>": "Asociar con lecci√≥n",
                "DELETE /api/multimedia/<id>/desasociar-leccion/<lid>": "Desasociar de lecci√≥n"
            },
            "validacion": {
                "POST /api/multimedia/validar-extension": "Validar extensi√≥n de archivo",
                "GET /api/multimedia/extensiones-permitidas": "Listar extensiones permitidas"
            },
            "busqueda": {
                "POST /api/multimedia/buscar": "B√∫squeda avanzada"
            }
        },
        "formatos_soportados": EXTENSIONES_PERMITIDAS
    }), 200


# ========== CONFIGURACI√ìN DE L√çMITES ==========

# Configurar tama√±o m√°ximo de archivo (50 MB por defecto)
# Esto debe configurarse en la app principal:
# app.config['MAX_CONTENT_LENGTH'] = 50 * 1024 * 1024


================================================================================
# ARCHIVO: back-end/routes/usuario_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/usuario_routes.py
================================================================================

from flask import Blueprint, request, jsonify
from flask_jwt_extended import jwt_required, get_jwt_identity 
from config.database import db
from models.usuario import Usuario, PerfilUsuario, PerfilEstudiante, PerfilProfesor, PerfilAdministrador

# Crear el Blueprint para las rutas de usuario
usuario_bp = Blueprint("usuario_bp", __name__, url_prefix="/api/usuario")

# ========================================
# ACTUALIZAR NIVEL (SOLO PARA ESTUDIANTES)
# ========================================
@usuario_bp.route("/actualizar-nivel", methods=["PATCH"])
@jwt_required()  # Protegida - usar JWT
def actualizar_nivel():
    """
    Endpoint que actualiza el nivel del estudiante
    tras completar el test o elegir manualmente.
    """
    try:
        identity = get_jwt_identity()
        usuario_id = int(identity)
        
        data = request.get_json()
        nuevo_nivel = data.get("nivel")

        if not nuevo_nivel:
            return jsonify({"error": "Nivel requerido"}), 400

        # Busca al usuario
        usuario = Usuario.query.get(usuario_id)
        if not usuario:
            return jsonify({"error": "Usuario no encontrado"}), 404
        
        # Verificar que sea estudiante
        if usuario.rol != 'alumno':
            return jsonify({"error": "Solo los estudiantes pueden actualizar su nivel"}), 403

        # Busca el perfil de estudiante
        perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
        if not perfil_estudiante:
            return jsonify({"error": "Perfil de estudiante no encontrado"}), 404

        # Actualiza el nivel
        perfil_estudiante.nivel_actual = nuevo_nivel
        db.session.commit()
        
        return jsonify({
            "mensaje": f"Nivel actualizado correctamente a {nuevo_nivel}",
            "nivel": nuevo_nivel
        }), 200
        
    except (ValueError, TypeError):
        return jsonify({"error": "Token inv√°lido"}), 400
    except Exception as e:
        db.session.rollback()
        print(f"‚ùå Error al actualizar nivel: {e}")
        return jsonify({"error": "Error al guardar cambios en la base de datos"}), 500


# ========================================
# OBTENER PERFIL POR ID (ADAPTADO A ROLES)
# ========================================
@usuario_bp.route("/perfil/<int:usuario_id>", methods=["GET"])
@jwt_required()
def obtener_perfil_por_id(usuario_id):
    """
    Obtiene el perfil completo de un usuario espec√≠fico por su ID.
    Devuelve informaci√≥n diferente seg√∫n el rol del usuario.
    """
    try:
        # Busca el usuario por ID
        usuario = Usuario.query.get(usuario_id)
        if not usuario:
            return jsonify({"error": "Usuario no encontrado"}), 404
        
        # Busca el perfil base
        perfil_base = PerfilUsuario.query.filter_by(usuario_id=usuario_id).first()
        if not perfil_base:
            return jsonify({"error": "Perfil base no encontrado"}), 404
        
        # Construye respuesta base
        datos_respuesta = {
            "id": usuario.id,
            "id_publico": usuario.id_publico,
            "nombre": usuario.nombre,
            "primer_apellido": usuario.primer_apellido,
            "segundo_apellido": usuario.segundo_apellido,
            "correo": usuario.correo,
            "rol": usuario.rol, 
            "correo_verificado": usuario.correo_verificado,
            "estado_cuenta": usuario.estado_cuenta,
            "creado_en": usuario.creado_en.isoformat() if usuario.creado_en else None,
            "actualizado_en": usuario.actualizado_en.isoformat() if usuario.actualizado_en else None,
            "perfil_base": {
                "nombre_completo": perfil_base.nombre_completo,
                "foto_perfil": perfil_base.foto_perfil,
                "biografia": perfil_base.biografia
            }
        }
        
        # Agregar perfil espec√≠fico seg√∫n el rol
        if usuario.rol == 'alumno':
            perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
            if perfil_estudiante:
                datos_respuesta["perfil_estudiante"] = {
                    "nivel_actual": perfil_estudiante.nivel_actual,
                    "idioma_aprendizaje": perfil_estudiante.idioma_aprendizaje,
                    "total_xp": perfil_estudiante.total_xp,
                    "nivel_usuario": perfil_estudiante.nivel_usuario,
                    "dias_racha": perfil_estudiante.dias_racha,
                    "racha_maxima": perfil_estudiante.racha_maxima,
                    "lecciones_completadas": perfil_estudiante.lecciones_completadas,
                    "tiempo_estudio_total": perfil_estudiante.tiempo_estudio_total,
                    "meta_diaria": perfil_estudiante.meta_diaria,
                    "notificaciones_habilitadas": perfil_estudiante.notificaciones_habilitadas,
                    "ultima_actividad": perfil_estudiante.ultima_actividad.isoformat() if perfil_estudiante.ultima_actividad else None
                }
        
        elif usuario.rol == 'profesor':
            perfil_profesor = PerfilProfesor.query.filter_by(usuario_id=usuario_id).first()
            if perfil_profesor:
                datos_respuesta["perfil_profesor"] = {
                    "especialidad": perfil_profesor.especialidad,
                    "a√±os_experiencia": perfil_profesor.a√±os_experiencia,
                    "idiomas_ensena": perfil_profesor.idiomas_ensena,
                    "niveles_ensena": perfil_profesor.niveles_ensena,
                    "certificaciones": perfil_profesor.certificaciones,
                    "descripcion_profesional": perfil_profesor.descripcion_profesional,
                    "estudiantes_totales": perfil_profesor.estudiantes_totales,
                    "cursos_creados": perfil_profesor.cursos_creados,
                    "calificacion_promedio": float(perfil_profesor.calificacion_promedio) if perfil_profesor.calificacion_promedio else 0.0,
                    "total_resenas": perfil_profesor.total_resenas
                }
        
        elif usuario.rol in ('admin', 'mantenimiento'):
            perfil_admin = PerfilAdministrador.query.filter_by(usuario_id=usuario_id).first()
            if perfil_admin:
                datos_respuesta["perfil_admin"] = {
                    "departamento": perfil_admin.departamento,
                    "nivel_acceso": perfil_admin.nivel_acceso,
                    "permisos": perfil_admin.permisos,
                    "ultimo_acceso_admin": perfil_admin.ultimo_acceso_admin.isoformat() if perfil_admin.ultimo_acceso_admin else None
                }
            
        return jsonify(datos_respuesta), 200
        
    except Exception as e:
        print(f"‚ùå Error en obtener_perfil_por_id ({usuario_id}): {e}")
        return jsonify({"error": "Error interno al obtener el perfil"}), 500


# ========================================
# OBTENER PERFIL DEL USUARIO ACTUAL
# ========================================
@usuario_bp.route("/perfil", methods=["GET"])
@jwt_required()
def obtener_perfil_actual():
    """
    Obtiene el perfil completo del usuario actualmente autenticado.
    """
    try:
        identity = get_jwt_identity()
        usuario_id_actual = int(identity)
        return obtener_perfil_por_id(usuario_id_actual)
        
    except (ValueError, TypeError):
        print(f"‚ö†Ô∏è Error: Token conten√≠a identidad no num√©rica: {identity}")
        return jsonify({"error": "Token inv√°lido"}), 400
    except Exception as e:
        print(f"‚ùå Error inesperado en obtener_perfil_actual: {e}") 
        return jsonify({"error": "Error interno al procesar la solicitud"}), 500


# ========================================
# ACTUALIZAR PERFIL DEL USUARIO ACTUAL
# ========================================
@usuario_bp.route("/perfil", methods=["PUT", "PATCH"])
@jwt_required()
def actualizar_perfil_actual():
    """
    Actualiza el perfil del usuario autenticado.
    Permite actualizar tanto perfil base como perfil espec√≠fico seg√∫n rol.
    """
    try:
        identity = get_jwt_identity()
        usuario_id = int(identity)
        data = request.get_json()
        
        usuario = Usuario.query.get(usuario_id)
        if not usuario:
            return jsonify({"error": "Usuario no encontrado"}), 404
        
        # Actualizar perfil base
        perfil_base = PerfilUsuario.query.filter_by(usuario_id=usuario_id).first()
        if perfil_base:
            if 'biografia' in data:
                perfil_base.biografia = data['biografia']
            if 'foto_perfil' in data:
                perfil_base.foto_perfil = data['foto_perfil']
        
        # Actualizar perfil espec√≠fico seg√∫n rol
        if usuario.rol == 'alumno':
            perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
            if perfil_estudiante:
                if 'meta_diaria' in data:
                    perfil_estudiante.meta_diaria = data['meta_diaria']
                if 'notificaciones_habilitadas' in data:
                    perfil_estudiante.notificaciones_habilitadas = data['notificaciones_habilitadas']
                if 'idioma_aprendizaje' in data:
                    perfil_estudiante.idioma_aprendizaje = data['idioma_aprendizaje']
        
        elif usuario.rol == 'profesor':
            perfil_profesor = PerfilProfesor.query.filter_by(usuario_id=usuario_id).first()
            if perfil_profesor:
                if 'especialidad' in data:
                    perfil_profesor.especialidad = data['especialidad']
                if 'descripcion_profesional' in data:
                    perfil_profesor.descripcion_profesional = data['descripcion_profesional']
                if 'a√±os_experiencia' in data:
                    perfil_profesor.a√±os_experiencia = data['a√±os_experiencia']
                if 'certificaciones' in data:
                    perfil_profesor.certificaciones = data['certificaciones']
        
        db.session.commit()
        return jsonify({"mensaje": "Perfil actualizado correctamente"}), 200
        
    except (ValueError, TypeError):
        return jsonify({"error": "Token inv√°lido"}), 400
    except Exception as e:
        db.session.rollback()
        print(f"‚ùå Error al actualizar perfil {usuario_id}: {e}")
        return jsonify({"error": "Error interno al actualizar perfil"}), 500


# ========================================
# ACTUALIZAR XP DEL ESTUDIANTE
# ========================================
@usuario_bp.route("/actualizar-xp", methods=["PATCH"])
@jwt_required()
def actualizar_xp():
    """
    Actualiza los puntos XP del estudiante.
    Solo disponible para usuarios con rol 'alumno'.
    """
    try:
        identity = get_jwt_identity()
        usuario_id = int(identity)
        data = request.get_json()
        
        xp_ganado = data.get("xp", 0)
        if xp_ganado <= 0:
            return jsonify({"error": "XP debe ser mayor a 0"}), 400
        
        usuario = Usuario.query.get(usuario_id)
        if not usuario or usuario.rol != 'alumno':
            return jsonify({"error": "Solo estudiantes pueden ganar XP"}), 403
        
        perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
        if not perfil_estudiante:
            return jsonify({"error": "Perfil de estudiante no encontrado"}), 404
        
        # Actualizar XP
        perfil_estudiante.total_xp += xp_ganado
        
        # Calcular nivel basado en XP (ejemplo simple)
        nuevo_nivel = (perfil_estudiante.total_xp // 100) + 1
        perfil_estudiante.nivel_usuario = nuevo_nivel
        
        db.session.commit()
        
        return jsonify({
            "mensaje": "XP actualizado correctamente",
            "total_xp": perfil_estudiante.total_xp,
            "nivel_usuario": perfil_estudiante.nivel_usuario,
            "xp_ganado": xp_ganado
        }), 200
        
    except (ValueError, TypeError):
        return jsonify({"error": "Token inv√°lido"}), 400
    except Exception as e:
        db.session.rollback()
        print(f"‚ùå Error al actualizar XP: {e}")
        return jsonify({"error": "Error al actualizar XP"}), 500


# ========================================
# ACTUALIZAR RACHA DEL ESTUDIANTE
# ========================================
@usuario_bp.route("/actualizar-racha", methods=["PATCH"])
@jwt_required()
def actualizar_racha():
    """
    Actualiza la racha de d√≠as consecutivos del estudiante.
    """
    try:
        identity = get_jwt_identity()
        usuario_id = int(identity)
        
        from datetime import date
        
        usuario = Usuario.query.get(usuario_id)
        if not usuario or usuario.rol != 'alumno':
            return jsonify({"error": "Solo estudiantes tienen racha"}), 403
        
        perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
        if not perfil_estudiante:
            return jsonify({"error": "Perfil de estudiante no encontrado"}), 404
        
        hoy = date.today()
        ultima_actividad = perfil_estudiante.ultima_actividad
        
        # L√≥gica de racha
        if ultima_actividad is None:
            # Primera actividad
            perfil_estudiante.dias_racha = 1
        elif ultima_actividad == hoy:
            # Ya se registr√≥ actividad hoy
            pass
        elif (hoy - ultima_actividad).days == 1:
            # D√≠a consecutivo
            perfil_estudiante.dias_racha += 1
        else:
            # Se rompi√≥ la racha
            perfil_estudiante.dias_racha = 1
        
        # Actualizar racha m√°xima
        if perfil_estudiante.dias_racha > perfil_estudiante.racha_maxima:
            perfil_estudiante.racha_maxima = perfil_estudiante.dias_racha
        
        perfil_estudiante.ultima_actividad = hoy
        db.session.commit()
        
        return jsonify({
            "mensaje": "Racha actualizada",
            "dias_racha": perfil_estudiante.dias_racha,
            "racha_maxima": perfil_estudiante.racha_maxima
        }), 200
        
    except (ValueError, TypeError):
        return jsonify({"error": "Token inv√°lido"}), 400
    except Exception as e:
        db.session.rollback()
        print(f"‚ùå Error al actualizar racha: {e}")
        return jsonify({"error": "Error al actualizar racha"}), 500


================================================================================
# ARCHIVO: back-end/services/correo_service.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/correo_service.py
================================================================================

from flask_mail import Message
from extensions import mail

def enviar_codigo_verificacion(correo, codigo):
    """Env√≠a el c√≥digo de verificaci√≥n al correo del usuario"""
    try:
        msg = Message(
            subject="Verifica tu cuenta en SpeakLexi",
            recipients=[correo],
            body=f"""
            ¬°Bienvenido a SpeakLexi!
            
            Tu c√≥digo de verificaci√≥n es: {codigo}
            
            Este c√≥digo expirar√° en 24 horas.
            
            Si no solicitaste esta verificaci√≥n, ignora este mensaje.
            
            Saludos,
            Equipo SpeakLexi
            """,
            html=f"""
            <html>
                <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px; text-align: center;">
                        <h1 style="color: white; margin: 0;">¬°Bienvenido a SpeakLexi!</h1>
                    </div>
                    
                    <div style="padding: 30px; background-color: #f9f9f9; border-radius: 10px; margin-top: 20px;">
                        <p style="font-size: 16px; color: #333;">Tu c√≥digo de verificaci√≥n es:</p>
                        <div style="background-color: white; padding: 20px; border-radius: 8px; text-align: center; margin: 20px 0;">
                            <h2 style="color: #667eea; letter-spacing: 5px; font-size: 32px; margin: 0;">{codigo}</h2>
                        </div>
                        <p style="font-size: 14px; color: #666;">Este c√≥digo expirar√° en <strong>24 horas</strong>.</p>
                        <p style="font-size: 14px; color: #666;">Si no solicitaste esta verificaci√≥n, ignora este mensaje.</p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                        <p style="font-size: 12px; color: #999;">Equipo SpeakLexi</p>
                    </div>
                </body>
            </html>
            """
        )
        mail.send(msg)
        print(f"‚úÖ C√≥digo de verificaci√≥n enviado a {correo}")
    except Exception as e:
        print(f"‚ùå Error al enviar correo de verificaci√≥n: {str(e)}")
        raise


def enviar_recuperacion_password(correo, token):
    """Env√≠a el enlace de recuperaci√≥n de contrase√±a con token seguro"""
    # URL del frontend (ajusta seg√∫n tu configuraci√≥n)
    FRONTEND_URL = "http://localhost:3000"
    enlace_recuperacion = f"{FRONTEND_URL}/restablecer-contrasena?token={token}"
    
    try:
        msg = Message(
            subject="Recuperaci√≥n de contrase√±a - SpeakLexi",
            recipients=[correo],
            body=f"""
            Solicitud de recuperaci√≥n de contrase√±a
            
            Haz clic en el siguiente enlace para restablecer tu contrase√±a:
            {enlace_recuperacion}
            
            Este enlace expirar√° en 1 hora.
            
            Si no solicitaste restablecer tu contrase√±a, ignora este mensaje.
            Tu contrase√±a permanecer√° sin cambios.
            
            Saludos,
            Equipo SpeakLexi
            """,
            html=f"""
            <html>
                <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto; padding: 20px;">
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px; text-align: center;">
                        <h1 style="color: white; margin: 0;">Recuperaci√≥n de Contrase√±a</h1>
                    </div>
                    
                    <div style="padding: 30px; background-color: #f9f9f9; border-radius: 10px; margin-top: 20px;">
                        <p style="font-size: 16px; color: #333;">Recibimos una solicitud para restablecer tu contrase√±a.</p>
                        <p style="font-size: 16px; color: #333;">Haz clic en el siguiente bot√≥n para continuar:</p>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <a href="{enlace_recuperacion}" 
                               style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                                      color: white; 
                                      padding: 15px 40px; 
                                      text-decoration: none; 
                                      border-radius: 8px; 
                                      font-size: 16px; 
                                      font-weight: bold;
                                      display: inline-block;">
                                Restablecer Contrase√±a
                            </a>
                        </div>
                        
                        <p style="font-size: 14px; color: #666;">O copia y pega este enlace en tu navegador:</p>
                        <p style="font-size: 12px; color: #999; word-break: break-all; background-color: white; padding: 10px; border-radius: 4px;">
                            {enlace_recuperacion}
                        </p>
                        
                        <p style="font-size: 14px; color: #666; margin-top: 20px;">Este enlace expirar√° en <strong>1 hora</strong>.</p>
                        
                        <div style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 4px;">
                            <p style="font-size: 14px; color: #856404; margin: 0;">
                                <strong>‚ö†Ô∏è Importante:</strong> Si no solicitaste restablecer tu contrase√±a, 
                                ignora este mensaje. Tu contrase√±a permanecer√° sin cambios.
                            </p>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #ddd;">
                        <p style="font-size: 12px; color: #999;">Equipo SpeakLexi</p>
                        <p style="font-size: 11px; color: #ccc; margin-top: 10px;">
                            Este correo fue enviado a {correo}
                        </p>
                    </div>
                </body>
            </html>
            """
        )
        mail.send(msg)
        print(f"‚úÖ Correo de recuperaci√≥n enviado a {correo}")
    except Exception as e:
        print(f"‚ùå Error al enviar correo de recuperaci√≥n: {str(e)}")
        raise


================================================================================
# ARCHIVO: back-end/services/gestor_cursos.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_cursos.py
================================================================================

# back-end/services/gestor_cursos.py
"""
Servicio para gesti√≥n de cursos y progreso de estudiantes
Maneja la l√≥gica de negocio relacionada con cursos, inscripciones y seguimiento
"""

from models.cursos import Curso, ProgresoCurso
from models.usuario import Usuario, PerfilEstudiante
from models.leccion import Leccion
from extensions import db
from sqlalchemy import func, desc, and_, or_
from datetime import date, datetime
import logging

logger = logging.getLogger(__name__)


class GestorCursos:
    """Gestor principal de cursos del sistema"""
    
    @staticmethod
    def crear_curso(datos, usuario_creador_id):
        """
        Crear un nuevo curso
        
        Args:
            datos (dict): Datos del curso
            usuario_creador_id (int): ID del usuario que crea el curso
            
        Returns:
            tuple: (curso, error_msg)
        """
        try:
            # Validar campos requeridos
            campos_requeridos = ['nombre', 'nivel', 'idioma', 'codigo']
            for campo in campos_requeridos:
                if campo not in datos or not datos[campo]:
                    return None, f'Campo requerido faltante: {campo}'
            
            # Validar que el c√≥digo no exista
            if Curso.query.filter_by(codigo=datos['codigo'].upper()).first():
                return None, 'El c√≥digo de curso ya existe'
            
            # Validar nivel CEFR
            niveles_validos = ['A1', 'A2', 'B1', 'B2', 'C1', 'C2']
            if datos['nivel'].upper() not in niveles_validos:
                return None, f'Nivel inv√°lido. Use: {", ".join(niveles_validos)}'
            
            # Validar usuario creador
            usuario = Usuario.query.get(usuario_creador_id)
            if not usuario or usuario.rol not in ['admin', 'profesor']:
                return None, 'No autorizado para crear cursos'
            
            # Si es profesor, asignarlo autom√°ticamente
            profesor_id = datos.get('profesor_id')
            if usuario.rol == 'profesor':
                profesor_id = usuario_creador_id
            
            # Crear curso
            nuevo_curso = Curso(
                nombre=datos['nombre'].strip(),
                nivel=datos['nivel'].upper(),
                descripcion=datos.get('descripcion', '').strip(),
                idioma=datos.get('idioma', 'ingles'),
                codigo=datos['codigo'].upper().strip(),
                profesor_id=profesor_id,
                imagen_portada=datos.get('imagen_portada'),
                orden=datos.get('orden', 0),
                activo=datos.get('activo', True),
                requisitos_previos=datos.get('requisitos_previos'),
                objetivos_aprendizaje=datos.get('objetivos_aprendizaje')
            )
            
            db.session.add(nuevo_curso)
            db.session.commit()
            
            logger.info(f"Curso creado: {nuevo_curso.codigo} por usuario {usuario_creador_id}")
            return nuevo_curso, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al crear curso: {str(e)}")
            return None, f'Error al crear curso: {str(e)}'
    
    @staticmethod
    def actualizar_curso(curso_id, datos, usuario_id):
        """
        Actualizar datos de un curso existente
        
        Args:
            curso_id (int): ID del curso
            datos (dict): Datos a actualizar
            usuario_id (int): ID del usuario que actualiza
            
        Returns:
            tuple: (curso, error_msg)
        """
        try:
            curso = Curso.query.get(curso_id)
            if not curso:
                return None, 'Curso no encontrado'
            
            # Verificar permisos
            usuario = Usuario.query.get(usuario_id)
            if usuario.rol == 'profesor' and curso.profesor_id != usuario_id:
                return None, 'No tienes permiso para editar este curso'
            
            if usuario.rol not in ['admin', 'profesor']:
                return None, 'No autorizado'
            
            # Campos actualizables
            campos_permitidos = [
                'nombre', 'descripcion', 'profesor_id', 'imagen_portada',
                'activo', 'requisitos_previos', 'objetivos_aprendizaje', 'orden'
            ]
            
            for campo in campos_permitidos:
                if campo in datos:
                    valor = datos[campo]
                    if isinstance(valor, str):
                        valor = valor.strip()
                    setattr(curso, campo, valor)
            
            curso.actualizado_en = datetime.utcnow()
            db.session.commit()
            
            logger.info(f"Curso actualizado: {curso.codigo}")
            return curso, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al actualizar curso: {str(e)}")
            return None, str(e)
    
    @staticmethod
    def eliminar_curso(curso_id, usuario_id):
        """
        Eliminar un curso (solo si no tiene lecciones)
        
        Args:
            curso_id (int): ID del curso
            usuario_id (int): ID del administrador
            
        Returns:
            tuple: (exito, error_msg)
        """
        try:
            usuario = Usuario.query.get(usuario_id)
            if usuario.rol != 'admin':
                return False, 'Solo administradores pueden eliminar cursos'
            
            curso = Curso.query.get(curso_id)
            if not curso:
                return False, 'Curso no encontrado'
            
            # Verificar que no tenga lecciones
            if curso.total_lecciones > 0:
                return False, 'No se puede eliminar un curso con lecciones. Elimine las lecciones primero.'
            
            # Verificar estudiantes inscritos
            estudiantes = ProgresoCurso.query.filter_by(curso_id=curso_id).count()
            if estudiantes > 0:
                return False, f'Hay {estudiantes} estudiante(s) inscrito(s). No se puede eliminar.'
            
            codigo = curso.codigo
            db.session.delete(curso)
            db.session.commit()
            
            logger.info(f"Curso eliminado: {codigo}")
            return True, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al eliminar curso: {str(e)}")
            return False, str(e)
    
    @staticmethod
    def obtener_cursos_disponibles(idioma='ingles', nivel=None, solo_activos=True):
        """
        Obtener lista de cursos disponibles
        
        Args:
            idioma (str): Filtrar por idioma
            nivel (str): Filtrar por nivel CEFR
            solo_activos (bool): Solo cursos activos
            
        Returns:
            list: Lista de cursos
        """
        try:
            query = Curso.query
            
            if solo_activos:
                query = query.filter_by(activo=True)
            
            query = query.filter_by(idioma=idioma)
            
            if nivel:
                query = query.filter_by(nivel=nivel.upper())
            
            cursos = query.order_by(Curso.orden, Curso.nivel).all()
            return cursos
            
        except Exception as e:
            logger.error(f"Error al obtener cursos: {str(e)}")
            return []
    
    @staticmethod
    def inscribir_estudiante(usuario_id, curso_id):
        """
        Inscribir un estudiante en un curso
        
        Args:
            usuario_id (int): ID del estudiante
            curso_id (int): ID del curso
            
        Returns:
            tuple: (progreso, error_msg)
        """
        try:
            # Validar estudiante
            usuario = Usuario.query.get(usuario_id)
            if not usuario or usuario.rol != 'alumno':
                return None, 'Usuario no v√°lido o no es estudiante'
            
            # Validar curso
            curso = Curso.query.get(curso_id)
            if not curso:
                return None, 'Curso no encontrado'
            
            if not curso.activo:
                return None, 'El curso no est√° disponible actualmente'
            
            # Verificar si ya est√° inscrito
            progreso_existente = ProgresoCurso.query.filter_by(
                usuario_id=usuario_id,
                curso_id=curso_id
            ).first()
            
            if progreso_existente:
                return None, 'Ya est√°s inscrito en este curso'
            
            # Verificar prerequisitos
            if not curso.tiene_prerequisitos_cumplidos(usuario_id):
                return None, 'No cumples con los prerequisitos requeridos'
            
            # Crear registro de progreso
            nuevo_progreso = ProgresoCurso(
                usuario_id=usuario_id,
                curso_id=curso_id,
                lecciones_totales=curso.total_lecciones,
                fecha_inicio=date.today(),
                estado='en_progreso' if curso.total_lecciones > 0 else 'no_iniciado'
            )
            
            db.session.add(nuevo_progreso)
            
            # Actualizar perfil del estudiante
            perfil = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
            if perfil:
                perfil.curso_actual_id = curso_id
                perfil.nivel_asignado = curso.nivel
            
            db.session.commit()
            
            logger.info(f"Estudiante {usuario_id} inscrito en curso {curso_id}")
            return nuevo_progreso, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al inscribir estudiante: {str(e)}")
            return None, str(e)
    
    @staticmethod
    def obtener_progreso_estudiante(usuario_id, curso_id):
        """
        Obtener o crear el progreso de un estudiante en un curso
        
        Args:
            usuario_id (int): ID del estudiante
            curso_id (int): ID del curso
            
        Returns:
            ProgresoCurso: Objeto de progreso
        """
        try:
            progreso = ProgresoCurso.query.filter_by(
                usuario_id=usuario_id,
                curso_id=curso_id
            ).first()
            
            if not progreso:
                # Crear progreso inicial
                curso = Curso.query.get(curso_id)
                if curso:
                    progreso = ProgresoCurso(
                        usuario_id=usuario_id,
                        curso_id=curso_id,
                        lecciones_totales=curso.total_lecciones
                    )
                    db.session.add(progreso)
                    db.session.commit()
            
            return progreso
            
        except Exception as e:
            logger.error(f"Error al obtener progreso: {str(e)}")
            return None
    
    @staticmethod
    def registrar_leccion_completada(usuario_id, curso_id, leccion_id, 
                                     tiempo_minutos=0, puntuacion=None):
        """
        Registrar la finalizaci√≥n de una lecci√≥n
        
        Args:
            usuario_id (int): ID del estudiante
            curso_id (int): ID del curso
            leccion_id (int): ID de la lecci√≥n
            tiempo_minutos (int): Tiempo dedicado en minutos
            puntuacion (float): Puntuaci√≥n obtenida
            
        Returns:
            tuple: (progreso, error_msg)
        """
        try:
            # Obtener o crear progreso
            progreso = GestorCursos.obtener_progreso_estudiante(usuario_id, curso_id)
            if not progreso:
                return None, 'No se pudo obtener el progreso'
            
            # Verificar que la lecci√≥n pertenece al curso
            leccion = Leccion.query.get(leccion_id)
            if not leccion or leccion.curso_id != curso_id:
                return None, 'Lecci√≥n no v√°lida para este curso'
            
            # Registrar progreso
            progreso.registrar_leccion_completada(leccion_id, tiempo_minutos, puntuacion)
            
            # Actualizar perfil del estudiante
            perfil = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
            if perfil:
                perfil.lecciones_completadas += 1
                perfil.tiempo_estudio_total += tiempo_minutos
                perfil.ultima_actividad = date.today()
                
                # Actualizar racha
                if perfil.ultima_actividad != date.today():
                    perfil.dias_racha += 1
                    if perfil.dias_racha > perfil.racha_maxima:
                        perfil.racha_maxima = perfil.dias_racha
            
            db.session.commit()
            
            logger.info(f"Lecci√≥n {leccion_id} completada por usuario {usuario_id}")
            return progreso, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al registrar lecci√≥n: {str(e)}")
            return None, str(e)
    
    @staticmethod
    def obtener_estadisticas_curso(curso_id):
        """
        Obtener estad√≠sticas completas de un curso
        
        Args:
            curso_id (int): ID del curso
            
        Returns:
            dict: Estad√≠sticas del curso
        """
        try:
            curso = Curso.query.get(curso_id)
            if not curso:
                return None
            
            # Contar estudiantes por estado
            total_estudiantes = ProgresoCurso.query.filter_by(curso_id=curso_id).count()
            completados = ProgresoCurso.query.filter_by(
                curso_id=curso_id, estado='completado'
            ).count()
            en_progreso = ProgresoCurso.query.filter_by(
                curso_id=curso_id, estado='en_progreso'
            ).count()
            
            # Calcular promedios
            progresos = ProgresoCurso.query.filter_by(curso_id=curso_id).all()
            
            if progresos:
                promedio_progreso = sum(float(p.porcentaje_completado or 0) for p in progresos) / len(progresos)
                puntuaciones = [float(p.puntuacion_promedio) for p in progresos if p.puntuacion_promedio]
                promedio_puntuacion = sum(puntuaciones) / len(puntuaciones) if puntuaciones else None
                tiempos = [p.tiempo_dedicado for p in progresos if p.tiempo_dedicado]
                tiempo_promedio = sum(tiempos) / len(tiempos) if tiempos else 0
            else:
                promedio_progreso = 0
                promedio_puntuacion = None
                tiempo_promedio = 0
            
            estadisticas = {
                'curso_id': curso_id,
                'curso_nombre': curso.nombre,
                'nivel': curso.nivel,
                'total_lecciones': curso.total_lecciones,
                'duracion_estimada': curso.duracion_estimada_total,
                'estudiantes': {
                    'total': total_estudiantes,
                    'completado': completados,
                    'en_progreso': en_progreso,
                    'no_iniciado': total_estudiantes - completados - en_progreso
                },
                'promedios': {
                    'progreso': round(promedio_progreso, 2),
                    'puntuacion': round(promedio_puntuacion, 2) if promedio_puntuacion else None,
                    'tiempo_dedicado': round(tiempo_promedio, 2)
                },
                'tasa_completado': round((completados / total_estudiantes * 100), 2) if total_estudiantes > 0 else 0
            }
            
            return estadisticas
            
        except Exception as e:
            logger.error(f"Error al obtener estad√≠sticas: {str(e)}")
            return None
    
    @staticmethod
    def obtener_cursos_estudiante(usuario_id, incluir_progreso=True):
        """
        Obtener todos los cursos de un estudiante
        
        Args:
            usuario_id (int): ID del estudiante
            incluir_progreso (bool): Incluir datos de progreso
            
        Returns:
            list: Lista de cursos con progreso
        """
        try:
            progresos = ProgresoCurso.query.filter_by(usuario_id=usuario_id).all()
            
            if not incluir_progreso:
                return [p.curso for p in progresos]
            
            cursos_data = []
            for progreso in progresos:
                curso_dict = progreso.curso.to_dict(incluir_lecciones=False)
                curso_dict['progreso'] = {
                    'lecciones_completadas': progreso.lecciones_completadas,
                    'lecciones_totales': progreso.lecciones_totales,
                    'porcentaje': float(progreso.porcentaje_completado or 0),
                    'estado': progreso.estado,
                    'tiempo_dedicado': progreso.tiempo_dedicado,
                    'puntuacion_promedio': float(progreso.puntuacion_promedio) if progreso.puntuacion_promedio else None,
                    'ultima_leccion_id': progreso.ultima_leccion_id,
                    'fecha_inicio': progreso.fecha_inicio.isoformat() if progreso.fecha_inicio else None
                }
                cursos_data.append(curso_dict)
            
            return cursos_data
            
        except Exception as e:
            logger.error(f"Error al obtener cursos del estudiante: {str(e)}")
            return []
    
    @staticmethod
    def obtener_cursos_profesor(profesor_id):
        """
        Obtener cursos asignados a un profesor
        
        Args:
            profesor_id (int): ID del profesor
            
        Returns:
            list: Lista de cursos
        """
        try:
            cursos = Curso.query.filter_by(profesor_id=profesor_id).order_by(Curso.orden).all()
            return cursos
            
        except Exception as e:
            logger.error(f"Error al obtener cursos del profesor: {str(e)}")
            return []
    
    @staticmethod
    def cambiar_estado_curso(curso_id, activo):
        """
        Activar o desactivar un curso
        
        Args:
            curso_id (int): ID del curso
            activo (bool): Nuevo estado
            
        Returns:
            tuple: (curso, error_msg)
        """
        try:
            curso = Curso.query.get(curso_id)
            if not curso:
                return None, 'Curso no encontrado'
            
            curso.activo = activo
            db.session.commit()
            
            logger.info(f"Curso {curso.codigo} {'activado' if activo else 'desactivado'}")
            return curso, None
            
        except Exception as e:
            db.session.rollback()
            logger.error(f"Error al cambiar estado del curso: {str(e)}")
            return None, str(e)
    
    @staticmethod
    def obtener_siguiente_leccion(usuario_id, curso_id):
        """
        Obtener la siguiente lecci√≥n que debe tomar el estudiante
        
        Args:
            usuario_id (int): ID del estudiante
            curso_id (int): ID del curso
            
        Returns:
            Leccion: Siguiente lecci√≥n o None
        """
        try:
            progreso = ProgresoCurso.query.filter_by(
                usuario_id=usuario_id,
                curso_id=curso_id
            ).first()
            
            if not progreso or not progreso.ultima_leccion_id:
                # Primera lecci√≥n del curso
                return Leccion.query.filter_by(
                    curso_id=curso_id,
                    estado='publicada'
                ).order_by(Leccion.orden).first()
            
            # Siguiente lecci√≥n despu√©s de la √∫ltima completada
            ultima_leccion = Leccion.query.get(progreso.ultima_leccion_id)
            if ultima_leccion:
                siguiente = Leccion.query.filter(
                    Leccion.curso_id == curso_id,
                    Leccion.estado == 'publicada',
                    Leccion.orden > ultima_leccion.orden
                ).order_by(Leccion.orden).first()
                
                return siguiente
            
            return None
            
        except Exception as e:
            logger.error(f"Error al obtener siguiente lecci√≥n: {str(e)}")
            return None
    
    @staticmethod
    def validar_prerequisitos(usuario_id, curso_id):
        """
        Validar si un estudiante cumple los prerequisitos de un curso
        
        Args:
            usuario_id (int): ID del estudiante
            curso_id (int): ID del curso
            
        Returns:
            tuple: (cumple, cursos_faltantes)
        """
        try:
            curso = Curso.query.get(curso_id)
            if not curso or not curso.requisitos_previos:
                return True, []
            
            cursos_faltantes = []
            
            for curso_req_id in curso.requisitos_previos:
                progreso = ProgresoCurso.query.filter_by(
                    usuario_id=usuario_id,
                    curso_id=curso_req_id
                ).first()
                
                if not progreso or progreso.estado != 'completado':
                    curso_req = Curso.query.get(curso_req_id)
                    if curso_req:
                        cursos_faltantes.append(curso_req.to_dict(incluir_lecciones=False))
            
            return len(cursos_faltantes) == 0, cursos_faltantes
            
        except Exception as e:
            logger.error(f"Error al validar prerequisitos: {str(e)}")
            return False, []


# Funciones auxiliares

def calcular_nivel_sugerido(puntuacion_prueba):
    """
    Calcular nivel CEFR sugerido basado en puntuaci√≥n de prueba
    
    Args:
        puntuacion_prueba (int): Puntuaci√≥n de 0-100
        
    Returns:
        str: Nivel CEFR sugerido
    """
    if puntuacion_prueba < 20:
        return 'A1'
    elif puntuacion_prueba < 40:
        return 'A2'
    elif puntuacion_prueba < 60:
        return 'B1'
    elif puntuacion_prueba < 75:
        return 'B2'
    elif puntuacion_prueba < 90:
        return 'C1'
    else:
        return 'C2'


def obtener_curso_por_nivel(nivel, idioma='ingles'):
    """
    Obtener el curso correspondiente a un nivel
    
    Args:
        nivel (str): Nivel CEFR
        idioma (str): Idioma del curso
        
    Returns:
        Curso: Curso correspondiente o None
    """
    return Curso.query.filter_by(
        nivel=nivel.upper(),
        idioma=idioma,
        activo=True
    ).first()


================================================================================
# ARCHIVO: back-end/services/gestor_lecciones.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_lecciones.py
================================================================================

"""
Gestor de Lecciones - SpeakLexi
Maneja toda la l√≥gica de negocio relacionada con lecciones y actividades
"""

from config.database import db
from models.leccion import (
    Leccion, Actividad, NivelDificultad, 
    TipoActividad, EstadoLeccion
)
from models.multimedia import Multimedia
from sqlalchemy.exc import IntegrityError
from sqlalchemy import or_, and_
from datetime import datetime


class GestorLecciones:
    """Gestiona operaciones CRUD y l√≥gica de negocio de lecciones"""
    
    @staticmethod
    def _obtener_nivel_enum(nivel_str):
        """
        Convierte un string a enum NivelDificultad.
        Acepta valores en may√∫sculas o min√∫sculas.
        """
        if isinstance(nivel_str, NivelDificultad):
            return nivel_str
            
        nivel_str = str(nivel_str).lower().strip()
        
        # Mapeo de valores string a enum
        mapeo_niveles = {
            'principiante': NivelDificultad.PRINCIPIANTE,
            'intermedio': NivelDificultad.INTERMEDIO,
            'avanzado': NivelDificultad.AVANZADO
        }
        
        if nivel_str not in mapeo_niveles:
            raise ValueError(f"Nivel inv√°lido. Valores permitidos: {list(mapeo_niveles.keys())}")
        
        return mapeo_niveles[nivel_str]
    
    @staticmethod
    def _obtener_estado_enum(estado_str):
        """
        Convierte un string a enum EstadoLeccion.
        """
        if isinstance(estado_str, EstadoLeccion):
            return estado_str
            
        estado_str = str(estado_str).lower().strip()
        
        mapeo_estados = {
            'borrador': EstadoLeccion.BORRADOR,
            'publicada': EstadoLeccion.PUBLICADA,
            'archivada': EstadoLeccion.ARCHIVADA
        }
        
        if estado_str not in mapeo_estados:
            raise ValueError(f"Estado inv√°lido. Valores permitidos: {list(mapeo_estados.keys())}")
        
        return mapeo_estados[estado_str]
    
    @staticmethod
    def _obtener_tipo_actividad_enum(tipo_str):
        """
        Convierte un string a enum TipoActividad.
        """
        if isinstance(tipo_str, TipoActividad):
            return tipo_str
            
        tipo_str = str(tipo_str).lower().strip()
        
        mapeo_tipos = {
            'multiple_choice': TipoActividad.MULTIPLE_CHOICE,
            'fill_blank': TipoActividad.FILL_BLANK,
            'matching': TipoActividad.MATCHING,
            'translation': TipoActividad.TRANSLATION,
            'listen_repeat': TipoActividad.LISTEN_REPEAT,
            'true_false': TipoActividad.TRUE_FALSE,
            'word_order': TipoActividad.WORD_ORDER
        }
        
        if tipo_str not in mapeo_tipos:
            raise ValueError(f"Tipo inv√°lido. Valores permitidos: {list(mapeo_tipos.keys())}")
        
        return mapeo_tipos[tipo_str]
    
    def crear_leccion(self, datos_leccion, usuario_id):
        """
        Crea una nueva lecci√≥n en el sistema.
        
        Args:
            datos_leccion (dict): Datos de la lecci√≥n
            usuario_id (int): ID del usuario que crea la lecci√≥n
        
        Returns:
            tuple: (dict con lecci√≥n creada, c√≥digo HTTP)
        """
        try:
            # Validar datos obligatorios
            if not datos_leccion.get('titulo'):
                return {"error": "El t√≠tulo es obligatorio"}, 400
            
            if not datos_leccion.get('contenido'):
                return {"error": "El contenido es obligatorio"}, 400
            
            # Validar y convertir nivel
            nivel_str = datos_leccion.get('nivel', 'principiante')
            try:
                nivel = self._obtener_nivel_enum(nivel_str)
            except ValueError as e:
                return {"error": str(e)}, 400
            
            # Crear nueva lecci√≥n
            nueva_leccion = Leccion(
                titulo=datos_leccion['titulo'],
                descripcion=datos_leccion.get('descripcion', ''),
                contenido=datos_leccion['contenido'],
                nivel=nivel,
                idioma=datos_leccion.get('idioma', 'ingles'),
                categoria=datos_leccion.get('categoria'),
                etiquetas=datos_leccion.get('etiquetas', []),
                orden=datos_leccion.get('orden'),
                requisitos=datos_leccion.get('requisitos', []),
                duracion_estimada=datos_leccion.get('duracion_estimada', 10),
                puntos_xp=datos_leccion.get('puntos_xp', 50),
                estado=EstadoLeccion.BORRADOR,
                creado_por=usuario_id
            )
            
            db.session.add(nueva_leccion)
            db.session.commit()
            
            return {
                "mensaje": "Lecci√≥n creada exitosamente",
                "leccion": nueva_leccion.to_dict()
            }, 201
            
        except IntegrityError as e:
            db.session.rollback()
            return {"error": f"Error de integridad: {str(e)}"}, 500
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al crear lecci√≥n: {str(e)}"}, 500
    
    def obtener_leccion(self, leccion_id, incluir_actividades=False, incluir_multimedia=False):
        """
        Obtiene una lecci√≥n por su ID.
        
        Args:
            leccion_id (int): ID de la lecci√≥n
            incluir_actividades (bool): Si incluir actividades
            incluir_multimedia (bool): Si incluir recursos multimedia
        
        Returns:
            tuple: (dict con lecci√≥n o error, c√≥digo HTTP)
        """
        leccion = Leccion.query.get(leccion_id)
        
        if not leccion:
            return {"error": "Lecci√≥n no encontrada"}, 404
        
        return {
            "leccion": leccion.to_dict(
                incluir_actividades=incluir_actividades,
                incluir_multimedia=incluir_multimedia
            )
        }, 200
    
    def listar_lecciones(self, filtros=None, pagina=1, por_pagina=20):
        """
        Lista lecciones con filtros opcionales y paginaci√≥n.
        
        Args:
            filtros (dict): Filtros opcionales
            pagina (int): N√∫mero de p√°gina
            por_pagina (int): Lecciones por p√°gina
        
        Returns:
            tuple: (dict con lecciones paginadas, c√≥digo HTTP)
        """
        try:
            query = Leccion.query
            
            # Aplicar filtros si existen
            if filtros:
                if filtros.get('nivel'):
                    try:
                        nivel = self._obtener_nivel_enum(filtros['nivel'])
                        query = query.filter_by(nivel=nivel)
                    except ValueError:
                        pass  # Ignorar nivel inv√°lido
                
                if filtros.get('idioma'):
                    query = query.filter_by(idioma=filtros['idioma'])
                
                if filtros.get('categoria'):
                    query = query.filter_by(categoria=filtros['categoria'])
                
                if filtros.get('estado'):
                    try:
                        estado = self._obtener_estado_enum(filtros['estado'])
                        query = query.filter_by(estado=estado)
                    except ValueError:
                        pass  # Ignorar estado inv√°lido
                
                if filtros.get('buscar'):
                    termino = f"%{filtros['buscar']}%"
                    query = query.filter(
                        or_(
                            Leccion.titulo.ilike(termino),
                            Leccion.descripcion.ilike(termino)
                        )
                    )
                
                if filtros.get('etiqueta'):
                    query = query.filter(
                        Leccion.etiquetas.contains([filtros['etiqueta']])
                    )
            
            # Ordenar por orden y fecha de creaci√≥n
            query = query.order_by(Leccion.orden.asc(), Leccion.creado_en.desc())
            
            # Paginar resultados
            paginacion = query.paginate(
                page=pagina,
                per_page=por_pagina,
                error_out=False
            )
            
            return {
                "lecciones": [leccion.to_dict() for leccion in paginacion.items],
                "total": paginacion.total,
                "pagina": paginacion.page,
                "paginas_totales": paginacion.pages,
                "tiene_siguiente": paginacion.has_next,
                "tiene_anterior": paginacion.has_prev
            }, 200
            
        except Exception as e:
            return {"error": f"Error al listar lecciones: {str(e)}"}, 500
    
    def actualizar_leccion(self, leccion_id, datos_actualizados, usuario_id):
        """Actualiza una lecci√≥n existente."""
        try:
            leccion = Leccion.query.get(leccion_id)
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            # Actualizar campos permitidos
            campos_editables = [
                'titulo', 'descripcion', 'contenido', 'categoria',
                'etiquetas', 'orden', 'requisitos', 'duracion_estimada',
                'puntos_xp', 'idioma'
            ]
            
            for campo in campos_editables:
                if campo in datos_actualizados:
                    setattr(leccion, campo, datos_actualizados[campo])
            
            # Manejar nivel especialmente
            if 'nivel' in datos_actualizados:
                try:
                    nivel = self._obtener_nivel_enum(datos_actualizados['nivel'])
                    leccion.nivel = nivel
                except ValueError as e:
                    return {"error": str(e)}, 400
            
            leccion.actualizado_en = datetime.utcnow()
            db.session.commit()
            
            return {
                "mensaje": "Lecci√≥n actualizada exitosamente",
                "leccion": leccion.to_dict()
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al actualizar lecci√≥n: {str(e)}"}, 500
    
    def eliminar_leccion(self, leccion_id, usuario_id):
        """Elimina una lecci√≥n (soft delete: archivar)."""
        try:
            leccion = Leccion.query.get(leccion_id)
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            leccion.archivar()
            db.session.commit()
            
            return {
                "mensaje": "Lecci√≥n archivada exitosamente",
                "leccion_id": leccion_id
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al eliminar lecci√≥n: {str(e)}"}, 500
    
    def publicar_leccion(self, leccion_id, usuario_id):
        """Publica una lecci√≥n en borrador."""
        try:
            leccion = Leccion.query.get(leccion_id)
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            if leccion.estado == EstadoLeccion.PUBLICADA:
                return {"mensaje": "La lecci√≥n ya est√° publicada"}, 200
            
            if leccion.actividades.count() == 0:
                return {
                    "error": "La lecci√≥n debe tener al menos una actividad para publicarse"
                }, 400
            
            leccion.publicar()
            db.session.commit()
            
            return {
                "mensaje": "Lecci√≥n publicada exitosamente",
                "leccion": leccion.to_dict()
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al publicar lecci√≥n: {str(e)}"}, 500
    
    # ========== GESTI√ìN DE ACTIVIDADES ==========
    
    def agregar_actividad(self, leccion_id, datos_actividad):
        """Agrega una actividad a una lecci√≥n."""
        try:
            leccion = Leccion.query.get(leccion_id)
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            # Validar tipo de actividad
            try:
                tipo = self._obtener_tipo_actividad_enum(datos_actividad['tipo'])
            except ValueError as e:
                return {"error": str(e)}, 400
            
            # Determinar orden si no se especifica
            orden = datos_actividad.get('orden')
            if orden is None:
                max_orden = db.session.query(
                    db.func.max(Actividad.orden)
                ).filter_by(leccion_id=leccion_id).scalar()
                orden = (max_orden or 0) + 1
            
            # Crear actividad
            nueva_actividad = Actividad(
                leccion_id=leccion_id,
                tipo=tipo,
                pregunta=datos_actividad['pregunta'],
                instrucciones=datos_actividad.get('instrucciones'),
                opciones=datos_actividad.get('opciones', {}),
                respuesta_correcta=datos_actividad['respuesta_correcta'],
                retroalimentacion=datos_actividad.get('retroalimentacion', {}),
                pista=datos_actividad.get('pista'),
                puntos=datos_actividad.get('puntos', 10),
                orden=orden,
                tiempo_limite=datos_actividad.get('tiempo_limite'),
                multimedia_id=datos_actividad.get('multimedia_id')
            )
            
            db.session.add(nueva_actividad)
            db.session.commit()
            
            return {
                "mensaje": "Actividad agregada exitosamente",
                "actividad": nueva_actividad.to_dict()
            }, 201
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al agregar actividad: {str(e)}"}, 500
    
    def actualizar_actividad(self, actividad_id, datos_actualizados):
        """Actualiza una actividad existente."""
        try:
            actividad = Actividad.query.get(actividad_id)
            
            if not actividad:
                return {"error": "Actividad no encontrada"}, 404
            
            # Actualizar campos permitidos
            campos_editables = [
                'pregunta', 'instrucciones', 'opciones', 'respuesta_correcta',
                'retroalimentacion', 'pista', 'puntos', 'orden',
                'tiempo_limite', 'multimedia_id'
            ]
            
            for campo in campos_editables:
                if campo in datos_actualizados:
                    setattr(actividad, campo, datos_actualizados[campo])
            
            # Manejar tipo especialmente
            if 'tipo' in datos_actualizados:
                try:
                    tipo = self._obtener_tipo_actividad_enum(datos_actualizados['tipo'])
                    actividad.tipo = tipo
                except ValueError as e:
                    return {"error": str(e)}, 400
            
            actividad.actualizado_en = datetime.utcnow()
            db.session.commit()
            
            return {
                "mensaje": "Actividad actualizada exitosamente",
                "actividad": actividad.to_dict()
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al actualizar actividad: {str(e)}"}, 500
    
    def eliminar_actividad(self, actividad_id):
        """Elimina una actividad."""
        try:
            actividad = Actividad.query.get(actividad_id)
            
            if not actividad:
                return {"error": "Actividad no encontrada"}, 404
            
            leccion_id = actividad.leccion_id
            
            db.session.delete(actividad)
            db.session.commit()
            
            return {
                "mensaje": "Actividad eliminada exitosamente",
                "actividad_id": actividad_id,
                "leccion_id": leccion_id
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al eliminar actividad: {str(e)}"}, 500
    
    def verificar_respuesta_actividad(self, actividad_id, respuesta_usuario):
        """Verifica la respuesta de un usuario a una actividad."""
        try:
            actividad = Actividad.query.get(actividad_id)
            
            if not actividad:
                return {"error": "Actividad no encontrada"}, 404
            
            resultado = actividad.verificar_respuesta(respuesta_usuario)
            
            return {
                "actividad_id": actividad_id,
                **resultado
            }, 200
            
        except Exception as e:
            return {"error": f"Error al verificar respuesta: {str(e)}"}, 500
    
    # ========== ESTAD√çSTICAS Y UTILIDADES ==========
    
    def obtener_estadisticas_leccion(self, leccion_id):
        """Obtiene estad√≠sticas de una lecci√≥n."""
        try:
            leccion = Leccion.query.get(leccion_id)
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            total_actividades = leccion.actividades.count()
            total_puntos = db.session.query(
                db.func.sum(Actividad.puntos)
            ).filter_by(leccion_id=leccion_id).scalar() or 0
            
            return {
                "leccion_id": leccion_id,
                "titulo": leccion.titulo,
                "total_actividades": total_actividades,
                "total_puntos": total_puntos,
                "duracion_estimada": leccion.duracion_estimada,
                "estado": leccion.estado.value,
                "recursos_multimedia": len(leccion.recursos_multimedia)
            }, 200
            
        except Exception as e:
            return {"error": f"Error al obtener estad√≠sticas: {str(e)}"}, 500
    
    def obtener_lecciones_por_nivel(self, nivel, idioma=None):
        """Obtiene lecciones filtradas por nivel y opcionalmente idioma."""
        try:
            try:
                nivel_enum = self._obtener_nivel_enum(nivel)
            except ValueError as e:
                return {"error": str(e)}, 400
            
            query = Leccion.query.filter_by(
                nivel=nivel_enum,
                estado=EstadoLeccion.PUBLICADA
            )
            
            if idioma:
                query = query.filter_by(idioma=idioma)
            
            lecciones = query.order_by(Leccion.orden.asc()).all()
            
            return {
                "nivel": nivel,
                "idioma": idioma,
                "total": len(lecciones),
                "lecciones": [leccion.to_dict() for leccion in lecciones]
            }, 200
            
        except Exception as e:
            return {"error": f"Error al obtener lecciones: {str(e)}"}, 500


# Instancia global del gestor
gestor_lecciones = GestorLecciones()


================================================================================
# ARCHIVO: back-end/services/gestor_multimedia.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_multimedia.py
================================================================================

"""
Gestor de Multimedia - SpeakLexi
Maneja toda la l√≥gica de negocio relacionada con recursos multimedia
"""

from config.database import db
from models.multimedia import (
    Multimedia, TipoMultimedia, EstadoMultimedia,
    ConfiguracionMultimedia, CONFIGURACION_POR_DEFECTO
)
from models.leccion import Leccion
from sqlalchemy.exc import IntegrityError
from sqlalchemy import or_
from werkzeug.utils import secure_filename
from datetime import datetime
import os
import uuid
from pathlib import Path


class GestorMultimedia:
    """Gestiona operaciones CRUD y procesamiento de archivos multimedia"""
    
    def __init__(self):
        """Inicializa el gestor con configuraciones por defecto"""
        self._configuracion_inicializada = False
    
    def _asegurar_configuracion(self):
        """Inicializa la configuraci√≥n solo cuando se necesita (lazy initialization)"""
        if not self._configuracion_inicializada:
            self._inicializar_configuracion()
            self._configuracion_inicializada = True
    
    def _inicializar_configuracion(self):
        """Carga configuraci√≥n o crea valores por defecto"""
        for clave, valor in CONFIGURACION_POR_DEFECTO.items():
            config = ConfiguracionMultimedia.query.filter_by(clave=clave).first()
            if not config:
                ConfiguracionMultimedia.establecer_valor(
                    clave, 
                    valor, 
                    f"Configuraci√≥n {clave}"
                )
    
    def subir_archivo(self, archivo, datos_adicionales, usuario_id):
        """
        Procesa y almacena un archivo multimedia.
        
        Args:
            archivo: Objeto de archivo (FileStorage de Flask)
            datos_adicionales (dict): Informaci√≥n adicional
                {
                    'descripcion': str,
                    'alt_text': str,
                    'categoria': str,
                    'etiquetas': list,
                    'transcripcion': str (opcional para audio/video)
                }
            usuario_id (int): ID del usuario que sube el archivo
        
        Returns:
            tuple: (dict con recurso creado, c√≥digo HTTP)
        """
        self._asegurar_configuracion()
        
        try:
            # Validar archivo
            if not archivo:
                return {"error": "No se proporcion√≥ ning√∫n archivo"}, 400
            
            nombre_original = secure_filename(archivo.filename)
            if not nombre_original:
                return {"error": "Nombre de archivo inv√°lido"}, 400
            
            # Detectar tipo MIME y tipo de recurso
            mime_type = archivo.content_type or 'application/octet-stream'
            tipo = self._detectar_tipo_multimedia(mime_type)
            
            if not tipo:
                return {
                    "error": f"Tipo de archivo no soportado: {mime_type}"
                }, 400
            
            # Validar tipo espec√≠fico
            if not Multimedia.validar_tipo_archivo(mime_type, tipo):
                return {
                    "error": f"El tipo MIME {mime_type} no coincide con el tipo {tipo.value}"
                }, 400
            
            # Validar tama√±o del archivo
            archivo.seek(0, os.SEEK_END)
            tamano = archivo.tell()
            archivo.seek(0)
            
            tamano_maximo = self._obtener_tamano_maximo(tipo)
            if tamano > tamano_maximo:
                tamano_mb = tamano / (1024 * 1024)
                max_mb = tamano_maximo / (1024 * 1024)
                return {
                    "error": f"Archivo muy grande ({tamano_mb:.2f} MB). M√°ximo: {max_mb:.2f} MB"
                }, 400
            
            # Generar nombre √∫nico
            nombre_almacenado = Multimedia.generar_nombre_unico(nombre_original)
            
            # Obtener ruta de almacenamiento
            ruta_base = ConfiguracionMultimedia.obtener_valor(
                'ruta_almacenamiento',
                'uploads/multimedia'
            )
            
            # Crear directorio si no existe
            ruta_completa = Path(ruta_base) / tipo.value
            ruta_completa.mkdir(parents=True, exist_ok=True)
            
            # Ruta del archivo
            ruta_archivo = ruta_completa / nombre_almacenado
            
            # Guardar archivo
            archivo.save(str(ruta_archivo))
            
            # Crear registro en base de datos
            nuevo_multimedia = Multimedia(
                nombre_archivo=nombre_original,
                nombre_almacenado=nombre_almacenado,
                tipo=tipo,
                mime_type=mime_type,
                categoria=datos_adicionales.get('categoria'),
                url=f"/{ruta_base}/{tipo.value}/{nombre_almacenado}",
                ruta_local=str(ruta_archivo),
                tamano=tamano,
                estado=EstadoMultimedia.DISPONIBLE,
                descripcion=datos_adicionales.get('descripcion'),
                alt_text=datos_adicionales.get('alt_text'),
                transcripcion=datos_adicionales.get('transcripcion'),
                etiquetas=datos_adicionales.get('etiquetas', []),
                meta_data={},
                subido_por=usuario_id
            )
            
            # Procesar metadata seg√∫n tipo
            if tipo == TipoMultimedia.IMAGEN:
                dimensiones = self._obtener_dimensiones_imagen(ruta_archivo)
                nuevo_multimedia.dimensiones = dimensiones
                
                # Generar thumbnail si est√° configurado
                if ConfiguracionMultimedia.obtener_valor('generar_thumbnails') == 'true':
                    url_thumb = self._generar_thumbnail(ruta_archivo, nombre_almacenado, tipo)
                    nuevo_multimedia.url_thumbnail = url_thumb
            
            elif tipo in [TipoMultimedia.AUDIO, TipoMultimedia.VIDEO]:
                duracion = self._obtener_duracion_media(ruta_archivo)
                nuevo_multimedia.duracion = duracion
                
                if tipo == TipoMultimedia.VIDEO:
                    dimensiones = self._obtener_dimensiones_video(ruta_archivo)
                    nuevo_multimedia.dimensiones = dimensiones
            
            db.session.add(nuevo_multimedia)
            db.session.commit()
            
            return {
                "mensaje": "Archivo subido exitosamente",
                "multimedia": nuevo_multimedia.to_dict()
            }, 201
            
        except Exception as e:
            db.session.rollback()
            # Limpiar archivo si existe
            if 'ruta_archivo' in locals() and Path(ruta_archivo).exists():
                Path(ruta_archivo).unlink()
            
            return {"error": f"Error al subir archivo: {str(e)}"}, 500
    
    def obtener_recurso(self, multimedia_id, incluir_metadata=False):
        """
        Obtiene un recurso multimedia por su ID.
        
        Args:
            multimedia_id (int): ID del recurso
            incluir_metadata (bool): Si incluir metadata completa
        
        Returns:
            tuple: (dict con recurso o error, c√≥digo HTTP)
        """
        multimedia = Multimedia.query.get(multimedia_id)
        
        if not multimedia:
            return {"error": "Recurso multimedia no encontrado"}, 404
        
        # Incrementar contador de uso
        multimedia.incrementar_uso()
        db.session.commit()
        
        return {
            "multimedia": multimedia.to_dict(incluir_metadata=incluir_metadata)
        }, 200
    
    def listar_recursos(self, filtros=None, pagina=1, por_pagina=20):
        """
        Lista recursos multimedia con filtros y paginaci√≥n.
        
        Args:
            filtros (dict): Filtros opcionales
                {
                    'tipo': str,
                    'categoria': str,
                    'estado': str,
                    'buscar': str,
                    'etiqueta': str
                }
            pagina (int): N√∫mero de p√°gina
            por_pagina (int): Recursos por p√°gina
        
        Returns:
            tuple: (dict con recursos paginados, c√≥digo HTTP)
        """
        try:
            query = Multimedia.query
            
            # Aplicar filtros
            if filtros:
                if filtros.get('tipo'):
                    try:
                        tipo = TipoMultimedia[filtros['tipo'].upper()]
                        query = query.filter_by(tipo=tipo)
                    except KeyError:
                        pass
                
                if filtros.get('categoria'):
                    query = query.filter_by(categoria=filtros['categoria'])
                
                if filtros.get('estado'):
                    try:
                        estado = EstadoMultimedia[filtros['estado'].upper()]
                        query = query.filter_by(estado=estado)
                    except KeyError:
                        pass
                
                if filtros.get('buscar'):
                    termino = f"%{filtros['buscar']}%"
                    query = query.filter(
                        or_(
                            Multimedia.nombre_archivo.ilike(termino),
                            Multimedia.descripcion.ilike(termino)
                        )
                    )
                
                if filtros.get('etiqueta'):
                    query = query.filter(
                        Multimedia.etiquetas.contains([filtros['etiqueta']])
                    )
            
            # Ordenar por fecha de creaci√≥n
            query = query.order_by(Multimedia.creado_en.desc())
            
            # Paginar
            paginacion = query.paginate(
                page=pagina,
                per_page=por_pagina,
                error_out=False
            )
            
            return {
                "recursos": [recurso.to_dict() for recurso in paginacion.items],
                "total": paginacion.total,
                "pagina": paginacion.page,
                "paginas_totales": paginacion.pages,
                "tiene_siguiente": paginacion.has_next,
                "tiene_anterior": paginacion.has_prev
            }, 200
            
        except Exception as e:
            return {"error": f"Error al listar recursos: {str(e)}"}, 500
    
    def actualizar_recurso(self, multimedia_id, datos_actualizados):
        """
        Actualiza informaci√≥n de un recurso multimedia.
        
        Args:
            multimedia_id (int): ID del recurso
            datos_actualizados (dict): Datos a actualizar
        
        Returns:
            tuple: (dict con recurso actualizado, c√≥digo HTTP)
        """
        try:
            multimedia = Multimedia.query.get(multimedia_id)
            
            if not multimedia:
                return {"error": "Recurso no encontrado"}, 404
            
            # Campos editables
            campos_editables = [
                'descripcion', 'alt_text', 'transcripcion',
                'etiquetas', 'categoria'
            ]
            
            for campo in campos_editables:
                if campo in datos_actualizados:
                    setattr(multimedia, campo, datos_actualizados[campo])
            
            multimedia.actualizado_en = datetime.utcnow()
            db.session.commit()
            
            return {
                "mensaje": "Recurso actualizado exitosamente",
                "multimedia": multimedia.to_dict()
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al actualizar recurso: {str(e)}"}, 500
    
    def eliminar_recurso(self, multimedia_id, eliminar_archivo=True):
        """
        Elimina un recurso multimedia.
        
        Args:
            multimedia_id (int): ID del recurso
            eliminar_archivo (bool): Si eliminar archivo f√≠sico
        
        Returns:
            tuple: (dict con resultado, c√≥digo HTTP)
        """
        try:
            multimedia = Multimedia.query.get(multimedia_id)
            
            if not multimedia:
                return {"error": "Recurso no encontrado"}, 404
            
            # Verificar si est√° en uso
            if multimedia.lecciones.count() > 0:
                return {
                    "error": "El recurso est√° siendo usado en lecciones y no puede eliminarse"
                }, 400
            
            # Eliminar archivo f√≠sico si existe
            if eliminar_archivo and multimedia.ruta_local:
                ruta = Path(multimedia.ruta_local)
                if ruta.exists():
                    ruta.unlink()
                
                # Eliminar thumbnail si existe
                if multimedia.url_thumbnail:
                    ruta_thumb = Path(multimedia.url_thumbnail.lstrip('/'))
                    if ruta_thumb.exists():
                        ruta_thumb.unlink()
            
            db.session.delete(multimedia)
            db.session.commit()
            
            return {
                "mensaje": "Recurso eliminado exitosamente",
                "multimedia_id": multimedia_id
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al eliminar recurso: {str(e)}"}, 500
    
    def asociar_con_leccion(self, multimedia_id, leccion_id, orden=0):
        """
        Asocia un recurso multimedia con una lecci√≥n.
        
        Args:
            multimedia_id (int): ID del recurso
            leccion_id (int): ID de la lecci√≥n
            orden (int): Orden del recurso en la lecci√≥n
        
        Returns:
            tuple: (dict con resultado, c√≥digo HTTP)
        """
        try:
            multimedia = Multimedia.query.get(multimedia_id)
            leccion = Leccion.query.get(leccion_id)
            
            if not multimedia:
                return {"error": "Recurso multimedia no encontrado"}, 404
            
            if not leccion:
                return {"error": "Lecci√≥n no encontrada"}, 404
            
            # Verificar si ya est√° asociado
            if multimedia in leccion.recursos_multimedia:
                return {
                    "mensaje": "El recurso ya est√° asociado con esta lecci√≥n"
                }, 200
            
            leccion.recursos_multimedia.append(multimedia)
            multimedia.incrementar_uso()
            db.session.commit()
            
            return {
                "mensaje": "Recurso asociado exitosamente con la lecci√≥n",
                "multimedia_id": multimedia_id,
                "leccion_id": leccion_id
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al asociar recurso: {str(e)}"}, 500
    
    def desasociar_de_leccion(self, multimedia_id, leccion_id):
        """
        Desasocia un recurso multimedia de una lecci√≥n.
        
        Args:
            multimedia_id (int): ID del recurso
            leccion_id (int): ID de la lecci√≥n
        
        Returns:
            tuple: (dict con resultado, c√≥digo HTTP)
        """
        try:
            multimedia = Multimedia.query.get(multimedia_id)
            leccion = Leccion.query.get(leccion_id)
            
            if not multimedia or not leccion:
                return {"error": "Recurso o lecci√≥n no encontrados"}, 404
            
            if multimedia in leccion.recursos_multimedia:
                leccion.recursos_multimedia.remove(multimedia)
                db.session.commit()
            
            return {
                "mensaje": "Recurso desasociado exitosamente",
                "multimedia_id": multimedia_id,
                "leccion_id": leccion_id
            }, 200
            
        except Exception as e:
            db.session.rollback()
            return {"error": f"Error al desasociar recurso: {str(e)}"}, 500
    
    # ========== M√âTODOS AUXILIARES ==========
    
    def _detectar_tipo_multimedia(self, mime_type):
        """
        Detecta el tipo de multimedia basado en MIME type.
        
        Args:
            mime_type (str): Tipo MIME
        
        Returns:
            TipoMultimedia o None
        """
        if mime_type.startswith('image/'):
            return TipoMultimedia.IMAGEN
        elif mime_type.startswith('audio/'):
            return TipoMultimedia.AUDIO
        elif mime_type.startswith('video/'):
            return TipoMultimedia.VIDEO
        elif mime_type in ['application/pdf', 'text/plain']:
            return TipoMultimedia.DOCUMENTO
        return None
    
    def _obtener_tamano_maximo(self, tipo):
        """
        Obtiene el tama√±o m√°ximo permitido para un tipo.
        
        Args:
            tipo (TipoMultimedia): Tipo de multimedia
        
        Returns:
            int: Tama√±o m√°ximo en bytes
        """
        claves = {
            TipoMultimedia.IMAGEN: 'max_tamano_imagen',
            TipoMultimedia.AUDIO: 'max_tamano_audio',
            TipoMultimedia.VIDEO: 'max_tamano_video',
            TipoMultimedia.DOCUMENTO: 'max_tamano_documento'
        }
        
        clave = claves.get(tipo, 'max_tamano_imagen')
        valor = ConfiguracionMultimedia.obtener_valor(clave, '5242880')
        
        return int(valor)
    
    def _obtener_dimensiones_imagen(self, ruta_archivo):
        """
        Obtiene dimensiones de una imagen.
        
        Args:
            ruta_archivo (Path): Ruta del archivo
        
        Returns:
            dict: {'ancho': int, 'alto': int} o None
        """
        try:
            try:
                from PIL import Image
            except ImportError:
                # PIL no est√° instalado, retornar None
                return None
            
            with Image.open(ruta_archivo) as img:
                return {
                    'ancho': img.width,
                    'alto': img.height
                }
        except Exception:
            return None
    
    def _obtener_dimensiones_video(self, ruta_archivo):
        """
        Obtiene dimensiones de un video.
        
        Args:
            ruta_archivo (Path): Ruta del archivo
        
        Returns:
            dict: {'ancho': int, 'alto': int} o None
        """
        # Requiere ffmpeg-python o similar
        # Implementaci√≥n simplificada
        return None
    
    def _obtener_duracion_media(self, ruta_archivo):
        """
        Obtiene duraci√≥n de audio/video.
        
        Args:
            ruta_archivo (Path): Ruta del archivo
        
        Returns:
            int: Duraci√≥n en segundos o None
        """
        # Requiere ffmpeg-python o similar
        # Implementaci√≥n simplificada
        return None
    
    def _generar_thumbnail(self, ruta_archivo, nombre_almacenado, tipo):
        """
        Genera thumbnail para imagen o video.
        
        Args:
            ruta_archivo (Path): Ruta del archivo original
            nombre_almacenado (str): Nombre del archivo
            tipo (TipoMultimedia): Tipo de multimedia
        
        Returns:
            str: URL del thumbnail o None
        """
        try:
            if tipo != TipoMultimedia.IMAGEN:
                return None
            
            from PIL import Image
            
            ancho = int(ConfiguracionMultimedia.obtener_valor('thumbnail_ancho', '300'))
            alto = int(ConfiguracionMultimedia.obtener_valor('thumbnail_alto', '300'))
            
            # Crear directorio de thumbnails
            ruta_base = ConfiguracionMultimedia.obtener_valor(
                'ruta_almacenamiento',
                'uploads/multimedia'
            )
            ruta_thumbs = Path(ruta_base) / 'thumbnails'
            ruta_thumbs.mkdir(parents=True, exist_ok=True)
            
            # Generar thumbnail
            nombre_thumb = f"thumb_{nombre_almacenado}"
            ruta_thumb = ruta_thumbs / nombre_thumb
            
            with Image.open(ruta_archivo) as img:
                img.thumbnail((ancho, alto), Image.Resampling.LANCZOS)
                img.save(ruta_thumb, quality=85)
            
            return f"/{ruta_base}/thumbnails/{nombre_thumb}"
            
        except Exception:
            return None
    
    # ========== ESTAD√çSTICAS ==========
    
    def obtener_estadisticas(self):
        """
        Obtiene estad√≠sticas generales de multimedia.
        
        Returns:
            tuple: (dict con estad√≠sticas, c√≥digo HTTP)
        """
        try:
            total = Multimedia.query.count()
            
            por_tipo = {}
            for tipo in TipoMultimedia:
                count = Multimedia.query.filter_by(tipo=tipo).count()
                por_tipo[tipo.value] = count
            
            por_estado = {}
            for estado in EstadoMultimedia:
                count = Multimedia.query.filter_by(estado=estado).count()
                por_estado[estado.value] = count
            
            # Tama√±o total
            tamano_total = db.session.query(
                db.func.sum(Multimedia.tamano)
            ).scalar() or 0
            
            # Recursos m√°s usados
            mas_usados = Multimedia.query.order_by(
                Multimedia.veces_usado.desc()
            ).limit(10).all()
            
            return {
                "total_recursos": total,
                "por_tipo": por_tipo,
                "por_estado": por_estado,
                "tamano_total_bytes": tamano_total,
                "tamano_total_mb": round(tamano_total / (1024 * 1024), 2),
                "mas_usados": [
                    {
                        "id": r.id,
                        "nombre": r.nombre_archivo,
                        "tipo": r.tipo.value,
                        "veces_usado": r.veces_usado
                    }
                    for r in mas_usados
                ]
            }, 200
            
        except Exception as e:
            return {"error": f"Error al obtener estad√≠sticas: {str(e)}"}, 500


# Instancia global del gestor (SIN inicializar configuraci√≥n hasta que se use)
gestor_multimedia = GestorMultimedia()


================================================================================
# ARCHIVO: back-end/services/gestor_usuarios.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_usuarios.py
================================================================================

from config.database import db
from models.usuario import Usuario, PerfilUsuario, PerfilEstudiante, PerfilProfesor, PerfilAdministrador
from services.correo_service import (
    enviar_codigo_verificacion,
    enviar_recuperacion_password
)
from sqlalchemy.exc import IntegrityError
from datetime import datetime, timedelta
import random
import secrets

class GestorUsuarios:
    # ========================================
    # REGISTRO Y VERIFICACI√ìN
    # ========================================
    def registrar_usuario(self, nombre, primer_apellido, segundo_apellido, correo, password, idioma, nivel_actual):
        """
        Registra un nuevo usuario ESTUDIANTE.
        Crea: Usuario (rol='alumno') + PerfilUsuario (base) + PerfilEstudiante (espec√≠fico)
        """
        # Evitar duplicados por correo
        if Usuario.query.filter_by(correo=correo).first():
            return {"error": "El correo electr√≥nico ya est√° registrado."}, 400

        try:
            # 1. Crear usuario principal
            nuevo_usuario = Usuario(
                nombre=nombre,
                primer_apellido=primer_apellido,
                segundo_apellido=segundo_apellido,
                correo=correo,
                rol='alumno'  # Siempre alumno en registro p√∫blico
            )
            nuevo_usuario.set_password(password)

            # Generar ID p√∫blico √∫nico
            nuevo_usuario.id_publico = self.generar_id_publico(
                nombre, primer_apellido, segundo_apellido, idioma, nivel_actual
            )

            # Crear c√≥digo de verificaci√≥n (v√°lido por 10 minutos)
            codigo = str(random.randint(100000, 999999))
            nuevo_usuario.codigo_verificacion = codigo
            nuevo_usuario.expira_verificacion = datetime.utcnow() + timedelta(minutes=10)

            db.session.add(nuevo_usuario)
            db.session.flush()  # Para obtener el ID del usuario

            # 2. Crear perfil base (com√∫n para todos los roles)
            nombre_completo = f"{nombre} {primer_apellido} {segundo_apellido or ''}".strip()
            nuevo_perfil_base = PerfilUsuario(
                usuario_id=nuevo_usuario.id,
                nombre_completo=nombre_completo,
                id_publico=nuevo_usuario.id_publico
            )
            db.session.add(nuevo_perfil_base)

            # 3. Crear perfil espec√≠fico de ESTUDIANTE
            nuevo_perfil_estudiante = PerfilEstudiante(
                usuario_id=nuevo_usuario.id,
                nivel_actual=nivel_actual,
                idioma_aprendizaje=idioma,
                total_xp=0,
                nivel_usuario=1,
                dias_racha=0,
                racha_maxima=0,
                lecciones_completadas=0,
                tiempo_estudio_total=0,
                meta_diaria=30,
                notificaciones_habilitadas=True
            )
            db.session.add(nuevo_perfil_estudiante)

            # Guardar todo en BD
            db.session.commit()

            # Enviar correo de verificaci√≥n
            try:
                enviar_codigo_verificacion(correo, codigo)
                print(f"‚úÖ Correo de verificaci√≥n enviado a {correo}")
            except Exception as e:
                print(f"‚ö†Ô∏è Error al enviar correo de verificaci√≥n a {correo}: {e}")
                # No fallar el registro si el correo no se env√≠a

            return {
                "mensaje": "Usuario registrado correctamente. C√≥digo de verificaci√≥n enviado.",
                "id_publico": nuevo_usuario.id_publico,
                "usuario_id": nuevo_usuario.id
            }, 201

        except IntegrityError as e:
            db.session.rollback()
            print(f"‚ùå Error de integridad al registrar {correo}: {e}")
            return {"error": "Error de integridad en la base de datos (posiblemente ID p√∫blico duplicado)."}, 500
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error interno al registrar usuario {correo}: {str(e)}")
            return {"error": "Error interno del servidor"}, 500

    def verificar_correo(self, correo, codigo):
        """Verifica el correo electr√≥nico con el c√≥digo de 6 d√≠gitos"""
        usuario = Usuario.query.filter_by(correo=correo).first()
        if not usuario:
            return {"error": "Usuario no encontrado"}, 404

        if usuario.correo_verificado:
            return {"mensaje": "El correo ya est√° verificado"}, 200

        # Verificar expiraci√≥n (10 minutos)
        if usuario.expira_verificacion:
            if datetime.utcnow() > usuario.expira_verificacion:
                return {"error": "C√≥digo expirado. Solicita uno nuevo."}, 400
        else:
            return {"error": "No se pudo verificar la expiraci√≥n del c√≥digo."}, 400

        # Verificar c√≥digo
        if usuario.codigo_verificacion == codigo:
            usuario.correo_verificado = True
            usuario.codigo_verificacion = None
            usuario.expira_verificacion = None
            try:
                db.session.commit()
                print(f"‚úÖ Correo verificado para {correo}")
                return {"mensaje": "Correo verificado correctamente"}, 200
            except Exception as e:
                db.session.rollback()
                print(f"‚ùå Error al guardar verificaci√≥n para {correo}: {str(e)}")
                return {"error": "Error al guardar la verificaci√≥n"}, 500
        else:
            return {"error": "C√≥digo incorrecto"}, 400

    def reenviar_codigo(self, correo):
        """Reenv√≠a el c√≥digo de verificaci√≥n"""
        usuario = Usuario.query.filter_by(correo=correo).first()
        if not usuario:
            return {"error": "Usuario no encontrado"}, 404

        if usuario.correo_verificado:
            return {"mensaje": "El correo ya fue verificado"}, 200

        # Generar nuevo c√≥digo y actualizar expiraci√≥n
        codigo = str(random.randint(100000, 999999))
        usuario.codigo_verificacion = codigo
        usuario.expira_verificacion = datetime.utcnow() + timedelta(minutes=10)
        
        try:
            db.session.commit()
            # Enviar correo (solo despu√©s de confirmar que se guard√≥ en BD)
            enviar_codigo_verificacion(correo, codigo)
            print(f"‚úÖ C√≥digo reenviado a {correo}")
            return {"mensaje": "C√≥digo reenviado exitosamente"}, 200
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al reenviar c√≥digo para {correo}: {str(e)}")
            return {"error": "Error al procesar el reenv√≠o del c√≥digo"}, 500

    # ========================================
    # AUTENTICACI√ìN (ACTUALIZADO)
    # ========================================
    def autenticar_usuario(self, correo, password):
        """
        Autentica un usuario y retorna su informaci√≥n completa seg√∫n su rol.
        Funciona para: alumno, profesor, admin, mantenimiento.
        """
        usuario = Usuario.query.filter_by(correo=correo).first()
        
        # Verificar usuario y contrase√±a
        if not usuario or not usuario.check_password(password):
            return {"error": "Credenciales inv√°lidas"}, 401

        # Verificar estado de la cuenta
        if usuario.estado_cuenta == 'desactivado':
            dias_restantes = 0
            if usuario.fecha_desactivacion:
                if isinstance(usuario.fecha_desactivacion, datetime):
                    dias_transcurridos = (datetime.utcnow() - usuario.fecha_desactivacion).days
                    dias_restantes = max(0, 30 - dias_transcurridos)

            return {
                "error": "Tu cuenta ha sido desactivada",
                "codigo": "CUENTA_DESACTIVADA",
                "dias_restantes": dias_restantes,
                "usuario_id": usuario.id
            }, 403

        if usuario.estado_cuenta == 'eliminado':
            return {"error": "Esta cuenta ha sido eliminada permanentemente", "codigo": "CUENTA_ELIMINADA"}, 403

        # Verificar si el correo est√° verificado
        if not usuario.correo_verificado:
            return {"error": "Debes verificar tu correo electr√≥nico antes de iniciar sesi√≥n", "codigo": "EMAIL_NOT_VERIFIED"}, 403

        # Construir respuesta base
        perfil_base = usuario.perfil
        datos_usuario_respuesta = {
            "id": usuario.id,
            "id_publico": usuario.id_publico,
            "nombre": usuario.nombre,
            "primer_apellido": usuario.primer_apellido,
            "segundo_apellido": usuario.segundo_apellido,
            "correo": usuario.correo,
            "rol": usuario.rol,
            "correo_verificado": usuario.correo_verificado,
            "estado_cuenta": usuario.estado_cuenta,
            "perfil_base": None,
            "perfil_especifico": None
        }

        # Agregar perfil base si existe
        if perfil_base:
            datos_usuario_respuesta["perfil_base"] = {
                "nombre_completo": perfil_base.nombre_completo,
                "foto_perfil": perfil_base.foto_perfil,
                "biografia": perfil_base.biografia
            }

        # Agregar perfil espec√≠fico seg√∫n el rol
        if usuario.rol == 'alumno':
            perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario.id).first()
            if perfil_estudiante:
                datos_usuario_respuesta["perfil_especifico"] = {
                    "tipo": "estudiante",
                    "nivel_actual": perfil_estudiante.nivel_actual,
                    "idioma_aprendizaje": perfil_estudiante.idioma_aprendizaje,
                    "total_xp": perfil_estudiante.total_xp,
                    "nivel_usuario": perfil_estudiante.nivel_usuario,
                    "dias_racha": perfil_estudiante.dias_racha,
                    "racha_maxima": perfil_estudiante.racha_maxima,
                    "lecciones_completadas": perfil_estudiante.lecciones_completadas,
                    "tiempo_estudio_total": perfil_estudiante.tiempo_estudio_total,
                    "meta_diaria": perfil_estudiante.meta_diaria,
                    "ultima_actividad": perfil_estudiante.ultima_actividad.isoformat() if perfil_estudiante.ultima_actividad else None
                }
        
        elif usuario.rol == 'profesor':
            perfil_profesor = PerfilProfesor.query.filter_by(usuario_id=usuario.id).first()
            if perfil_profesor:
                datos_usuario_respuesta["perfil_especifico"] = {
                    "tipo": "profesor",
                    "especialidad": perfil_profesor.especialidad,
                    "a√±os_experiencia": perfil_profesor.a√±os_experiencia,
                    "estudiantes_totales": perfil_profesor.estudiantes_totales,
                    "cursos_creados": perfil_profesor.cursos_creados
                }
        
        elif usuario.rol in ('admin', 'mantenimiento'):
            perfil_admin = PerfilAdministrador.query.filter_by(usuario_id=usuario.id).first()
            if perfil_admin:
                datos_usuario_respuesta["perfil_especifico"] = {
                    "tipo": "administrador",
                    "nivel_acceso": perfil_admin.nivel_acceso,
                    "departamento": perfil_admin.departamento,
                    "permisos": perfil_admin.permisos
                }
            
        return {
            "mensaje": "Inicio de sesi√≥n exitoso",
            "usuario": datos_usuario_respuesta
        }, 200

    # ========================================
    # PERFIL DE USUARIO (ACTUALIZADO)
    # ========================================
    def obtener_perfil(self, id_usuario):
        """Obtiene el perfil completo de un usuario por su ID seg√∫n su rol"""
        try:
            usuario = Usuario.query.get(id_usuario)
            if not usuario:
                return {"error": "Usuario no encontrado"}, 404

            perfil_base = PerfilUsuario.query.filter_by(usuario_id=usuario.id).first()
            if not perfil_base:
                return {"error": "Perfil base no encontrado"}, 404

            # Construir respuesta base
            datos_respuesta = {
                "id": usuario.id,
                "id_publico": usuario.id_publico,
                "nombre": usuario.nombre,
                "primer_apellido": usuario.primer_apellido,
                "segundo_apellido": usuario.segundo_apellido,
                "correo": usuario.correo,
                "rol": usuario.rol,
                "correo_verificado": usuario.correo_verificado,
                "estado_cuenta": usuario.estado_cuenta,
                "creado_en": usuario.creado_en.isoformat() if usuario.creado_en else None,
                "actualizado_en": usuario.actualizado_en.isoformat() if usuario.actualizado_en else None,
                "perfil_base": {
                    "nombre_completo": perfil_base.nombre_completo,
                    "foto_perfil": perfil_base.foto_perfil,
                    "biografia": perfil_base.biografia
                }
            }

            # Agregar perfil espec√≠fico seg√∫n rol
            if usuario.rol == 'alumno':
                perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario.id).first()
                if perfil_estudiante:
                    datos_respuesta["perfil_estudiante"] = {
                        "nivel_actual": perfil_estudiante.nivel_actual,
                        "idioma_aprendizaje": perfil_estudiante.idioma_aprendizaje,
                        "total_xp": perfil_estudiante.total_xp,
                        "dias_racha": perfil_estudiante.dias_racha,
                        "ultima_actividad": perfil_estudiante.ultima_actividad.isoformat() if perfil_estudiante.ultima_actividad else None
                    }
            
            elif usuario.rol == 'profesor':
                perfil_profesor = PerfilProfesor.query.filter_by(usuario_id=usuario.id).first()
                if perfil_profesor:
                    datos_respuesta["perfil_profesor"] = {
                        "especialidad": perfil_profesor.especialidad,
                        "estudiantes_totales": perfil_profesor.estudiantes_totales
                    }
            
            elif usuario.rol in ('admin', 'mantenimiento'):
                perfil_admin = PerfilAdministrador.query.filter_by(usuario_id=usuario.id).first()
                if perfil_admin:
                    datos_respuesta["perfil_admin"] = {
                        "nivel_acceso": perfil_admin.nivel_acceso,
                        "departamento": perfil_admin.departamento
                    }

            return datos_respuesta, 200

        except Exception as e:
            print(f"‚ùå Error obteniendo perfil para ID {id_usuario}: {str(e)}")
            return {"error": "Error interno al obtener el perfil"}, 500

    # ========================================
    # CAMBIO DE CURSO/IDIOMA (SOLO ESTUDIANTES)
    # ========================================
    def cambiar_curso(self, usuario_id, nuevo_idioma, nuevo_nivel=None):
        """
        Cambia el idioma y/o nivel del ESTUDIANTE.
        Solo funciona para usuarios con rol 'alumno'.
        """
        try:
            usuario = Usuario.query.get(usuario_id)
            if not usuario:
                return {"error": "Usuario no encontrado"}, 404
            
            if usuario.rol != 'alumno':
                return {"error": "Solo los estudiantes pueden cambiar de curso"}, 403

            perfil_estudiante = PerfilEstudiante.query.filter_by(usuario_id=usuario_id).first()
            if not perfil_estudiante:
                return {"error": "Perfil de estudiante no encontrado"}, 404

            # Validar idiomas disponibles
            idiomas_disponibles = ["Ingl√©s", "Espa√±ol", "Franc√©s", "Alem√°n"]
            if nuevo_idioma not in idiomas_disponibles:
                return {"error": f"Idioma '{nuevo_idioma}' no disponible actualmente"}, 400

            idioma_anterior = perfil_estudiante.idioma_aprendizaje

            # Actualizar idioma
            perfil_estudiante.idioma_aprendizaje = nuevo_idioma
            
            # Actualizar nivel si se proporciona
            if nuevo_nivel:
                perfil_estudiante.nivel_actual = nuevo_nivel
            
            # Actualizar √∫ltima actividad
            perfil_estudiante.ultima_actividad = datetime.utcnow().date()
            
            db.session.commit()
            
            print(f"‚úÖ Curso cambiado para usuario {usuario_id}: {idioma_anterior} ‚Üí {nuevo_idioma}")
            
            return {
                "mensaje": f"Curso cambiado exitosamente a {nuevo_idioma}",
                "perfil": {
                    "idioma_aprendizaje": perfil_estudiante.idioma_aprendizaje,
                    "nivel_actual": perfil_estudiante.nivel_actual,
                    "total_xp": perfil_estudiante.total_xp,
                    "dias_racha": perfil_estudiante.dias_racha
                }
            }, 200
            
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al cambiar curso para usuario {usuario_id}: {e}")
            return {"error": "Error interno al cambiar el curso"}, 500

    # ========================================
    # SOFT DELETE Y RECUPERACI√ìN DE CUENTA
    # ========================================
    def desactivar_cuenta(self, usuario_id, password):
        """Desactiva temporalmente la cuenta del usuario (soft delete)"""
        usuario = Usuario.query.get(usuario_id)
        if not usuario:
            return {"error": "Usuario no encontrado"}, 404

        if not usuario.check_password(password):
            return {"error": "Contrase√±a incorrecta"}, 401

        if usuario.estado_cuenta == 'desactivado':
            return {"mensaje": "La cuenta ya se encuentra desactivada"}, 200
        if usuario.estado_cuenta == 'eliminado':
            return {"error": "La cuenta ha sido eliminada permanentemente"}, 410

        usuario.estado_cuenta = 'desactivado'
        usuario.fecha_desactivacion = datetime.utcnow()
        try:
            db.session.commit()
            print(f"‚ö†Ô∏è Cuenta desactivada: usuario {usuario_id}")
            return {"mensaje": "Cuenta desactivada correctamente. Tienes 30 d√≠as para reactivarla."}, 200
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al desactivar cuenta {usuario_id}: {e}")
            return {"error": "Error al guardar el estado de desactivaci√≥n"}, 500

    def reactivar_cuenta(self, usuario_id, password):
        """Reactiva una cuenta desactivada si est√° dentro del per√≠odo de 30 d√≠as"""
        usuario = Usuario.query.get(usuario_id)
        if not usuario:
            return {"error": "Usuario no encontrado"}, 404

        if usuario.estado_cuenta != 'desactivado':
            if usuario.estado_cuenta == 'activo':
                return {"mensaje": "La cuenta ya est√° activa"}, 200
            elif usuario.estado_cuenta == 'eliminado':
                return {"error": "Esta cuenta ha sido eliminada permanentemente"}, 410
            else:
                return {"error": f"Estado de cuenta desconocido: '{usuario.estado_cuenta}'"}, 400

        if not usuario.check_password(password):
            return {"error": "Contrase√±a incorrecta"}, 401

        # Verificar per√≠odo de 30 d√≠as
        if usuario.fecha_desactivacion:
            if isinstance(usuario.fecha_desactivacion, datetime):
                dias_transcurridos = (datetime.utcnow() - usuario.fecha_desactivacion).days
                if dias_transcurridos > 30:
                    return {"error": "El per√≠odo de 30 d√≠as para reactivar ha expirado"}, 410
            else:
                print(f"‚ö†Ô∏è Fecha de desactivaci√≥n inv√°lida para usuario {usuario_id}")
                return {"error": "No se pudo verificar el per√≠odo de reactivaci√≥n"}, 500
        else:
            print(f"‚ö†Ô∏è Intento de reactivar sin fecha de desactivaci√≥n: usuario {usuario_id}")
            return {"error": "Falta informaci√≥n para verificar el per√≠odo"}, 500

        usuario.estado_cuenta = 'activo'
        usuario.fecha_desactivacion = None
        try:
            db.session.commit()
            print(f"‚úÖ Cuenta reactivada: usuario {usuario_id}")
            return {"mensaje": "Cuenta reactivada correctamente"}, 200
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al reactivar cuenta {usuario_id}: {e}")
            return {"error": "Error al guardar el estado de reactivaci√≥n"}, 500

    # ========================================
    # RECUPERACI√ìN DE CONTRASE√ëA
    # ========================================
    def solicitar_recuperacion_password(self, correo):
        """Genera un token seguro y env√≠a correo para restablecer contrase√±a"""
        usuario = Usuario.query.filter_by(correo=correo).first()
        if not usuario:
            print(f"‚ÑπÔ∏è Solicitud de recuperaci√≥n para correo no existente: {correo}")
            return {"mensaje": "Si tu correo est√° registrado, recibir√°s instrucciones."}, 200

        token = secrets.token_urlsafe(32)
        usuario.token_recuperacion = token
        usuario.expira_token_recuperacion = datetime.utcnow() + timedelta(hours=1)
        
        try:
            db.session.commit()
            enviar_recuperacion_password(correo, token)
            print(f"üîë Token de recuperaci√≥n generado para {correo}")
            return {"mensaje": "Si tu correo est√° registrado, recibir√°s instrucciones."}, 200
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al solicitar recuperaci√≥n para {correo}: {str(e)}")
            return {"mensaje": "Ocurri√≥ un error. Intenta de nuevo m√°s tarde."}, 500

    def validar_token_recuperacion(self, token):
        """Valida si un token de recuperaci√≥n es v√°lido y no ha expirado"""
        usuario = Usuario.query.filter_by(token_recuperacion=token).first()
        
        if not usuario or not usuario.expira_token_recuperacion or \
           usuario.expira_token_recuperacion < datetime.utcnow():
            return {"error": "El enlace es inv√°lido o ha expirado. Solicita uno nuevo."}, 400
            
        return {"mensaje": "Token v√°lido"}, 200

    def restablecer_password(self, token, nueva_password):
        """Restablece la contrase√±a usando un token v√°lido"""
        usuario = Usuario.query.filter_by(token_recuperacion=token).first()
        
        if not usuario or not usuario.expira_token_recuperacion or \
           usuario.expira_token_recuperacion < datetime.utcnow():
            return {"error": "El enlace es inv√°lido o ha expirado."}, 400

        if len(nueva_password) < 8:
            return {"error": "La nueva contrase√±a debe tener al menos 8 caracteres"}, 400

        try:
            usuario.set_password(nueva_password)
            usuario.token_recuperacion = None
            usuario.expira_token_recuperacion = None
            db.session.commit()
            print(f"‚úÖ Contrase√±a restablecida para usuario {usuario.id}")
            return {"mensaje": "Tu contrase√±a ha sido restablecida. Ya puedes iniciar sesi√≥n."}, 200
        except Exception as e:
            db.session.rollback()
            print(f"‚ùå Error al restablecer contrase√±a: {str(e)}")
            return {"error": "Error al guardar la nueva contrase√±a"}, 500

    # ========================================
    # UTILIDAD INTERNA
    # ========================================
    def generar_id_publico(self, nombre, primer_apellido, segundo_apellido, idioma, nivel):
        """
        Genera un ID p√∫blico √∫nico y legible.
        Formato: YY+IDIOMA(3)+INICIALES(3)+NIVEL(2)
        Ejemplo: 25INGPRAA1
        """
        a√±o = str(datetime.now().year)[-2:]
        idioma_codigo = idioma[:3].upper() if idioma else "XXX"
        
        i1 = primer_apellido[0].upper() if primer_apellido else ""
        i2 = segundo_apellido[0].upper() if segundo_apellido else ""
        i3 = nombre[0].upper() if nombre else ""
        iniciales = f"{i1}{i2}{i3}"[:3].ljust(3, 'X')

        nivel_codigo = nivel.upper() if nivel else "XX"

        base_id = f"{a√±o}{idioma_codigo}{iniciales}{nivel_codigo}"
        
        # Manejo de colisiones
        contador = 0
        id_publico_final = base_id
        while Usuario.query.filter_by(id_publico=id_publico_final).first() or \
              PerfilUsuario.query.filter_by(id_publico=id_publico_final).first():
            contador += 1
            id_publico_final = f"{base_id}{contador}"
            if contador > 99:
                print(f"‚ö†Ô∏è Problema generando ID √∫nico para base {base_id}")
                id_publico_final = f"{base_id}{secrets.token_hex(2).upper()}"
                break

        return id_publico_final


================================================================================
# ARCHIVO: back-end/test_password.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_password.py
================================================================================

# back-end/test_password.py
from app import create_app
from models.usuario import Usuario

def test_login(correo, password):
    app = create_app()
    
    with app.app_context():
        usuario = Usuario.query.filter_by(correo=correo).first()
        
        if not usuario:
            print(f"‚ùå Usuario con correo {correo} NO existe")
            return
        
        print(f"‚úÖ Usuario encontrado:")
        print(f"   - ID: {usuario.id}")
        print(f"   - Nombre: {usuario.nombre}")
        print(f"   - Correo: {usuario.correo}")
        print(f"   - Rol: {usuario.rol}")
        print(f"   - Verificado: {usuario.correo_verificado}")
        print(f"   - Hash almacenado: {usuario.contrasena_hash[:50]}...")
        
        print(f"\nüîê Probando contrase√±a...")
        if usuario.check_password(password):
            print("‚úÖ ¬°Contrase√±a CORRECTA!")
        else:
            print("‚ùå Contrase√±a INCORRECTA")
            print("\nIntenta registrarte de nuevo o usar recuperaci√≥n de contrase√±a")

if __name__ == "__main__":
    # Cambia estos valores por los tuyos
    correo = input("Correo: ")
    password = input("Contrase√±a: ")
    test_login(correo, password)


================================================================================
# ARCHIVO: back-end/test_routes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_routes.py
================================================================================

# En la consola de Python o crear un archivo test_routes.py
from app import create_app

app = create_app()

with app.app_context():
    print("Rutas disponibles:")
    for rule in app.url_map.iter_rules():
        if '/api/usuario' in str(rule):
            print(f"  {rule.methods} {rule}")

# back-end/url/test_routes.py


================================================================================
# ARCHIVO: back-end/url/contenido/contenido_txt.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/contenido/contenido_txt.py
================================================================================

# download_project_content.py
import requests
import os
import argparse
import json
from datetime import datetime
from colorama import Fore, Style, init
import time
import re

init(autoreset=True)

def sanitize_filename(filename):
    """Limpia el nombre de archivo para que sea v√°lido en sistemas de archivos"""
    return re.sub(r'[<>:"/\\|?*]', '_', filename)

def download_file_content(url, max_retries=3):
    """Descarga el contenido de un archivo con reintentos"""
    for attempt in range(max_retries):
        try:
            response = requests.get(url, timeout=30)
            if response.status_code == 200:
                return response.text
            elif response.status_code == 404:
                return f"# ERROR: Archivo no encontrado (404)\n# URL: {url}"
            elif response.status_code == 403:
                time.sleep(2)  # Esperar por rate limiting
                continue
            else:
                return f"# ERROR: C√≥digo {response.status_code}\n# URL: {url}"
        except requests.exceptions.RequestException as e:
            if attempt < max_retries - 1:
                time.sleep(1)
                continue
            return f"# ERROR: {str(e)}\n# URL: {url}"
    
    return f"# ERROR: Fallo despu√©s de {max_retries} intentos\n# URL: {url}"

def get_project_structure(user, repo, branch="main"):
    """Obtiene la estructura del proyecto desde GitHub API"""
    url = f"https://api.github.com/repos/{user}/{repo}/git/trees/{branch}?recursive=1"
    
    token = os.getenv("GITHUB_TOKEN")
    headers = {"Authorization": f"token {token}"} if token else {}
    
    response = requests.get(url, headers=headers)
    if response.status_code != 200:
        print(f"{Fore.RED}‚ùå Error {response.status_code} al acceder al repositorio.{Style.RESET_ALL}")
        return []
    
    return response.json().get('tree', [])

def download_project_content(user, repo, branch="main", output_dir="project_content"):
    """Descarga el contenido completo del proyecto"""
    
    # Crear directorio de salida
    if not os.path.exists(output_dir):
        os.makedirs(output_dir)
    
    # Obtener estructura del proyecto
    tree = get_project_structure(user, repo, branch)
    if not tree:
        return
    
    # Patrones para ignorar
    ignore_patterns = [
        'node_modules/', '__pycache__/', '.next/', 'venv/', 'env/', '.git/',
        'dist/', 'build/', '.env', 'package-lock.json', 'yarn.lock',
        '.vercel/', 'out/', '.gitignore', '.DS_Store', 'thumbs.db',
        '*.pyc', '*.log', '*.tmp'
    ]
    
    # Extensiones de archivo a procesar
    text_extensions = {
        '.py', '.tsx', '.ts', '.jsx', '.js', '.css', '.md', '.txt', 
        '.json', '.yml', '.yaml', '.xml', '.html', '.htm', '.sql',
        '.sh', '.bat', '.ps1', '.config', '.toml', '.ini'
    }
    
    backend_files = []
    frontend_files = []
    docs_files = []
    other_files = []
    
    print(f"\nüîç Escaneando proyecto: {Fore.CYAN}{repo}{Style.RESET_ALL}")
    print(f"üìÅ Descargando contenido a: {output_dir}/\n")
    
    total_files = 0
    for item in tree:
        path = item['path']
        
        # Ignorar archivos no deseados
        if any(pattern in path for pattern in ignore_patterns):
            continue
        
        # Solo procesar archivos de texto
        file_ext = os.path.splitext(path)[1].lower()
        if file_ext not in text_extensions:
            continue
        
        total_files += 1
        raw_url = f"https://raw.githubusercontent.com/{user}/{repo}/{branch}/{path}"
        
        # Clasificar archivos
        if path.startswith('back-end/'):
            backend_files.append({'path': path, 'url': raw_url})
            print(f"{Fore.GREEN}üêç Backend:{Style.RESET_ALL} {path}")
        elif path.startswith('front-end/'):
            frontend_files.append({'path': path, 'url': raw_url})
            print(f"{Fore.MAGENTA}‚öõÔ∏è  Frontend:{Style.RESET_ALL} {path}")
        elif path.startswith('docs/'):
            docs_files.append({'path': path, 'url': raw_url})
            print(f"{Fore.CYAN}üìò Docs:{Style.RESET_ALL} {path}")
        else:
            other_files.append({'path': path, 'url': raw_url})
            print(f"{Fore.YELLOW}üìÑ Otros:{Style.RESET_ALL} {path}")
    
    print(f"\nüìä Total de archivos a descargar: {total_files}")
    
    # Descargar y guardar contenido
    download_and_save_files(backend_files, "backend", output_dir)
    download_and_save_files(frontend_files, "frontend", output_dir)
    download_and_save_files(docs_files, "docs", output_dir)
    download_and_save_files(other_files, "other", output_dir)
    
    # Crear archivos consolidados
    create_consolidated_files(backend_files, frontend_files, docs_files, other_files, output_dir)
    
    return {
        "backend": backend_files,
        "frontend": frontend_files,
        "docs": docs_files,
        "other": other_files
    }

def download_and_save_files(files, category, output_dir):
    """Descarga y guarda archivos de una categor√≠a espec√≠fica"""
    if not files:
        return
    
    category_dir = os.path.join(output_dir, category)
    if not os.path.exists(category_dir):
        os.makedirs(category_dir)
    
    print(f"\nüì• Descargando {len(files)} archivos de {category}...")
    
    for i, file_info in enumerate(files, 1):
        path = file_info['path']
        url = file_info['url']
        
        # Crear nombre de archivo seguro
        safe_filename = sanitize_filename(path.replace('/', '_')) + '.txt'
        file_path = os.path.join(category_dir, safe_filename)
        
        # Descargar contenido
        content = download_file_content(url)
        
        # Guardar con metadatos
        with open(file_path, 'w', encoding='utf-8') as f:
            f.write(f"# ARCHIVO: {path}\n")
            f.write(f"# URL: {url}\n")
            f.write(f"# FECHA DESCARGA: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            f.write("# " + "=" * 50 + "\n\n")
            f.write(content)
        
        print(f"  [{i}/{len(files)}] ‚úÖ {safe_filename}")
        
        # Peque√±a pausa para no saturar GitHub
        time.sleep(0.1)

def create_consolidated_files(backend, frontend, docs, other, output_dir):
    """Crea archivos consolidados por categor√≠a"""
    print(f"\nüì¶ Creando archivos consolidados...")
    
    # Backend consolidado
    if backend:
        with open(os.path.join(output_dir, 'BACKEND_COMPLETO.txt'), 'w', encoding='utf-8') as f:
            f.write("# BACKEND COMPLETO - SpeakLexi\n")
            f.write(f"# Total archivos: {len(backend)}\n")
            f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
            
            for file_info in backend:
                f.write(f"\n{'='*80}\n")
                f.write(f"# ARCHIVO: {file_info['path']}\n")
                f.write(f"# URL: {file_info['url']}\n")
                f.write(f"{'='*80}\n\n")
                content = download_file_content(file_info['url'])
                f.write(content)
                f.write("\n\n")
        print("  ‚úÖ BACKEND_COMPLETO.txt")
    
    # Frontend consolidado
    if frontend:
        with open(os.path.join(output_dir, 'FRONTEND_COMPLETO.txt'), 'w', encoding='utf-8') as f:
            f.write("# FRONTEND COMPLETO - SpeakLexi\n")
            f.write(f"# Total archivos: {len(frontend)}\n")
            f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
            
            for file_info in frontend:
                f.write(f"\n{'='*80}\n")
                f.write(f"# ARCHIVO: {file_info['path']}\n")
                f.write(f"# URL: {file_info['url']}\n")
                f.write(f"{'='*80}\n\n")
                content = download_file_content(file_info['url'])
                f.write(content)
                f.write("\n\n")
        print("  ‚úÖ FRONTEND_COMPLETO.txt")
    
    # Proyecto completo
    all_files = backend + frontend + docs + other
    if all_files:
        with open(os.path.join(output_dir, 'PROYECTO_COMPLETO.txt'), 'w', encoding='utf-8') as f:
            f.write("# PROYECTO COMPLETO - SpeakLexi\n")
            f.write(f"# Backend: {len(backend)} archivos\n")
            f.write(f"# Frontend: {len(frontend)} archivos\n")
            f.write(f"# Docs: {len(docs)} archivos\n")
            f.write(f"# Otros: {len(other)} archivos\n")
            f.write(f"# Total: {len(all_files)} archivos\n")
            f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
            
            for category, files in [
                ("BACKEND", backend),
                ("FRONTEND", frontend),
                ("DOCUMENTACI√ìN", docs),
                ("OTROS", other)
            ]:
                if files:
                    f.write(f"\n{'#'*80}\n")
                    f.write(f"# {category}\n")
                    f.write(f"{'#'*80}\n\n")
                    
                    for file_info in files:
                        f.write(f"\n{'='*80}\n")
                        f.write(f"# ARCHIVO: {file_info['path']}\n")
                        f.write(f"# URL: {file_info['url']}\n")
                        f.write(f"{'='*80}\n\n")
                        content = download_file_content(file_info['url'])
                        f.write(content)
                        f.write("\n\n")
        print("  ‚úÖ PROYECTO_COMPLETO.txt")
    
    # Metadata JSON
    metadata = {
        "project": "SpeakLexi",
        "backend_files": len(backend),
        "frontend_files": len(frontend),
        "docs_files": len(docs),
        "other_files": len(other),
        "total_files": len(all_files),
        "generated": datetime.now().strftime('%Y-%m-%d %H:%M:%S'),
        "files": {
            "backend": [f["path"] for f in backend],
            "frontend": [f["path"] for f in frontend],
            "docs": [f["path"] for f in docs],
            "other": [f["path"] for f in other]
        }
    }
    
    with open(os.path.join(output_dir, 'metadata.json'), 'w', encoding='utf-8') as f:
        json.dump(metadata, f, indent=2, ensure_ascii=False)
    print("  ‚úÖ metadata.json")

def main():
    parser = argparse.ArgumentParser(description="Descarga el contenido completo de un repositorio GitHub")
    parser.add_argument("user", help="Usuario o organizaci√≥n de GitHub")
    parser.add_argument("repo", help="Nombre del repositorio")
    parser.add_argument("--branch", default="main", help="Rama del repositorio")
    parser.add_argument("--output", default="project_content", help="Directorio de salida")
    
    args = parser.parse_args()
    
    start_time = time.time()
    
    try:
        result = download_project_content(
            args.user, 
            args.repo, 
            args.branch, 
            args.output
        )
        
        end_time = time.time()
        duration = end_time - start_time
        
        print(f"\n{'='*60}")
        print("üéâ DESCARGA COMPLETADA")
        print(f"{'='*60}")
        print(f"üìÅ Contenido guardado en: {args.output}/")
        print(f"‚è±Ô∏è  Tiempo total: {duration:.2f} segundos")
        print(f"üìä Archivos descargados:")
        print(f"   üêç Backend: {len(result['backend'])} archivos")
        print(f"   ‚öõÔ∏è  Frontend: {len(result['frontend'])} archivos")
        print(f"   üìò Docs: {len(result['docs'])} archivos")
        print(f"   üìÑ Otros: {len(result['other'])} archivos")
        print(f"   üì¶ Total: {sum(len(v) for v in result.values())} archivos")
        print(f"\nüìã Archivos generados:")
        print(f"   üìÑ PROYECTO_COMPLETO.txt - Todo el c√≥digo en un archivo")
        print(f"   üìÑ BACKEND_COMPLETO.txt  - Solo backend")
        print(f"   üìÑ FRONTEND_COMPLETO.txt - Solo frontend")
        print(f"   üìÅ {args.output}/backend/  - Archivos individuales backend")
        print(f"   üìÅ {args.output}/frontend/ - Archivos individuales frontend")
        print(f"   üìÅ {args.output}/docs/     - Archivos individuales docs")
        print(f"   üìÑ metadata.json - Metadatos del proyecto")
        print(f"\nüí° Ahora puedes compartir los .txt con cualquier IA")
        print(f"{'='*60}")
        
    except Exception as e:
        print(f"{Fore.RED}‚ùå Error durante la descarga: {str(e)}{Style.RESET_ALL}")

if __name__ == "__main__":
    main()


================================================================================
# ARCHIVO: back-end/url/crear_perfiles.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/crear_perfiles.py
================================================================================

"""
Script para crear perfiles faltantes de usuarios insertados manualmente
Ejecutar: python crear_perfiles_faltantes.py
"""

from app import app
from config.database import db
from models.usuario import Usuario, PerfilUsuario
from datetime import datetime

def crear_perfiles_faltantes():
    """Crea PerfilUsuario para todos los usuarios que no lo tengan"""
    
    with app.app_context():
        # Buscar usuarios sin perfil
        usuarios_sin_perfil = Usuario.query.filter(
            ~Usuario.perfil.has()  # No tiene perfil asociado
        ).all()
        
        if not usuarios_sin_perfil:
            print("‚úÖ Todos los usuarios ya tienen perfil")
            return
        
        print(f"üìã Encontrados {len(usuarios_sin_perfil)} usuarios sin perfil")
        
        creados = 0
        errores = 0
        
        for usuario in usuarios_sin_perfil:
            try:
                # Construir nombre completo
                nombre_completo = f"{usuario.nombre} {usuario.primer_apellido}"
                if usuario.segundo_apellido:
                    nombre_completo += f" {usuario.segundo_apellido}"
                
                # Crear perfil con valores por defecto
                nuevo_perfil = PerfilUsuario(
                    usuario_id=usuario.id,
                    nombre_completo=nombre_completo.strip(),
                    id_publico=usuario.id_publico or f"USER_{usuario.id}",
                    idioma="Ingl√©s",  # Valor por defecto
                    nivel_actual="A1",  # Valor por defecto
                    curso_actual="Ingl√©s - A1",
                    total_xp=0,
                    dias_racha=0,
                    ultima_actividad=datetime.utcnow()
                )
                
                db.session.add(nuevo_perfil)
                creados += 1
                
                print(f"‚úÖ Perfil creado para: {usuario.correo} (ID: {usuario.id})")
                
            except Exception as e:
                errores += 1
                print(f"‚ùå Error con usuario {usuario.id} ({usuario.correo}): {e}")
                db.session.rollback()
        
        # Guardar cambios
        try:
            db.session.commit()
            print(f"\nüéâ Proceso completado:")
            print(f"   - Perfiles creados: {creados}")
            print(f"   - Errores: {errores}")
        except Exception as e:
            db.session.rollback()
            print(f"\n‚ùå Error al guardar cambios: {e}")

def verificar_perfiles():
    """Verifica el estado actual de usuarios y perfiles"""
    
    with app.app_context():
        total_usuarios = Usuario.query.count()
        total_perfiles = PerfilUsuario.query.count()
        usuarios_sin_perfil = Usuario.query.filter(~Usuario.perfil.has()).count()
        
        print("\nüìä Estado actual:")
        print(f"   - Total usuarios: {total_usuarios}")
        print(f"   - Total perfiles: {total_perfiles}")
        print(f"   - Usuarios sin perfil: {usuarios_sin_perfil}")
        
        if usuarios_sin_perfil > 0:
            print("\n‚ö†Ô∏è  Hay usuarios sin perfil que necesitan ser corregidos")
        else:
            print("\n‚úÖ Todos los usuarios tienen perfil")

if __name__ == "__main__":
    print("üîß CORRECCI√ìN DE PERFILES FALTANTES\n")
    
    # Verificar estado inicial
    verificar_perfiles()
    
    # Crear perfiles faltantes
    print("\n" + "="*50)
    crear_perfiles_faltantes()
    
    # Verificar estado final
    print("\n" + "="*50)
    verificar_perfiles()


================================================================================
# ARCHIVO: back-end/url/generar_hashes.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/generar_hashes.py
================================================================================

"""
Script para generar hashes de contrase√±a compatibles con Werkzeug/Flask
Ejecutar: python generate_hashes.py
"""

from werkzeug.security import generate_password_hash

# Contrase√±as de los usuarios demo
usuarios = {
    'estudiante@speaklexi.com': 'estudiante123',
    'profesor@speaklexi.com': 'profesor123',
    'admin@speaklexi.com': 'admin123',
    'mantenimiento@speaklexi.com': 'mantenimiento123'
}

print("=" * 70)
print("GENERANDO HASHES SCRYPT PARA USUARIOS DEMO")
print("=" * 70)
print()

for email, password in usuarios.items():
    hash_password = generate_password_hash(password, method='scrypt')
    print(f"-- {email}")
    print(f"-- Password: {password}")
    print(f"'{hash_password}',")
    print()

print("=" * 70)
print("SCRIPT SQL COMPLETO")
print("=" * 70)
print()

sql_template = """
DELETE FROM usuarios WHERE correo IN (
    'estudiante@speaklexi.com',
    'profesor@speaklexi.com', 
    'admin@speaklexi.com',
    'mantenimiento@speaklexi.com'
);

INSERT INTO usuarios (
    id_publico,
    nombre,
    primer_apellido,
    segundo_apellido,
    correo,
    contrasena_hash,
    rol,
    correo_verificado,
    estado_cuenta,
    creado_en,
    actualizado_en
) VALUES
"""

print(sql_template)

# Generar inserts
inserts = []
roles = [
    ('USR-001', 'Estudiante', 'Demo', 'estudiante@speaklexi.com', 'alumno'),
    ('USR-002', 'Profesor', 'Demo', 'profesor@speaklexi.com', 'profesor'),
    ('USR-003', 'Admin', 'Demo', 'admin@speaklexi.com', 'admin'),
    ('USR-004', 'Mantenimiento', 'Demo', 'mantenimiento@speaklexi.com', 'mantenimiento')
]

for id_pub, nombre, apellido, email, rol in roles:
    password = usuarios[email]
    hash_pass = generate_password_hash(password, method='scrypt')
    
    insert = f"""(
    '{id_pub}',
    '{nombre}',
    '{apellido}',
    '',
    '{email}',
    '{hash_pass}',
    '{rol}',
    TRUE,
    'activo',
    NOW(),
    NOW()
)"""
    inserts.append(insert)

print(",\n".join(inserts) + ";")
print()
print("-- ‚úÖ Hashes generados con scrypt (compatibles con Werkzeug)")


================================================================================
# ARCHIVO: back-end/url/get_all_urls.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls.py
================================================================================

# get_all_urls_fixed.py
import requests
from datetime import datetime

def get_tree(user, repo, branch="main"):
    url = f"https://api.github.com/repos/{user}/{repo}/git/trees/{branch}?recursive=1"
    response = requests.get(url)
    
    if response.status_code == 200:
        tree = response.json()
        
        backend_urls = []
        frontend_urls = []
        
        # Carpetas/archivos a IGNORAR
        ignore_patterns = [
            'node_modules/',
            '__pycache__/',
            '.next/',
            'venv/',
            'env/',
            '.git/',
            'dist/',
            'build/',
            '.env',
            'package-lock.json',
            'yarn.lock',
            '.vercel/',
            'out/'
        ]
        
        print("üîç Escaneando proyecto SpeakLexi...\n")
        
        for item in tree['tree']:
            path = item['path']
            
            # Ignorar patrones
            if any(pattern in path for pattern in ignore_patterns):
                continue
            
            raw_url = f"https://raw.githubusercontent.com/{user}/{repo}/{branch}/{path}"
            
            # Backend Python (back-end con gui√≥n)
            if path.startswith('back-end/') and path.endswith('.py'):
                print(f"üêç Backend: {path}")
                backend_urls.append({
                    'path': path,
                    'url': raw_url
                })
            
            # Frontend (front-end con gui√≥n)
            elif path.startswith('front-end/'):
                # Next.js/React/TypeScript files
                if any(path.endswith(ext) for ext in ['.tsx', '.ts', '.jsx', '.js', '.css']):
                    # Ignorar archivos de configuraci√≥n
                    if not any(config in path for config in ['next.config', 'postcss.config', 'tailwind.config']):
                        print(f"‚öõÔ∏è  Frontend: {path}")
                        frontend_urls.append({
                            'path': path,
                            'url': raw_url
                        })
        
        print("\n" + "="*60)
        print(f"‚úÖ Backend: {len(backend_urls)} archivos")
        print(f"‚úÖ Frontend: {len(frontend_urls)} archivos")
        print(f"‚úÖ Total: {len(backend_urls) + len(frontend_urls)} archivos")
        print("="*60)
        
        # Guardar Backend organizado
        if backend_urls:
            models = [u for u in backend_urls if '/models/' in u['path']]
            services = [u for u in backend_urls if '/services/' in u['path']]
            routes = [u for u in backend_urls if '/routes/' in u['path']]
            config = [u for u in backend_urls if '/config/' in u['path']]
            utils = [u for u in backend_urls if '/utils/' in u['path']]
            other = [u for u in backend_urls if not any(x in u['path'] for x in ['/models/', '/services/', '/routes/', '/config/', '/utils/'])]
            
            with open('urls_backend.txt', 'w', encoding='utf-8') as f:
                f.write(f"# BACKEND - SpeakLexi (Python/Flask)\n")
                f.write(f"# Total: {len(backend_urls)} archivos\n")
                f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
                
                if config:
                    f.write(f"# ========== CONFIG ({len(config)}) ==========\n")
                    for item in config:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if models:
                    f.write(f"# ========== MODELS ({len(models)}) ==========\n")
                    for item in models:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if services:
                    f.write(f"# ========== SERVICES ({len(services)}) ==========\n")
                    for item in services:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if routes:
                    f.write(f"# ========== ROUTES ({len(routes)}) ==========\n")
                    for item in routes:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if utils:
                    f.write(f"# ========== UTILS ({len(utils)}) ==========\n")
                    for item in utils:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if other:
                    f.write(f"# ========== OTROS ({len(other)}) ==========\n")
                    for item in other:
                        f.write(item['url'] + '\n')
                    f.write('\n')
            
            print("\nüíæ Backend: urls_backend.txt")
        
        # Guardar Frontend organizado
        if frontend_urls:
            pages = [u for u in frontend_urls if '/app/' in u['path']]
            components = [u for u in frontend_urls if '/components/' in u['path']]
            lib = [u for u in frontend_urls if '/lib/' in u['path']]
            styles = [u for u in frontend_urls if '.css' in u['path'] or '/styles/' in u['path']]
            other = [u for u in frontend_urls if not any(x in u['path'] for x in ['/app/', '/components/', '/lib/', '.css', '/styles/'])]
            
            with open('urls_frontend.txt', 'w', encoding='utf-8') as f:
                f.write(f"# FRONTEND - SpeakLexi (Next.js 15/React 19/TypeScript)\n")
                f.write(f"# Total: {len(frontend_urls)} archivos\n")
                f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
                
                if pages:
                    f.write(f"# ========== PAGES/APP ROUTER ({len(pages)}) ==========\n")
                    for item in pages:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if components:
                    f.write(f"# ========== COMPONENTS ({len(components)}) ==========\n")
                    for item in components:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if lib:
                    f.write(f"# ========== LIB/UTILS ({len(lib)}) ==========\n")
                    for item in lib:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if styles:
                    f.write(f"# ========== STYLES ({len(styles)}) ==========\n")
                    for item in styles:
                        f.write(item['url'] + '\n')
                    f.write('\n')
                
                if other:
                    f.write(f"# ========== OTROS ({len(other)}) ==========\n")
                    for item in other:
                        f.write(item['url'] + '\n')
                    f.write('\n')
            
            print("üíæ Frontend: urls_frontend.txt")
        
        # Archivo completo
        with open('urls_completo.txt', 'w', encoding='utf-8') as f:
            f.write(f"# PROYECTO COMPLETO - SpeakLexi\n")
            f.write(f"# Backend: {len(backend_urls)} archivos\n")
            f.write(f"# Frontend: {len(frontend_urls)} archivos\n")
            f.write(f"# Total: {len(backend_urls) + len(frontend_urls)} archivos\n")
            f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
            
            f.write("# " + "="*58 + "\n")
            f.write("# BACKEND\n")
            f.write("# " + "="*58 + "\n\n")
            for item in backend_urls:
                f.write(item['url'] + '\n')
            
            f.write("\n# " + "="*58 + "\n")
            f.write("# FRONTEND\n")
            f.write("# " + "="*58 + "\n\n")
            for item in frontend_urls:
                f.write(item['url'] + '\n')
        
        print("üíæ Completo: urls_completo.txt")
        
        return backend_urls, frontend_urls
    else:
        print(f"‚ùå Error al acceder al repositorio: {response.status_code}")
        print("Verifica que el repositorio sea p√∫blico")
        return [], []

if __name__ == "__main__":
    backend, frontend = get_tree("sTr4yDev", "speakLexi", "main")
    
    print("\n" + "="*60)
    print("üéØ Archivos generados:")
    print("   üìÑ urls_backend.txt  - Solo backend organizado")
    print("   üìÑ urls_frontend.txt - Solo frontend organizado")
    print("   üìÑ urls_completo.txt - Todo junto")
    print("\nüí° Copia el contenido del archivo que quieras revisar")
    print("   y p√©galo aqu√≠ en el chat para an√°lisis completo üöÄ")
    print("="*60)


================================================================================
# ARCHIVO: back-end/url/get_all_urls_opt.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls_opt.py
================================================================================

# get_all_urls_optimized.py
import requests
import os
import argparse
import json
from datetime import datetime
from colorama import Fore, Style, init

init(autoreset=True)

def get_tree(user, repo, branch="main"):
    """Obtiene todos los archivos del repositorio (modo recursivo)"""
    url = f"https://api.github.com/repos/{user}/{repo}/git/trees/{branch}?recursive=1"

    # Token opcional (para evitar l√≠mites de API)
    token = os.getenv("GITHUB_TOKEN")
    headers = {"Authorization": f"token {token}"} if token else {}

    response = requests.get(url, headers=headers)
    if response.status_code != 200:
        print(f"{Fore.RED}‚ùå Error {response.status_code} al acceder al repositorio.{Style.RESET_ALL}")
        if response.status_code == 403:
            print("‚ö†Ô∏è L√≠mite de solicitudes alcanzado o repositorio privado.")
        print("Verifica que el repositorio sea p√∫blico o usa un token con GITHUB_TOKEN.\n")
        return [], [], []

    tree = response.json()
    backend_urls, frontend_urls, docs_urls = [], [], []

    # Carpetas/archivos a IGNORAR
    ignore_patterns = [
        'node_modules/', '__pycache__/', '.next/', 'venv/', 'env/', '.git/',
        'dist/', 'build/', '.env', 'package-lock.json', 'yarn.lock',
        '.vercel/', 'out/'
    ]

    print(f"\nüîç Escaneando proyecto: {Fore.CYAN}{repo}{Style.RESET_ALL}\n")

    for item in tree.get('tree', []):
        path = item['path']
        if any(pattern in path for pattern in ignore_patterns):
            continue

        raw_url = f"https://raw.githubusercontent.com/{user}/{repo}/{branch}/{path}"

        # Backend
        if path.startswith('back-end/') and path.endswith('.py'):
            print(f"{Fore.GREEN}üêç Backend:{Style.RESET_ALL} {path}")
            backend_urls.append({'path': path, 'url': raw_url})

        # Frontend
        elif path.startswith('front-end/'):
            if any(path.endswith(ext) for ext in ['.tsx', '.ts', '.jsx', '.js', '.css']):
                if not any(cfg in path for cfg in ['next.config', 'postcss.config', 'tailwind.config']):
                    print(f"{Fore.MAGENTA}‚öõÔ∏è  Frontend:{Style.RESET_ALL} {path}")
                    frontend_urls.append({'path': path, 'url': raw_url})

        # Docs
        elif path.startswith('docs/'):
            if any(path.endswith(ext) for ext in ['.md', '.txt', '.pdf']):
                print(f"{Fore.CYAN}üìò Docs:{Style.RESET_ALL} {path}")
                docs_urls.append({'path': path, 'url': raw_url})

    # ==== Resumen ====
    print("\n" + "="*60)
    print(f"‚úÖ Backend:  {len(backend_urls)} archivos")
    print(f"‚úÖ Frontend: {len(frontend_urls)} archivos")
    print(f"‚úÖ Docs:     {len(docs_urls)} archivos")
    print(f"‚úÖ Total:    {len(backend_urls) + len(frontend_urls) + len(docs_urls)} archivos")
    print("="*60)

    # ==== Guardado de archivos ====
    save_urls("urls_backend.txt", backend_urls, "BACKEND - SpeakLexi (Python/Flask)")
    save_urls("urls_frontend.txt", frontend_urls, "FRONTEND - SpeakLexi (Next.js/React/TypeScript)")
    save_urls("urls_docs.txt", docs_urls, "DOCUMENTACI√ìN - SpeakLexi")

    # ==== Archivo completo ====
    save_combined(backend_urls, frontend_urls, docs_urls)

    # ==== JSON Export ====
    with open('urls_all.json', 'w', encoding='utf-8') as jf:
        json.dump({
            "backend": backend_urls,
            "frontend": frontend_urls,
            "docs": docs_urls,
            "generated": datetime.now().strftime('%Y-%m-%d %H:%M:%S')
        }, jf, indent=2, ensure_ascii=False)
    print("üíæ JSON: urls_all.json")

    return backend_urls, frontend_urls, docs_urls


def save_urls(filename, urls, title):
    if not urls:
        return
    with open(filename, 'w', encoding='utf-8') as f:
        f.write(f"# {title}\n")
        f.write(f"# Total: {len(urls)} archivos\n")
        f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")
        for item in urls:
            f.write(item['url'] + '\n')
    print(f"üíæ {filename}")


def save_combined(backend, frontend, docs):
    total = len(backend) + len(frontend) + len(docs)
    with open('urls_completo.txt', 'w', encoding='utf-8') as f:
        f.write(f"# PROYECTO COMPLETO - SpeakLexi\n")
        f.write(f"# Backend: {len(backend)} archivos\n")
        f.write(f"# Frontend: {len(frontend)} archivos\n")
        f.write(f"# Docs: {len(docs)} archivos\n")
        f.write(f"# Total: {total} archivos\n")
        f.write(f"# Generado: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n\n")

        for section, data in [
            ("BACKEND", backend),
            ("FRONTEND", frontend),
            ("DOCS", docs)
        ]:
            f.write("# " + "="*58 + "\n")
            f.write(f"# {section}\n")
            f.write("# " + "="*58 + "\n\n")
            for item in data:
                f.write(item['url'] + '\n')
            f.write("\n")

    print("üíæ Completo: urls_completo.txt")


# ==== MAIN ====
if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Genera URLs RAW de un repositorio de GitHub (organizadas por √°rea).")
    parser.add_argument("user", help="Usuario o organizaci√≥n de GitHub")
    parser.add_argument("repo", help="Nombre del repositorio")
    parser.add_argument("--branch", default="main", help="Rama del repositorio (por defecto: main)")
    args = parser.parse_args()

    backend, frontend, docs = get_tree(args.user, args.repo, args.branch)

    print("\n" + "="*60)
    print("üéØ Archivos generados:")
    print("   üìÑ urls_backend.txt  - Solo backend organizado")
    print("   üìÑ urls_frontend.txt - Solo frontend organizado")
    print("   üìÑ urls_docs.txt     - Solo documentaci√≥n")
    print("   üìÑ urls_completo.txt - Todo junto")
    print("   üìÑ urls_all.json     - Exportaci√≥n en JSON")
    print("\nüí° Usa un token de GitHub (export GITHUB_TOKEN=tu_token) si el repo es grande o privado üöÄ")
    print("="*60)



================================================================================
# ARCHIVO: back-end/url/get_front_end.py
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_front_end.py
================================================================================




================================================================================
# ARCHIVO: back-end/url/urls_all.json
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_all.json
================================================================================

{
  "backend": [
    {
      "path": "back-end/app.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/app.py"
    },
    {
      "path": "back-end/config/__init__.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/__init__.py"
    },
    {
      "path": "back-end/config/database.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/database.py"
    },
    {
      "path": "back-end/config/settings.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/settings.py"
    },
    {
      "path": "back-end/extensions.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/extensions.py"
    },
    {
      "path": "back-end/models/cursos.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/cursos.py"
    },
    {
      "path": "back-end/models/leccion.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/leccion.py"
    },
    {
      "path": "back-end/models/multimedia.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/multimedia.py"
    },
    {
      "path": "back-end/models/usuario.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/usuario.py"
    },
    {
      "path": "back-end/routes/__init__.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/__init__.py"
    },
    {
      "path": "back-end/routes/actividades_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/actividades_routes.py"
    },
    {
      "path": "back-end/routes/auth.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/auth.py"
    },
    {
      "path": "back-end/routes/curso_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/curso_routes.py"
    },
    {
      "path": "back-end/routes/leccion_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/leccion_routes.py"
    },
    {
      "path": "back-end/routes/multimedia_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/multimedia_routes.py"
    },
    {
      "path": "back-end/routes/usuario_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/usuario_routes.py"
    },
    {
      "path": "back-end/services/correo_service.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/correo_service.py"
    },
    {
      "path": "back-end/services/gestor_cursos.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_cursos.py"
    },
    {
      "path": "back-end/services/gestor_lecciones.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_lecciones.py"
    },
    {
      "path": "back-end/services/gestor_multimedia.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_multimedia.py"
    },
    {
      "path": "back-end/services/gestor_usuarios.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_usuarios.py"
    },
    {
      "path": "back-end/test_password.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_password.py"
    },
    {
      "path": "back-end/test_routes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_routes.py"
    },
    {
      "path": "back-end/url/crear_perfiles.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/crear_perfiles.py"
    },
    {
      "path": "back-end/url/generar_hashes.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/generar_hashes.py"
    },
    {
      "path": "back-end/url/get_all_urls.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls.py"
    },
    {
      "path": "back-end/url/get_all_urls_opt.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls_opt.py"
    },
    {
      "path": "back-end/url/get_front_end.py",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_front_end.py"
    }
  ],
  "frontend": [
    {
      "path": "front-end/app/admin/dashboard/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/dashboard/page.tsx"
    },
    {
      "path": "front-end/app/admin/lecciones/[id]/editar/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/[id]/editar/page.tsx"
    },
    {
      "path": "front-end/app/admin/lecciones/crear/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/crear/page.tsx"
    },
    {
      "path": "front-end/app/admin/lecciones/loading.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/loading.tsx"
    },
    {
      "path": "front-end/app/admin/lecciones/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/page.tsx"
    },
    {
      "path": "front-end/app/admin/usuarios/[id]/editar/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/[id]/editar/page.tsx"
    },
    {
      "path": "front-end/app/admin/usuarios/loading.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/loading.tsx"
    },
    {
      "path": "front-end/app/admin/usuarios/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/page.tsx"
    },
    {
      "path": "front-end/app/asignar-nivel/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/asignar-nivel/page.tsx"
    },
    {
      "path": "front-end/app/cambiar-curso/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cambiar-curso/page.tsx"
    },
    {
      "path": "front-end/app/clasificacion/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/clasificacion/page.tsx"
    },
    {
      "path": "front-end/app/correo-enviado/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/correo-enviado/page.tsx"
    },
    {
      "path": "front-end/app/cuenta-desactivada/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cuenta-desactivada/page.tsx"
    },
    {
      "path": "front-end/app/dashboard/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/dashboard/page.tsx"
    },
    {
      "path": "front-end/app/eliminar-cuenta/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/eliminar-cuenta/page.tsx"
    },
    {
      "path": "front-end/app/globals.css",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/globals.css"
    },
    {
      "path": "front-end/app/layout.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/layout.tsx"
    },
    {
      "path": "front-end/app/lecciones/[id]/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/[id]/page.tsx"
    },
    {
      "path": "front-end/app/lecciones/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/page.tsx"
    },
    {
      "path": "front-end/app/login/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/login/page.tsx"
    },
    {
      "path": "front-end/app/logros/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/logros/page.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/dashboard/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/dashboard/page.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/reportes/[id]/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/[id]/page.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/reportes/loading.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/loading.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/reportes/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/page.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/tareas/nueva/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/nueva/page.tsx"
    },
    {
      "path": "front-end/app/mantenimiento/tareas/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/page.tsx"
    },
    {
      "path": "front-end/app/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/page.tsx"
    },
    {
      "path": "front-end/app/perfil/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/perfil/page.tsx"
    },
    {
      "path": "front-end/app/profesor/dashboard/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/dashboard/page.tsx"
    },
    {
      "path": "front-end/app/profesor/estadisticas/[id]/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/[id]/page.tsx"
    },
    {
      "path": "front-end/app/profesor/estadisticas/loading.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/loading.tsx"
    },
    {
      "path": "front-end/app/profesor/estadisticas/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/page.tsx"
    },
    {
      "path": "front-end/app/profesor/planificacion/nuevo/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/nuevo/page.tsx"
    },
    {
      "path": "front-end/app/profesor/planificacion/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/page.tsx"
    },
    {
      "path": "front-end/app/profesor/retroalimentacion/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/retroalimentacion/page.tsx"
    },
    {
      "path": "front-end/app/progreso/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/progreso/page.tsx"
    },
    {
      "path": "front-end/app/recuperar-contrasena/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/recuperar-contrasena/page.tsx"
    },
    {
      "path": "front-end/app/registro/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/registro/page.tsx"
    },
    {
      "path": "front-end/app/restablecer-contrasena/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/page.tsx"
    },
    {
      "path": "front-end/app/restablecer-contrasena/reset-password-content.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/reset-password-content.tsx"
    },
    {
      "path": "front-end/app/verificar-email/page.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/verificar-email/page.tsx"
    },
    {
      "path": "front-end/components/admin/admin-stats.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/admin-stats.tsx"
    },
    {
      "path": "front-end/components/admin/create-lesson-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/create-lesson-form.tsx"
    },
    {
      "path": "front-end/components/admin/media-library-preview.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/media-library-preview.tsx"
    },
    {
      "path": "front-end/components/admin/quick-admin-actions.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/quick-admin-actions.tsx"
    },
    {
      "path": "front-end/components/admin/recent-lessons.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/recent-lessons.tsx"
    },
    {
      "path": "front-end/components/auth/level-assignment-flow.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/level-assignment-flow.tsx"
    },
    {
      "path": "front-end/components/auth/login-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/login-form.tsx"
    },
    {
      "path": "front-end/components/auth/recover-password-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/recover-password-form.tsx"
    },
    {
      "path": "front-end/components/auth/register-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/register-form.tsx"
    },
    {
      "path": "front-end/components/auth/verify-email-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/verify-email-form.tsx"
    },
    {
      "path": "front-end/components/dashboard/dashboard-header.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/dashboard-header.tsx"
    },
    {
      "path": "front-end/components/dashboard/progress-overview.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/progress-overview.tsx"
    },
    {
      "path": "front-end/components/dashboard/quick-actions.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/quick-actions.tsx"
    },
    {
      "path": "front-end/components/dashboard/recent-lessons.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/recent-lessons.tsx"
    },
    {
      "path": "front-end/components/dashboard/streak-card.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/streak-card.tsx"
    },
    {
      "path": "front-end/components/gamification/achievements-list.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/achievements-list.tsx"
    },
    {
      "path": "front-end/components/gamification/leaderboard-filters.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-filters.tsx"
    },
    {
      "path": "front-end/components/gamification/leaderboard-table.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-table.tsx"
    },
    {
      "path": "front-end/components/gamification/level-progress.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/level-progress.tsx"
    },
    {
      "path": "front-end/components/gamification/rewards-inventory.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/rewards-inventory.tsx"
    },
    {
      "path": "front-end/components/gamification/user-rank-card.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/user-rank-card.tsx"
    },
    {
      "path": "front-end/components/lessons/abandon-lesson-modal.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/abandon-lesson-modal.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/fill-blank-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/fill-blank-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/listen-repeat-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/listen-repeat-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/matching-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/matching-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/multiple-choice-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/multiple-choice-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/translation-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/translation-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/true-false-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/true-false-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/activities/word-order-activity.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/word-order-activity.tsx"
    },
    {
      "path": "front-end/components/lessons/completion-modal.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/completion-modal.tsx"
    },
    {
      "path": "front-end/components/lessons/lesson-filters.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-filters.tsx"
    },
    {
      "path": "front-end/components/lessons/lesson-list.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-list.tsx"
    },
    {
      "path": "front-end/components/lessons/lesson-viewer.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-viewer.tsx"
    },
    {
      "path": "front-end/components/maintenance/create-task-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/maintenance/create-task-form.tsx"
    },
    {
      "path": "front-end/components/profile/profile-settings.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/profile/profile-settings.tsx"
    },
    {
      "path": "front-end/components/teacher/create-planning-form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/create-planning-form.tsx"
    },
    {
      "path": "front-end/components/teacher/quick-teacher-actions.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/quick-teacher-actions.tsx"
    },
    {
      "path": "front-end/components/teacher/recent-feedback.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/recent-feedback.tsx"
    },
    {
      "path": "front-end/components/teacher/response-modal.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/response-modal.tsx"
    },
    {
      "path": "front-end/components/teacher/student-performance.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/student-performance.tsx"
    },
    {
      "path": "front-end/components/teacher/teacher-stats.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/teacher-stats.tsx"
    },
    {
      "path": "front-end/components/theme-provider.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/theme-provider.tsx"
    },
    {
      "path": "front-end/components/ui/accordion.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/accordion.tsx"
    },
    {
      "path": "front-end/components/ui/alert-dialog.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert-dialog.tsx"
    },
    {
      "path": "front-end/components/ui/alert.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert.tsx"
    },
    {
      "path": "front-end/components/ui/aspect-ratio.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/aspect-ratio.tsx"
    },
    {
      "path": "front-end/components/ui/avatar.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/avatar.tsx"
    },
    {
      "path": "front-end/components/ui/badge.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/badge.tsx"
    },
    {
      "path": "front-end/components/ui/breadcrumb.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/breadcrumb.tsx"
    },
    {
      "path": "front-end/components/ui/button-group.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button-group.tsx"
    },
    {
      "path": "front-end/components/ui/button.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button.tsx"
    },
    {
      "path": "front-end/components/ui/calendar.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/calendar.tsx"
    },
    {
      "path": "front-end/components/ui/card.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/card.tsx"
    },
    {
      "path": "front-end/components/ui/carousel.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/carousel.tsx"
    },
    {
      "path": "front-end/components/ui/chart.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/chart.tsx"
    },
    {
      "path": "front-end/components/ui/checkbox.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/checkbox.tsx"
    },
    {
      "path": "front-end/components/ui/collapsible.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/collapsible.tsx"
    },
    {
      "path": "front-end/components/ui/command.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/command.tsx"
    },
    {
      "path": "front-end/components/ui/context-menu.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/context-menu.tsx"
    },
    {
      "path": "front-end/components/ui/dialog.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dialog.tsx"
    },
    {
      "path": "front-end/components/ui/drawer.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/drawer.tsx"
    },
    {
      "path": "front-end/components/ui/dropdown-menu.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dropdown-menu.tsx"
    },
    {
      "path": "front-end/components/ui/empty.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/empty.tsx"
    },
    {
      "path": "front-end/components/ui/field.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/field.tsx"
    },
    {
      "path": "front-end/components/ui/form.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/form.tsx"
    },
    {
      "path": "front-end/components/ui/hover-card.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/hover-card.tsx"
    },
    {
      "path": "front-end/components/ui/input-group.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-group.tsx"
    },
    {
      "path": "front-end/components/ui/input-otp.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-otp.tsx"
    },
    {
      "path": "front-end/components/ui/input.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input.tsx"
    },
    {
      "path": "front-end/components/ui/item.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/item.tsx"
    },
    {
      "path": "front-end/components/ui/kbd.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/kbd.tsx"
    },
    {
      "path": "front-end/components/ui/label.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/label.tsx"
    },
    {
      "path": "front-end/components/ui/menubar.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/menubar.tsx"
    },
    {
      "path": "front-end/components/ui/navigation-menu.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/navigation-menu.tsx"
    },
    {
      "path": "front-end/components/ui/pagination.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/pagination.tsx"
    },
    {
      "path": "front-end/components/ui/popover.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/popover.tsx"
    },
    {
      "path": "front-end/components/ui/progress.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/progress.tsx"
    },
    {
      "path": "front-end/components/ui/radio-group.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/radio-group.tsx"
    },
    {
      "path": "front-end/components/ui/resizable.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/resizable.tsx"
    },
    {
      "path": "front-end/components/ui/scroll-area.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/scroll-area.tsx"
    },
    {
      "path": "front-end/components/ui/select.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/select.tsx"
    },
    {
      "path": "front-end/components/ui/separator.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/separator.tsx"
    },
    {
      "path": "front-end/components/ui/sheet.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sheet.tsx"
    },
    {
      "path": "front-end/components/ui/sidebar.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sidebar.tsx"
    },
    {
      "path": "front-end/components/ui/skeleton.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/skeleton.tsx"
    },
    {
      "path": "front-end/components/ui/slider.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/slider.tsx"
    },
    {
      "path": "front-end/components/ui/sonner.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sonner.tsx"
    },
    {
      "path": "front-end/components/ui/spinner.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/spinner.tsx"
    },
    {
      "path": "front-end/components/ui/switch.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/switch.tsx"
    },
    {
      "path": "front-end/components/ui/table.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/table.tsx"
    },
    {
      "path": "front-end/components/ui/tabs.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tabs.tsx"
    },
    {
      "path": "front-end/components/ui/textarea.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/textarea.tsx"
    },
    {
      "path": "front-end/components/ui/toast.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toast.tsx"
    },
    {
      "path": "front-end/components/ui/toaster.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toaster.tsx"
    },
    {
      "path": "front-end/components/ui/toggle-group.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle-group.tsx"
    },
    {
      "path": "front-end/components/ui/toggle.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle.tsx"
    },
    {
      "path": "front-end/components/ui/tooltip.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tooltip.tsx"
    },
    {
      "path": "front-end/components/ui/use-mobile.tsx",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-mobile.tsx"
    },
    {
      "path": "front-end/components/ui/use-toast.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-toast.ts"
    },
    {
      "path": "front-end/hooks/use-mobile.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-mobile.ts"
    },
    {
      "path": "front-end/hooks/use-toast.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-toast.ts"
    },
    {
      "path": "front-end/hooks/use-user-data.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-user-data.ts"
    },
    {
      "path": "front-end/middleware.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/middleware.ts"
    },
    {
      "path": "front-end/next-env.d.ts",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/next-env.d.ts"
    },
    {
      "path": "front-end/styles/globals.css",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/styles/globals.css"
    }
  ],
  "docs": [
    {
      "path": "docs/README.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/README.md"
    },
    {
      "path": "docs/architecture.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/architecture.md"
    },
    {
      "path": "docs/database.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/database.md"
    },
    {
      "path": "docs/errores/bitacoras/ERRORES - 27 OCT 25.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/errores/bitacoras/ERRORES - 27 OCT 25.md"
    },
    {
      "path": "docs/guidelines/best-practices.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/best-practices.md"
    },
    {
      "path": "docs/guidelines/naming-conventions.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/naming-conventions.md"
    },
    {
      "path": "docs/guidelines/requisitos-funcionales.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/requisitos-funcionales.md"
    },
    {
      "path": "docs/workflows/lession-creation.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/lession-creation.md"
    },
    {
      "path": "docs/workflows/user-registration.md",
      "url": "https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/user-registration.md"
    }
  ],
  "generated": "2025-10-28 20:45:16"
}


================================================================================
# ARCHIVO: back-end/url/urls_backend.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_backend.txt
================================================================================

# BACKEND - SpeakLexi (Python/Flask)
# Total: 28 archivos
# Generado: 2025-10-28 20:45:16

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/app.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/database.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/settings.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/extensions.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/cursos.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/leccion.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/multimedia.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/usuario.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/actividades_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/auth.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/curso_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/leccion_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/multimedia_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/usuario_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/correo_service.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_cursos.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_lecciones.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_multimedia.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_usuarios.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_password.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/crear_perfiles.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/generar_hashes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls_opt.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_front_end.py



================================================================================
# ARCHIVO: back-end/url/urls_backend_organizado.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_backend_organizado.txt
================================================================================

# Backend - SpeakLexi
# Total: 11 archivos

# ===== CONFIG (3) =====
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/database.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/settings.py

# ===== MODELS (1) =====
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/usuario.py

# ===== SERVICES (2) =====
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/correo_service.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_usuarios.py

# ===== ROUTES (3) =====
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/auth.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/usuario_routes.py




================================================================================
# ARCHIVO: back-end/url/urls_completo.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_completo.txt
================================================================================

# PROYECTO COMPLETO - SpeakLexi
# Backend: 28 archivos
# Frontend: 147 archivos
# Docs: 9 archivos
# Total: 184 archivos
# Generado: 2025-10-28 20:45:16

# ==========================================================
# BACKEND
# ==========================================================

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/app.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/database.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/config/settings.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/extensions.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/cursos.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/leccion.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/multimedia.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/models/usuario.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/__init__.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/actividades_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/auth.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/curso_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/leccion_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/multimedia_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/routes/usuario_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/correo_service.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_cursos.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_lecciones.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_multimedia.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/services/gestor_usuarios.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_password.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/test_routes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/crear_perfiles.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/generar_hashes.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_all_urls_opt.py
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/get_front_end.py

# ==========================================================
# FRONTEND
# ==========================================================

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/[id]/editar/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/crear/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/[id]/editar/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/asignar-nivel/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cambiar-curso/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/clasificacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/correo-enviado/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cuenta-desactivada/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/eliminar-cuenta/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/globals.css
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/layout.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/login/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/logros/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/nueva/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/perfil/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/nuevo/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/retroalimentacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/progreso/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/recuperar-contrasena/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/registro/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/reset-password-content.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/verificar-email/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/admin-stats.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/create-lesson-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/media-library-preview.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/quick-admin-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/recent-lessons.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/level-assignment-flow.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/login-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/recover-password-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/register-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/verify-email-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/dashboard-header.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/progress-overview.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/quick-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/recent-lessons.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/streak-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/achievements-list.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-filters.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-table.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/level-progress.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/rewards-inventory.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/user-rank-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/abandon-lesson-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/fill-blank-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/listen-repeat-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/matching-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/multiple-choice-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/translation-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/true-false-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/word-order-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/completion-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-filters.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-list.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-viewer.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/maintenance/create-task-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/profile/profile-settings.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/create-planning-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/quick-teacher-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/recent-feedback.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/response-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/student-performance.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/teacher-stats.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/theme-provider.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/accordion.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert-dialog.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/aspect-ratio.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/avatar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/badge.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/breadcrumb.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/calendar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/carousel.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/chart.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/checkbox.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/collapsible.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/command.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/context-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dialog.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/drawer.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dropdown-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/empty.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/field.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/hover-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-otp.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/item.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/kbd.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/label.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/menubar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/navigation-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/pagination.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/popover.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/progress.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/radio-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/resizable.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/scroll-area.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/select.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/separator.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sheet.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sidebar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/skeleton.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/slider.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sonner.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/spinner.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/switch.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/table.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tabs.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/textarea.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toast.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toaster.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tooltip.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-mobile.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-toast.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-mobile.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-toast.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-user-data.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/middleware.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/next-env.d.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/styles/globals.css

# ==========================================================
# DOCS
# ==========================================================

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/README.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/architecture.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/database.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/errores/bitacoras/ERRORES - 27 OCT 25.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/best-practices.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/naming-conventions.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/requisitos-funcionales.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/lession-creation.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/user-registration.md




================================================================================
# ARCHIVO: back-end/url/urls_docs.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_docs.txt
================================================================================

# DOCUMENTACI√ìN - SpeakLexi
# Total: 9 archivos
# Generado: 2025-10-28 20:45:16

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/README.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/architecture.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/database.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/errores/bitacoras/ERRORES - 27 OCT 25.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/best-practices.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/naming-conventions.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/requisitos-funcionales.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/lession-creation.md
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/user-registration.md



================================================================================
# ARCHIVO: back-end/url/urls_frontend.txt
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/back-end/url/urls_frontend.txt
================================================================================

# FRONTEND - SpeakLexi (Next.js/React/TypeScript)
# Total: 147 archivos
# Generado: 2025-10-28 20:45:16

https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/[id]/editar/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/crear/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/[id]/editar/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/asignar-nivel/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cambiar-curso/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/clasificacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/correo-enviado/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cuenta-desactivada/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/eliminar-cuenta/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/globals.css
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/layout.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/login/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/logros/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/nueva/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/perfil/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/dashboard/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/[id]/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/loading.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/nuevo/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/retroalimentacion/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/progreso/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/recuperar-contrasena/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/registro/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/reset-password-content.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/verificar-email/page.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/admin-stats.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/create-lesson-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/media-library-preview.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/quick-admin-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/recent-lessons.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/level-assignment-flow.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/login-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/recover-password-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/register-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/verify-email-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/dashboard-header.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/progress-overview.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/quick-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/recent-lessons.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/streak-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/achievements-list.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-filters.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-table.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/level-progress.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/rewards-inventory.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/user-rank-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/abandon-lesson-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/fill-blank-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/listen-repeat-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/matching-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/multiple-choice-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/translation-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/true-false-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/word-order-activity.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/completion-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-filters.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-list.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-viewer.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/maintenance/create-task-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/profile/profile-settings.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/create-planning-form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/quick-teacher-actions.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/recent-feedback.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/response-modal.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/student-performance.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/teacher-stats.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/theme-provider.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/accordion.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert-dialog.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/aspect-ratio.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/avatar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/badge.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/breadcrumb.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/calendar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/carousel.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/chart.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/checkbox.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/collapsible.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/command.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/context-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dialog.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/drawer.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dropdown-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/empty.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/field.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/form.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/hover-card.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-otp.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/item.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/kbd.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/label.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/menubar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/navigation-menu.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/pagination.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/popover.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/progress.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/radio-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/resizable.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/scroll-area.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/select.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/separator.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sheet.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sidebar.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/skeleton.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/slider.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sonner.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/spinner.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/switch.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/table.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tabs.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/textarea.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toast.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toaster.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle-group.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tooltip.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-mobile.tsx
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-toast.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-mobile.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-toast.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-user-data.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/middleware.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/next-env.d.ts
https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/styles/globals.css



################################################################################
# FRONTEND
################################################################################


================================================================================
# ARCHIVO: front-end/app/admin/dashboard/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/dashboard/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { AdminStats } from "@/components/admin/admin-stats"
import { RecentLessons } from "@/components/admin/recent-lessons"
import { MediaLibraryPreview } from "@/components/admin/media-library-preview"
import { QuickAdminActions } from "@/components/admin/quick-admin-actions"

export default function AdminDashboardPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Panel de Administraci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Gestiona el contenido de la plataforma</p>
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          <div className="space-y-6 lg:col-span-2">
            <AdminStats />
            <RecentLessons />
          </div>

          <div className="space-y-6">
            <QuickAdminActions />
            <MediaLibraryPreview />
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/admin/lecciones/[id]/editar/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/[id]/editar/page.tsx
================================================================================

"use client"

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { ArrowLeft, Save, Loader2, CheckCircle } from "lucide-react"
import Link from "next/link"
import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import { leccionesAPI, type Leccion } from "@/lib/api"
import { toast } from "sonner"

export default function EditLessonPage({ params }: { params: { id: string } }) {
  const router = useRouter()
  const [loading, setLoading] = useState(true)
  const [saving, setSaving] = useState(false)
  const [leccion, setLeccion] = useState<Leccion | null>(null)

  useEffect(() => {
    cargarLeccion()
  }, [params.id])

  const cargarLeccion = async () => {
    try {
      setLoading(true)
      const response = await leccionesAPI.obtener(parseInt(params.id), true, true)
      setLeccion(response.leccion)
    } catch (error: any) {
      console.error("Error al cargar lecci√≥n:", error)
      toast.error(error.message || "Error al cargar lecci√≥n")
      router.push("/admin/lecciones")
    } finally {
      setLoading(false)
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    if (!leccion) return

    try {
      setSaving(true)
      
      const datosActualizados = {
        titulo: leccion.titulo,
        descripcion: leccion.descripcion,
        nivel: leccion.nivel,
        idioma: leccion.idioma,
        categoria: leccion.categoria,
        duracion_estimada: leccion.duracion_estimada,
        puntos_xp: leccion.puntos_xp,
        estado: leccion.estado
      }
      
      await leccionesAPI.actualizar(parseInt(params.id), datosActualizados)
      
      toast.success("Lecci√≥n actualizada exitosamente")
      router.push("/admin/lecciones")
      
    } catch (error: any) {
      console.error("Error al actualizar:", error)
      toast.error(error.message || "Error al actualizar lecci√≥n")
    } finally {
      setSaving(false)
    }
  }

  const handlePublicar = async () => {
    if (!leccion) return

    try {
      await leccionesAPI.publicar(parseInt(params.id))
      toast.success("Lecci√≥n publicada exitosamente")
      cargarLeccion() // Recargar para actualizar estado
    } catch (error: any) {
      console.error("Error al publicar:", error)
      toast.error(error.message || "Error al publicar lecci√≥n")
    }
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
        <DashboardHeader />
        <main className="container mx-auto px-4 py-8">
          <div className="flex items-center justify-center py-12">
            <Loader2 className="h-8 w-8 animate-spin text-primary" />
          </div>
        </main>
      </div>
    )
  }

  if (!leccion) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
        <DashboardHeader />
        <main className="container mx-auto px-4 py-8">
          <div className="text-center py-12">
            <p className="text-muted-foreground">Lecci√≥n no encontrada</p>
            <Link href="/admin/lecciones">
              <Button variant="outline" className="mt-4">
                Volver a lecciones
              </Button>
            </Link>
          </div>
        </main>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-6 flex items-center justify-between">
          <Link href="/admin/lecciones">
            <Button variant="ghost" size="sm">
              <ArrowLeft className="mr-2 h-4 w-4" />
              Volver a Lecciones
            </Button>
          </Link>
          
          {leccion.estado === 'borrador' && (
            <Button variant="outline" onClick={handlePublicar}>
              <CheckCircle className="mr-2 h-4 w-4" />
              Publicar Lecci√≥n
            </Button>
          )}
        </div>

        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Editar Lecci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Modifica los detalles de la lecci√≥n #{params.id}</p>
        </div>

        <form onSubmit={handleSubmit}>
          <Card className="mx-auto max-w-3xl">
            <CardHeader>
              <CardTitle>Informaci√≥n de la Lecci√≥n</CardTitle>
              <CardDescription>Actualiza los campos que desees modificar</CardDescription>
            </CardHeader>

            <CardContent className="space-y-6">
              <div className="space-y-2">
                <Label htmlFor="title">T√≠tulo de la Lecci√≥n</Label>
                <Input 
                  id="title" 
                  value={leccion.titulo}
                  onChange={(e) => setLeccion({...leccion, titulo: e.target.value})}
                  required
                />
              </div>

              <div className="grid gap-4 sm:grid-cols-2">
                <div className="space-y-2">
                  <Label htmlFor="nivel">Nivel</Label>
                  <Select 
                    value={leccion.nivel}
                    onValueChange={(value: any) => setLeccion({...leccion, nivel: value})}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="principiante">Principiante</SelectItem>
                      <SelectItem value="intermedio">Intermedio</SelectItem>
                      <SelectItem value="avanzado">Avanzado</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label htmlFor="idioma">Idioma</Label>
                  <Select 
                    value={leccion.idioma}
                    onValueChange={(value) => setLeccion({...leccion, idioma: value})}
                  >
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="ingles">Ingl√©s</SelectItem>
                      <SelectItem value="espanol">Espa√±ol</SelectItem>
                      <SelectItem value="frances">Franc√©s</SelectItem>
                      <SelectItem value="aleman">Alem√°n</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="categoria">Categor√≠a</Label>
                <Input 
                  id="categoria" 
                  value={leccion.categoria || ''}
                  onChange={(e) => setLeccion({...leccion, categoria: e.target.value})}
                  placeholder="vocabulario, gramatica, pronunciacion, etc."
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="description">Descripci√≥n</Label>
                <Textarea
                  id="description"
                  value={leccion.descripcion}
                  onChange={(e) => setLeccion({...leccion, descripcion: e.target.value})}
                  rows={4}
                  required
                />
              </div>

              <div className="grid gap-4 sm:grid-cols-2">
                <div className="space-y-2">
                  <Label htmlFor="duration">Duraci√≥n (minutos)</Label>
                  <Input 
                    id="duration" 
                    type="number" 
                    value={leccion.duracion_estimada}
                    onChange={(e) => setLeccion({...leccion, duracion_estimada: parseInt(e.target.value)})}
                    required
                    min="1"
                  />
                </div>

                <div className="space-y-2">
                  <Label htmlFor="xp">XP Otorgados</Label>
                  <Input 
                    id="xp" 
                    type="number" 
                    value={leccion.puntos_xp}
                    onChange={(e) => setLeccion({...leccion, puntos_xp: parseInt(e.target.value)})}
                    required
                    min="0"
                  />
                </div>
              </div>

              <div className="space-y-2">
                <Label htmlFor="status">Estado</Label>
                <Select 
                  value={leccion.estado}
                  onValueChange={(value: any) => setLeccion({...leccion, estado: value})}
                >
                  <SelectTrigger>
                    <SelectValue />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="borrador">Borrador</SelectItem>
                    <SelectItem value="publicada">Publicada</SelectItem>
                    <SelectItem value="archivada">Archivada</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="flex gap-3">
                <Button type="submit" className="flex-1" disabled={saving}>
                  {saving ? (
                    <>
                      <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                      Guardando...
                    </>
                  ) : (
                    <>
                      <Save className="mr-2 h-4 w-4" />
                      Guardar Cambios
                    </>
                  )}
                </Button>
                <Button variant="outline" asChild>
                  <Link href="/admin/lecciones">Cancelar</Link>
                </Button>
              </div>
            </CardContent>
          </Card>
        </form>

        {/* Secci√≥n de actividades */}
        {leccion.actividades && leccion.actividades.length > 0 && (
          <Card className="mx-auto max-w-3xl mt-6">
            <CardHeader>
              <CardTitle>Actividades ({leccion.actividades.length})</CardTitle>
              <CardDescription>Actividades asociadas a esta lecci√≥n</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-2">
                {leccion.actividades.map((actividad, index) => (
                  <div 
                    key={actividad.id} 
                    className="p-3 border rounded-lg flex items-center justify-between"
                  >
                    <div>
                      <p className="font-medium">
                        {index + 1}. {actividad.pregunta}
                      </p>
                      <p className="text-sm text-muted-foreground">
                        Tipo: {actividad.tipo} ‚Ä¢ {actividad.puntos} puntos
                      </p>
                    </div>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        )}
      </main>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/admin/lecciones/crear/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/crear/page.tsx
================================================================================

"use client"

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { CreateLessonForm } from "@/components/admin/create-lesson-form"
import { ArrowLeft } from "lucide-react"
import { Button } from "@/components/ui/button"
import Link from "next/link"

export default function CreateLessonPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-6">
          <Link href="/admin/lecciones">
            <Button variant="ghost" size="sm">
              <ArrowLeft className="mr-2 h-4 w-4" />
              Volver a Lecciones
            </Button>
          </Link>
        </div>

        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Crear Nueva Lecci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Completa los pasos para crear una lecci√≥n</p>
        </div>

        <CreateLessonForm />
      </main>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/admin/lecciones/loading.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/loading.tsx
================================================================================

export default function Loading() {
  return null
}



================================================================================
# ARCHIVO: front-end/app/admin/lecciones/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/lecciones/page.tsx
================================================================================

"use client"

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Badge } from "@/components/ui/badge"
import { Search, Plus, Edit, Eye, Trash2, Loader2, BookOpen, Award, Clock } from "lucide-react"
import Link from "next/link"
import { useState, useEffect } from "react"
import { toast } from "sonner"
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select"

interface Curso {
  id: number
  nombre: string
  nivel: string
  codigo: string
}

interface Leccion {
  id: number
  curso_id?: number
  titulo: string
  descripcion: string
  nivel: string
  idioma: string
  categoria?: string
  duracion_estimada: number
  puntos_xp: number
  estado: string
  orden?: number
  // Datos del curso si est√° incluido
  curso?: Curso
}

export default function AdminLessonsPage() {
  const [lessons, setLessons] = useState<Leccion[]>([])
  const [cursos, setCursos] = useState<Curso[]>([])
  const [loading, setLoading] = useState(true)
  const [searchTerm, setSearchTerm] = useState("")
  const [filtros, setFiltros] = useState({
    curso_id: "",
    nivel: "",
    estado: "",
    categoria: ""
  })

  useEffect(() => {
    cargarCursos()
    cargarLecciones()
  }, [filtros])

  const cargarCursos = async () => {
    try {
      const response = await fetch('/api/cursos?activos=true', {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })
      
      if (!response.ok) throw new Error('Error al cargar cursos')
      
      const data = await response.json()
      setCursos(data.cursos || [])
    } catch (error) {
      console.error('Error:', error)
    }
  }

  const cargarLecciones = async () => {
    try {
      setLoading(true)
      
      // Construir query params
      const params = new URLSearchParams()
      if (searchTerm) params.append('buscar', searchTerm)
      if (filtros.curso_id) params.append('curso_id', filtros.curso_id)
      if (filtros.nivel) params.append('nivel', filtros.nivel)
      if (filtros.estado) params.append('estado', filtros.estado)
      if (filtros.categoria) params.append('categoria', filtros.categoria)
      
      const response = await fetch(`/api/lecciones?${params.toString()}`, {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })
      
      if (!response.ok) throw new Error('Error al cargar lecciones')
      
      const data = await response.json()
      setLessons(data.lecciones || [])
    } catch (error: any) {
      console.error("Error al cargar lecciones:", error)
      toast.error(error.message || "Error al cargar lecciones")
    } finally {
      setLoading(false)
    }
  }

  const handleSearch = (e: React.FormEvent) => {
    e.preventDefault()
    cargarLecciones()
  }

  const handleDelete = async (id: number, titulo: string) => {
    if (!confirm(`¬øEst√°s seguro de archivar la lecci√≥n "${titulo}"?`)) {
      return
    }

    try {
      const response = await fetch(`/api/lecciones/${id}`, {
        method: 'DELETE',
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        }
      })

      if (!response.ok) throw new Error('Error al eliminar')

      toast.success("Lecci√≥n archivada exitosamente")
      cargarLecciones()
    } catch (error: any) {
      console.error("Error al eliminar:", error)
      toast.error(error.message || "Error al archivar lecci√≥n")
    }
  }

  const getEstadoBadge = (estado: string) => {
    const variants: Record<string, any> = {
      publicada: "default",
      borrador: "secondary",
      archivada: "outline"
    }
    
    const labels: Record<string, string> = {
      publicada: "‚úÖ Publicada",
      borrador: "üìù Borrador",
      archivada: "üì¶ Archivada"
    }
    
    return (
      <Badge variant={variants[estado] || "secondary"}>
        {labels[estado] || estado}
      </Badge>
    )
  }

  const getNivelColor = (nivel: string) => {
    const colors: Record<string, string> = {
      principiante: "text-green-600 bg-green-50",
      intermedio: "text-blue-600 bg-blue-50",
      avanzado: "text-purple-600 bg-purple-50"
    }
    return colors[nivel] || "text-gray-600 bg-gray-50"
  }

  // Agrupar lecciones por curso
  const leccionesPorCurso = lessons.reduce((acc, leccion) => {
    const cursoId = leccion.curso_id || 0
    if (!acc[cursoId]) {
      acc[cursoId] = []
    }
    acc[cursoId].push(leccion)
    return acc
  }, {} as Record<number, Leccion[]>)

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold">üìö Gesti√≥n de Lecciones</h1>
            <p className="mt-1 text-muted-foreground">
              {loading ? "Cargando..." : `${lessons.length} lecciones encontradas`}
            </p>
          </div>
          <Link href="/admin/lecciones/crear">
            <Button size="lg">
              <Plus className="mr-2 h-4 w-4" />
              Crear Nueva Lecci√≥n
            </Button>
          </Link>
        </div>

        {/* Filtros */}
        <Card className="mb-6 p-6">
          <form onSubmit={handleSearch} className="space-y-4">
            <div className="relative">
              <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
              <Input 
                placeholder="Buscar lecciones por t√≠tulo o descripci√≥n..." 
                className="pl-10"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
              />
            </div>

            <div className="grid gap-4 sm:grid-cols-4">
              <Select
                value={filtros.curso_id}
                onValueChange={(value) => setFiltros({...filtros, curso_id: value})}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Todos los cursos" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="">Todos los cursos</SelectItem>
                  {cursos.map((curso) => (
                    <SelectItem key={curso.id} value={curso.id.toString()}>
                      {curso.codigo} - {curso.nombre}
                    </SelectItem>
                  ))}
                </SelectContent>
              </Select>

              <Select
                value={filtros.nivel}
                onValueChange={(value) => setFiltros({...filtros, nivel: value})}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Todos los niveles" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="">Todos los niveles</SelectItem>
                  <SelectItem value="principiante">Principiante</SelectItem>
                  <SelectItem value="intermedio">Intermedio</SelectItem>
                  <SelectItem value="avanzado">Avanzado</SelectItem>
                </SelectContent>
              </Select>

              <Select
                value={filtros.estado}
                onValueChange={(value) => setFiltros({...filtros, estado: value})}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Todos los estados" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="">Todos los estados</SelectItem>
                  <SelectItem value="publicada">Publicada</SelectItem>
                  <SelectItem value="borrador">Borrador</SelectItem>
                  <SelectItem value="archivada">Archivada</SelectItem>
                </SelectContent>
              </Select>

              <Select
                value={filtros.categoria}
                onValueChange={(value) => setFiltros({...filtros, categoria: value})}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Todas las categor√≠as" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="">Todas las categor√≠as</SelectItem>
                  <SelectItem value="vocabulario">üìö Vocabulario</SelectItem>
                  <SelectItem value="gramatica">üìñ Gram√°tica</SelectItem>
                  <SelectItem value="pronunciacion">üó£Ô∏è Pronunciaci√≥n</SelectItem>
                  <SelectItem value="conversacion">üí¨ Conversaci√≥n</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </form>
        </Card>

        {/* Lista de lecciones */}
        {loading ? (
          <Card className="p-12">
            <div className="flex items-center justify-center">
              <Loader2 className="h-8 w-8 animate-spin text-primary" />
            </div>
          </Card>
        ) : lessons.length === 0 ? (
          <Card className="p-12">
            <div className="text-center text-muted-foreground">
              <BookOpen className="mx-auto mb-4 h-12 w-12 opacity-50" />
              <p className="mb-2 text-lg font-semibold">No se encontraron lecciones</p>
              <p className="mb-4">Comienza creando tu primera lecci√≥n</p>
              <Link href="/admin/lecciones/crear">
                <Button>
                  <Plus className="mr-2 h-4 w-4" />
                  Crear Primera Lecci√≥n
                </Button>
              </Link>
            </div>
          </Card>
        ) : (
          <div className="space-y-6">
            {/* Mostrar lecciones agrupadas por curso */}
            {Object.entries(leccionesPorCurso).map(([cursoId, leccionesCurso]) => {
              const curso = cursos.find(c => c.id === parseInt(cursoId)) || null
              
              return (
                <Card key={cursoId} className="overflow-hidden">
                  <div className="border-b bg-muted/50 p-4">
                    <div className="flex items-center justify-between">
                      <div>
                        <h2 className="text-xl font-bold">
                          {curso ? (
                            <>
                              üéì {curso.codigo} - {curso.nombre}
                              <Badge variant="outline" className="ml-2">
                                {curso.nivel}
                              </Badge>
                            </>
                          ) : (
                            'üìã Sin curso asignado'
                          )}
                        </h2>
                        <p className="text-sm text-muted-foreground">
                          {leccionesCurso.length} {leccionesCurso.length === 1 ? 'lecci√≥n' : 'lecciones'}
                        </p>
                      </div>
                      {curso && (
                        <Link href={`/admin/cursos/${curso.id}`}>
                          <Button variant="outline" size="sm">
                            Ver Curso
                          </Button>
                        </Link>
                      )}
                    </div>
                  </div>

                  <div className="p-6">
                    <div className="space-y-3">
                      {leccionesCurso
                        .sort((a, b) => (a.orden || 0) - (b.orden || 0))
                        .map((lesson) => (
                        <div
                          key={lesson.id}
                          className="group rounded-xl border-2 border-border bg-card p-4 transition-all hover:border-primary/50 hover:shadow-md"
                        >
                          <div className="flex items-start justify-between gap-4">
                            <div className="flex-1">
                              <div className="mb-2 flex items-center gap-2">
                                <span className="text-muted-foreground">#{lesson.orden || '?'}</span>
                                <h3 className="font-semibold">{lesson.titulo}</h3>
                                {getEstadoBadge(lesson.estado || 'borrador')}
                              </div>
                              
                              <p className="mb-3 text-sm text-muted-foreground line-clamp-2">
                                {lesson.descripcion}
                              </p>
                              
                              <div className="flex flex-wrap items-center gap-3 text-sm">
                                <Badge className={getNivelColor(lesson.nivel)}>
                                  {lesson.nivel}
                                </Badge>
                                
                                {lesson.categoria && (
                                  <Badge variant="outline">
                                    {lesson.categoria}
                                  </Badge>
                                )}
                                
                                <div className="flex items-center gap-1 text-muted-foreground">
                                  <Clock className="h-3 w-3" />
                                  <span>{lesson.duracion_estimada} min</span>
                                </div>
                                
                                <div className="flex items-center gap-1 text-muted-foreground">
                                  <Award className="h-3 w-3" />
                                  <span>{lesson.puntos_xp} XP</span>
                                </div>
                              </div>
                            </div>

                            <div className="flex gap-2 opacity-0 transition-opacity group-hover:opacity-100">
                              <Link href={`/lecciones/${lesson.id}`}>
                                <Button variant="ghost" size="icon" title="Vista previa">
                                  <Eye className="h-4 w-4" />
                                </Button>
                              </Link>
                              <Link href={`/admin/lecciones/${lesson.id}/editar`}>
                                <Button variant="ghost" size="icon" title="Editar">
                                  <Edit className="h-4 w-4" />
                                </Button>
                              </Link>
                              <Button 
                                variant="ghost" 
                                size="icon" 
                                title="Archivar"
                                onClick={() => handleDelete(lesson.id, lesson.titulo)}
                              >
                                <Trash2 className="h-4 w-4 text-destructive" />
                              </Button>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </Card>
              )
            })}
          </div>
        )}
      </main>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/admin/usuarios/[id]/editar/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/[id]/editar/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { ArrowLeft } from "lucide-react"
import Link from "next/link"

export default function EditUserPage({ params }: { params: { id: string } }) {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8 max-w-3xl">
        <Button variant="ghost" className="mb-6" asChild>
          <Link href="/admin/usuarios">
            <ArrowLeft className="mr-2 h-4 w-4" />
            Volver a Usuarios
          </Link>
        </Button>

        <Card>
          <CardHeader>
            <CardTitle>Editar Usuario</CardTitle>
            <CardDescription>Modifica la informaci√≥n del usuario</CardDescription>
          </CardHeader>
          <CardContent>
            <form className="space-y-6">
              <div className="grid gap-4 md:grid-cols-2">
                <div className="space-y-2">
                  <Label htmlFor="name">Nombre Completo</Label>
                  <Input id="name" defaultValue="Juan P√©rez" />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="email">Correo Electr√≥nico</Label>
                  <Input id="email" type="email" defaultValue="juan@example.com" />
                </div>
              </div>

              <div className="grid gap-4 md:grid-cols-2">
                <div className="space-y-2">
                  <Label htmlFor="role">Rol</Label>
                  <Select defaultValue="estudiante">
                    <SelectTrigger id="role">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="estudiante">Estudiante</SelectItem>
                      <SelectItem value="profesor">Profesor</SelectItem>
                      <SelectItem value="admin">Administrador</SelectItem>
                      <SelectItem value="mantenimiento">Mantenimiento</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
                <div className="space-y-2">
                  <Label htmlFor="status">Estado</Label>
                  <Select defaultValue="activo">
                    <SelectTrigger id="status">
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="activo">Activo</SelectItem>
                      <SelectItem value="inactivo">Inactivo</SelectItem>
                      <SelectItem value="suspendido">Suspendido</SelectItem>
                    </SelectContent>
                  </Select>
                </div>
              </div>

              <div className="flex gap-3">
                <Button type="button" variant="outline" className="flex-1 bg-transparent" asChild>
                  <Link href="/admin/usuarios">Cancelar</Link>
                </Button>
                <Button type="submit" className="flex-1">
                  Guardar Cambios
                </Button>
              </div>
            </form>
          </CardContent>
        </Card>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/admin/usuarios/loading.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/loading.tsx
================================================================================

export default function Loading() {
  return null
}



================================================================================
# ARCHIVO: front-end/app/admin/usuarios/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/admin/usuarios/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Badge } from "@/components/ui/badge"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { Search, UserPlus, Users, GraduationCap, Shield, Wrench } from "lucide-react"
import Link from "next/link"

export default function UsersPage() {
  const users = [
    {
      id: 1,
      name: "Juan P√©rez",
      email: "juan@example.com",
      role: "estudiante",
      status: "activo",
      joinDate: "15 Ene 2025",
    },
    {
      id: 2,
      name: "Mar√≠a Garc√≠a",
      email: "maria.profesor@example.com",
      role: "profesor",
      status: "activo",
      joinDate: "10 Ene 2025",
    },
    {
      id: 3,
      name: "Carlos L√≥pez",
      email: "carlos@example.com",
      role: "estudiante",
      status: "inactivo",
      joinDate: "5 Ene 2025",
    },
    {
      id: 4,
      name: "Ana Mart√≠nez",
      email: "ana.admin@example.com",
      role: "admin",
      status: "activo",
      joinDate: "1 Ene 2025",
    },
  ]

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-balance">Gesti√≥n de Usuarios</h1>
            <p className="mt-1 text-muted-foreground">Administra los usuarios de la plataforma</p>
          </div>
          <Button>
            <UserPlus className="mr-2 h-4 w-4" />
            Nuevo Usuario
          </Button>
        </div>

        {/* Stats */}
        <div className="mb-6 grid gap-4 md:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Usuarios</CardTitle>
              <Users className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">1,234</div>
              <p className="text-xs text-muted-foreground">+12% este mes</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Estudiantes</CardTitle>
              <GraduationCap className="h-4 w-4 text-blue-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">1,150</div>
              <p className="text-xs text-muted-foreground">93% del total</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Profesores</CardTitle>
              <Users className="h-4 w-4 text-green-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">68</div>
              <p className="text-xs text-muted-foreground">5.5% del total</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Administradores</CardTitle>
              <Shield className="h-4 w-4 text-purple-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">16</div>
              <p className="text-xs text-muted-foreground">1.5% del total</p>
            </CardContent>
          </Card>
        </div>

        {/* Users List */}
        <Card>
          <CardHeader>
            <div className="flex items-center justify-between">
              <div>
                <CardTitle>Lista de Usuarios</CardTitle>
                <CardDescription>Busca y gestiona usuarios de la plataforma</CardDescription>
              </div>
              <div className="relative w-64">
                <Search className="absolute left-2 top-2.5 h-4 w-4 text-muted-foreground" />
                <Input placeholder="Buscar usuarios..." className="pl-8" />
              </div>
            </div>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {users.map((user) => (
                <Card key={user.id}>
                  <CardContent className="flex items-center justify-between pt-6">
                    <div className="flex items-center gap-4">
                      <Avatar className="h-12 w-12">
                        <AvatarFallback className="bg-primary text-primary-foreground">
                          {user.name
                            .split(" ")
                            .map((n) => n[0])
                            .join("")}
                        </AvatarFallback>
                      </Avatar>
                      <div>
                        <div className="mb-1 flex items-center gap-2">
                          <h3 className="font-semibold">{user.name}</h3>
                          <Badge
                            variant="outline"
                            className={
                              user.role === "estudiante"
                                ? "border-blue-500 text-blue-500"
                                : user.role === "profesor"
                                  ? "border-green-500 text-green-500"
                                  : user.role === "admin"
                                    ? "border-purple-500 text-purple-500"
                                    : "border-orange-500 text-orange-500"
                            }
                          >
                            {user.role === "estudiante" && <GraduationCap className="mr-1 h-3 w-3" />}
                            {user.role === "profesor" && <Users className="mr-1 h-3 w-3" />}
                            {user.role === "admin" && <Shield className="mr-1 h-3 w-3" />}
                            {user.role === "mantenimiento" && <Wrench className="mr-1 h-3 w-3" />}
                            {user.role}
                          </Badge>
                          <Badge variant={user.status === "activo" ? "default" : "secondary"}>{user.status}</Badge>
                        </div>
                        <p className="text-sm text-muted-foreground">{user.email}</p>
                        <p className="text-xs text-muted-foreground">Registrado: {user.joinDate}</p>
                      </div>
                    </div>
                    <div className="flex gap-2">
                      <Button size="sm" variant="outline" asChild>
                        <Link href="/perfil">Ver Perfil</Link>
                      </Button>
                      <Button size="sm" variant="default" asChild>
                        <Link href={`/admin/usuarios/${user.id}/editar`}>Editar</Link>
                      </Button>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </CardContent>
        </Card>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/asignar-nivel/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/asignar-nivel/page.tsx
================================================================================

import { LevelAssignmentFlow } from "@/components/auth/level-assignment-flow"
import { BookOpen } from "lucide-react"
import Link from "next/link"

export default function AssignLevelPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      <div className="container mx-auto flex min-h-screen flex-col items-center justify-center px-4 py-8">
        <div className="w-full max-w-2xl">
          {/* Logo */}
          <Link href="/" className="mb-8 flex items-center justify-center gap-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-7 w-7" />
            </div>
            <span className="text-3xl font-bold">SpeakLexi</span>
          </Link>

          <LevelAssignmentFlow />
        </div>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/cambiar-curso/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cambiar-curso/page.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { Badge } from "@/components/ui/badge"
import { 
  Globe, 
  CheckCircle2, 
  ArrowRight, 
  Loader2,
  AlertCircle,
  ArrowLeft,
  Languages
} from "lucide-react"
import { useToast } from "@/hooks/use-toast"

interface Idioma {
  id: string
  nombre: string
  icono: string
  disponible: boolean
  descripcion: string
}

const IDIOMAS_BASE: Idioma[] = [
  {
    id: "Ingl√©s",
    nombre: "Ingl√©s",
    icono: "üá∫üá∏",
    disponible: true,
    descripcion: "El idioma m√°s hablado del mundo",
  },
  {
    id: "Franc√©s",
    nombre: "Franc√©s",
    icono: "üá´üá∑",
    disponible: true,
    descripcion: "El idioma del amor y la cultura",
  },
  {
    id: "Alem√°n",
    nombre: "Alem√°n",
    icono: "üá©üá™",
    disponible: true,
    descripcion: "El idioma de la precisi√≥n",
  },
  {
    id: "Italiano",
    nombre: "Italiano",
    icono: "üáÆüáπ",
    disponible: true,
    descripcion: "El idioma de la m√∫sica",
  },
]

export default function CambiarCursoPage() {
  const router = useRouter()
  const { toast } = useToast()
  const [loading, setLoading] = useState(false)
  const [loadingData, setLoadingData] = useState(true)
  const [idiomaActual, setIdiomaActual] = useState("Ingl√©s")
  const [idiomas] = useState<Idioma[]>(IDIOMAS_BASE)
  const [selectedIdioma, setSelectedIdioma] = useState<string | null>(null)
  const [showConfirmation, setShowConfirmation] = useState(false)
  const [nivelActual, setNivelActual] = useState("A1")
  const [xpActual, setXpActual] = useState(0)

  useEffect(() => {
    cargarPerfil()
  }, [])

  const cargarPerfil = async () => {
    try {
      const userId = localStorage.getItem("userId")
      if (!userId) {
        router.push("/login")
        return
      }

      const res = await fetch(`http://localhost:5000/api/usuario/perfil/${userId}`)
      const data = await res.json()

      if (res.ok && data.perfil) {
        setIdiomaActual(data.perfil.idioma || "Ingl√©s")
        setNivelActual(data.perfil.nivel_actual || "A1")
        setXpActual(data.perfil.total_xp || 0)
      } else {
        toast({
          title: "Error",
          description: "No se pudo cargar tu perfil.",
          variant: "destructive",
        })
      }
    } catch (error) {
      console.error("Error al cargar perfil:", error)
      toast({
        title: "Error",
        description: "No se pudo conectar con el servidor.",
        variant: "destructive",
      })
    } finally {
      setLoadingData(false)
    }
  }

  const handleCambiarIdioma = async () => {
    if (!selectedIdioma) return

    setLoading(true)
    try {
      const userId = localStorage.getItem("userId")
      const res = await fetch("http://localhost:5000/api/usuario/cambiar-curso", {
        method: "PATCH",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          usuario_id: parseInt(userId!),
          idioma: selectedIdioma,
        }),
      })

      const data = await res.json()

      if (!res.ok) {
        throw new Error(data.error || "Error al cambiar de idioma")
      }

      // ‚úÖ Actualizar estado local inmediatamente
      setIdiomaActual(selectedIdioma)
      setNivelActual(data.nivel_actual || nivelActual)

      // ‚úÖ Actualizar localStorage
      localStorage.setItem("idioma", selectedIdioma)
      localStorage.setItem("nivel", data.nivel_actual || nivelActual)

      toast({
        title: "¬°Idioma cambiado! üéâ",
        description: `Ahora est√°s aprendiendo ${selectedIdioma}`,
      })

      // ‚úÖ Redirigir al dashboard despu√©s de 1.5 segundos
      setTimeout(() => {
        router.push("/dashboard")
        router.refresh() // Forzar recarga de datos
      }, 1500)

    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setLoading(false)
      setShowConfirmation(false)
    }
  }

  const handleSelectIdioma = (idiomaId: string) => {
    const idioma = idiomas.find(i => i.id === idiomaId)
    
    if (!idioma?.disponible) {
      toast({
        title: "Idioma no disponible",
        description: "Este idioma estar√° disponible pr√≥ximamente",
        variant: "destructive",
      })
      return
    }

    if (idiomaId === idiomaActual) {
      toast({
        title: "Idioma actual",
        description: "Ya est√°s aprendiendo este idioma",
      })
      return
    }

    setSelectedIdioma(idiomaId)
    setShowConfirmation(true)
  }

  if (loadingData) {
    return (
      <div className="min-h-screen flex items-center justify-center">
        <div className="text-center space-y-4">
          <Loader2 className="h-8 w-8 animate-spin text-primary mx-auto" />
          <p className="text-muted-foreground">Cargando cursos disponibles...</p>
        </div>
      </div>
    )
  }

  const idiomaSeleccionadoInfo = idiomas.find(i => i.id === selectedIdioma)

  return (
    <div className="min-h-screen bg-gradient-to-br from-background to-muted p-4 py-8">
      <div className="container max-w-6xl mx-auto space-y-8">
        {/* Header */}
        <div className="flex items-center justify-between">
          <div>
            <h1 className="text-4xl font-bold flex items-center gap-3">
              <Languages className="h-8 w-8 text-primary" />
              Cambiar Curso
            </h1>
            <p className="text-muted-foreground mt-2">
              Selecciona el idioma que deseas aprender
            </p>
          </div>
          <Button variant="outline" onClick={() => router.push("/perfil")}>
            <ArrowLeft className="mr-2 h-4 w-4" />
            Volver al perfil
          </Button>
        </div>

        {/* Idioma Actual */}
        <Alert>
          <Globe className="h-4 w-4" />
          <AlertDescription>
            <strong>Idioma actual:</strong> {idiomaActual} ‚Äî Nivel {nivelActual} ({xpActual} XP)
          </AlertDescription>
        </Alert>

        {/* Grid de Idiomas */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          {idiomas.map((idioma) => (
            <Card
              key={idioma.id}
              className={`cursor-pointer transition-all hover:shadow-lg ${
                idioma.id === idiomaActual
                  ? "border-primary ring-2 ring-primary"
                  : idioma.disponible
                  ? "hover:border-primary"
                  : "opacity-60 cursor-not-allowed"
              }`}
              onClick={() => handleSelectIdioma(idioma.id)}
            >
              <CardHeader className="text-center pb-3">
                <div className="text-6xl mb-4">{idioma.icono}</div>
                <CardTitle className="text-2xl">{idioma.nombre}</CardTitle>
                <CardDescription className="text-sm min-h-[2.5rem]">
                  {idioma.descripcion}
                </CardDescription>
              </CardHeader>
              
              <CardContent className="space-y-3">
                <div className="flex flex-col gap-2">
                  {idioma.id === idiomaActual && (
                    <Badge className="w-full justify-center">
                      <CheckCircle2 className="mr-1 h-3 w-3" />
                      Cursando actualmente
                    </Badge>
                  )}
                  
                  {idioma.disponible && idioma.id !== idiomaActual && (
                    <Badge variant="secondary" className="w-full justify-center">
                      Disponible
                    </Badge>
                  )}
                </div>
              </CardContent>
            </Card>
          ))}
        </div>

        {/* Modal de Confirmaci√≥n */}
        {showConfirmation && selectedIdioma && idiomaSeleccionadoInfo && (
          <div className="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4">
            <Card className="max-w-md w-full">
              <CardHeader>
                <CardTitle className="flex items-center gap-2 text-center">
                  <AlertCircle className="h-5 w-5 text-orange-500" />
                  Confirmar Cambio de Curso
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-4 text-center">
                <div className="text-6xl">{idiomaSeleccionadoInfo.icono}</div>
                <p>
                  ¬øDeseas cambiar a <strong>{selectedIdioma}</strong>?
                </p>
                <p className="text-sm text-muted-foreground">
                  Tu progreso en {idiomaActual} se guardar√° autom√°ticamente.
                </p>

                <div className="flex gap-4">
                  <Button
                    variant="outline"
                    onClick={() => {
                      setShowConfirmation(false)
                      setSelectedIdioma(null)
                    }}
                    disabled={loading}
                    className="flex-1"
                  >
                    Cancelar
                  </Button>
                  <Button
                    onClick={handleCambiarIdioma}
                    disabled={loading}
                    className="flex-1"
                  >
                    {loading ? (
                      <>
                        <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                        Cambiando...
                      </>
                    ) : (
                      <>
                        Confirmar
                        <ArrowRight className="ml-2 h-4 w-4" />
                      </>
                    )}
                  </Button>
                </div>
              </CardContent>
            </Card>
          </div>
        )}
      </div>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/clasificacion/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/clasificacion/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { LeaderboardTable } from "@/components/gamification/leaderboard-table"
import { LeaderboardFilters } from "@/components/gamification/leaderboard-filters"
import { UserRankCard } from "@/components/gamification/user-rank-card"

export default function LeaderboardPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Clasificaci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Compite con otros estudiantes y sube de posici√≥n</p>
        </div>

        <div className="grid gap-6 lg:grid-cols-4">
          <aside className="lg:col-span-1">
            <div className="space-y-6">
              <UserRankCard />
              <LeaderboardFilters />
            </div>
          </aside>

          <div className="lg:col-span-3">
            <LeaderboardTable />
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/correo-enviado/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/correo-enviado/page.tsx
================================================================================

import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"
import { BookOpen, Mail } from "lucide-react"
import Link from "next/link"

export default function EmailSentPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      <div className="container mx-auto flex min-h-screen flex-col items-center justify-center px-4 py-8">
        <div className="w-full max-w-md">
          {/* Logo */}
          <Link href="/" className="mb-8 flex items-center justify-center gap-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-7 w-7" />
            </div>
            <span className="text-3xl font-bold">SpeakLexi</span>
          </Link>

          <Card className="p-8">
            <div className="text-center">
              <div className="mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-success/10">
                <Mail className="h-10 w-10 text-success" />
              </div>
              <h1 className="text-2xl font-bold text-balance">Correo Enviado</h1>
              <p className="mt-2 text-muted-foreground leading-relaxed">
                Hemos enviado un enlace de recuperaci√≥n a tu correo electr√≥nico. Por favor revisa tu bandeja de entrada
                y sigue las instrucciones.
              </p>

              <div className="mt-6 space-y-3">
                <Link href="/login" className="block">
                  <Button className="w-full">Volver al Inicio de Sesi√≥n</Button>
                </Link>
                <p className="text-sm text-muted-foreground">
                  ¬øNo recibiste el correo?{" "}
                  <Link href="/recuperar-contrasena" className="font-medium text-primary hover:underline">
                    Reenviar enlace
                  </Link>
                </p>
              </div>
            </div>
          </Card>
        </div>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/cuenta-desactivada/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/cuenta-desactivada/page.tsx
================================================================================

"use client"

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { CheckCircle2, Info, Clock, AlertTriangle } from "lucide-react"
import { useRouter } from "next/navigation"
import { Alert, AlertDescription } from "@/components/ui/alert"

export default function CuentaDesactivadaPage() {
  const router = useRouter()

  return (
    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
      <Card className="w-full max-w-2xl shadow-lg">
        <CardHeader className="text-center space-y-4">
          <div className="flex justify-center">
            <div className="relative">
              <CheckCircle2 className="h-20 w-20 text-green-500" />
              <Clock className="h-8 w-8 text-orange-500 absolute -bottom-1 -right-1 bg-background rounded-full p-1" />
            </div>
          </div>
          <div>
            <CardTitle className="text-3xl font-bold">Cuenta Desactivada</CardTitle>
            <CardDescription className="text-lg mt-2">
              Tu cuenta ha sido desactivada temporalmente
            </CardDescription>
          </div>
        </CardHeader>

        <CardContent className="space-y-6">
          {/* Informaci√≥n principal */}
          <Alert className="border-orange-500 bg-orange-50 dark:bg-orange-950/20">
            <AlertTriangle className="h-5 w-5 text-orange-600" />
            <AlertDescription className="text-base">
              <strong className="block mb-2 text-orange-700 dark:text-orange-400">
                Tu cuenta permanecer√° desactivada por 30 d√≠as
              </strong>
              <p className="text-sm text-muted-foreground">
                Durante este per√≠odo, no podr√°s acceder a tu cuenta pero toda tu informaci√≥n 
                permanecer√° guardada de forma segura.
              </p>
            </AlertDescription>
          </Alert>

          {/* ¬øQu√© sucede ahora? */}
          <div className="bg-muted/50 rounded-lg p-6 space-y-4">
            <div className="flex items-center gap-2 mb-3">
              <Info className="h-5 w-5 text-primary" />
              <h3 className="font-semibold text-lg">¬øQu√© sucede ahora?</h3>
            </div>
            
            <div className="space-y-3 text-sm text-muted-foreground">
              <div className="flex items-start gap-3">
                <div className="rounded-full bg-primary/10 p-1 mt-0.5">
                  <div className="w-2 h-2 rounded-full bg-primary" />
                </div>
                <p>
                  <strong className="text-foreground">Desactivaci√≥n temporal:</strong> Tu cuenta 
                  estar√° inactiva durante los pr√≥ximos 30 d√≠as.
                </p>
              </div>

              <div className="flex items-start gap-3">
                <div className="rounded-full bg-primary/10 p-1 mt-0.5">
                  <div className="w-2 h-2 rounded-full bg-primary" />
                </div>
                <p>
                  <strong className="text-foreground">Datos protegidos:</strong> Todo tu progreso, 
                  logros y configuraci√≥n permanecen guardados de forma segura.
                </p>
              </div>

              <div className="flex items-start gap-3">
                <div className="rounded-full bg-primary/10 p-1 mt-0.5">
                  <div className="w-2 h-2 rounded-full bg-primary" />
                </div>
                <p>
                  <strong className="text-foreground">Reactivaci√≥n f√°cil:</strong> Puedes reactivar 
                  tu cuenta en cualquier momento simplemente iniciando sesi√≥n.
                </p>
              </div>

              <div className="flex items-start gap-3">
                <div className="rounded-full bg-destructive/10 p-1 mt-0.5">
                  <div className="w-2 h-2 rounded-full bg-destructive" />
                </div>
                <p>
                  <strong className="text-foreground">Eliminaci√≥n autom√°tica:</strong> Si no 
                  reactivas tu cuenta en 30 d√≠as, ser√° eliminada permanentemente y no podr√°s 
                  recuperar tu informaci√≥n.
                </p>
              </div>
            </div>
          </div>

          {/* ¬øCambiaste de opini√≥n? */}
          <div className="border-2 border-primary/20 rounded-lg p-6 bg-primary/5">
            <h3 className="font-semibold text-lg mb-3 flex items-center gap-2">
              <CheckCircle2 className="h-5 w-5 text-primary" />
              ¬øCambiaste de opini√≥n?
            </h3>
            <p className="text-sm text-muted-foreground mb-4">
              Si quieres volver a SpeakLexi, es muy f√°cil. Solo tienes que iniciar sesi√≥n 
              con tu correo y contrase√±a. Te daremos la opci√≥n de reactivar tu cuenta 
              inmediatamente y continuar donde lo dejaste.
            </p>
            <Button 
              onClick={() => router.push('/login')} 
              variant="outline"
              className="w-full"
            >
              Reactivar mi cuenta ahora
            </Button>
          </div>

          {/* Bot√≥n principal */}
          <div className="pt-4">
            <Button 
              onClick={() => router.push('/')} 
              size="lg"
              className="w-full"
            >
              Volver a la p√°gina principal
            </Button>
          </div>

          {/* Nota al pie */}
          <div className="text-center">
            <p className="text-xs text-muted-foreground">
              Si tienes dudas o necesitas ayuda, cont√°ctanos en{" "}
              <a href="mailto:soporte@speaklexi.com" className="text-primary hover:underline">
                soporte@speaklexi.com
              </a>
            </p>
          </div>
        </CardContent>
      </Card>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/dashboard/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/dashboard/page.tsx
================================================================================

"use client"

import { useEffect } from "react"
import { useRouter } from "next/navigation"
import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { ProgressOverview } from "@/components/dashboard/progress-overview"
import { StreakCard } from "@/components/dashboard/streak-card"
import { RecentLessons } from "@/components/dashboard/recent-lessons"
import { QuickActions } from "@/components/dashboard/quick-actions"
import { authStorage } from "@/lib/auth"
import { useUserData } from "@/hooks/use-user-data"
import { Skeleton } from "@/components/ui/skeleton"

export default function DashboardPage() {
  const router = useRouter()
  const { userData, isLoading, error } = useUserData()

  useEffect(() => {
    // Verificar autenticaci√≥n
    if (!authStorage.isAuthenticated()) {
      console.log("‚ùå No autenticado, redirigiendo a login...")
      router.push("/login")
    }
  }, [router])

  // Si hay error, mostrar usando datos de authStorage
  if (error) {
    console.warn("‚ö†Ô∏è Error cargando datos del backend, usando authStorage:", error)
    
    const user = authStorage.getUser()
    if (!user) {
      return (
        <div className="min-h-screen bg-background flex items-center justify-center">
          <div className="text-center">
            <p className="text-muted-foreground mb-4">Error al cargar el perfil</p>
            <button 
              onClick={() => router.push("/login")}
              className="text-primary hover:underline"
            >
              Volver al login
            </button>
          </div>
        </div>
      )
    }
    
    // Usar datos de authStorage como fallback
    return (
      <div className="min-h-screen bg-background">
        <DashboardHeader />
        <main className="container mx-auto px-4 py-8">
          <div className="space-y-6">
            <div>
              <h1 className="text-3xl font-bold">¬°Hola, {user.nombre}! üëã</h1>
              <p className="text-muted-foreground">
                Nivel {user.nivel_actual || "A1"} ‚Ä¢ {user.idioma || "Ingl√©s"}
              </p>
            </div>
            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
              <p className="text-sm text-yellow-800">
                No se pudieron cargar todos los datos. Intenta recargar la p√°gina.
              </p>
            </div>
          </div>
        </main>
      </div>
    )
  }

  if (isLoading) {
    return (
      <div className="min-h-screen bg-background">
        <DashboardHeader />
        <main className="container mx-auto px-4 py-8">
          <div className="space-y-6">
            {/* Skeleton del t√≠tulo */}
            <div className="space-y-2">
              <Skeleton className="h-10 w-64" />
              <Skeleton className="h-5 w-48" />
            </div>

            {/* Skeleton del contenido */}
            <div className="grid gap-6 lg:grid-cols-3">
              <div className="lg:col-span-2 space-y-6">
                <Skeleton className="h-96" />
                <Skeleton className="h-64" />
              </div>
              <div className="space-y-6">
                <Skeleton className="h-64" />
                <Skeleton className="h-48" />
              </div>
            </div>
          </div>
        </main>
      </div>
    )
  }

  const userName = userData?.usuario.nombre || "Usuario"
  const nivelActual = userData?.perfil.nivel_actual || "A1"
  const idioma = userData?.perfil.idioma || "Ingl√©s"

  return (
    <div className="min-h-screen bg-background">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="space-y-6">
          {/* Welcome Section */}
          <div>
            <h1 className="text-3xl font-bold">¬°Hola, {userName}! üëã</h1>
            <p className="text-muted-foreground">
              Nivel {nivelActual} ‚Ä¢ {idioma} ‚Ä¢ ¬°Sigue aprendiendo!
            </p>
          </div>

          {/* Main Content Grid */}
          <div className="grid gap-6 lg:grid-cols-3">
            {/* Left Column - Main Content */}
            <div className="lg:col-span-2 space-y-6">
              <ProgressOverview />
              <RecentLessons />
            </div>

            {/* Right Column - Sidebar */}
            <div className="space-y-6">
              <StreakCard />
              <QuickActions />
            </div>
          </div>
        </div>
      </main>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/eliminar-cuenta/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/eliminar-cuenta/page.tsx
================================================================================

"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { Checkbox } from "@/components/ui/checkbox"
import { AlertTriangle, Loader2, ArrowLeft } from "lucide-react"
import { useToast } from "@/hooks/use-toast"

export default function EliminarCuentaPage() {
  const router = useRouter()
  const { toast } = useToast()
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState("")
  const [step, setStep] = useState(1)
  
  // Step 1
  const [password, setPassword] = useState("")
  
  // Step 2
  const [aceptaTerminos, setAceptaTerminos] = useState(false)
  
  // Step 3
  const [confirmacion, setConfirmacion] = useState("")

  // Obtener datos del usuario
  const userEmail = typeof window !== 'undefined' ? localStorage.getItem('userEmail') : ''

  const handleNextStep = () => {
    setError("")
    
    if (step === 1 && !password) {
      setError("Debes ingresar tu contrase√±a")
      return
    }
    
    if (step === 2 && !aceptaTerminos) {
      setError("Debes aceptar los t√©rminos para continuar")
      return
    }
    
    setStep(step + 1)
  }

  const handleFinalDelete = async () => {
    setError("")

    // Validaci√≥n final
    if (confirmacion.toUpperCase() !== "ELIMINAR") {
      setError("Debes escribir ELIMINAR para confirmar")
      return
    }

    setLoading(true)

    try {
      const userId = localStorage.getItem('userId')
      if (!userId) {
        throw new Error("No se pudo identificar tu usuario")
      }

      const res = await fetch(`http://localhost:5000/api/usuario/desactivar/${userId}`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ 
          password: password,
          confirmacion: "ELIMINAR" // Backend espera exactamente esto
        }),
      })

      const data = await res.json()

      if (!res.ok) {
        throw new Error(data.error || "Error al desactivar la cuenta")
      }

      toast({
        title: "Cuenta desactivada",
        description: "Tu cuenta ha sido desactivada correctamente",
      })
      
      // Limpiar sesi√≥n
      localStorage.clear()
      
      // Redirigir
      router.push('/cuenta-desactivada')
      
    } catch (err: any) {
      setError(err.message || "Error al desactivar la cuenta")
      toast({
        title: "Error",
        description: err.message,
        variant: "destructive",
      })
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
      <div className="w-full max-w-2xl">
        <Card className="border-destructive shadow-lg">
          <CardHeader>
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-2">
                <AlertTriangle className="h-5 w-5 text-destructive" />
                <CardTitle>Eliminar Cuenta</CardTitle>
              </div>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => router.push('/perfil')}
              >
                <ArrowLeft className="mr-2 h-4 w-4" />
                Volver al perfil
              </Button>
            </div>
            <CardDescription>
              Esta acci√≥n es permanente e irreversible
            </CardDescription>
            {userEmail && (
              <p className="text-sm text-muted-foreground">
                Cuenta: <strong>{userEmail}</strong>
              </p>
            )}
          </CardHeader>

        <CardContent className="space-y-6">
          {/* Indicador de paso */}
          <Alert>
            <AlertDescription>
              <div className="flex items-center gap-2">
                <AlertTriangle className="h-4 w-4" />
                <strong>Paso {step} de 3</strong>
              </div>
              <p className="text-sm mt-1">
                {step === 1 && "Verificaci√≥n de identidad"}
                {step === 2 && "Confirmaci√≥n de t√©rminos"}
                {step === 3 && "Confirmaci√≥n final"}
              </p>
            </AlertDescription>
          </Alert>

          {error && (
            <Alert variant="destructive">
              <AlertDescription>{error}</AlertDescription>
            </Alert>
          )}

          {/* PASO 1: Contrase√±a */}
          {step === 1 && (
            <div className="space-y-4">
              <Alert>
                <AlertDescription>
                  <strong>¬øQu√© suceder√°?</strong>
                  <ul className="mt-2 ml-4 list-disc space-y-1 text-sm">
                    <li>Tu cuenta ser√° desactivada por 30 d√≠as</li>
                    <li>Puedes reactivarla en cualquier momento</li>
                    <li>Despu√©s de 30 d√≠as, se eliminar√° permanentemente</li>
                  </ul>
                </AlertDescription>
              </Alert>

              <div className="space-y-2">
                <Label htmlFor="password">Confirma tu contrase√±a</Label>
                <Input
                  id="password"
                  type="password"
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  placeholder="Ingresa tu contrase√±a"
                />
              </div>

              <div className="flex gap-4">
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => router.back()}
                  className="flex-1"
                >
                  <ArrowLeft className="mr-2 h-4 w-4" />
                  Atr√°s
                </Button>
                <Button
                  onClick={handleNextStep}
                  className="flex-1"
                >
                  Continuar
                </Button>
              </div>
            </div>
          )}

          {/* PASO 2: T√©rminos */}
          {step === 2 && (
            <div className="space-y-4">
              <Alert variant="destructive">
                <AlertDescription>
                  <strong>Advertencia importante:</strong>
                  <ul className="mt-2 ml-4 list-disc space-y-1 text-sm">
                    <li>Perder√°s acceso a todas tus lecciones</li>
                    <li>Tu progreso y logros se eliminar√°n</li>
                    <li>No podr√°s recuperar tu informaci√≥n despu√©s de 30 d√≠as</li>
                  </ul>
                </AlertDescription>
              </Alert>

              <div className="flex items-start space-x-2 bg-muted p-4 rounded-lg">
                <Checkbox
                  id="terms"
                  checked={aceptaTerminos}
                  onCheckedChange={(checked) => setAceptaTerminos(checked as boolean)}
                />
                <Label htmlFor="terms" className="text-sm leading-relaxed cursor-pointer">
                  Entiendo que esta acci√≥n desactivar√° mi cuenta por 30 d√≠as y que despu√©s 
                  de ese per√≠odo ser√° eliminada permanentemente junto con toda mi informaci√≥n.
                </Label>
              </div>

              <div className="flex gap-4">
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => setStep(1)}
                  className="flex-1"
                >
                  <ArrowLeft className="mr-2 h-4 w-4" />
                  Atr√°s
                </Button>
                <Button
                  onClick={handleNextStep}
                  disabled={!aceptaTerminos}
                  className="flex-1"
                >
                  Continuar
                </Button>
              </div>
            </div>
          )}

          {/* PASO 3: Confirmaci√≥n final */}
          {step === 3 && (
            <div className="space-y-4">
              <Alert variant="destructive">
                <AlertDescription>
                  <div className="flex items-center gap-2 mb-2">
                    <AlertTriangle className="h-4 w-4" />
                    <strong>√öltima advertencia:</strong>
                  </div>
                  <p className="text-sm">
                    Esta es tu √∫ltima oportunidad para cancelar
                  </p>
                </AlertDescription>
              </Alert>

              <div className="space-y-2">
                <Label htmlFor="confirmacion">
                  Escribe <strong className="text-destructive">ELIMINAR</strong> para confirmar
                </Label>
                <Input
                  id="confirmacion"
                  type="text"
                  value={confirmacion}
                  onChange={(e) => setConfirmacion(e.target.value)}
                  placeholder="ELIMINAR"
                  disabled={loading}
                />
                <p className="text-xs text-muted-foreground">
                  Debes escribir exactamente "ELIMINAR" en may√∫sculas
                </p>
              </div>

              <div className="flex gap-4">
                <Button
                  type="button"
                  variant="outline"
                  onClick={() => setStep(2)}
                  disabled={loading}
                  className="flex-1"
                >
                  <ArrowLeft className="mr-2 h-4 w-4" />
                  Atr√°s
                </Button>
                <Button
                  onClick={handleFinalDelete}
                  variant="destructive"
                  disabled={loading || confirmacion.toUpperCase() !== "ELIMINAR"}
                  className="flex-1"
                >
                  {loading ? (
                    <>
                      <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                      Desactivando...
                    </>
                  ) : (
                    "Eliminar mi cuenta permanentemente"
                  )}
                </Button>
              </div>
            </div>
          )}
        </CardContent>
      </Card>
    </div>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/globals.css
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/globals.css
================================================================================

@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

:root {
  /* Brand Colors - Vibrant and Playful */
  --primary: oklch(0.65 0.25 265); /* Vibrant purple-blue */
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.75 0.2 145); /* Fresh green */
  --secondary-foreground: oklch(0.15 0 0);
  --accent: oklch(0.7 0.22 45); /* Warm orange */
  --accent-foreground: oklch(0.15 0 0);

  /* Neutrals */
  --background: oklch(0.99 0 0);
  --foreground: oklch(0.15 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.15 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.15 0 0);

  /* UI Elements */
  --muted: oklch(0.96 0 0);
  --muted-foreground: oklch(0.5 0 0);
  --border: oklch(0.9 0 0);
  --input: oklch(0.9 0 0);
  --ring: oklch(0.65 0.25 265);

  /* Status Colors */
  --destructive: oklch(0.6 0.24 25);
  --destructive-foreground: oklch(1 0 0);
  --success: oklch(0.65 0.2 145);
  --success-foreground: oklch(1 0 0);
  --warning: oklch(0.75 0.2 75);
  --warning-foreground: oklch(0.15 0 0);

  /* Charts */
  --chart-1: oklch(0.65 0.25 265);
  --chart-2: oklch(0.75 0.2 145);
  --chart-3: oklch(0.7 0.22 45);
  --chart-4: oklch(0.6 0.2 320);
  --chart-5: oklch(0.7 0.18 200);

  --radius: 0.75rem;
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.15 0 0);
  --foreground: oklch(0.98 0 0);
  --card: oklch(0.18 0 0);
  --card-foreground: oklch(0.98 0 0);
  --popover: oklch(0.18 0 0);
  --popover-foreground: oklch(0.98 0 0);
  --primary: oklch(0.7 0.25 265);
  --primary-foreground: oklch(1 0 0);
  --secondary: oklch(0.3 0 0);
  --secondary-foreground: oklch(0.98 0 0);
  --muted: oklch(0.25 0 0);
  --muted-foreground: oklch(0.65 0 0);
  --accent: oklch(0.3 0 0);
  --accent-foreground: oklch(0.98 0 0);
  --border: oklch(0.25 0 0);
  --input: oklch(0.25 0 0);
  --ring: oklch(0.7 0.25 265);
  --destructive: oklch(0.55 0.24 25);
  --destructive-foreground: oklch(0.98 0 0);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {
  /* optional: --font-sans, --font-serif, --font-mono if they are applied in the layout.tsx */
  --font-sans: "Poppins", "system-ui", "sans-serif";
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}



================================================================================
# ARCHIVO: front-end/app/layout.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/layout.tsx
================================================================================

import type React from "react"
import type { Metadata } from "next"
import { Poppins } from "next/font/google"
import { Analytics } from "@vercel/analytics/next"
import { Toaster } from "@/components/ui/toaster"
import "./globals.css"

const poppins = Poppins({
  subsets: ["latin"],
  weight: ["400", "500", "600", "700"],
  variable: "--font-poppins",
})

export const metadata: Metadata = {
  title: "SpeakLexi - Learn Languages Gamified",
  description: "Master new languages through fun, gamified lessons",
  generator: "v0.app",
}

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode
}>) {
  return (
    <html lang="es">
      <body className={`font-sans antialiased`}>
        {children}
        <Toaster />
        <Analytics />
      </body>
    </html>
  )
}



================================================================================
# ARCHIVO: front-end/app/lecciones/[id]/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/[id]/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { LessonViewer } from "@/components/lessons/lesson-viewer"

export default function LessonPage({ params }: { params: { id: string } }) {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />
      <LessonViewer lessonId={params.id} />
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/lecciones/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/lecciones/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { LessonList } from "@/components/lessons/lesson-list"
import { LessonFilters } from "@/components/lessons/lesson-filters"

export default function LessonsPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Lecciones</h1>
          <p className="mt-1 text-muted-foreground">Explora y completa lecciones para mejorar tu nivel</p>
        </div>

        <div className="grid gap-6 lg:grid-cols-4">
          <aside className="lg:col-span-1">
            <LessonFilters />
          </aside>

          <div className="lg:col-span-3">
            <LessonList />
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/login/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/login/page.tsx
================================================================================

import { LoginForm } from "@/components/auth/login-form"
import { BookOpen } from "lucide-react"
import Link from "next/link"

export default function LoginPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      <div className="container mx-auto flex min-h-screen flex-col items-center justify-center px-4 py-8">
        <div className="w-full max-w-md">
          {/* Logo */}
          <Link href="/" className="mb-8 flex items-center justify-center gap-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-7 w-7" />
            </div>
            <span className="text-3xl font-bold">SpeakLexi</span>
          </Link>

          {/* Login Card */}
          <div className="rounded-2xl bg-card p-8 shadow-lg">
            <div className="mb-6 text-center">
              <h1 className="text-2xl font-bold text-balance">Bienvenido de Nuevo</h1>
              <p className="mt-2 text-muted-foreground">Ingresa tus credenciales para continuar</p>
            </div>

            <LoginForm />

            <div className="mt-6 text-center text-sm">
              <span className="text-muted-foreground">¬øNo tienes cuenta? </span>
              <Link href="/registro" className="font-medium text-primary hover:underline">
                Reg√≠strate aqu√≠
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/logros/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/logros/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { AchievementsList } from "@/components/gamification/achievements-list"
import { LevelProgress } from "@/components/gamification/level-progress"
import { RewardsInventory } from "@/components/gamification/rewards-inventory"

export default function AchievementsPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Logros y Recompensas</h1>
          <p className="mt-1 text-muted-foreground">Desbloquea insignias y sube de nivel</p>
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          <div className="space-y-6 lg:col-span-2">
            <AchievementsList />
          </div>

          <div className="space-y-6">
            <LevelProgress />
            <RewardsInventory />
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/dashboard/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/dashboard/page.tsx
================================================================================

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { AlertTriangle, CheckCircle, Clock, Settings, FileText, Calendar } from "lucide-react"
import Link from "next/link"

export default function MaintenanceDashboardPage() {
  return (
    <div className="min-h-screen bg-background">
      {/* Header */}
      <header className="border-b bg-card/50 backdrop-blur-sm">
        <div className="container mx-auto flex items-center justify-between px-4 py-4">
          <div className="flex items-center gap-2">
            <div className="flex h-10 w-10 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <Settings className="h-6 w-6" />
            </div>
            <div>
              <h1 className="text-2xl font-bold">SpeakLexi</h1>
              <p className="text-xs text-muted-foreground">Panel de Mantenimiento</p>
            </div>
          </div>

          <nav className="hidden items-center gap-6 md:flex">
            <Link href="/mantenimiento/dashboard" className="font-medium text-foreground hover:text-primary">
              Dashboard
            </Link>
            <Link href="/mantenimiento/reportes" className="font-medium text-muted-foreground hover:text-primary">
              Reportes
            </Link>
            <Link href="/mantenimiento/tareas" className="font-medium text-muted-foreground hover:text-primary">
              Tareas
            </Link>
          </nav>

          <Button variant="outline" asChild>
            <Link href="/login">Cerrar Sesi√≥n</Link>
          </Button>
        </div>
      </header>

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h2 className="text-3xl font-bold">Panel de Mantenimiento</h2>
          <p className="text-muted-foreground">Gestiona reportes de fallas y tareas programadas</p>
        </div>

        {/* Stats Overview */}
        <div className="mb-8 grid gap-4 md:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Reportes Pendientes</CardTitle>
              <AlertTriangle className="h-4 w-4 text-orange-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">12</div>
              <p className="text-xs text-muted-foreground">+3 desde ayer</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Reportes Resueltos</CardTitle>
              <CheckCircle className="h-4 w-4 text-green-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">48</div>
              <p className="text-xs text-muted-foreground">Este mes</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Tareas Programadas</CardTitle>
              <Clock className="h-4 w-4 text-blue-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">8</div>
              <p className="text-xs text-muted-foreground">Pr√≥ximas 7 d√≠as</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Tiempo Promedio</CardTitle>
              <Calendar className="h-4 w-4 text-purple-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">2.4h</div>
              <p className="text-xs text-muted-foreground">Resoluci√≥n de reportes</p>
            </CardContent>
          </Card>
        </div>

        <div className="grid gap-6 md:grid-cols-2">
          {/* Recent Reports */}
          <Card>
            <CardHeader>
              <CardTitle>Reportes Recientes</CardTitle>
              <CardDescription>√öltimas fallas reportadas por usuarios</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {[
                  { id: 1, title: "Error al cargar lecci√≥n", priority: "Alta", status: "Pendiente" },
                  { id: 2, title: "Audio no reproduce", priority: "Media", status: "En progreso" },
                  { id: 3, title: "Problema con clasificaci√≥n", priority: "Baja", status: "Pendiente" },
                ].map((report) => (
                  <div key={report.id} className="flex items-center justify-between rounded-lg border p-3">
                    <div className="flex-1">
                      <p className="font-medium">{report.title}</p>
                      <p className="text-sm text-muted-foreground">Prioridad: {report.priority}</p>
                    </div>
                    <span
                      className={`text-xs font-medium px-2 py-1 rounded-full ${
                        report.status === "Pendiente" ? "bg-orange-100 text-orange-700" : "bg-blue-100 text-blue-700"
                      }`}
                    >
                      {report.status}
                    </span>
                  </div>
                ))}
              </div>
              <Button variant="outline" className="mt-4 w-full bg-transparent" asChild>
                <Link href="/mantenimiento/reportes">
                  <FileText className="mr-2 h-4 w-4" />
                  Ver Todos los Reportes
                </Link>
              </Button>
            </CardContent>
          </Card>

          {/* Scheduled Tasks */}
          <Card>
            <CardHeader>
              <CardTitle>Tareas Programadas</CardTitle>
              <CardDescription>Pr√≥ximas tareas de mantenimiento</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {[
                  { id: 1, title: "Backup de base de datos", date: "Hoy, 23:00", type: "Autom√°tica" },
                  { id: 2, title: "Actualizaci√≥n de servidor", date: "Ma√±ana, 02:00", type: "Manual" },
                  { id: 3, title: "Limpieza de logs", date: "En 3 d√≠as", type: "Autom√°tica" },
                ].map((task) => (
                  <div key={task.id} className="flex items-center justify-between rounded-lg border p-3">
                    <div className="flex-1">
                      <p className="font-medium">{task.title}</p>
                      <p className="text-sm text-muted-foreground">{task.date}</p>
                    </div>
                    <span
                      className={`text-xs font-medium px-2 py-1 rounded-full ${
                        task.type === "Autom√°tica" ? "bg-green-100 text-green-700" : "bg-purple-100 text-purple-700"
                      }`}
                    >
                      {task.type}
                    </span>
                  </div>
                ))}
              </div>
              <Button variant="outline" className="mt-4 w-full bg-transparent" asChild>
                <Link href="/mantenimiento/tareas">
                  <Calendar className="mr-2 h-4 w-4" />
                  Ver Todas las Tareas
                </Link>
              </Button>
            </CardContent>
          </Card>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/reportes/[id]/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/[id]/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Label } from "@/components/ui/label"
import { ArrowLeft, AlertCircle, User, Calendar, Tag } from "lucide-react"
import Link from "next/link"

export default function ReportDetailPage({ params }: { params: { id: string } }) {
  const report = {
    id: params.id,
    title: "Error en carga de lecciones",
    description: "Las lecciones no cargan correctamente en el m√≥dulo de estudiantes. Aparece un error 500.",
    priority: "alta",
    status: "en_revision",
    category: "Backend",
    reportedBy: "Juan P√©rez",
    reportedAt: "2025-01-18 14:30",
    assignedTo: "Carlos Mart√≠nez",
    steps: "1. Iniciar sesi√≥n\n2. Ir a Lecciones\n3. Intentar abrir cualquier lecci√≥n\n4. Error aparece",
    environment: "Producci√≥n - Chrome 120",
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-6">
          <Link href="/mantenimiento/reportes">
            <Button variant="ghost" size="sm">
              <ArrowLeft className="mr-2 h-4 w-4" />
              Volver a Reportes
            </Button>
          </Link>
        </div>

        <div className="mb-6 flex items-start justify-between">
          <div>
            <h1 className="text-3xl font-bold text-balance">Reporte #{report.id}</h1>
            <p className="mt-1 text-muted-foreground">{report.title}</p>
          </div>
          <Badge
            variant={report.priority === "alta" ? "destructive" : report.priority === "media" ? "default" : "secondary"}
          >
            {report.priority}
          </Badge>
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          <div className="lg:col-span-2 space-y-6">
            <Card>
              <CardHeader>
                <CardTitle>Descripci√≥n del Problema</CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-sm leading-relaxed">{report.description}</p>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle>Pasos para Reproducir</CardTitle>
              </CardHeader>
              <CardContent>
                <pre className="whitespace-pre-wrap text-sm font-mono bg-muted p-4 rounded-lg">{report.steps}</pre>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle>Actualizar Estado</CardTitle>
                <CardDescription>Cambia el estado o asigna el reporte</CardDescription>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="space-y-2">
                  <Label>Estado</Label>
                  <Select defaultValue={report.status}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="pendiente">Pendiente</SelectItem>
                      <SelectItem value="en_revision">En Revisi√≥n</SelectItem>
                      <SelectItem value="en_progreso">En Progreso</SelectItem>
                      <SelectItem value="resuelto">Resuelto</SelectItem>
                      <SelectItem value="cerrado">Cerrado</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label>Asignar a</Label>
                  <Select defaultValue={report.assignedTo}>
                    <SelectTrigger>
                      <SelectValue />
                    </SelectTrigger>
                    <SelectContent>
                      <SelectItem value="Carlos Mart√≠nez">Carlos Mart√≠nez</SelectItem>
                      <SelectItem value="Ana L√≥pez">Ana L√≥pez</SelectItem>
                      <SelectItem value="Pedro S√°nchez">Pedro S√°nchez</SelectItem>
                    </SelectContent>
                  </Select>
                </div>

                <div className="space-y-2">
                  <Label>Comentarios</Label>
                  <Textarea placeholder="Agrega notas o comentarios sobre el reporte..." rows={4} />
                </div>

                <Button className="w-full">Guardar Cambios</Button>
              </CardContent>
            </Card>
          </div>

          <div className="space-y-6">
            <Card>
              <CardHeader>
                <CardTitle className="text-base">Informaci√≥n</CardTitle>
              </CardHeader>
              <CardContent className="space-y-4">
                <div className="flex items-start gap-3">
                  <AlertCircle className="h-5 w-5 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">Estado</p>
                    <Badge variant="secondary" className="mt-1">
                      {report.status.replace("_", " ")}
                    </Badge>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <Tag className="h-5 w-5 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">Categor√≠a</p>
                    <p className="text-sm text-muted-foreground mt-1">{report.category}</p>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <User className="h-5 w-5 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">Reportado por</p>
                    <p className="text-sm text-muted-foreground mt-1">{report.reportedBy}</p>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <Calendar className="h-5 w-5 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">Fecha</p>
                    <p className="text-sm text-muted-foreground mt-1">{report.reportedAt}</p>
                  </div>
                </div>

                <div className="flex items-start gap-3">
                  <User className="h-5 w-5 text-muted-foreground mt-0.5" />
                  <div className="flex-1">
                    <p className="text-sm font-medium">Asignado a</p>
                    <p className="text-sm text-muted-foreground mt-1">{report.assignedTo}</p>
                  </div>
                </div>
              </CardContent>
            </Card>

            <Card>
              <CardHeader>
                <CardTitle className="text-base">Entorno</CardTitle>
              </CardHeader>
              <CardContent>
                <p className="text-sm text-muted-foreground">{report.environment}</p>
              </CardContent>
            </Card>
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/reportes/loading.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/loading.tsx
================================================================================

export default function Loading() {
  return null
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/reportes/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/reportes/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Input } from "@/components/ui/input"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { AlertCircle, Bug, AlertTriangle, Info, Search } from "lucide-react"
import Link from "next/link"

export default function ReportesPage() {
  const reports = [
    {
      id: 1,
      title: "Error al cargar lecci√≥n de gram√°tica",
      module: "M√≥dulo Alumno",
      severity: "alta",
      status: "pendiente",
      reporter: "Juan P√©rez",
      date: "2025-01-19",
      description: "La lecci√≥n no carga correctamente en dispositivos m√≥viles",
    },
    {
      id: 2,
      title: "Problema con el sistema de logros",
      module: "Gamificaci√≥n",
      severity: "media",
      status: "en_revision",
      reporter: "Mar√≠a Garc√≠a",
      date: "2025-01-18",
      description: "Los logros no se actualizan despu√©s de completar lecciones",
    },
    {
      id: 3,
      title: "Lentitud en la carga del dashboard",
      module: "Dashboard",
      severity: "baja",
      status: "resuelto",
      reporter: "Carlos L√≥pez",
      date: "2025-01-17",
      description: "El dashboard tarda m√°s de 5 segundos en cargar",
    },
    {
      id: 4,
      title: "Error en la tabla de clasificaci√≥n",
      module: "Leaderboard",
      severity: "alta",
      status: "en_progreso",
      reporter: "Ana Mart√≠nez",
      date: "2025-01-16",
      description: "Los puntajes no se actualizan en tiempo real",
    },
  ]

  const getSeverityIcon = (severity: string) => {
    switch (severity) {
      case "alta":
        return <AlertCircle className="h-4 w-4" />
      case "media":
        return <AlertTriangle className="h-4 w-4" />
      default:
        return <Info className="h-4 w-4" />
    }
  }

  const getSeverityColor = (severity: string) => {
    switch (severity) {
      case "alta":
        return "destructive"
      case "media":
        return "default"
      default:
        return "secondary"
    }
  }

  const getStatusColor = (status: string) => {
    switch (status) {
      case "resuelto":
        return "default"
      case "en_progreso":
        return "default"
      case "en_revision":
        return "secondary"
      default:
        return "outline"
    }
  }

  const getStatusLabel = (status: string) => {
    switch (status) {
      case "resuelto":
        return "Resuelto"
      case "en_progreso":
        return "En Progreso"
      case "en_revision":
        return "En Revisi√≥n"
      default:
        return "Pendiente"
    }
  }

  return (
    <div className="min-h-screen bg-background">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Reportes de Fallas</h1>
          <p className="text-muted-foreground">Gestiona y da seguimiento a los reportes del sistema</p>
        </div>

        {/* Filters */}
        <Card className="mb-6">
          <CardContent className="pt-6">
            <div className="grid gap-4 md:grid-cols-4">
              <div className="relative">
                <Search className="absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground" />
                <Input placeholder="Buscar reportes..." className="pl-9" />
              </div>
              <Select defaultValue="todos">
                <SelectTrigger>
                  <SelectValue placeholder="Severidad" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="todos">Todas las severidades</SelectItem>
                  <SelectItem value="alta">Alta</SelectItem>
                  <SelectItem value="media">Media</SelectItem>
                  <SelectItem value="baja">Baja</SelectItem>
                </SelectContent>
              </Select>
              <Select defaultValue="todos">
                <SelectTrigger>
                  <SelectValue placeholder="Estado" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="todos">Todos los estados</SelectItem>
                  <SelectItem value="pendiente">Pendiente</SelectItem>
                  <SelectItem value="en_revision">En Revisi√≥n</SelectItem>
                  <SelectItem value="en_progreso">En Progreso</SelectItem>
                  <SelectItem value="resuelto">Resuelto</SelectItem>
                </SelectContent>
              </Select>
              <Select defaultValue="todos">
                <SelectTrigger>
                  <SelectValue placeholder="M√≥dulo" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="todos">Todos los m√≥dulos</SelectItem>
                  <SelectItem value="alumno">M√≥dulo Alumno</SelectItem>
                  <SelectItem value="profesor">M√≥dulo Profesor</SelectItem>
                  <SelectItem value="admin">M√≥dulo Admin</SelectItem>
                  <SelectItem value="gamificacion">Gamificaci√≥n</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </CardContent>
        </Card>

        {/* Reports List */}
        <div className="space-y-4">
          {reports.map((report) => (
            <Card key={report.id} className="hover:border-primary transition-colors">
              <CardHeader>
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      <Bug className="h-5 w-5 text-muted-foreground" />
                      <CardTitle className="text-lg">
                        #{report.id} - {report.title}
                      </CardTitle>
                    </div>
                    <CardDescription>{report.description}</CardDescription>
                  </div>
                  <div className="flex gap-2">
                    <Badge variant={getSeverityColor(report.severity) as any} className="gap-1">
                      {getSeverityIcon(report.severity)}
                      {report.severity.charAt(0).toUpperCase() + report.severity.slice(1)}
                    </Badge>
                    <Badge variant={getStatusColor(report.status) as any}>{getStatusLabel(report.status)}</Badge>
                  </div>
                </div>
              </CardHeader>
              <CardContent>
                <div className="flex items-center justify-between">
                  <div className="flex gap-6 text-sm text-muted-foreground">
                    <span>
                      M√≥dulo: <strong>{report.module}</strong>
                    </span>
                    <span>
                      Reportado por: <strong>{report.reporter}</strong>
                    </span>
                    <span>
                      Fecha: <strong>{report.date}</strong>
                    </span>
                  </div>
                  <Button variant="outline" size="sm" asChild>
                    <Link href={`/mantenimiento/reportes/${report.id}`}>Ver Detalles</Link>
                  </Button>
                </div>
              </CardContent>
            </Card>
          ))}
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/tareas/nueva/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/nueva/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { CreateTaskForm } from "@/components/maintenance/create-task-form"

export default function NewTaskPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Programar Nueva Tarea</h1>
          <p className="mt-1 text-muted-foreground">Crea una nueva tarea de mantenimiento programada</p>
        </div>

        <CreateTaskForm />
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/mantenimiento/tareas/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/mantenimiento/tareas/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Calendar, Clock, Plus, CheckCircle2, AlertCircle } from "lucide-react"
import Link from "next/link"

export default function TareasPage() {
  const tasks = [
    {
      id: 1,
      title: "Actualizaci√≥n de seguridad del servidor",
      type: "Actualizaci√≥n",
      priority: "alta",
      status: "programada",
      scheduledDate: "2025-01-25",
      scheduledTime: "02:00 AM",
      assignedTo: "Equipo DevOps",
      recurring: false,
    },
    {
      id: 2,
      title: "Respaldo semanal de base de datos",
      type: "Preventivo",
      priority: "media",
      status: "completada",
      scheduledDate: "2025-01-19",
      scheduledTime: "03:00 AM",
      assignedTo: "Sistema Autom√°tico",
      recurring: true,
      recurringPattern: "Semanal",
    },
    {
      id: 3,
      title: "Limpieza de archivos temporales",
      type: "Mantenimiento",
      priority: "baja",
      status: "en_progreso",
      scheduledDate: "2025-01-20",
      scheduledTime: "01:00 AM",
      assignedTo: "Sistema Autom√°tico",
      recurring: true,
      recurringPattern: "Diario",
    },
    {
      id: 4,
      title: "Revisi√≥n de logs de errores",
      type: "Correctivo",
      priority: "alta",
      status: "programada",
      scheduledDate: "2025-01-21",
      scheduledTime: "09:00 AM",
      assignedTo: "Carlos Rodr√≠guez",
      recurring: false,
    },
  ]

  const getPriorityColor = (priority: string) => {
    switch (priority) {
      case "alta":
        return "destructive"
      case "media":
        return "default"
      default:
        return "secondary"
    }
  }

  const getStatusColor = (status: string) => {
    switch (status) {
      case "completada":
        return "default"
      case "en_progreso":
        return "default"
      default:
        return "outline"
    }
  }

  const getStatusLabel = (status: string) => {
    switch (status) {
      case "completada":
        return "Completada"
      case "en_progreso":
        return "En Progreso"
      default:
        return "Programada"
    }
  }

  const getStatusIcon = (status: string) => {
    switch (status) {
      case "completada":
        return <CheckCircle2 className="h-4 w-4" />
      case "en_progreso":
        return <Clock className="h-4 w-4" />
      default:
        return <AlertCircle className="h-4 w-4" />
    }
  }

  return (
    <div className="min-h-screen bg-background">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-4xl font-bold mb-2">Tareas Programadas</h1>
            <p className="text-muted-foreground">Gestiona el mantenimiento y tareas del sistema</p>
          </div>
          <Button asChild>
            <Link href="/mantenimiento/tareas/nueva">
              <Plus className="mr-2 h-4 w-4" />
              Nueva Tarea
            </Link>
          </Button>
        </div>

        {/* Stats */}
        <div className="grid gap-6 md:grid-cols-4 mb-6">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Tareas</CardTitle>
              <Calendar className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{tasks.length}</div>
              <p className="text-xs text-muted-foreground">Este mes</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Programadas</CardTitle>
              <Clock className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{tasks.filter((t) => t.status === "programada").length}</div>
              <p className="text-xs text-muted-foreground">Pendientes</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">En Progreso</CardTitle>
              <AlertCircle className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{tasks.filter((t) => t.status === "en_progreso").length}</div>
              <p className="text-xs text-muted-foreground">Activas</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Completadas</CardTitle>
              <CheckCircle2 className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{tasks.filter((t) => t.status === "completada").length}</div>
              <p className="text-xs text-muted-foreground">Este mes</p>
            </CardContent>
          </Card>
        </div>

        {/* Tasks List */}
        <div className="space-y-4">
          {tasks.map((task) => (
            <Card key={task.id} className="hover:border-primary transition-colors">
              <CardHeader>
                <div className="flex items-start justify-between">
                  <div className="flex-1">
                    <div className="flex items-center gap-2 mb-2">
                      {getStatusIcon(task.status)}
                      <CardTitle className="text-lg">{task.title}</CardTitle>
                    </div>
                    <CardDescription>Asignado a: {task.assignedTo}</CardDescription>
                  </div>
                  <div className="flex gap-2">
                    <Badge variant={getPriorityColor(task.priority) as any}>
                      {task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                    </Badge>
                    <Badge variant={getStatusColor(task.status) as any}>{getStatusLabel(task.status)}</Badge>
                    {task.recurring && <Badge variant="outline">{task.recurringPattern}</Badge>}
                  </div>
                </div>
              </CardHeader>
              <CardContent>
                <div className="flex items-center justify-between">
                  <div className="flex gap-6 text-sm text-muted-foreground">
                    <span className="flex items-center gap-1">
                      <Calendar className="h-4 w-4" />
                      {task.scheduledDate}
                    </span>
                    <span className="flex items-center gap-1">
                      <Clock className="h-4 w-4" />
                      {task.scheduledTime}
                    </span>
                    <span>
                      Tipo: <strong>{task.type}</strong>
                    </span>
                  </div>
                  <Button variant="outline" size="sm">
                    Ver Detalles
                  </Button>
                </div>
              </CardContent>
            </Card>
          ))}
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/page.tsx
================================================================================

import Link from "next/link"
import { Button } from "@/components/ui/button"
import { BookOpen, Trophy, Users, Zap } from "lucide-react"

export default function HomePage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      {/* Header */}
      <header className="border-b bg-card/50 backdrop-blur-sm">
        <div className="container mx-auto flex items-center justify-between px-4 py-4">
          <div className="flex items-center gap-2">
            <div className="flex h-10 w-10 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-6 w-6" />
            </div>
            <span className="text-2xl font-bold text-balance">SpeakLexi</span>
          </div>
          <div className="flex items-center gap-3">
            <Link href="/login">
              <Button variant="ghost">Iniciar Sesi√≥n</Button>
            </Link>
            <Link href="/registro">
              <Button>Comenzar Gratis</Button>
            </Link>
          </div>
        </div>
      </header>

      {/* Hero Section */}
      <main className="container mx-auto px-4 py-16">
        <div className="mx-auto max-w-4xl text-center">
          <h1 className="mb-6 text-5xl font-bold leading-tight text-balance md:text-6xl">
            Aprende Idiomas de Forma{" "}
            <span className="bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">Divertida</span>
          </h1>
          <p className="mb-8 text-xl text-muted-foreground text-pretty leading-relaxed">
            Domina nuevos idiomas con lecciones gamificadas, desaf√≠os interactivos y un sistema de recompensas que te
            mantiene motivado cada d√≠a.
          </p>
          <div className="flex flex-col items-center justify-center gap-4 sm:flex-row">
            <Link href="/registro">
              <Button size="lg" className="w-full sm:w-auto">
                Empezar Ahora
              </Button>
            </Link>
            <Link href="/login">
              <Button size="lg" variant="outline" className="w-full sm:w-auto bg-transparent">
                Ya Tengo Cuenta
              </Button>
            </Link>
          </div>
        </div>

        {/* Features */}
        <div className="mx-auto mt-24 grid max-w-5xl gap-8 md:grid-cols-2 lg:grid-cols-4">
          <div className="flex flex-col items-center gap-3 rounded-2xl bg-card p-6 text-center shadow-sm">
            <div className="flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10 text-primary">
              <BookOpen className="h-7 w-7" />
            </div>
            <h3 className="font-semibold">Lecciones Interactivas</h3>
            <p className="text-sm text-muted-foreground leading-relaxed">
              Aprende con actividades din√°micas y contenido multimedia
            </p>
          </div>

          <div className="flex flex-col items-center gap-3 rounded-2xl bg-card p-6 text-center shadow-sm">
            <div className="flex h-14 w-14 items-center justify-center rounded-xl bg-secondary/10 text-secondary">
              <Trophy className="h-7 w-7" />
            </div>
            <h3 className="font-semibold">Sistema de Logros</h3>
            <p className="text-sm text-muted-foreground leading-relaxed">
              Gana insignias y recompensas por tu progreso
            </p>
          </div>

          <div className="flex flex-col items-center gap-3 rounded-2xl bg-card p-6 text-center shadow-sm">
            <div className="flex h-14 w-14 items-center justify-center rounded-xl bg-accent/10 text-accent">
              <Users className="h-7 w-7" />
            </div>
            <h3 className="font-semibold">Tabla de Clasificaci√≥n</h3>
            <p className="text-sm text-muted-foreground leading-relaxed">
              Compite con otros estudiantes y sube de nivel
            </p>
          </div>

          <div className="flex flex-col items-center gap-3 rounded-2xl bg-card p-6 text-center shadow-sm">
            <div className="flex h-14 w-14 items-center justify-center rounded-xl bg-primary/10 text-primary">
              <Zap className="h-7 w-7" />
            </div>
            <h3 className="font-semibold">Progreso R√°pido</h3>
            <p className="text-sm text-muted-foreground leading-relaxed">
              Avanza a tu ritmo con lecciones adaptadas a tu nivel
            </p>
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/perfil/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/perfil/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { ProfileSettings } from "@/components/profile/profile-settings"

export default function ProfilePage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      {/* Header con bot√≥n de regreso habilitado */}
      <DashboardHeader showBackButton={true} />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Mi Perfil</h1>
          <p className="mt-1 text-muted-foreground">Gestiona tu informaci√≥n personal y preferencias</p>
        </div>

        <ProfileSettings />
      </main>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/profesor/dashboard/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/dashboard/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { TeacherStats } from "@/components/teacher/teacher-stats"
import { StudentPerformance } from "@/components/teacher/student-performance"
import { RecentFeedback } from "@/components/teacher/recent-feedback"
import { QuickTeacherActions } from "@/components/teacher/quick-teacher-actions"

export default function TeacherDashboardPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Panel del Profesor</h1>
          <p className="mt-1 text-muted-foreground">Monitorea el progreso de tus estudiantes</p>
        </div>

        <div className="grid gap-6 lg:grid-cols-3">
          <div className="space-y-6 lg:col-span-2">
            <TeacherStats />
            <StudentPerformance />
          </div>

          <div className="space-y-6">
            <QuickTeacherActions />
            <RecentFeedback />
          </div>
        </div>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/profesor/estadisticas/[id]/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/[id]/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { ArrowLeft, TrendingUp, TrendingDown, Target, Clock, Award, BookOpen } from "lucide-react"
import Link from "next/link"

export default function EstadisticasAlumnoPage({ params }: { params: { id: string } }) {
  // Mock data for individual student
  const student = {
    id: params.id,
    name: "Mar√≠a Garc√≠a",
    email: "maria.garcia@email.com",
    level: "Intermedio",
    course: "Ingl√©s B1",
    enrolledDate: "2024-09-15",
    lastActive: "Hace 2 horas",
    stats: {
      totalLessons: 45,
      completedLessons: 34,
      totalXP: 2450,
      currentStreak: 12,
      averageScore: 87,
      timeSpent: "18.5h",
    },
  }

  const recentActivity = [
    { lesson: "Present Perfect", score: 92, date: "2025-01-19", time: "25 min" },
    { lesson: "Phrasal Verbs", score: 78, date: "2025-01-18", time: "30 min" },
    { lesson: "Conditional Sentences", score: 95, date: "2025-01-17", time: "28 min" },
    { lesson: "Passive Voice", score: 85, date: "2025-01-16", time: "22 min" },
  ]

  const skillsBreakdown = [
    { skill: "Vocabulario", score: 90, trend: "up" },
    { skill: "Gram√°tica", score: 85, trend: "up" },
    { skill: "Comprensi√≥n Auditiva", score: 82, trend: "down" },
    { skill: "Pronunciaci√≥n", score: 88, trend: "up" },
    { skill: "Escritura", score: 75, trend: "neutral" },
  ]

  const areasToImprove = [
    "Comprensi√≥n auditiva de conversaciones r√°pidas",
    "Uso de tiempos verbales compuestos",
    "Vocabulario t√©cnico y profesional",
  ]

  return (
    <div className="min-h-screen bg-background">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-6">
          <Button variant="ghost" asChild className="mb-4">
            <Link href="/profesor/estadisticas">
              <ArrowLeft className="mr-2 h-4 w-4" />
              Volver a Estad√≠sticas
            </Link>
          </Button>
          <div className="flex items-start gap-4">
            <Avatar className="h-16 w-16">
              <AvatarFallback className="text-xl bg-primary text-primary-foreground">
                {student.name
                  .split(" ")
                  .map((n) => n[0])
                  .join("")}
              </AvatarFallback>
            </Avatar>
            <div className="flex-1">
              <h1 className="text-3xl font-bold">{student.name}</h1>
              <p className="text-muted-foreground">{student.email}</p>
              <div className="flex gap-2 mt-2">
                <Badge>{student.level}</Badge>
                <Badge variant="outline">{student.course}</Badge>
              </div>
            </div>
            <div className="text-right text-sm text-muted-foreground">
              <p>Inscrito: {student.enrolledDate}</p>
              <p>√öltima actividad: {student.lastActive}</p>
            </div>
          </div>
        </div>

        {/* Stats Overview */}
        <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4 mb-6">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Progreso</CardTitle>
              <BookOpen className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">
                {student.stats.completedLessons}/{student.stats.totalLessons}
              </div>
              <Progress value={(student.stats.completedLessons / student.stats.totalLessons) * 100} className="mt-2" />
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Promedio</CardTitle>
              <Target className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{student.stats.averageScore}%</div>
              <p className="text-xs text-muted-foreground mt-1">Calificaci√≥n promedio</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Racha</CardTitle>
              <Award className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{student.stats.currentStreak} d√≠as</div>
              <p className="text-xs text-muted-foreground mt-1">{student.stats.totalXP} XP total</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Tiempo</CardTitle>
              <Clock className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">{student.stats.timeSpent}</div>
              <p className="text-xs text-muted-foreground mt-1">Tiempo total de estudio</p>
            </CardContent>
          </Card>
        </div>

        <div className="grid gap-6 lg:grid-cols-2">
          {/* Skills Breakdown */}
          <Card>
            <CardHeader>
              <CardTitle>Desglose por Habilidad</CardTitle>
              <CardDescription>Rendimiento en diferentes √°reas</CardDescription>
            </CardHeader>
            <CardContent className="space-y-4">
              {skillsBreakdown.map((skill) => (
                <div key={skill.skill} className="space-y-2">
                  <div className="flex items-center justify-between">
                    <span className="text-sm font-medium">{skill.skill}</span>
                    <div className="flex items-center gap-2">
                      <span className="text-sm font-bold">{skill.score}%</span>
                      {skill.trend === "up" && <TrendingUp className="h-4 w-4 text-green-600" />}
                      {skill.trend === "down" && <TrendingDown className="h-4 w-4 text-red-600" />}
                    </div>
                  </div>
                  <Progress value={skill.score} />
                </div>
              ))}
            </CardContent>
          </Card>

          {/* Recent Activity */}
          <Card>
            <CardHeader>
              <CardTitle>Actividad Reciente</CardTitle>
              <CardDescription>√öltimas lecciones completadas</CardDescription>
            </CardHeader>
            <CardContent>
              <div className="space-y-4">
                {recentActivity.map((activity, index) => (
                  <div key={index} className="flex items-center justify-between border-b pb-3 last:border-0">
                    <div className="flex-1">
                      <p className="font-medium">{activity.lesson}</p>
                      <p className="text-sm text-muted-foreground">
                        {activity.date} ‚Ä¢ {activity.time}
                      </p>
                    </div>
                    <Badge
                      variant={activity.score >= 90 ? "default" : activity.score >= 70 ? "secondary" : "destructive"}
                    >
                      {activity.score}%
                    </Badge>
                  </div>
                ))}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Areas to Improve */}
        <Card className="mt-6">
          <CardHeader>
            <CardTitle>√Åreas de Mejora</CardTitle>
            <CardDescription>Recomendaciones basadas en el desempe√±o</CardDescription>
          </CardHeader>
          <CardContent>
            <ul className="space-y-2">
              {areasToImprove.map((area, index) => (
                <li key={index} className="flex items-start gap-2">
                  <span className="text-primary mt-1">‚Ä¢</span>
                  <span>{area}</span>
                </li>
              ))}
            </ul>
          </CardContent>
        </Card>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/profesor/estadisticas/loading.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/loading.tsx
================================================================================

export default function Loading() {
  return null
}



================================================================================
# ARCHIVO: front-end/app/profesor/estadisticas/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/estadisticas/page.tsx
================================================================================

"use client"

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { Progress } from "@/components/ui/progress"
import { Badge } from "@/components/ui/badge"
import { Input } from "@/components/ui/input"
import { Search, Download } from "lucide-react"
import Link from "next/link"
import { useToast } from "@/hooks/use-toast"

export default function TeacherStatisticsPage() {
  const { toast } = useToast()

  const students = [
    {
      id: 1,
      name: "Mar√≠a Garc√≠a",
      initials: "MG",
      level: "B1",
      lessonsCompleted: 15,
      totalLessons: 20,
      averageScore: 92,
      lastActivity: "Hace 2 horas",
    },
    {
      id: 2,
      name: "Carlos Rodr√≠guez",
      initials: "CR",
      level: "A2",
      lessonsCompleted: 8,
      totalLessons: 15,
      averageScore: 78,
      lastActivity: "Hace 1 d√≠a",
    },
    {
      id: 3,
      name: "Ana Mart√≠nez",
      initials: "AM",
      level: "B1",
      lessonsCompleted: 12,
      totalLessons: 20,
      averageScore: 65,
      lastActivity: "Hace 3 horas",
    },
  ]

  const handleExport = () => {
    toast({
      title: "Exportando reporte",
      description: "El archivo CSV se descargar√° en breve",
    })

    const csvContent = [
      ["Nombre", "Nivel", "Lecciones Completadas", "Total Lecciones", "Promedio", "√öltima Actividad"],
      ...students.map((s) => [
        s.name,
        s.level,
        s.lessonsCompleted,
        s.totalLessons,
        `${s.averageScore}%`,
        s.lastActivity,
      ]),
    ]
      .map((row) => row.join(","))
      .join("\n")

    const blob = new Blob([csvContent], { type: "text/csv" })
    const url = window.URL.createObjectURL(blob)
    const a = document.createElement("a")
    a.href = url
    a.download = `estadisticas-estudiantes-${new Date().toISOString().split("T")[0]}.csv`
    a.click()
    window.URL.revokeObjectURL(url)
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-balance">Estad√≠sticas de Estudiantes</h1>
            <p className="mt-1 text-muted-foreground">Analiza el rendimiento de tus estudiantes</p>
          </div>
          <Button onClick={handleExport}>
            <Download className="mr-2 h-4 w-4" />
            Exportar Reporte
          </Button>
        </div>

        <Card className="mb-6 p-6">
          <div className="relative">
            <Search className="absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground" />
            <Input placeholder="Buscar estudiante..." className="pl-10" />
          </div>
        </Card>

        <Card className="p-6">
          <div className="space-y-4">
            {students.map((student) => (
              <Link key={student.id} href={`/profesor/estadisticas/${student.id}`}>
                <div className="rounded-xl border-2 border-border bg-card p-4 transition-all hover:border-primary hover:bg-primary/5">
                  <div className="flex items-start gap-4">
                    <Avatar className="h-12 w-12">
                      <AvatarFallback className="bg-primary text-primary-foreground">{student.initials}</AvatarFallback>
                    </Avatar>

                    <div className="flex-1">
                      <div className="mb-3 flex items-start justify-between">
                        <div>
                          <h3 className="font-semibold">{student.name}</h3>
                          <p className="text-sm text-muted-foreground">Nivel {student.level}</p>
                        </div>
                        <Badge variant="secondary">{student.lastActivity}</Badge>
                      </div>

                      <div className="grid gap-4 sm:grid-cols-3">
                        <div>
                          <p className="mb-1 text-xs text-muted-foreground">Progreso</p>
                          <Progress value={(student.lessonsCompleted / student.totalLessons) * 100} className="h-2" />
                          <p className="mt-1 text-xs font-medium">
                            {student.lessonsCompleted} / {student.totalLessons}
                          </p>
                        </div>
                        <div>
                          <p className="mb-1 text-xs text-muted-foreground">Promedio</p>
                          <p className="text-2xl font-bold text-primary">{student.averageScore}%</p>
                        </div>
                        <div>
                          <p className="mb-1 text-xs text-muted-foreground">Estado</p>
                          <Badge className="bg-success text-success-foreground">Activo</Badge>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </Link>
            ))}
          </div>
        </Card>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/profesor/planificacion/nuevo/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/nuevo/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { CreatePlanningForm } from "@/components/teacher/create-planning-form"

export default function NewPlanningPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Nueva Planificaci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Crea un nuevo plan de contenido educativo en 3 pasos</p>
        </div>

        <CreatePlanningForm />
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/profesor/planificacion/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/planificacion/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Plus, Calendar, Target, BookOpen, Clock } from "lucide-react"
import Link from "next/link"

export default function PlanningPage() {
  const plans = [
    {
      id: 1,
      title: "Unidad 5: Tiempos Verbales",
      course: "Ingl√©s Intermedio",
      level: "B1",
      objectives: 3,
      resources: 8,
      status: "en_progreso",
      dueDate: "15 Feb 2025",
    },
    {
      id: 2,
      title: "M√≥dulo de Conversaci√≥n",
      course: "Ingl√©s Avanzado",
      level: "C1",
      objectives: 5,
      resources: 12,
      status: "planificado",
      dueDate: "28 Feb 2025",
    },
    {
      id: 3,
      title: "Gram√°tica B√°sica",
      course: "Ingl√©s Principiante",
      level: "A1",
      objectives: 4,
      resources: 10,
      status: "completado",
      dueDate: "10 Ene 2025",
    },
  ]

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8 flex items-center justify-between">
          <div>
            <h1 className="text-3xl font-bold text-balance">Planificaci√≥n de Contenidos</h1>
            <p className="mt-1 text-muted-foreground">Organiza y planifica nuevos contenidos educativos</p>
          </div>
          <Link href="/profesor/planificacion/nuevo">
            <Button>
              <Plus className="mr-2 h-4 w-4" />
              Nueva Planificaci√≥n
            </Button>
          </Link>
        </div>

        {/* Stats */}
        <div className="mb-6 grid gap-4 md:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Planes</CardTitle>
              <BookOpen className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">12</div>
              <p className="text-xs text-muted-foreground">Este semestre</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">En Progreso</CardTitle>
              <Clock className="h-4 w-4 text-blue-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">5</div>
              <p className="text-xs text-muted-foreground">Activos</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Completados</CardTitle>
              <Target className="h-4 w-4 text-green-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">7</div>
              <p className="text-xs text-muted-foreground">Finalizados</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Pr√≥ximos</CardTitle>
              <Calendar className="h-4 w-4 text-orange-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">3</div>
              <p className="text-xs text-muted-foreground">Este mes</p>
            </CardContent>
          </Card>
        </div>

        {/* Plans List */}
        <Card>
          <CardHeader>
            <CardTitle>Planes de Contenido</CardTitle>
            <CardDescription>Gestiona tus planificaciones de contenido educativo</CardDescription>
          </CardHeader>
          <CardContent>
            <div className="space-y-4">
              {plans.map((plan) => (
                <Card key={plan.id}>
                  <CardContent className="pt-6">
                    <div className="flex items-start justify-between">
                      <div className="flex-1">
                        <div className="mb-2 flex items-center gap-2">
                          <h3 className="font-semibold">{plan.title}</h3>
                          <Badge
                            variant={
                              plan.status === "completado"
                                ? "default"
                                : plan.status === "en_progreso"
                                  ? "secondary"
                                  : "outline"
                            }
                            className={
                              plan.status === "en_progreso"
                                ? "bg-blue-100 text-blue-700"
                                : plan.status === "completado"
                                  ? "bg-green-100 text-green-700"
                                  : ""
                            }
                          >
                            {plan.status.replace("_", " ")}
                          </Badge>
                        </div>
                        <div className="mb-3 flex items-center gap-4 text-sm text-muted-foreground">
                          <span>
                            {plan.course} - {plan.level}
                          </span>
                          <span className="flex items-center gap-1">
                            <Target className="h-3 w-3" />
                            {plan.objectives} objetivos
                          </span>
                          <span className="flex items-center gap-1">
                            <BookOpen className="h-3 w-3" />
                            {plan.resources} recursos
                          </span>
                          <span className="flex items-center gap-1">
                            <Calendar className="h-3 w-3" />
                            {plan.dueDate}
                          </span>
                        </div>
                      </div>
                      <div className="flex gap-2">
                        <Button size="sm" variant="outline">
                          Ver Detalles
                        </Button>
                        {plan.status !== "completado" && (
                          <Button size="sm" variant="default">
                            Continuar
                          </Button>
                        )}
                      </div>
                    </div>
                  </CardContent>
                </Card>
              ))}
            </div>
          </CardContent>
        </Card>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/profesor/retroalimentacion/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/profesor/retroalimentacion/page.tsx
================================================================================

"use client"

import { useState } from "react"
import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Badge } from "@/components/ui/badge"
import { MessageSquare, ThumbsUp, AlertCircle, Clock, User } from "lucide-react"
import { ResponseModal } from "@/components/teacher/response-modal"

export default function FeedbackPage() {
  const [selectedFeedback, setSelectedFeedback] = useState<number | null>(null)
  const [isModalOpen, setIsModalOpen] = useState(false)

  const feedbackItems = [
    {
      id: 1,
      student: "Juan P√©rez",
      type: "sugerencia",
      message: "Ser√≠a genial tener m√°s ejercicios de conversaci√≥n",
      date: "Hace 2 horas",
      status: "pendiente",
      response: null,
    },
    {
      id: 2,
      student: "Mar√≠a Garc√≠a",
      type: "problema",
      message: "No puedo acceder a la lecci√≥n de gram√°tica avanzada",
      date: "Hace 5 horas",
      status: "en_revision",
      response: null,
    },
    {
      id: 3,
      student: "Carlos L√≥pez",
      type: "felicitacion",
      message: "Excelente explicaci√≥n en la √∫ltima clase, muy clara",
      date: "Hace 1 d√≠a",
      status: "respondido",
      response: "¬°Muchas gracias por tu comentario! Me alegra que la explicaci√≥n haya sido √∫til.",
    },
  ]

  const handleRespond = (feedbackId: number) => {
    setSelectedFeedback(feedbackId)
    setIsModalOpen(true)
  }

  const selectedItem = feedbackItems.find((item) => item.id === selectedFeedback)

  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-balance">Retroalimentaci√≥n</h1>
          <p className="mt-1 text-muted-foreground">Revisa y responde la retroalimentaci√≥n de tus estudiantes</p>
        </div>

        {/* Stats */}
        <div className="mb-6 grid gap-4 md:grid-cols-4">
          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Total Recibida</CardTitle>
              <MessageSquare className="h-4 w-4 text-muted-foreground" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">24</div>
              <p className="text-xs text-muted-foreground">Este mes</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Pendientes</CardTitle>
              <Clock className="h-4 w-4 text-orange-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">8</div>
              <p className="text-xs text-muted-foreground">Por responder</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Felicitaciones</CardTitle>
              <ThumbsUp className="h-4 w-4 text-green-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">15</div>
              <p className="text-xs text-muted-foreground">Feedback positivo</p>
            </CardContent>
          </Card>

          <Card>
            <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
              <CardTitle className="text-sm font-medium">Problemas</CardTitle>
              <AlertCircle className="h-4 w-4 text-red-500" />
            </CardHeader>
            <CardContent>
              <div className="text-2xl font-bold">3</div>
              <p className="text-xs text-muted-foreground">Requieren atenci√≥n</p>
            </CardContent>
          </Card>
        </div>

        {/* Feedback List */}
        <Card>
          <CardHeader>
            <CardTitle>Retroalimentaci√≥n Recibida</CardTitle>
            <CardDescription>Filtra y responde la retroalimentaci√≥n de tus estudiantes</CardDescription>
          </CardHeader>
          <CardContent>
            <Tabs defaultValue="todas" className="w-full">
              <TabsList className="grid w-full grid-cols-4">
                <TabsTrigger value="todas">Todas</TabsTrigger>
                <TabsTrigger value="pendientes">Pendientes</TabsTrigger>
                <TabsTrigger value="revision">En Revisi√≥n</TabsTrigger>
                <TabsTrigger value="respondidas">Respondidas</TabsTrigger>
              </TabsList>

              <TabsContent value="todas" className="mt-6 space-y-4">
                {feedbackItems.map((item) => (
                  <Card key={item.id}>
                    <CardContent className="pt-6">
                      <div className="flex items-start justify-between">
                        <div className="flex-1">
                          <div className="mb-2 flex items-center gap-2">
                            <User className="h-4 w-4 text-muted-foreground" />
                            <span className="font-medium">{item.student}</span>
                            <Badge
                              variant={
                                item.type === "problema"
                                  ? "destructive"
                                  : item.type === "felicitacion"
                                    ? "default"
                                    : "secondary"
                              }
                            >
                              {item.type}
                            </Badge>
                            <Badge
                              variant="outline"
                              className={
                                item.status === "pendiente"
                                  ? "border-orange-500 text-orange-500"
                                  : item.status === "en_revision"
                                    ? "border-blue-500 text-blue-500"
                                    : "border-green-500 text-green-500"
                              }
                            >
                              {item.status.replace("_", " ")}
                            </Badge>
                          </div>
                          <p className="mb-2 text-sm text-muted-foreground">{item.message}</p>
                          <p className="text-xs text-muted-foreground">{item.date}</p>
                        </div>
                        <Button
                          size="sm"
                          variant={item.status === "respondido" ? "outline" : "default"}
                          onClick={() => handleRespond(item.id)}
                        >
                          {item.status === "respondido" ? "Ver Respuesta" : "Responder"}
                        </Button>
                      </div>
                    </CardContent>
                  </Card>
                ))}
              </TabsContent>

              <TabsContent value="pendientes" className="mt-6">
                <p className="text-center text-muted-foreground">Filtrando retroalimentaci√≥n pendiente...</p>
              </TabsContent>

              <TabsContent value="revision" className="mt-6">
                <p className="text-center text-muted-foreground">Filtrando retroalimentaci√≥n en revisi√≥n...</p>
              </TabsContent>

              <TabsContent value="respondidas" className="mt-6">
                <p className="text-center text-muted-foreground">Filtrando retroalimentaci√≥n respondida...</p>
              </TabsContent>
            </Tabs>
          </CardContent>
        </Card>
      </main>

      <ResponseModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} feedback={selectedItem} />
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/progreso/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/progreso/page.tsx
================================================================================

import { DashboardHeader } from "@/components/dashboard/dashboard-header"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Progress } from "@/components/ui/progress"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { Badge } from "@/components/ui/badge"
import { BookOpen, Clock, Target, TrendingUp, Calendar, Award } from "lucide-react"

export default function ProgresoPage() {
  // Mock data
  const weeklyProgress = [
    { day: "Lun", minutes: 45, lessons: 3 },
    { day: "Mar", minutes: 30, lessons: 2 },
    { day: "Mi√©", minutes: 60, lessons: 4 },
    { day: "Jue", minutes: 20, lessons: 1 },
    { day: "Vie", minutes: 50, lessons: 3 },
    { day: "S√°b", minutes: 0, lessons: 0 },
    { day: "Dom", minutes: 40, lessons: 2 },
  ]

  const courseProgress = [
    { course: "Ingl√©s B√°sico", progress: 75, lessons: 45, completed: 34 },
    { course: "Ingl√©s Intermedio", progress: 30, lessons: 60, completed: 18 },
    { course: "Conversaci√≥n", progress: 50, lessons: 30, completed: 15 },
  ]

  const skillsProgress = [
    { skill: "Vocabulario", level: 85, xp: 850 },
    { skill: "Gram√°tica", level: 70, xp: 700 },
    { skill: "Pronunciaci√≥n", level: 60, xp: 600 },
    { skill: "Comprensi√≥n Auditiva", level: 75, xp: 750 },
    { skill: "Escritura", level: 55, xp: 550 },
  ]

  return (
    <div className="min-h-screen bg-background">
      <DashboardHeader />

      <main className="container mx-auto px-4 py-8">
        <div className="mb-8">
          <h1 className="text-4xl font-bold mb-2">Mi Progreso</h1>
          <p className="text-muted-foreground">Visualiza tu avance y estad√≠sticas de aprendizaje</p>
        </div>

        <Tabs defaultValue="general" className="space-y-6">
          <TabsList>
            <TabsTrigger value="general">General</TabsTrigger>
            <TabsTrigger value="cursos">Por Curso</TabsTrigger>
            <TabsTrigger value="habilidades">Habilidades</TabsTrigger>
          </TabsList>

          <TabsContent value="general" className="space-y-6">
            {/* Weekly Activity */}
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  <Calendar className="h-5 w-5" />
                  Actividad Semanal
                </CardTitle>
                <CardDescription>Tu progreso en los √∫ltimos 7 d√≠as</CardDescription>
              </CardHeader>
              <CardContent>
                <div className="flex items-end justify-between gap-2 h-48">
                  {weeklyProgress.map((day) => (
                    <div key={day.day} className="flex flex-col items-center gap-2 flex-1">
                      <div className="flex flex-col items-center gap-1 text-xs text-muted-foreground">
                        <span className="font-medium">{day.minutes}m</span>
                        <span>{day.lessons} lec</span>
                      </div>
                      <div
                        className="w-full bg-primary rounded-t-md transition-all hover:bg-primary/80"
                        style={{ height: `${(day.minutes / 60) * 100}%`, minHeight: day.minutes > 0 ? "20px" : "0" }}
                      />
                      <span className="text-sm font-medium">{day.day}</span>
                    </div>
                  ))}
                </div>
              </CardContent>
            </Card>

            {/* Stats Grid */}
            <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-4">
              <Card>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm font-medium">Total Lecciones</CardTitle>
                  <BookOpen className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl font-bold">67</div>
                  <p className="text-xs text-muted-foreground">+12 esta semana</p>
                </CardContent>
              </Card>

              <Card>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm font-medium">Tiempo Total</CardTitle>
                  <Clock className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl font-bold">24.5h</div>
                  <p className="text-xs text-muted-foreground">+3.5h esta semana</p>
                </CardContent>
              </Card>

              <Card>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm font-medium">Racha Actual</CardTitle>
                  <Target className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl font-bold">15 d√≠as</div>
                  <p className="text-xs text-muted-foreground">¬°Sigue as√≠!</p>
                </CardContent>
              </Card>

              <Card>
                <CardHeader className="flex flex-row items-center justify-between space-y-0 pb-2">
                  <CardTitle className="text-sm font-medium">XP Total</CardTitle>
                  <TrendingUp className="h-4 w-4 text-muted-foreground" />
                </CardHeader>
                <CardContent>
                  <div className="text-2xl font-bold">3,450</div>
                  <p className="text-xs text-muted-foreground">+450 esta semana</p>
                </CardContent>
              </Card>
            </div>
          </TabsContent>

          <TabsContent value="cursos" className="space-y-6">
            {courseProgress.map((course) => (
              <Card key={course.course}>
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div>
                      <CardTitle>{course.course}</CardTitle>
                      <CardDescription>
                        {course.completed} de {course.lessons} lecciones completadas
                      </CardDescription>
                    </div>
                    <Badge variant="secondary">{course.progress}%</Badge>
                  </div>
                </CardHeader>
                <CardContent>
                  <Progress value={course.progress} className="h-3" />
                </CardContent>
              </Card>
            ))}
          </TabsContent>

          <TabsContent value="habilidades" className="space-y-6">
            {skillsProgress.map((skill) => (
              <Card key={skill.skill}>
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div className="flex items-center gap-3">
                      <div className="flex h-12 w-12 items-center justify-center rounded-full bg-primary/10">
                        <Award className="h-6 w-6 text-primary" />
                      </div>
                      <div>
                        <CardTitle className="text-lg">{skill.skill}</CardTitle>
                        <CardDescription>{skill.xp} XP ganados</CardDescription>
                      </div>
                    </div>
                    <Badge variant="secondary" className="text-lg">
                      Nivel {Math.floor(skill.level / 10)}
                    </Badge>
                  </div>
                </CardHeader>
                <CardContent>
                  <div className="space-y-2">
                    <div className="flex items-center justify-between text-sm">
                      <span className="text-muted-foreground">Progreso al siguiente nivel</span>
                      <span className="font-medium">{skill.level % 10}/10</span>
                    </div>
                    <Progress value={(skill.level % 10) * 10} className="h-2" />
                  </div>
                </CardContent>
              </Card>
            ))}
          </TabsContent>
        </Tabs>
      </main>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/recuperar-contrasena/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/recuperar-contrasena/page.tsx
================================================================================

"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { Mail, Loader2, CheckCircle2, ArrowLeft, AlertCircle } from "lucide-react"
import { useToast } from "@/hooks/use-toast"
import Link from "next/link"

export default function RecuperarContrasenaPage() {
  const router = useRouter()
  const { toast } = useToast()
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState("")
  const [email, setEmail] = useState("")
  const [emailEnviado, setEmailEnviado] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError("")

    if (!email) {
      setError("Por favor ingresa tu correo electr√≥nico")
      return
    }

    // Validar formato de email
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if (!emailRegex.test(email)) {
      setError("Por favor ingresa un correo v√°lido")
      return
    }

    setLoading(true)

    try {
      const res = await fetch("http://localhost:5000/api/auth/recuperar-password", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ correo: email }),
      })

      const data = await res.json()

      if (!res.ok) {
        throw new Error(data.error || "Error al enviar el correo")
      }

      setEmailEnviado(true)
      toast({
        title: "¬°Correo enviado!",
        description: "Revisa tu bandeja de entrada para continuar",
      })

    } catch (error: any) {
      setError(error.message || "Error al enviar el correo")
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <div className="flex justify-center mb-4">
            {emailEnviado ? (
              <CheckCircle2 className="h-12 w-12 text-green-500" />
            ) : (
              <Mail className="h-12 w-12 text-primary" />
            )}
          </div>
          <CardTitle>
            {emailEnviado ? "¬°Correo Enviado!" : "Recuperar Contrase√±a"}
          </CardTitle>
          <CardDescription>
            {emailEnviado
              ? "Revisa tu correo para continuar"
              : "Ingresa tu correo y te enviaremos instrucciones"}
          </CardDescription>
        </CardHeader>

        <CardContent>
          {emailEnviado ? (
            <div className="space-y-4">
              <Alert>
                <Mail className="h-4 w-4" />
                <AlertDescription>
                  <strong>Correo enviado a:</strong> {email}
                  <p className="mt-2 text-sm">
                    Hemos enviado un enlace de recuperaci√≥n a tu correo. 
                    El enlace expira en 1 hora.
                  </p>
                </AlertDescription>
              </Alert>

              <div className="bg-muted/50 rounded-lg p-4 space-y-2">
                <p className="text-sm font-semibold">¬øNo recibiste el correo?</p>
                <ul className="text-sm text-muted-foreground space-y-1 ml-4">
                  <li>‚Ä¢ Revisa tu carpeta de spam</li>
                  <li>‚Ä¢ Verifica que el correo sea correcto</li>
                  <li>‚Ä¢ Espera unos minutos e intenta de nuevo</li>
                </ul>
              </div>

              <div className="flex flex-col gap-3">
                <Button
                  variant="outline"
                  onClick={() => {
                    setEmailEnviado(false)
                    setEmail("")
                  }}
                  className="w-full"
                >
                  Enviar a otro correo
                </Button>
                <Button
                  variant="ghost"
                  onClick={() => router.push("/login")}
                  className="w-full"
                >
                  <ArrowLeft className="mr-2 h-4 w-4" />
                  Volver al inicio de sesi√≥n
                </Button>
              </div>
            </div>
          ) : (
            <form onSubmit={handleSubmit} className="space-y-4">
              {error && (
                <Alert variant="destructive">
                  <AlertCircle className="h-4 w-4" />
                  <AlertDescription>{error}</AlertDescription>
                </Alert>
              )}

              <Alert>
                <AlertDescription className="text-sm">
                  Te enviaremos un enlace seguro a tu correo electr√≥nico para 
                  que puedas restablecer tu contrase√±a.
                </AlertDescription>
              </Alert>

              <div className="space-y-2">
                <Label htmlFor="email">Correo Electr√≥nico</Label>
                <Input
                  id="email"
                  type="email"
                  placeholder="tu@email.com"
                  value={email}
                  onChange={(e) => setEmail(e.target.value)}
                  disabled={loading}
                  autoFocus
                />
              </div>

              <Button type="submit" className="w-full" disabled={loading}>
                {loading ? (
                  <>
                    <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                    Enviando...
                  </>
                ) : (
                  <>
                    <Mail className="mr-2 h-4 w-4" />
                    Enviar instrucciones
                  </>
                )}
              </Button>

              <div className="text-center">
                <Link href="/login" className="text-sm text-primary hover:underline">
                  <ArrowLeft className="inline mr-1 h-3 w-3" />
                  Volver al inicio de sesi√≥n
                </Link>
              </div>
            </form>
          )}
        </CardContent>
      </Card>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/registro/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/registro/page.tsx
================================================================================

"use client"

import {RegisterForm} from "../../components/auth/register-form" // ‚úÖ Import corregido
import { BookOpen } from "lucide-react"
import Link from "next/link"

export default function RegisterPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      <div className="container mx-auto flex min-h-screen flex-col items-center justify-center px-4 py-8">
        <div className="w-full max-w-md">
          {/* Logo */}
          <Link href="/" className="mb-8 flex items-center justify-center gap-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-7 w-7" />
            </div>
            <span className="text-3xl font-bold">SpeakLexi</span>
          </Link>

          {/* Register Card */}
          <div className="rounded-2xl bg-card p-8 shadow-lg">
            <div className="mb-6 text-center">
              <h1 className="text-2xl font-bold text-balance">Crea tu Cuenta</h1>
              <p className="mt-2 text-muted-foreground">
                Comienza tu viaje de aprendizaje hoy
              </p>
            </div>

            <RegisterForm />

            <div className="mt-6 text-center text-sm">
              <span className="text-muted-foreground">¬øYa tienes cuenta? </span>
              <Link href="/login" className="font-medium text-primary hover:underline">
                Inicia sesi√≥n aqu√≠
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/app/restablecer-contrasena/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/page.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter, useSearchParams } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { Eye, EyeOff, Loader2, CheckCircle2, AlertCircle, Lock, Shield } from "lucide-react"
import { useToast } from "@/hooks/use-toast"
import { Progress } from "@/components/ui/progress"

export default function RestablecerContrasenaPage() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const { toast } = useToast()
  
  const [loading, setLoading] = useState(false)
  const [validandoToken, setValidandoToken] = useState(true)
  const [tokenValido, setTokenValido] = useState(false)
  const [error, setError] = useState("")
  const [success, setSuccess] = useState(false)
  
  const [password, setPassword] = useState("")
  const [confirmPassword, setConfirmPassword] = useState("")
  const [showPassword, setShowPassword] = useState(false)
  const [showConfirmPassword, setShowConfirmPassword] = useState(false)
  
  const token = searchParams.get("token")

  useEffect(() => {
    if (token) {
      validarToken()
    } else {
      setValidandoToken(false)
      setError("Token no proporcionado")
    }
  }, [token])

  const validarToken = async () => {
    try {
      const res = await fetch("http://localhost:5000/api/auth/validar-token-recuperacion", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ token }),
      })

      const data = await res.json()

      if (res.ok) {
        setTokenValido(true)
      } else {
        setError(data.error || "Token inv√°lido o expirado")
      }
    } catch (error: any) {
      setError("Error al validar el token")
    } finally {
      setValidandoToken(false)
    }
  }

  const calcularFuerzaPassword = (pass: string): number => {
    let fuerza = 0
    if (pass.length >= 8) fuerza += 25
    if (pass.length >= 12) fuerza += 15
    if (/[a-z]/.test(pass)) fuerza += 15
    if (/[A-Z]/.test(pass)) fuerza += 15
    if (/[0-9]/.test(pass)) fuerza += 15
    if (/[^a-zA-Z0-9]/.test(pass)) fuerza += 15
    return Math.min(fuerza, 100)
  }

  const getFuerzaColor = (fuerza: number): string => {
    if (fuerza < 40) return "bg-red-500"
    if (fuerza < 70) return "bg-yellow-500"
    return "bg-green-500"
  }

  const getFuerzaTexto = (fuerza: number): string => {
    if (fuerza < 40) return "D√©bil"
    if (fuerza < 70) return "Media"
    return "Fuerte"
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError("")

    // Validaciones
    if (!password || !confirmPassword) {
      setError("Por favor completa todos los campos")
      return
    }

    if (password.length < 8) {
      setError("La contrase√±a debe tener al menos 8 caracteres")
      return
    }

    if (password !== confirmPassword) {
      setError("Las contrase√±as no coinciden")
      return
    }

    setLoading(true)

    try {
      const res = await fetch("http://localhost:5000/api/auth/restablecer-password", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ 
          token,
          nueva_password: password 
        }),
      })

      const data = await res.json()

      if (!res.ok) {
        throw new Error(data.error || "Error al restablecer la contrase√±a")
      }

      setSuccess(true)
      toast({
        title: "¬°Contrase√±a actualizada!",
        description: "Tu contrase√±a ha sido restablecida exitosamente",
      })

      // Redirigir al login despu√©s de 3 segundos
      setTimeout(() => {
        router.push("/login")
      }, 3000)

    } catch (error: any) {
      setError(error.message || "Error al restablecer la contrase√±a")
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setLoading(false)
    }
  }

  // Mientras valida el token
  if (validandoToken) {
    return (
      <div className="min-h-screen flex items-center justify-center p-4">
        <Card className="w-full max-w-md">
          <CardContent className="flex flex-col items-center justify-center p-8">
            <Loader2 className="h-12 w-12 animate-spin text-primary mb-4" />
            <p className="text-muted-foreground">Validando token...</p>
          </CardContent>
        </Card>
      </div>
    )
  }

  // Token inv√°lido
  if (!tokenValido && !validandoToken) {
    return (
      <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
        <Card className="w-full max-w-md border-destructive">
          <CardHeader className="text-center">
            <div className="flex justify-center mb-4">
              <AlertCircle className="h-12 w-12 text-destructive" />
            </div>
            <CardTitle className="text-destructive">Token Inv√°lido</CardTitle>
            <CardDescription>{error}</CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <Alert variant="destructive">
              <AlertDescription>
                El enlace de recuperaci√≥n es inv√°lido o ha expirado. 
                Por favor solicita uno nuevo.
              </AlertDescription>
            </Alert>
            <Button
              onClick={() => router.push("/recuperar-contrasena")}
              className="w-full"
            >
              Solicitar nuevo enlace
            </Button>
          </CardContent>
        </Card>
      </div>
    )
  }

  // √âxito
  if (success) {
    return (
      <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
        <Card className="w-full max-w-md">
          <CardHeader className="text-center">
            <div className="flex justify-center mb-4">
              <CheckCircle2 className="h-16 w-16 text-green-500" />
            </div>
            <CardTitle className="text-2xl">¬°Contrase√±a Actualizada!</CardTitle>
            <CardDescription>
              Tu contrase√±a ha sido restablecida exitosamente
            </CardDescription>
          </CardHeader>
          <CardContent className="space-y-4">
            <Alert>
              <Shield className="h-4 w-4" />
              <AlertDescription>
                Ahora puedes iniciar sesi√≥n con tu nueva contrase√±a.
                Ser√°s redirigido autom√°ticamente...
              </AlertDescription>
            </Alert>
            <Button
              onClick={() => router.push("/login")}
              className="w-full"
            >
              Ir al inicio de sesi√≥n
            </Button>
          </CardContent>
        </Card>
      </div>
    )
  }

  const fuerzaPassword = calcularFuerzaPassword(password)

  // Formulario de nueva contrase√±a
  return (
    <div className="min-h-screen flex items-center justify-center p-4 bg-gradient-to-br from-background to-muted">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <div className="flex justify-center mb-4">
            <Lock className="h-12 w-12 text-primary" />
          </div>
          <CardTitle>Nueva Contrase√±a</CardTitle>
          <CardDescription>
            Ingresa tu nueva contrase√±a segura
          </CardDescription>
        </CardHeader>

        <CardContent>
          <form onSubmit={handleSubmit} className="space-y-4">
            {error && (
              <Alert variant="destructive">
                <AlertCircle className="h-4 w-4" />
                <AlertDescription>{error}</AlertDescription>
              </Alert>
            )}

            {/* Nueva Contrase√±a */}
            <div className="space-y-2">
              <Label htmlFor="password">Nueva Contrase√±a</Label>
              <div className="relative">
                <Input
                  id="password"
                  type={showPassword ? "text" : "password"}
                  value={password}
                  onChange={(e) => setPassword(e.target.value)}
                  placeholder="M√≠nimo 8 caracteres"
                  disabled={loading}
                />
                <button
                  type="button"
                  onClick={() => setShowPassword(!showPassword)}
                  className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
                >
                  {showPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
                </button>
              </div>

              {/* Indicador de fuerza */}
              {password && (
                <div className="space-y-2">
                  <div className="flex items-center justify-between text-xs">
                    <span className="text-muted-foreground">Seguridad:</span>
                    <span className={`font-semibold ${
                      fuerzaPassword < 40 ? "text-red-500" :
                      fuerzaPassword < 70 ? "text-yellow-500" :
                      "text-green-500"
                    }`}>
                      {getFuerzaTexto(fuerzaPassword)}
                    </span>
                  </div>
                  <div className="h-2 bg-muted rounded-full overflow-hidden">
                    <div 
                      className={`h-full transition-all ${getFuerzaColor(fuerzaPassword)}`}
                      style={{ width: `${fuerzaPassword}%` }}
                    />
                  </div>
                </div>
              )}
            </div>

            {/* Confirmar Contrase√±a */}
            <div className="space-y-2">
              <Label htmlFor="confirmPassword">Confirmar Contrase√±a</Label>
              <div className="relative">
                <Input
                  id="confirmPassword"
                  type={showConfirmPassword ? "text" : "password"}
                  value={confirmPassword}
                  onChange={(e) => setConfirmPassword(e.target.value)}
                  placeholder="Repite tu contrase√±a"
                  disabled={loading}
                />
                <button
                  type="button"
                  onClick={() => setShowConfirmPassword(!showConfirmPassword)}
                  className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
                >
                  {showConfirmPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
                </button>
              </div>
              {confirmPassword && password !== confirmPassword && (
                <p className="text-xs text-destructive">Las contrase√±as no coinciden</p>
              )}
              {confirmPassword && password === confirmPassword && (
                <p className="text-xs text-green-500 flex items-center gap-1">
                  <CheckCircle2 className="h-3 w-3" />
                  Las contrase√±as coinciden
                </p>
              )}
            </div>

            {/* Requisitos */}
            <div className="bg-muted/50 rounded-lg p-3">
              <p className="text-xs font-semibold mb-2">Requisitos de la contrase√±a:</p>
              <ul className="text-xs text-muted-foreground space-y-1">
                <li className={password.length >= 8 ? "text-green-500" : ""}>
                  ‚Ä¢ Al menos 8 caracteres
                </li>
                <li className={/[A-Z]/.test(password) ? "text-green-500" : ""}>
                  ‚Ä¢ Una letra may√∫scula
                </li>
                <li className={/[a-z]/.test(password) ? "text-green-500" : ""}>
                  ‚Ä¢ Una letra min√∫scula
                </li>
                <li className={/[0-9]/.test(password) ? "text-green-500" : ""}>
                  ‚Ä¢ Un n√∫mero
                </li>
              </ul>
            </div>

            <Button type="submit" className="w-full" disabled={loading}>
              {loading ? (
                <>
                  <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                  Actualizando...
                </>
              ) : (
                <>
                  <Shield className="mr-2 h-4 w-4" />
                  Restablecer Contrase√±a
                </>
              )}
            </Button>
          </form>
        </CardContent>
      </Card>
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/app/restablecer-contrasena/reset-password-content.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/restablecer-contrasena/reset-password-content.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter, useSearchParams } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { useToast } from "@/hooks/use-toast"
import { Loader2, Lock, Eye, EyeOff, CheckCircle, AlertCircle } from "lucide-react"
import { authAPI } from "@/lib/api"

export default function ResetPasswordContent() {
  const router = useRouter()
  const searchParams = useSearchParams()
  const { toast } = useToast()
  
  const [token, setToken] = useState<string | null>(null)
  const [isValidating, setIsValidating] = useState(true)
  const [isValidToken, setIsValidToken] = useState(false)
  const [isLoading, setIsLoading] = useState(false)
  const [showPassword, setShowPassword] = useState(false)
  const [showConfirmPassword, setShowConfirmPassword] = useState(false)
  
  const [newPassword, setNewPassword] = useState("")
  const [confirmPassword, setConfirmPassword] = useState("")
  const [email, setEmail] = useState("")

  // Validar token al cargar
  useEffect(() => {
    const tokenParam = searchParams.get("token")
    
    if (!tokenParam) {
      toast({
        title: "Error",
        description: "Token no encontrado",
        variant: "destructive",
      })
      setTimeout(() => router.push("/recuperar-contrasena"), 2000)
      return
    }

    setToken(tokenParam)
    validateToken(tokenParam)
  }, [searchParams])

  const validateToken = async (tokenToValidate: string) => {
    try {
      const data = await authAPI.validarToken(tokenToValidate)
      setIsValidToken(true)
      setEmail(data.correo)
      toast({
        title: "Token v√°lido",
        description: "Puedes proceder a cambiar tu contrase√±a",
      })
    } catch (error: any) {
      setIsValidToken(false)
      toast({
        title: "Token inv√°lido",
        description: error.message || "El enlace ha expirado o es inv√°lido",
        variant: "destructive",
      })
      setTimeout(() => router.push("/recuperar-contrasena"), 3000)
    } finally {
      setIsValidating(false)
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()

    // Validaciones
    if (newPassword.length < 8) {
      toast({
        title: "Error",
        description: "La contrase√±a debe tener al menos 8 caracteres",
        variant: "destructive",
      })
      return
    }

    if (newPassword !== confirmPassword) {
      toast({
        title: "Error",
        description: "Las contrase√±as no coinciden",
        variant: "destructive",
      })
      return
    }

    if (!token) {
      toast({
        title: "Error",
        description: "Token no encontrado",
        variant: "destructive",
      })
      return
    }

    setIsLoading(true)

    try {
      const data = await authAPI.restablecerPassword(token, newPassword)
      
      toast({
        title: "¬°√âxito!",
        description: data.mensaje || "Tu contrase√±a ha sido actualizada",
      })
      
      setTimeout(() => {
        router.push("/login")
      }, 2000)
      
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message || "No se pudo restablecer la contrase√±a",
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  // Indicador de fortaleza de contrase√±a
  const getPasswordStrength = (password: string) => {
    if (password.length === 0) return { strength: 0, label: "", color: "" }
    if (password.length < 6) return { strength: 1, label: "D√©bil", color: "text-red-500" }
    if (password.length < 10) return { strength: 2, label: "Media", color: "text-yellow-500" }
    if (password.length >= 10 && /[A-Z]/.test(password) && /[0-9]/.test(password)) {
      return { strength: 3, label: "Fuerte", color: "text-green-500" }
    }
    return { strength: 2, label: "Media", color: "text-yellow-500" }
  }

  const passwordStrength = getPasswordStrength(newPassword)

  if (isValidating) {
    return (
      <div className="flex flex-col items-center justify-center space-y-4 py-8">
        <Loader2 className="h-8 w-8 animate-spin text-purple-600" />
        <p className="text-sm text-gray-600">Validando enlace...</p>
      </div>
    )
  }

  if (!isValidToken) {
    return (
      <div className="flex flex-col items-center justify-center space-y-4 py-8">
        <AlertCircle className="h-12 w-12 text-red-500" />
        <h3 className="text-lg font-semibold">Enlace inv√°lido o expirado</h3>
        <p className="text-sm text-gray-600 text-center">
          Ser√°s redirigido a la p√°gina de recuperaci√≥n...
        </p>
      </div>
    )
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      {email && (
        <div className="bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4">
          <p className="text-sm text-blue-800">
            Restableciendo contrase√±a para: <strong>{email}</strong>
          </p>
        </div>
      )}

      <div className="space-y-2">
        <Label htmlFor="newPassword">Nueva Contrase√±a</Label>
        <div className="relative">
          <Lock className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
          <Input
            id="newPassword"
            type={showPassword ? "text" : "password"}
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            value={newPassword}
            onChange={(e) => setNewPassword(e.target.value)}
            className="pl-10 pr-10"
            required
          />
          <button
            type="button"
            onClick={() => setShowPassword(!showPassword)}
            className="absolute right-3 top-3 text-muted-foreground hover:text-gray-700"
          >
            {showPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
          </button>
        </div>
        
        {newPassword && (
          <div className="space-y-1">
            <div className="flex gap-1">
              {[1, 2, 3].map((level) => (
                <div
                  key={level}
                  className={`h-1 flex-1 rounded-full transition-colors ${
                    level <= passwordStrength.strength
                      ? passwordStrength.strength === 1
                        ? "bg-red-500"
                        : passwordStrength.strength === 2
                        ? "bg-yellow-500"
                        : "bg-green-500"
                      : "bg-gray-200"
                  }`}
                />
              ))}
            </div>
            <p className={`text-xs ${passwordStrength.color}`}>
              Fortaleza: {passwordStrength.label}
            </p>
          </div>
        )}
        
        <p className="text-xs text-muted-foreground">
          M√≠nimo 8 caracteres. Recomendado: incluir may√∫sculas, n√∫meros y s√≠mbolos
        </p>
      </div>

      <div className="space-y-2">
        <Label htmlFor="confirmPassword">Confirmar Contrase√±a</Label>
        <div className="relative">
          <Lock className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
          <Input
            id="confirmPassword"
            type={showConfirmPassword ? "text" : "password"}
            placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
            value={confirmPassword}
            onChange={(e) => setConfirmPassword(e.target.value)}
            className="pl-10 pr-10"
            required
          />
          <button
            type="button"
            onClick={() => setShowConfirmPassword(!showConfirmPassword)}
            className="absolute right-3 top-3 text-muted-foreground hover:text-gray-700"
          >
            {showConfirmPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
          </button>
        </div>
        
        {confirmPassword && (
          <div className="flex items-center gap-2">
            {newPassword === confirmPassword ? (
              <>
                <CheckCircle className="h-4 w-4 text-green-500" />
                <p className="text-xs text-green-600">Las contrase√±as coinciden</p>
              </>
            ) : (
              <>
                <AlertCircle className="h-4 w-4 text-red-500" />
                <p className="text-xs text-red-600">Las contrase√±as no coinciden</p>
              </>
            )}
          </div>
        )}
      </div>

      <Button 
        type="submit" 
        className="w-full" 
        disabled={isLoading || newPassword !== confirmPassword || newPassword.length < 8}
      >
        {isLoading ? (
          <>
            <Loader2 className="mr-2 h-4 w-4 animate-spin" />
            Guardando...
          </>
        ) : (
          "Restablecer Contrase√±a"
        )}
      </Button>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/app/verificar-email/page.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/app/verificar-email/page.tsx
================================================================================

import { VerifyEmailForm } from "@/components/auth/verify-email-form"
import { BookOpen } from "lucide-react"
import Link from "next/link"

export default function VerifyEmailPage() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10">
      <div className="container mx-auto flex min-h-screen flex-col items-center justify-center px-4 py-8">
        <div className="w-full max-w-md">
          {/* Logo */}
          <Link href="/" className="mb-8 flex items-center justify-center gap-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary text-primary-foreground">
              <BookOpen className="h-7 w-7" />
            </div>
            <span className="text-3xl font-bold">SpeakLexi</span>
          </Link>

          {/* Verify Email Card */}
          <div className="rounded-2xl bg-card p-8 shadow-lg">
            <div className="mb-6 text-center">
              <div className="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary/10">
                <svg className="h-8 w-8 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    strokeWidth={2}
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>
              </div>
              <h1 className="text-2xl font-bold text-balance">Verifica tu Email</h1>
              <p className="mt-2 text-muted-foreground leading-relaxed">
                Hemos enviado un c√≥digo de 6 d√≠gitos a tu correo electr√≥nico
              </p>
            </div>

            <VerifyEmailForm />
          </div>
        </div>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components.json
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components.json
================================================================================

{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "app/globals.css",
    "baseColor": "neutral",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  },
  "iconLibrary": "lucide"
}



================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/fill-blank-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/fill-blank-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Save, X, Plus, Trash2 } from "lucide-react"
import { toast } from "sonner"
import { Badge } from "@/components/ui/badge"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

export function FillBlankForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [instrucciones, setInstrucciones] = useState("")
  const [oracion, setOracion] = useState("")
  const [huecos, setHuecos] = useState<{ posicion: number; respuesta: string }[]>([])
  const [palabraHueco, setPalabraHueco] = useState("")
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(10)

  useEffect(() => {
    if (actividadEditar) {
      setInstrucciones(actividadEditar.instrucciones || "")
      setOracion(actividadEditar.pregunta || "")
      setHuecos(actividadEditar.opciones?.huecos || [])
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 10)
    }
  }, [actividadEditar])

  const agregarHueco = () => {
    if (!palabraHueco.trim()) {
      toast.error("Escribe una palabra para el hueco")
      return
    }

    const posicion = huecos.length
    setHuecos([...huecos, { posicion, respuesta: palabraHueco.trim() }])
    setPalabraHueco("")
    toast.success(`Hueco #${posicion + 1} agregado`)
  }

  const eliminarHueco = (index: number) => {
    setHuecos(huecos.filter((_, i) => i !== index))
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!oracion.trim()) {
      toast.error("Escribe la oraci√≥n")
      return
    }

    if (huecos.length === 0) {
      toast.error("Debes agregar al menos un hueco")
      return
    }

    const actividad = {
      tipo: 'fill_blank',
      pregunta: oracion.trim(),
      instrucciones: instrucciones.trim() || "Completa los espacios en blanco",
      opciones: {
        huecos: huecos
      },
      respuesta_correcta: huecos.map(h => h.respuesta),
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="oracion">Oraci√≥n completa *</Label>
        <Textarea
          id="oracion"
          placeholder="Ej: The cat is ____ the table"
          value={oracion}
          onChange={(e) => setOracion(e.target.value)}
          rows={3}
          required
        />
        <p className="text-xs text-muted-foreground">
          üí° Usa ____ para indicar d√≥nde ir√°n los huecos
        </p>
      </div>

      <div className="space-y-2">
        <Label>Palabras para los huecos *</Label>
        <div className="flex gap-2">
          <Input
            placeholder="Escribe la palabra correcta"
            value={palabraHueco}
            onChange={(e) => setPalabraHueco(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), agregarHueco())}
          />
          <Button type="button" onClick={agregarHueco} size="icon">
            <Plus className="h-4 w-4" />
          </Button>
        </div>
        
        {huecos.length > 0 && (
          <div className="space-y-2 mt-2">
            {huecos.map((hueco, i) => (
              <div key={i} className="flex items-center gap-2 p-2 bg-secondary rounded">
                <Badge>Hueco #{i + 1}</Badge>
                <span className="flex-1 font-mono">{hueco.respuesta}</span>
                <Button
                  type="button"
                  variant="ghost"
                  size="icon"
                  onClick={() => eliminarHueco(i)}
                >
                  <Trash2 className="h-4 w-4" />
                </Button>
              </div>
            ))}
          </div>
        )}
      </div>

      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Completa con la preposici√≥n correcta"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: Piensa en posiciones espaciales..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1">
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/matching-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/matching-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Save, X, Plus, Trash2 } from "lucide-react"
import { toast } from "sonner"
import { Card, CardContent } from "@/components/ui/card"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

interface Par {
  izquierda: string
  derecha: string
}

export function MatchingForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [pregunta, setPregunta] = useState("")
  const [instrucciones, setInstrucciones] = useState("")
  const [pares, setPares] = useState<Par[]>([])
  const [izquierda, setIzquierda] = useState("")
  const [derecha, setDerecha] = useState("")
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(10)

  useEffect(() => {
    if (actividadEditar) {
      setPregunta(actividadEditar.pregunta || "")
      setInstrucciones(actividadEditar.instrucciones || "")
      setPares(actividadEditar.opciones?.pares || [])
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 10)
    }
  }, [actividadEditar])

  const agregarPar = () => {
    if (!izquierda.trim() || !derecha.trim()) {
      toast.error("Completa ambos campos del par")
      return
    }

    setPares([...pares, { izquierda: izquierda.trim(), derecha: derecha.trim() }])
    setIzquierda("")
    setDerecha("")
    toast.success("Par agregado")
  }

  const eliminarPar = (index: number) => {
    setPares(pares.filter((_, i) => i !== index))
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!pregunta.trim()) {
      toast.error("Agrega una instrucci√≥n/pregunta")
      return
    }

    if (pares.length < 2) {
      toast.error("Debes agregar al menos 2 pares")
      return
    }

    const actividad = {
      tipo: 'matching',
      pregunta: pregunta.trim(),
      instrucciones: instrucciones.trim() || "Empareja los elementos correctamente",
      opciones: {
        pares: pares
      },
      respuesta_correcta: pares.map((p, i) => ({ izquierda: i, derecha: i })),
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="pregunta">T√≠tulo/Instrucci√≥n *</Label>
        <Input
          id="pregunta"
          placeholder="Ej: Empareja las palabras con sus traducciones"
          value={pregunta}
          onChange={(e) => setPregunta(e.target.value)}
          required
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones adicionales</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Arrastra para conectar los pares"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="space-y-3">
        <Label>Pares a emparejar * (m√≠nimo 2)</Label>
        <div className="grid grid-cols-2 gap-2">
          <Input
            placeholder="Columna izquierda (Ej: Apple)"
            value={izquierda}
            onChange={(e) => setIzquierda(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault())}
          />
          <Input
            placeholder="Columna derecha (Ej: Manzana)"
            value={derecha}
            onChange={(e) => setDerecha(e.target.value)}
            onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault())}
          />
        </div>
        <Button type="button" onClick={agregarPar} className="w-full" variant="outline">
          <Plus className="mr-2 h-4 w-4" />
          Agregar Par
        </Button>

        {pares.length > 0 && (
          <div className="space-y-2 mt-4">
            {pares.map((par, i) => (
              <Card key={i}>
                <CardContent className="p-3">
                  <div className="flex items-center gap-3">
                    <div className="flex-1 grid grid-cols-2 gap-2 text-sm">
                      <div className="font-medium">{par.izquierda}</div>
                      <div className="text-muted-foreground">‚Üî {par.derecha}</div>
                    </div>
                    <Button
                      type="button"
                      variant="ghost"
                      size="icon"
                      onClick={() => eliminarPar(i)}
                    >
                      <Trash2 className="h-4 w-4" />
                    </Button>
                  </div>
                </CardContent>
              </Card>
            ))}
          </div>
        )}
      </div>

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: F√≠jate en las primeras letras..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1" disabled={pares.length < 2}>
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/multiple-choice-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/multiple-choice-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"
import { Save, X } from "lucide-react"
import { toast } from "sonner"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

export function MultipleChoiceForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [pregunta, setPregunta] = useState("")
  const [instrucciones, setInstrucciones] = useState("")
  const [opciones, setOpciones] = useState<string[]>(["", "", "", ""])
  const [respuestaCorrecta, setRespuestaCorrecta] = useState<number>(0)
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(10)

  useEffect(() => {
    if (actividadEditar) {
      setPregunta(actividadEditar.pregunta || "")
      setInstrucciones(actividadEditar.instrucciones || "")
      setOpciones(actividadEditar.opciones || ["", "", "", ""])
      setRespuestaCorrecta(actividadEditar.respuesta_correcta || 0)
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 10)
    }
  }, [actividadEditar])

  const handleOpcionChange = (index: number, valor: string) => {
    const nuevasOpciones = [...opciones]
    nuevasOpciones[index] = valor
    setOpciones(nuevasOpciones)
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!pregunta.trim()) {
      toast.error("La pregunta es obligatoria")
      return
    }

    const opcionesLlenas = opciones.filter(o => o.trim())
    if (opcionesLlenas.length < 2) {
      toast.error("Debes agregar al menos 2 opciones")
      return
    }

    if (!opciones[respuestaCorrecta]?.trim()) {
      toast.error("Debes seleccionar una respuesta correcta v√°lida")
      return
    }

    const actividad = {
      tipo: 'multiple_choice',
      pregunta: pregunta.trim(),
      instrucciones: instrucciones.trim() || "Selecciona la respuesta correcta",
      opciones: opciones.filter(o => o.trim()),
      respuesta_correcta: respuestaCorrecta,
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="pregunta">Pregunta *</Label>
        <Textarea
          id="pregunta"
          placeholder="Ej: What does 'Hello' mean in Spanish?"
          value={pregunta}
          onChange={(e) => setPregunta(e.target.value)}
          rows={2}
          required
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Selecciona la traducci√≥n correcta"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="space-y-3">
        <Label>Opciones * (m√≠nimo 2)</Label>
        <RadioGroup value={respuestaCorrecta.toString()} onValueChange={(v) => setRespuestaCorrecta(parseInt(v))}>
          {opciones.map((opcion, index) => (
            <div key={index} className="flex items-center gap-3">
              <RadioGroupItem value={index.toString()} id={`opcion-${index}`} />
              <Input
                placeholder={`Opci√≥n ${index + 1}`}
                value={opcion}
                onChange={(e) => handleOpcionChange(index, e.target.value)}
                className="flex-1"
              />
              <Label htmlFor={`opcion-${index}`} className="text-xs text-muted-foreground min-w-[80px]">
                {index === respuestaCorrecta && opcion ? "‚úì Correcta" : ""}
              </Label>
            </div>
          ))}
        </RadioGroup>
        <p className="text-xs text-muted-foreground">
          üí° Selecciona el c√≠rculo para marcar la respuesta correcta
        </p>
      </div>

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: Es un saludo com√∫n..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1">
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/translation-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/translation-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Save, X, ArrowRight } from "lucide-react"
import { toast } from "sonner"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

export function TranslationForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [textoOrigen, setTextoOrigen] = useState("")
  const [idiomaOrigen, setIdiomaOrigen] = useState("ingles")
  const [textoDestino, setTextoDestino] = useState("")
  const [idiomaDestino, setIdiomaDestino] = useState("espanol")
  const [instrucciones, setInstrucciones] = useState("")
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(15)

  useEffect(() => {
    if (actividadEditar) {
      setTextoOrigen(actividadEditar.pregunta || "")
      setIdiomaOrigen(actividadEditar.opciones?.idioma_origen || "ingles")
      setTextoDestino(actividadEditar.respuesta_correcta || "")
      setIdiomaDestino(actividadEditar.opciones?.idioma_destino || "espanol")
      setInstrucciones(actividadEditar.instrucciones || "")
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 15)
    }
  }, [actividadEditar])

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!textoOrigen.trim()) {
      toast.error("Escribe el texto a traducir")
      return
    }

    if (!textoDestino.trim()) {
      toast.error("Escribe la traducci√≥n correcta")
      return
    }

    if (idiomaOrigen === idiomaDestino) {
      toast.error("Los idiomas deben ser diferentes")
      return
    }

    const actividad = {
      tipo: 'translation',
      pregunta: textoOrigen.trim(),
      instrucciones: instrucciones.trim() || `Traduce del ${idiomaOrigen} al ${idiomaDestino}`,
      opciones: {
        idioma_origen: idiomaOrigen,
        idioma_destino: idiomaDestino
      },
      respuesta_correcta: textoDestino.trim(),
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Traduce la siguiente frase al espa√±ol"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="grid grid-cols-2 gap-3">
        <div className="space-y-2">
          <Label>Idioma Origen</Label>
          <Select value={idiomaOrigen} onValueChange={setIdiomaOrigen}>
            <SelectTrigger>
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="ingles">üá¨üáß Ingl√©s</SelectItem>
              <SelectItem value="espanol">üá™üá∏ Espa√±ol</SelectItem>
              <SelectItem value="frances">üá´üá∑ Franc√©s</SelectItem>
              <SelectItem value="aleman">üá©üá™ Alem√°n</SelectItem>
              <SelectItem value="italiano">üáÆüáπ Italiano</SelectItem>
            </SelectContent>
          </Select>
        </div>

        <div className="space-y-2">
          <Label>Idioma Destino</Label>
          <Select value={idiomaDestino} onValueChange={setIdiomaDestino}>
            <SelectTrigger>
              <SelectValue />
            </SelectTrigger>
            <SelectContent>
              <SelectItem value="espanol">üá™üá∏ Espa√±ol</SelectItem>
              <SelectItem value="ingles">üá¨üáß Ingl√©s</SelectItem>
              <SelectItem value="frances">üá´üá∑ Franc√©s</SelectItem>
              <SelectItem value="aleman">üá©üá™ Alem√°n</SelectItem>
              <SelectItem value="italiano">üáÆüáπ Italiano</SelectItem>
            </SelectContent>
          </Select>
        </div>
      </div>

      <div className="space-y-2">
        <Label htmlFor="textoOrigen">Texto a traducir *</Label>
        <Textarea
          id="textoOrigen"
          placeholder="Ej: Hello, how are you?"
          value={textoOrigen}
          onChange={(e) => setTextoOrigen(e.target.value)}
          rows={3}
          required
        />
      </div>

      <div className="flex justify-center">
        <ArrowRight className="h-6 w-6 text-muted-foreground" />
      </div>

      <div className="space-y-2">
        <Label htmlFor="textoDestino">Traducci√≥n correcta *</Label>
        <Textarea
          id="textoDestino"
          placeholder="Ej: Hola, ¬øc√≥mo est√°s?"
          value={textoDestino}
          onChange={(e) => setTextoDestino(e.target.value)}
          rows={3}
          required
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: Recuerda usar el pronombre correcto..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1">
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/true-false-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/true-false-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"
import { Save, X } from "lucide-react"
import { toast } from "sonner"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

export function TrueFalseForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [pregunta, setPregunta] = useState("")
  const [instrucciones, setInstrucciones] = useState("")
  const [respuestaCorrecta, setRespuestaCorrecta] = useState<boolean>(true)
  const [explicacion, setExplicacion] = useState("")
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(10)

  useEffect(() => {
    if (actividadEditar) {
      setPregunta(actividadEditar.pregunta || "")
      setInstrucciones(actividadEditar.instrucciones || "")
      setRespuestaCorrecta(actividadEditar.respuesta_correcta || true)
      setExplicacion(actividadEditar.retroalimentacion?.explicacion || "")
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 10)
    }
  }, [actividadEditar])

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!pregunta.trim()) {
      toast.error("La afirmaci√≥n es obligatoria")
      return
    }

    const actividad = {
      tipo: 'true_false',
      pregunta: pregunta.trim(),
      instrucciones: instrucciones.trim() || "¬øEs verdadero o falso?",
      opciones: ["Verdadero", "Falso"],
      respuesta_correcta: respuestaCorrecta,
      retroalimentacion: {
        explicacion: explicacion.trim()
      },
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="pregunta">Afirmaci√≥n *</Label>
        <Textarea
          id="pregunta"
          placeholder="Ej: The capital of France is Paris"
          value={pregunta}
          onChange={(e) => setPregunta(e.target.value)}
          rows={2}
          required
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Lee la afirmaci√≥n y decide si es correcta"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="space-y-3">
        <Label>Respuesta Correcta *</Label>
        <RadioGroup 
          value={respuestaCorrecta.toString()} 
          onValueChange={(v) => setRespuestaCorrecta(v === 'true')}
        >
          <div className="flex items-center space-x-2">
            <RadioGroupItem value="true" id="verdadero" />
            <Label htmlFor="verdadero" className="font-normal cursor-pointer">
              ‚úì Verdadero
            </Label>
          </div>
          <div className="flex items-center space-x-2">
            <RadioGroupItem value="false" id="falso" />
            <Label htmlFor="falso" className="font-normal cursor-pointer">
              ‚úó Falso
            </Label>
          </div>
        </RadioGroup>
      </div>

      <div className="space-y-2">
        <Label htmlFor="explicacion">Explicaci√≥n (Opcional)</Label>
        <Textarea
          id="explicacion"
          placeholder="Explica por qu√© es verdadero o falso..."
          value={explicacion}
          onChange={(e) => setExplicacion(e.target.value)}
          rows={2}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: Piensa en la geograf√≠a europea..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1">
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-forms/word-order-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-forms/word-order-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Save, X, Shuffle } from "lucide-react"
import { toast } from "sonner"
import { Badge } from "@/components/ui/badge"

interface ActivityFormProps {
  onGuardar: (actividad: any) => void
  onCancelar: () => void
  actividadEditar?: any
}

export function WordOrderForm({ onGuardar, onCancelar, actividadEditar }: ActivityFormProps) {
  const [pregunta, setPregunta] = useState("")
  const [instrucciones, setInstrucciones] = useState("")
  const [oracionCorrecta, setOracionCorrecta] = useState("")
  const [pista, setPista] = useState("")
  const [puntos, setPuntos] = useState(10)

  useEffect(() => {
    if (actividadEditar) {
      setPregunta(actividadEditar.pregunta || "")
      setInstrucciones(actividadEditar.instrucciones || "")
      setOracionCorrecta(actividadEditar.respuesta_correcta?.join(" ") || "")
      setPista(actividadEditar.pista || "")
      setPuntos(actividadEditar.puntos || 10)
    }
  }, [actividadEditar])

  const palabras = oracionCorrecta.trim().split(/\s+/).filter(p => p)

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!pregunta.trim()) {
      toast.error("Escribe la instrucci√≥n")
      return
    }

    if (!oracionCorrecta.trim()) {
      toast.error("Escribe la oraci√≥n correcta")
      return
    }

    if (palabras.length < 3) {
      toast.error("La oraci√≥n debe tener al menos 3 palabras")
      return
    }

    // Desordenar palabras para el estudiante
    const palabrasDesordenadas = [...palabras].sort(() => Math.random() - 0.5)

    const actividad = {
      tipo: 'word_order',
      pregunta: pregunta.trim(),
      instrucciones: instrucciones.trim() || "Ordena las palabras para formar una oraci√≥n correcta",
      opciones: {
        palabras: palabrasDesordenadas
      },
      respuesta_correcta: palabras,
      pista: pista.trim(),
      puntos,
      orden: actividadEditar?.orden || 0
    }

    onGuardar(actividad)
    toast.success("Actividad guardada")
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="pregunta">Instrucci√≥n/Contexto *</Label>
        <Textarea
          id="pregunta"
          placeholder="Ej: Ordena las palabras para formar una pregunta en ingl√©s"
          value={pregunta}
          onChange={(e) => setPregunta(e.target.value)}
          rows={2}
          required
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="instrucciones">Instrucciones adicionales</Label>
        <Input
          id="instrucciones"
          placeholder="Ej: Arrastra las palabras en el orden correcto"
          value={instrucciones}
          onChange={(e) => setInstrucciones(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="oracion">Oraci√≥n correcta * (m√≠nimo 3 palabras)</Label>
        <Textarea
          id="oracion"
          placeholder="Ej: How are you today"
          value={oracionCorrecta}
          onChange={(e) => setOracionCorrecta(e.target.value)}
          rows={2}
          required
        />
        <p className="text-xs text-muted-foreground">
          üí° Separa las palabras con espacios. Se desordenar√°n autom√°ticamente.
        </p>
      </div>

      {palabras.length > 0 && (
        <div className="space-y-2">
          <Label>Vista previa (orden correcto):</Label>
          <div className="flex flex-wrap gap-2 p-3 bg-secondary rounded-lg">
            {palabras.map((palabra, i) => (
              <Badge key={i} variant="outline" className="text-sm">
                {i + 1}. {palabra}
              </Badge>
            ))}
          </div>
        </div>
      )}

      <div className="space-y-2">
        <Label htmlFor="pista">Pista (Opcional)</Label>
        <Input
          id="pista"
          placeholder="Ej: Recuerda que las preguntas en ingl√©s empiezan con..."
          value={pista}
          onChange={(e) => setPista(e.target.value)}
        />
      </div>

      <div className="space-y-2">
        <Label htmlFor="puntos">Puntos</Label>
        <Input
          id="puntos"
          type="number"
          min="1"
          value={puntos}
          onChange={(e) => setPuntos(parseInt(e.target.value))}
        />
      </div>

      <div className="flex gap-3 pt-4">
        <Button type="button" variant="outline" onClick={onCancelar} className="flex-1">
          <X className="mr-2 h-4 w-4" />
          Cancelar
        </Button>
        <Button type="submit" className="flex-1" disabled={palabras.length < 3}>
          <Save className="mr-2 h-4 w-4" />
          Guardar Actividad
        </Button>
      </div>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/activity-modal.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/activity-modal.tsx
================================================================================

"use client"

import { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from "@/components/ui/dialog"
import { MultipleChoiceForm } from "./activity-forms/multiple-choice-form"
import { FillBlankForm } from "./activity-forms/fill-blank-form"
import { MatchingForm } from "./activity-forms/matching-form"
import { TranslationForm } from "./activity-forms/translation-form"
import { TrueFalseForm } from "./activity-forms/true-false-form"
import { WordOrderForm } from "./activity-forms/word-order-form"

interface Actividad {
  tipo: string
  pregunta: string
  instrucciones?: string
  opciones?: any
  respuesta_correcta: any
  retroalimentacion?: any
  pista?: string
  puntos: number
  orden: number
  multimedia_id?: number
}

interface ActivityModalProps {
  open: boolean
  onOpenChange: (open: boolean) => void
  tipoActividad: string | null
  onGuardar: (actividad: Actividad) => void
  actividadEditar?: Actividad | null
}

const TITULOS_ACTIVIDAD: Record<string, string> = {
  multiple_choice: "üéØ Opci√≥n M√∫ltiple",
  fill_blank: "‚úèÔ∏è Completar Espacios",
  matching: "üîó Emparejar",
  translation: "üåê Traducci√≥n",
  listen_repeat: "üé§ Escuchar y Repetir",
  true_false: "‚úì‚úó Verdadero/Falso",
  word_order: "üìù Ordenar Palabras"
}

export function ActivityModal({ 
  open, 
  onOpenChange, 
  tipoActividad, 
  onGuardar,
  actividadEditar 
}: ActivityModalProps) {
  
  if (!tipoActividad) return null

  const renderForm = () => {
    const props = {
      onGuardar,
      onCancelar: () => onOpenChange(false),
      actividadEditar
    }

    switch (tipoActividad) {
      case 'multiple_choice':
        return <MultipleChoiceForm {...props} />
      case 'fill_blank':
        return <FillBlankForm {...props} />
      case 'matching':
        return <MatchingForm {...props} />
      case 'translation':
        return <TranslationForm {...props} />
      case 'true_false':
        return <TrueFalseForm {...props} />
      case 'word_order':
        return <WordOrderForm {...props} />
      case 'listen_repeat':
        // Por ahora, placeholder hasta que implementes multimedia
        return (
          <div className="p-8 text-center text-muted-foreground">
            <p className="mb-4">üé§ Actividad de Escuchar y Repetir</p>
            <p className="text-sm">Esta actividad requiere funcionalidad de audio.</p>
            <p className="text-sm">Se implementar√° cuando est√© lista la biblioteca multimedia.</p>
          </div>
        )
      default:
        return null
    }
  }

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent className="max-w-2xl max-h-[90vh] overflow-y-auto">
        <DialogHeader>
          <DialogTitle>
            {actividadEditar ? "Editar" : "Crear"} Actividad: {TITULOS_ACTIVIDAD[tipoActividad]}
          </DialogTitle>
          <DialogDescription>
            Completa todos los campos para crear una actividad interactiva
          </DialogDescription>
        </DialogHeader>
        {renderForm()}
      </DialogContent>
    </Dialog>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/admin-stats.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/admin-stats.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { BookOpen, ImageIcon, Users, FileText } from "lucide-react"
import { useState, useEffect } from "react"
import { leccionesAPI, multimediaAPI } from "@/lib/api"

export function AdminStats() {
  const [stats, setStats] = useState({
    totalLecciones: 0,
    totalMultimedia: 0,
    totalUsuarios: 0,
    cursosActivos: 0,
    loading: true
  })

  useEffect(() => {
    cargarEstadisticas()
  }, [])

  const cargarEstadisticas = async () => {
    try {
      // Obtener estad√≠sticas de lecciones
      const leccionesRes = await leccionesAPI.listar({ por_pagina: 1 })
      
      // Obtener estad√≠sticas de multimedia
      const multimediaRes = await multimediaAPI.estadisticas()
      
      setStats({
        totalLecciones: leccionesRes.total || 0,
        totalMultimedia: multimediaRes.total_recursos || 0,
        totalUsuarios: 0, // TODO: Implementar endpoint de usuarios
        cursosActivos: 0, // TODO: Implementar endpoint de cursos
        loading: false
      })
    } catch (error) {
      console.error("Error al cargar estad√≠sticas:", error)
      setStats(prev => ({ ...prev, loading: false }))
    }
  }

  const statsData = [
    {
      label: "Total Lecciones",
      value: stats.totalLecciones,
      change: stats.loading ? "Cargando..." : "Ver todas",
      icon: BookOpen,
      color: "text-primary",
    },
    {
      label: "Archivos Multimedia",
      value: stats.totalMultimedia,
      change: stats.loading ? "Cargando..." : "Ver biblioteca",
      icon: ImageIcon,
      color: "text-secondary",
    },
    {
      label: "Usuarios Totales",
      value: stats.totalUsuarios || "N/A",
      change: "Pr√≥ximamente",
      icon: Users,
      color: "text-accent",
    },
    {
      label: "Cursos Activos",
      value: stats.cursosActivos || "N/A",
      change: "Pr√≥ximamente",
      icon: FileText,
      color: "text-primary",
    },
  ]

  return (
    <Card className="p-6">
      <h2 className="mb-4 text-xl font-bold">Estad√≠sticas de Contenido</h2>

      <div className="grid gap-4 sm:grid-cols-2">
        {statsData.map((stat, index) => {
          const Icon = stat.icon
          return (
            <div key={index} className="flex items-start gap-3 rounded-lg bg-muted/50 p-4">
              <div className={`flex h-10 w-10 items-center justify-center rounded-lg bg-background ${stat.color}`}>
                <Icon className="h-5 w-5" />
              </div>
              <div className="flex-1">
                <p className="text-sm text-muted-foreground">{stat.label}</p>
                <div className="mt-1 flex items-baseline gap-2">
                  <span className="text-2xl font-bold">
                    {stats.loading ? "..." : stat.value}
                  </span>
                </div>
                <p className="mt-1 text-xs text-muted-foreground">{stat.change}</p>
              </div>
            </div>
          )
        })}
      </div>
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/create-lesson-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/create-lesson-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Badge } from "@/components/ui/badge"
import { ArrowLeft, Save, Loader2, Plus, X, Upload, PlayCircle, Image as ImageIcon, Volume2 } from "lucide-react"
import Link from "next/link"
import { toast } from "sonner"
import { cursosAPI } from "@/lib/api" // ‚Üê ESTE ES EL CAMBIO CLAVE

// Tipos de actividades gamificadas
const TIPOS_ACTIVIDAD = [
  { value: 'multiple_choice', label: 'üéØ Opci√≥n m√∫ltiple', icon: 'üéØ' },
  { value: 'fill_blank', label: '‚úèÔ∏è Completar espacios', icon: '‚úèÔ∏è' },
  { value: 'matching', label: 'üîó Emparejar', icon: 'üîó' },
  { value: 'translation', label: 'üåê Traducci√≥n', icon: 'üåê' },
  { value: 'listen_repeat', label: 'üé§ Escuchar y repetir', icon: 'üé§' },
  { value: 'true_false', label: '‚úì‚úó Verdadero/Falso', icon: '‚úì' },
  { value: 'word_order', label: 'üìù Ordenar palabras', icon: 'üìù' },
]

interface Curso {
  id: number
  nombre: string
  nivel: string
  codigo: string
  idioma: string
}

interface Actividad {
  tipo: string
  pregunta: string
  instrucciones?: string
  opciones?: any
  respuesta_correcta: any
  pista?: string
  puntos: number
  multimedia_id?: number
}

export function CreateLessonForm() {
  const router = useRouter()
  const [saving, setSaving] = useState(false)
  const [step, setStep] = useState(1)
  const [cursos, setCursos] = useState<Curso[]>([])
  const [loadingCursos, setLoadingCursos] = useState(false)
  
  const [formData, setFormData] = useState({
    // Paso 1: B√°sico + Curso
    curso_id: null as number | null,
    titulo: "",
    descripcion: "",
    nivel: "principiante",
    idioma: "ingles",
    categoria: "",
    duracion_estimada: 10,
    puntos_xp: 50,
    orden: 0,
    
    // Paso 2: Contenido
    contenido: {
      objetivos: [] as string[],
      vocabulario_clave: [] as string[],
      introduccion: "",
      ejemplos: [] as string[]
    },
    etiquetas: [] as string[],
    
    // Paso 3: Actividades gamificadas
    actividades: [] as Actividad[],
    
    // Paso 4: Multimedia
    multimedia_ids: [] as number[]
  })

  // Estados temporales para agregar items
  const [objetivoTemp, setObjetivoTemp] = useState("")
  const [vocabularioTemp, setVocabularioTemp] = useState("")
  const [etiquetaTemp, setEtiquetaTemp] = useState("")
  const [ejemploTemp, setEjemploTemp] = useState("")

  // Cargar cursos disponibles
  useEffect(() => {
    cargarCursos()
  }, [])

  // ‚Üê ESTE ES EL CAMBIO PRINCIPAL
  const cargarCursos = async () => {
    try {
      setLoadingCursos(true)
      console.log('üîÑ Cargando cursos con cursosAPI...')
      
      const data = await cursosAPI.listar({ activo: true })
      
      console.log('‚úÖ Cursos recibidos:', data)
      setCursos(data.cursos || [])
      
      if (data.cursos && data.cursos.length > 0) {
        toast.success(`${data.cursos.length} cursos cargados`)
      } else {
        toast.warning('No hay cursos disponibles')
      }
    } catch (error: any) {
      console.error('‚ùå Error al cargar cursos:', error)
      toast.error(error.message || 'Error al cargar cursos')
    } finally {
      setLoadingCursos(false)
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    if (!formData.curso_id) {
      toast.error("Debes seleccionar un curso")
      setStep(1)
      return
    }

    if (formData.actividades.length === 0) {
      toast.error("Debes agregar al menos una actividad gamificada")
      setStep(3)
      return
    }
    
    try {
      setSaving(true)
      
      const leccionData = {
        curso_id: formData.curso_id,
        titulo: formData.titulo,
        descripcion: formData.descripcion,
        contenido: formData.contenido,
        nivel: formData.nivel,
        idioma: formData.idioma,
        categoria: formData.categoria,
        etiquetas: formData.etiquetas,
        duracion_estimada: formData.duracion_estimada,
        puntos_xp: formData.puntos_xp,
        orden: formData.orden,
        estado: 'borrador'
      }
      
      const response = await fetch('/api/lecciones', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`
        },
        body: JSON.stringify(leccionData)
      })

      if (!response.ok) {
        const error = await response.json()
        throw new Error(error.error || 'Error al crear lecci√≥n')
      }

      const data = await response.json()
      const leccionId = data.leccion.id

      // Crear actividades
      for (const actividad of formData.actividades) {
        await fetch('/api/actividades', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('token')}`
          },
          body: JSON.stringify({
            leccion_id: leccionId,
            ...actividad
          })
        })
      }
      
      toast.success("Lecci√≥n creada exitosamente")
      router.push(`/admin/lecciones/${leccionId}/editar`)
      
    } catch (error: any) {
      console.error("Error al crear lecci√≥n:", error)
      toast.error(error.message || "Error al crear lecci√≥n")
    } finally {
      setSaving(false)
    }
  }

  // Funciones auxiliares
  const agregarObjetivo = () => {
    if (objetivoTemp.trim()) {
      setFormData({
        ...formData,
        contenido: {
          ...formData.contenido,
          objetivos: [...formData.contenido.objetivos, objetivoTemp.trim()]
        }
      })
      setObjetivoTemp("")
    }
  }

  const eliminarObjetivo = (index: number) => {
    setFormData({
      ...formData,
      contenido: {
        ...formData.contenido,
        objetivos: formData.contenido.objetivos.filter((_, i) => i !== index)
      }
    })
  }

  const agregarVocabulario = () => {
    if (vocabularioTemp.trim()) {
      setFormData({
        ...formData,
        contenido: {
          ...formData.contenido,
          vocabulario_clave: [...formData.contenido.vocabulario_clave, vocabularioTemp.trim()]
        }
      })
      setVocabularioTemp("")
    }
  }

  const agregarEtiqueta = () => {
    if (etiquetaTemp.trim() && !formData.etiquetas.includes(etiquetaTemp.trim())) {
      setFormData({
        ...formData,
        etiquetas: [...formData.etiquetas, etiquetaTemp.trim()]
      })
      setEtiquetaTemp("")
    }
  }

  const cursoSeleccionado = cursos.find(c => c.id === formData.curso_id)

  return (
    <form onSubmit={handleSubmit} className="space-y-6">
      {/* Indicador de pasos */}
      <Card>
        <CardContent className="pt-6">
          <div className="flex items-center justify-between">
            {[
              { num: 1, label: 'Informaci√≥n B√°sica' },
              { num: 2, label: 'Contenido' },
              { num: 3, label: 'Actividades' },
              { num: 4, label: 'Multimedia' }
            ].map((s, idx) => (
              <div key={s.num} className="flex items-center">
                <div className={`flex h-10 w-10 items-center justify-center rounded-full ${
                  step >= s.num ? 'bg-primary text-primary-foreground' : 'bg-secondary'
                }`}>
                  {s.num}
                </div>
                <span className="ml-2 hidden sm:inline">{s.label}</span>
                {idx < 3 && <div className="mx-4 h-1 w-12 bg-secondary" />}
              </div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* PASO 1: Informaci√≥n B√°sica + Curso */}
      {step === 1 && (
        <Card>
          <CardHeader>
            <CardTitle>Paso 1: Informaci√≥n B√°sica</CardTitle>
            <CardDescription>Selecciona el curso y completa los datos principales</CardDescription>
          </CardHeader>

          <CardContent className="space-y-6">
            {/* Selector de Curso - M√ÅS PROMINENTE */}
            <div className="space-y-2 rounded-lg border-2 border-primary/50 bg-primary/5 p-4">
              <Label htmlFor="curso" className="text-lg font-semibold">
                üéì Curso de la Lecci√≥n *
              </Label>
              <Select 
                value={formData.curso_id?.toString() || ""}
                onValueChange={(value) => {
                  const cursoId = parseInt(value)
                  const curso = cursos.find(c => c.id === cursoId)
                  setFormData({
                    ...formData, 
                    curso_id: cursoId,
                    idioma: curso?.idioma || formData.idioma,
                    nivel: curso?.nivel === 'A1' ? 'principiante' : 
                           curso?.nivel === 'B1' || curso?.nivel === 'B2' ? 'intermedio' : 'avanzado'
                  })
                }}
              >
                <SelectTrigger className="h-12">
                  <SelectValue placeholder="Selecciona el curso..." />
                </SelectTrigger>
                <SelectContent>
                  {loadingCursos ? (
                    <SelectItem value="loading" disabled>Cargando cursos...</SelectItem>
                  ) : cursos.length === 0 ? (
                    <SelectItem value="empty" disabled>No hay cursos disponibles</SelectItem>
                  ) : (
                    cursos.map((curso) => (
                      <SelectItem key={curso.id} value={curso.id.toString()}>
                        {curso.codigo} - {curso.nombre} ({curso.nivel})
                      </SelectItem>
                    ))
                  )}
                </SelectContent>
              </Select>
              {cursoSeleccionado && (
                <div className="mt-2 text-sm text-muted-foreground">
                  ‚ÑπÔ∏è Esta lecci√≥n ser√° parte de: <strong>{cursoSeleccionado.nombre}</strong>
                </div>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="titulo">T√≠tulo de la Lecci√≥n *</Label>
              <Input 
                id="titulo" 
                placeholder="Ej: Saludos y Presentaciones"
                value={formData.titulo}
                onChange={(e) => setFormData({...formData, titulo: e.target.value})}
                required
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="descripcion">Descripci√≥n *</Label>
              <Textarea
                id="descripcion"
                placeholder="Describe brevemente de qu√© trata esta lecci√≥n..."
                value={formData.descripcion}
                onChange={(e) => setFormData({...formData, descripcion: e.target.value})}
                rows={3}
                required
              />
            </div>

            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label>Nivel (seg√∫n curso)</Label>
                <Input value={formData.nivel} disabled className="bg-secondary" />
              </div>

              <div className="space-y-2">
                <Label>Idioma (seg√∫n curso)</Label>
                <Input value={formData.idioma} disabled className="bg-secondary" />
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="categoria">Categor√≠a</Label>
              <Select 
                value={formData.categoria}
                onValueChange={(value) => setFormData({...formData, categoria: value})}
              >
                <SelectTrigger>
                  <SelectValue placeholder="Selecciona una categor√≠a..." />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="vocabulario">üìö Vocabulario</SelectItem>
                  <SelectItem value="gramatica">üìñ Gram√°tica</SelectItem>
                  <SelectItem value="pronunciacion">üó£Ô∏è Pronunciaci√≥n</SelectItem>
                  <SelectItem value="conversacion">üí¨ Conversaci√≥n</SelectItem>
                  <SelectItem value="lectura">üì∞ Lectura</SelectItem>
                  <SelectItem value="escritura">‚úçÔ∏è Escritura</SelectItem>
                  <SelectItem value="comprension_auditiva">üëÇ Comprensi√≥n Auditiva</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="grid gap-4 sm:grid-cols-3">
              <div className="space-y-2">
                <Label htmlFor="duracion">‚è±Ô∏è Duraci√≥n (min) *</Label>
                <Input 
                  id="duracion" 
                  type="number" 
                  min="1"
                  value={formData.duracion_estimada}
                  onChange={(e) => setFormData({...formData, duracion_estimada: parseInt(e.target.value)})}
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="xp">‚≠ê Puntos XP *</Label>
                <Input 
                  id="xp" 
                  type="number"
                  min="0"
                  value={formData.puntos_xp}
                  onChange={(e) => setFormData({...formData, puntos_xp: parseInt(e.target.value)})}
                  required
                />
              </div>

              <div className="space-y-2">
                <Label htmlFor="orden">üî¢ Orden</Label>
                <Input 
                  id="orden" 
                  type="number"
                  min="0"
                  value={formData.orden}
                  onChange={(e) => setFormData({...formData, orden: parseInt(e.target.value)})}
                />
              </div>
            </div>

            <div className="flex gap-3">
              <Button 
                type="button" 
                onClick={() => setStep(2)} 
                className="flex-1"
                disabled={!formData.curso_id || !formData.titulo || !formData.descripcion}
              >
                Siguiente
              </Button>
              <Button variant="outline" asChild>
                <Link href="/admin/lecciones">Cancelar</Link>
              </Button>
            </div>
          </CardContent>
        </Card>
      )}

      {/* PASO 2: Contenido Detallado */}
      {step === 2 && (
        <Card>
          <CardHeader>
            <CardTitle>Paso 2: Contenido Pedag√≥gico</CardTitle>
            <CardDescription>Objetivos, vocabulario y estructura</CardDescription>
          </CardHeader>

          <CardContent className="space-y-6">
            <div className="space-y-2">
              <Label>üìå Objetivos de Aprendizaje</Label>
              <div className="flex gap-2">
                <Input 
                  placeholder="Ej: Aprender saludos formales en ingl√©s"
                  value={objetivoTemp}
                  onChange={(e) => setObjetivoTemp(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), agregarObjetivo())}
                />
                <Button type="button" onClick={agregarObjetivo} size="icon">
                  <Plus className="h-4 w-4" />
                </Button>
              </div>
              {formData.contenido.objetivos.length > 0 && (
                <div className="space-y-2 mt-2">
                  {formData.contenido.objetivos.map((obj, i) => (
                    <div key={i} className="flex items-center gap-2 p-2 bg-secondary rounded">
                      <span className="flex-1 text-sm">{obj}</span>
                      <Button type="button" variant="ghost" size="icon" onClick={() => eliminarObjetivo(i)}>
                        <X className="h-4 w-4" />
                      </Button>
                    </div>
                  ))}
                </div>
              )}
            </div>

            <div className="space-y-2">
              <Label>üìñ Vocabulario Clave</Label>
              <div className="flex gap-2">
                <Input 
                  placeholder="Ej: Hello, Good morning, How are you?"
                  value={vocabularioTemp}
                  onChange={(e) => setVocabularioTemp(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), agregarVocabulario())}
                />
                <Button type="button" onClick={agregarVocabulario} size="icon">
                  <Plus className="h-4 w-4" />
                </Button>
              </div>
              {formData.contenido.vocabulario_clave.length > 0 && (
                <div className="flex flex-wrap gap-2 mt-2">
                  {formData.contenido.vocabulario_clave.map((vocab, i) => (
                    <Badge key={i} variant="secondary">
                      {vocab}
                      <button type="button" onClick={() => {
                        setFormData({
                          ...formData,
                          contenido: {
                            ...formData.contenido,
                            vocabulario_clave: formData.contenido.vocabulario_clave.filter((_, idx) => idx !== i)
                          }
                        })
                      }} className="ml-1">
                        <X className="h-3 w-3" />
                      </button>
                    </Badge>
                  ))}
                </div>
              )}
            </div>

            <div className="space-y-2">
              <Label htmlFor="introduccion">üí° Introducci√≥n</Label>
              <Textarea
                id="introduccion"
                placeholder="Breve introducci√≥n al tema de la lecci√≥n..."
                value={formData.contenido.introduccion}
                onChange={(e) => setFormData({
                  ...formData,
                  contenido: {...formData.contenido, introduccion: e.target.value}
                })}
                rows={3}
              />
            </div>

            <div className="space-y-2">
              <Label>üè∑Ô∏è Etiquetas</Label>
              <div className="flex gap-2">
                <Input 
                  placeholder="Ej: saludos, presentaciones, b√°sico"
                  value={etiquetaTemp}
                  onChange={(e) => setEtiquetaTemp(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), agregarEtiqueta())}
                />
                <Button type="button" onClick={agregarEtiqueta} size="icon">
                  <Plus className="h-4 w-4" />
                </Button>
              </div>
              {formData.etiquetas.length > 0 && (
                <div className="flex flex-wrap gap-2 mt-2">
                  {formData.etiquetas.map((tag, i) => (
                    <Badge key={i} variant="outline">
                      {tag}
                      <button type="button" onClick={() => {
                        setFormData({...formData, etiquetas: formData.etiquetas.filter((_, idx) => idx !== i)})
                      }} className="ml-1">
                        <X className="h-3 w-3" />
                      </button>
                    </Badge>
                  ))}
                </div>
              )}
            </div>

            <div className="flex gap-3">
              <Button type="button" variant="outline" onClick={() => setStep(1)}>
                <ArrowLeft className="mr-2 h-4 w-4" />
                Anterior
              </Button>
              <Button type="button" onClick={() => setStep(3)} className="flex-1">
                Siguiente: Agregar Actividades
              </Button>
            </div>
          </CardContent>
        </Card>
      )}

      {/* PASO 3: Actividades Gamificadas */}
      {step === 3 && (
        <Card>
          <CardHeader>
            <CardTitle>Paso 3: Actividades Gamificadas üéÆ</CardTitle>
            <CardDescription>
              Agrega juegos y ejercicios interactivos (m√≠nimo 1 requerido)
            </CardDescription>
          </CardHeader>

          <CardContent className="space-y-6">
            <div className="rounded-lg border-2 border-dashed border-primary/30 p-6">
              <h3 className="mb-4 font-semibold">Tipos de Actividades Disponibles</h3>
              <div className="grid gap-3 sm:grid-cols-2">
                {TIPOS_ACTIVIDAD.map((tipo) => (
                  <Button
                    key={tipo.value}
                    type="button"
                    variant="outline"
                    className="justify-start h-auto p-4"
                    onClick={() => {
                      toast.info(`Creador de "${tipo.label}" pr√≥ximamente`)
                    }}
                  >
                    <span className="text-2xl mr-3">{tipo.icon}</span>
                    <span>{tipo.label}</span>
                  </Button>
                ))}
              </div>
            </div>

            {formData.actividades.length > 0 && (
              <div className="space-y-3">
                <h3 className="font-semibold">Actividades Agregadas ({formData.actividades.length})</h3>
                {formData.actividades.map((act, idx) => (
                  <div key={idx} className="flex items-center gap-3 rounded-lg border p-3">
                    <span className="text-2xl">
                      {TIPOS_ACTIVIDAD.find(t => t.value === act.tipo)?.icon || 'üéÆ'}
                    </span>
                    <div className="flex-1">
                      <p className="font-medium">{act.pregunta}</p>
                      <p className="text-sm text-muted-foreground">
                        {TIPOS_ACTIVIDAD.find(t => t.value === act.tipo)?.label} ‚Ä¢ {act.puntos} pts
                      </p>
                    </div>
                    <Button
                      type="button"
                      variant="ghost"
                      size="icon"
                      onClick={() => {
                        setFormData({
                          ...formData,
                          actividades: formData.actividades.filter((_, i) => i !== idx)
                        })
                      }}
                    >
                      <X className="h-4 w-4" />
                    </Button>
                  </div>
                ))}
              </div>
            )}

            {formData.actividades.length === 0 && (
              <div className="rounded-lg bg-yellow-50 p-4 text-yellow-900">
                ‚ö†Ô∏è Debes agregar al menos una actividad para continuar
              </div>
            )}

            <div className="flex gap-3">
              <Button type="button" variant="outline" onClick={() => setStep(2)}>
                <ArrowLeft className="mr-2 h-4 w-4" />
                Anterior
              </Button>
              <Button 
                type="button" 
                onClick={() => setStep(4)} 
                className="flex-1"
                disabled={formData.actividades.length === 0}
              >
                Siguiente: Multimedia
              </Button>
            </div>
          </CardContent>
        </Card>
      )}

      {/* PASO 4: Multimedia */}
      {step === 4 && (
        <Card>
          <CardHeader>
            <CardTitle>Paso 4: Recursos Multimedia üì∏üéµ</CardTitle>
            <CardDescription>Agrega im√°genes, audios o videos (opcional)</CardDescription>
          </CardHeader>

          <CardContent className="space-y-6">
            <div className="grid gap-4 sm:grid-cols-3">
              <Button type="button" variant="outline" className="h-24">
                <div className="text-center">
                  <ImageIcon className="mx-auto mb-2 h-8 w-8" />
                  <span>Subir Imagen</span>
                </div>
              </Button>
              <Button type="button" variant="outline" className="h-24">
                <div className="text-center">
                  <Volume2 className="mx-auto mb-2 h-8 w-8" />
                  <span>Subir Audio</span>
                </div>
              </Button>
              <Button type="button" variant="outline" className="h-24">
                <div className="text-center">
                  <PlayCircle className="mx-auto mb-2 h-8 w-8" />
                  <span>Subir Video</span>
                </div>
              </Button>
            </div>

            <p className="text-sm text-muted-foreground text-center">
              üí° Los archivos multimedia se asociar√°n autom√°ticamente a esta lecci√≥n
            </p>

            <div className="flex gap-3">
              <Button type="button" variant="outline" onClick={() => setStep(3)}>
                <ArrowLeft className="mr-2 h-4 w-4" />
                Anterior
              </Button>
              <Button type="submit" className="flex-1" disabled={saving}>
                {saving ? (
                  <>
                    <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                    Creando lecci√≥n...
                  </>
                ) : (
                  <>
                    <Save className="mr-2 h-4 w-4" />
                    Crear Lecci√≥n Completa
                  </>
                )}
              </Button>
            </div>
          </CardContent>
        </Card>
      )}
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/media-library-preview.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/media-library-preview.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import Link from "next/link"
import { ImageIcon, Music, Video, FileText } from "lucide-react"
import { useState, useEffect } from "react"
import { multimediaAPI } from "@/lib/api"

export function MediaLibraryPreview() {
  const [mediaStats, setMediaStats] = useState<any>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    cargarEstadisticas()
  }, [])

  const cargarEstadisticas = async () => {
    try {
      const stats = await multimediaAPI.estadisticas()
      setMediaStats(stats)
    } catch (error) {
      console.error("Error al cargar estad√≠sticas multimedia:", error)
    } finally {
      setLoading(false)
    }
  }

  const getMediaData = () => {
    if (!mediaStats?.por_tipo) {
      return [
        { type: "Im√°genes", count: 0, icon: ImageIcon, color: "text-primary" },
        { type: "Audio", count: 0, icon: Music, color: "text-secondary" },
        { type: "Videos", count: 0, icon: Video, color: "text-accent" },
        { type: "Documentos", count: 0, icon: FileText, color: "text-muted-foreground" },
      ]
    }

    return [
      { 
        type: "Im√°genes", 
        count: mediaStats.por_tipo.imagen || 0, 
        icon: ImageIcon, 
        color: "text-primary" 
      },
      { 
        type: "Audio", 
        count: mediaStats.por_tipo.audio || 0, 
        icon: Music, 
        color: "text-secondary" 
      },
      { 
        type: "Videos", 
        count: mediaStats.por_tipo.video || 0, 
        icon: Video, 
        color: "text-accent" 
      },
      { 
        type: "Documentos", 
        count: mediaStats.por_tipo.documento || 0, 
        icon: FileText, 
        color: "text-muted-foreground" 
      },
    ]
  }

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h3 className="font-bold">Biblioteca Multimedia</h3>
        <Link href="/admin/multimedia" className="text-sm text-primary hover:underline">
          Ver Todo
        </Link>
      </div>

      {loading ? (
        <div className="py-8 text-center text-sm text-muted-foreground">
          Cargando estad√≠sticas...
        </div>
      ) : (
        <div className="space-y-3">
          {getMediaData().map((stat, index) => {
            const Icon = stat.icon
            return (
              <div key={index} className="flex items-center justify-between rounded-lg bg-muted/50 p-3">
                <div className="flex items-center gap-3">
                  <div className={`flex h-10 w-10 items-center justify-center rounded-lg bg-background ${stat.color}`}>
                    <Icon className="h-5 w-5" />
                  </div>
                  <span className="font-medium">{stat.type}</span>
                </div>
                <Badge variant="secondary">{stat.count}</Badge>
              </div>
            )
          })}
          
          {mediaStats && (
            <div className="mt-4 rounded-lg bg-primary/5 p-3">
              <p className="text-xs text-muted-foreground">
                Espacio total: <span className="font-semibold">{mediaStats.tamano_total_mb || 0} MB</span>
              </p>
            </div>
          )}
        </div>
      )}
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/quick-admin-actions.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/quick-admin-actions.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import { Plus, Upload, FileText, Settings, Users, BookOpen } from "lucide-react"

export function QuickAdminActions() {
  const actions = [
    {
      label: "Crear Lecci√≥n",
      href: "/admin/lecciones/crear",
      icon: Plus,
      color: "bg-primary/10 text-primary",
      description: "Nueva lecci√≥n educativa"
    },
    {
      label: "Ver Lecciones",
      href: "/admin/lecciones",
      icon: BookOpen,
      color: "bg-blue-500/10 text-blue-600",
      description: "Gestionar contenido"
    },
    {
      label: "Biblioteca Multimedia",
      href: "/admin/multimedia",
      icon: Upload,
      color: "bg-secondary/10 text-secondary",
      description: "Archivos y recursos"
    },
    {
      label: "Gestionar Usuarios",
      href: "/admin/usuarios",
      icon: Users,
      color: "bg-green-500/10 text-green-600",
      description: "Administrar usuarios"
    },
    {
      label: "Reportes",
      href: "/admin/reportes",
      icon: FileText,
      color: "bg-accent/10 text-accent",
      description: "Estad√≠sticas y an√°lisis"
    },
    {
      label: "Configuraci√≥n",
      href: "/admin/configuracion",
      icon: Settings,
      color: "bg-muted text-muted-foreground",
      description: "Ajustes del sistema"
    },
  ]

  return (
    <Card className="p-6">
      <h3 className="mb-4 font-bold">Acciones R√°pidas</h3>
      <div className="space-y-2">
        {actions.map((action, index) => {
          const Icon = action.icon
          return (
            <Link key={index} href={action.href}>
              <Button variant="ghost" className="w-full justify-start gap-3 h-auto py-3">
                <div className={`flex h-10 w-10 shrink-0 items-center justify-center rounded-lg ${action.color}`}>
                  <Icon className="h-5 w-5" />
                </div>
                <div className="flex flex-col items-start">
                  <span className="font-medium">{action.label}</span>
                  <span className="text-xs text-muted-foreground">{action.description}</span>
                </div>
              </Button>
            </Link>
          )
        })}
      </div>
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/admin/recent-lessons.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/admin/recent-lessons.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import { Edit, Eye, Trash2, Loader2 } from "lucide-react"
import { useState, useEffect } from "react"
import { leccionesAPI, type Leccion } from "@/lib/api"
import { toast } from "sonner"
import { formatDistanceToNow } from "date-fns"
import { es } from "date-fns/locale"

export function RecentLessons() {
  const [lessons, setLessons] = useState<Leccion[]>([])
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    cargarLecciones()
  }, [])

  const cargarLecciones = async () => {
    try {
      setLoading(true)
      const response = await leccionesAPI.listar({ 
        por_pagina: 5,
        pagina: 1
      })
      setLessons(response.lecciones || [])
    } catch (error: any) {
      console.error("Error al cargar lecciones:", error)
      toast.error("Error al cargar lecciones recientes")
    } finally {
      setLoading(false)
    }
  }

  const handleDelete = async (id: number, titulo: string) => {
    if (!confirm(`¬øArchivar la lecci√≥n "${titulo}"?`)) return

    try {
      await leccionesAPI.eliminar(id)
      toast.success("Lecci√≥n archivada")
      cargarLecciones()
    } catch (error: any) {
      toast.error(error.message || "Error al archivar")
    }
  }

  const formatearFecha = (fecha: string) => {
    try {
      return formatDistanceToNow(new Date(fecha), { 
        addSuffix: true,
        locale: es 
      })
    } catch {
      return "Fecha no disponible"
    }
  }

  const getEstadoBadge = (estado: string) => {
    const variants = {
      publicada: "default",
      borrador: "secondary",
      archivada: "outline"
    }
    
    const labels = {
      publicada: "Publicada",
      borrador: "Borrador",
      archivada: "Archivada"
    }
    
    return (
      <Badge variant={variants[estado as keyof typeof variants] as any}>
        {labels[estado as keyof typeof labels] || estado}
      </Badge>
    )
  }

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h2 className="text-xl font-bold">Lecciones Recientes</h2>
        <Link href="/admin/lecciones/crear">
          <Button>Crear Lecci√≥n</Button>
        </Link>
      </div>

      {loading ? (
        <div className="flex items-center justify-center py-8">
          <Loader2 className="h-8 w-8 animate-spin text-primary" />
        </div>
      ) : lessons.length === 0 ? (
        <div className="py-8 text-center">
          <p className="text-sm text-muted-foreground mb-4">
            No hay lecciones a√∫n
          </p>
          <Link href="/admin/lecciones/crear">
            <Button variant="outline">Crear primera lecci√≥n</Button>
          </Link>
        </div>
      ) : (
        <div className="space-y-3">
          {lessons.map((lesson) => (
            <div
              key={lesson.id}
              className="rounded-xl border-2 border-border bg-card p-4 transition-all hover:border-primary/50"
            >
              <div className="flex items-start justify-between gap-4">
                <div className="flex-1">
                  <div className="mb-2 flex items-center gap-2">
                    <h3 className="font-semibold">{lesson.titulo}</h3>
                    {getEstadoBadge(lesson.estado || 'borrador')}
                  </div>
                  <div className="flex items-center gap-3 text-sm text-muted-foreground">
                    <span>Nivel: {lesson.nivel}</span>
                    <span>‚Ä¢</span>
                    <span>{lesson.idioma}</span>
                    <span>‚Ä¢</span>
                    <span>{lesson.duracion_estimada} min</span>
                  </div>
                  {lesson.actualizado_en && (
                    <p className="mt-2 text-xs text-muted-foreground">
                      {formatearFecha(lesson.actualizado_en)}
                    </p>
                  )}
                </div>

                <div className="flex gap-2">
                  <Link href={`/lecciones/${lesson.id}`}>
                    <Button variant="ghost" size="icon" title="Vista previa">
                      <Eye className="h-4 w-4" />
                    </Button>
                  </Link>
                  <Link href={`/admin/lecciones/${lesson.id}/editar`}>
                    <Button variant="ghost" size="icon" title="Editar">
                      <Edit className="h-4 w-4" />
                    </Button>
                  </Link>
                  <Button 
                    variant="ghost" 
                    size="icon" 
                    title="Archivar"
                    onClick={() => handleDelete(lesson.id!, lesson.titulo)}
                  >
                    <Trash2 className="h-4 w-4 text-destructive" />
                  </Button>
                </div>
              </div>
            </div>
          ))}
          
          <div className="pt-2">
            <Link href="/admin/lecciones">
              <Button variant="outline" className="w-full">
                Ver todas las lecciones
              </Button>
            </Link>
          </div>
        </div>
      )}
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/auth/level-assignment-flow.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/level-assignment-flow.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"
import { useToast } from "@/hooks/use-toast"
import { BookOpen, Brain, CheckCircle2, Loader2 } from "lucide-react"

type Step = "choice" | "evaluation" | "manual" | "results"

const LEVELS = [
  { id: "A1", name: "Principiante", description: "Empezando desde cero" },
  { id: "A2", name: "Elemental", description: "Conocimientos b√°sicos" },
  { id: "B1", name: "Intermedio", description: "Conversaci√≥n cotidiana" },
  { id: "B2", name: "Intermedio Alto", description: "Fluidez en la mayor√≠a de situaciones" },
  { id: "C1", name: "Avanzado", description: "Dominio del idioma" },
  { id: "C2", name: "Maestr√≠a", description: "Nivel nativo" },
]

const EVALUATION_QUESTIONS = [
  { question: "How do you say 'Hello' in English?", options: ["Hello", "Goodbye", "Thank you", "Please"], correct: 0 },
  { question: "What is the past tense of 'go'?", options: ["goed", "went", "gone", "going"], correct: 1 },
  { question: "Complete: 'I ___ to the store yesterday'", options: ["go", "goes", "went", "going"], correct: 2 },
  { question: "Which sentence is correct?", options: ["She don't like pizza", "She doesn't likes pizza", "She doesn't like pizza", "She not like pizza"], correct: 2 },
  { question: "What does 'although' mean?", options: ["because", "but/however", "therefore", "also"], correct: 1 },
  { question: "Choose the correct form: 'If I ___ rich, I would travel the world'", options: ["am", "was", "were", "be"], correct: 2 },
  { question: "What is a synonym for 'ubiquitous'?", options: ["rare", "everywhere", "beautiful", "difficult"], correct: 1 },
  { question: "Complete the idiom: 'It's raining cats and ___'", options: ["dogs", "birds", "fish", "mice"], correct: 0 },
  { question: "Which is the correct passive form: 'They built the house in 1990'", options: ["The house built in 1990", "The house was built in 1990", "The house is built in 1990", "The house has built in 1990"], correct: 1 },
  { question: "What does 'serendipity' mean?", options: ["A happy accident", "A sad moment", "A difficult situation", "A planned event"], correct: 0 },
]

export function LevelAssignmentFlow() {
  const router = useRouter()
  const { toast } = useToast()
  const [step, setStep] = useState<Step>("choice")
  const [currentQuestion, setCurrentQuestion] = useState(0)
  const [answers, setAnswers] = useState<number[]>([])
  const [selectedLevel, setSelectedLevel] = useState<string>("")
  const [isLoading, setIsLoading] = useState(false)
  const [calculatedLevel, setCalculatedLevel] = useState<string>("")
  const [idioma, setIdioma] = useState<string>("")
  const [rol, setRol] = useState<string>("")

  // üîπ Obtenemos datos desde localStorage
  useEffect(() => {
    const storedIdioma = localStorage.getItem("idioma")
    const storedRol = localStorage.getItem("rol")
    if (storedIdioma) setIdioma(storedIdioma)
    if (storedRol) setRol(storedRol)
  }, [])

  // üö´ Bloqueo para roles no permitidos
  useEffect(() => {
    if (rol === "admin" || rol === "profesor" || rol === "mantenimiento") {
      toast({
        title: "Acceso restringido",
        description: "Esta p√°gina solo est√° disponible para estudiantes.",
        variant: "destructive",
      })
      router.push("/dashboard")
    }
  }, [rol, router, toast])

  const handleStartEvaluation = () => {
    if (idioma.toLowerCase() !== "ingl√©s") {
      toast({
        title: "Curso en desarrollo",
        description: `El test para ${idioma} estar√° disponible pr√≥ximamente.`,
      })
      return
    }
    setStep("evaluation")
  }

  const handleManualSelection = () => setStep("manual")

  const handleAnswerSelect = (answerIndex: number) => {
    const newAnswers = [...answers, answerIndex]
    setAnswers(newAnswers)

    if (currentQuestion < EVALUATION_QUESTIONS.length - 1) {
      setCurrentQuestion(currentQuestion + 1)
    } else {
      const correctAnswers = newAnswers.filter(
        (answer, index) => answer === EVALUATION_QUESTIONS[index].correct
      ).length
      const percentage = (correctAnswers / EVALUATION_QUESTIONS.length) * 100

      let level = "A1"
      if (percentage >= 90) level = "C2"
      else if (percentage >= 75) level = "C1"
      else if (percentage >= 60) level = "B2"
      else if (percentage >= 45) level = "B1"
      else if (percentage >= 30) level = "A2"

      setCalculatedLevel(level)
      setStep("results")
    }
  }

  const handleLevelSelect = (levelId: string) => setSelectedLevel(levelId)

  const updateLevel = async (nivel: string) => {
    setIsLoading(true)
    const correo = localStorage.getItem("correo")

    if (!correo) {
      toast({
        title: "Error",
        description: "No se encontr√≥ el correo del usuario. Por favor inicia sesi√≥n o reg√≠strate nuevamente.",
        variant: "destructive",
      })
      setIsLoading(false)
      return
    }

    try {
      const res = await fetch("http://localhost:5000/api/usuario/actualizar-nivel", {
        method: "PATCH",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ correo, nivel }),
      })

      const data = await res.json()
      if (!res.ok) throw new Error(data.error || "Error al actualizar nivel")

      toast({
        title: "Nivel asignado exitosamente",
        description: `Tu nivel es ${nivel}`,
      })

      localStorage.removeItem("correo")
      localStorage.removeItem("idioma")
      localStorage.removeItem("rol")

      router.push("/dashboard")
    } catch (err: any) {
      toast({
        title: "Error",
        description: err.message,
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  const handleConfirmLevel = () => updateLevel(selectedLevel)
  const handleConfirmEvaluationLevel = () => updateLevel(calculatedLevel)

  // ----- PANTALLAS -----
  if (step === "choice") {
    return (
      <Card className="p-8">
        <div className="mb-6 text-center">
          <h1 className="text-3xl font-bold">Asigna tu Nivel</h1>
          <p className="mt-2 text-muted-foreground">
            Elige c√≥mo quieres determinar tu nivel {idioma ? `de ${idioma}` : ""}
          </p>
        </div>

        <div className="grid gap-4 md:grid-cols-2">
          <button
            onClick={handleStartEvaluation}
            className="group flex flex-col items-center gap-4 rounded-xl border-2 border-border bg-card p-6 hover:border-primary hover:bg-primary/5"
          >
            <div className="flex h-16 w-16 items-center justify-center rounded-full bg-primary/10 text-primary group-hover:bg-primary group-hover:text-primary-foreground">
              <Brain className="h-8 w-8" />
            </div>
            <div>
              <h3 className="text-lg font-semibold">Realizar Evaluaci√≥n</h3>
              <p className="mt-1 text-sm text-muted-foreground">
                Responde 10 preguntas para determinar tu nivel
              </p>
            </div>
          </button>

          <button
            onClick={handleManualSelection}
            className="group flex flex-col items-center gap-4 rounded-xl border-2 border-border bg-card p-6 hover:border-secondary hover:bg-secondary/5"
          >
            <div className="flex h-16 w-16 items-center justify-center rounded-full bg-secondary/10 text-secondary group-hover:bg-secondary group-hover:text-secondary-foreground">
              <BookOpen className="h-8 w-8" />
            </div>
            <div>
              <h3 className="text-lg font-semibold">Seleccionar Nivel</h3>
              <p className="mt-1 text-sm text-muted-foreground">
                Ya conozco mi nivel y quiero elegirlo manualmente
              </p>
            </div>
          </button>
        </div>
      </Card>
    )
  }

  if (step === "evaluation") {
    const question = EVALUATION_QUESTIONS[currentQuestion]
    const progress = ((currentQuestion + 1) / EVALUATION_QUESTIONS.length) * 100

    return (
      <Card className="p-8">
        <div className="mb-6">
          <div className="mb-2 flex justify-between text-sm">
            <span className="text-muted-foreground">
              Pregunta {currentQuestion + 1} de {EVALUATION_QUESTIONS.length}
            </span>
            <span className="font-medium">{Math.round(progress)}%</span>
          </div>
          <div className="h-2 rounded-full bg-muted">
            <div
              className="h-full bg-primary transition-all"
              style={{ width: `${progress}%` }}
            />
          </div>
        </div>

        <h2 className="mb-6 text-2xl font-bold">{question.question}</h2>

        <div className="grid gap-3">
          {question.options.map((option, index) => (
            <button
              key={index}
              onClick={() => handleAnswerSelect(index)}
              className="rounded-xl border-2 border-border bg-card p-4 text-left hover:border-primary hover:bg-primary/5"
            >
              {option}
            </button>
          ))}
        </div>
      </Card>
    )
  }

  if (step === "results") {
    const correctAnswers = answers.filter(
      (a, i) => a === EVALUATION_QUESTIONS[i].correct
    ).length
    const percentage = Math.round((correctAnswers / EVALUATION_QUESTIONS.length) * 100)
    const levelInfo = LEVELS.find((l) => l.id === calculatedLevel)

    return (
      <Card className="p-8 text-center">
        <div className="mx-auto mb-4 flex h-20 w-20 items-center justify-center rounded-full bg-success/10">
          <CheckCircle2 className="h-10 w-10 text-success" />
        </div>
        <h1 className="text-3xl font-bold mb-2">Evaluaci√≥n Completada</h1>
        <p className="text-muted-foreground mb-4">
          Has respondido correctamente {correctAnswers} de {EVALUATION_QUESTIONS.length} preguntas
        </p>

        <div className="mb-6 rounded-xl bg-primary/10 p-6">
          <p className="text-sm font-medium text-primary">Tu nivel recomendado es</p>
          <h2 className="mt-2 text-4xl font-bold text-primary">{levelInfo?.id}</h2>
          <p className="text-lg font-medium">{levelInfo?.name}</p>
          <p className="text-sm text-muted-foreground mt-1">{levelInfo?.description}</p>
          <div className="mt-4">
            <div className="text-2xl font-bold">{percentage}%</div>
            <div className="text-sm text-muted-foreground">Precisi√≥n</div>
          </div>
        </div>

        <Button onClick={handleConfirmEvaluationLevel} disabled={isLoading} className="w-full">
          {isLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : "Confirmar y Continuar"}
        </Button>
      </Card>
    )
  }

  if (step === "manual") {
    return (
      <Card className="p-8">
        <h1 className="text-2xl font-bold text-center mb-4">Selecciona tu Nivel</h1>
        <div className="grid gap-3 mb-6">
          {LEVELS.map((level) => (
            <button
              key={level.id}
              onClick={() => handleLevelSelect(level.id)}
              className={`rounded-xl border-2 p-4 text-left ${
                selectedLevel === level.id
                  ? "border-primary bg-primary/5"
                  : "border-border hover:border-primary/50 hover:bg-primary/5"
              }`}
            >
              <div className="flex justify-between items-center">
                <div>
                  <span className="text-lg font-bold mr-2">{level.id}</span>
                  <span className="font-semibold">{level.name}</span>
                  <p className="text-sm text-muted-foreground">{level.description}</p>
                </div>
                {selectedLevel === level.id && <CheckCircle2 className="h-6 w-6 text-primary" />}
              </div>
            </button>
          ))}
        </div>

        <Button
          onClick={handleConfirmLevel}
          className="w-full"
          disabled={!selectedLevel || isLoading}
        >
          {isLoading ? <Loader2 className="mr-2 h-4 w-4 animate-spin" /> : "Confirmar Nivel"}
        </Button>

        <div className="mt-4 text-center">
          <button onClick={() => setStep("choice")} className="text-sm text-primary hover:underline">
            Volver atr√°s
          </button>
        </div>
      </Card>
    )
  }

  return null
}



================================================================================
# ARCHIVO: front-end/components/auth/login-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/login-form.tsx
================================================================================

"use client"

import type React from "react"
import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Alert, AlertDescription } from "@/components/ui/alert"
import { useToast } from "@/hooks/use-toast"
import Link from "next/link"
import { Eye, EyeOff, Loader2, ChevronDown, ChevronUp, User, AlertCircle, RefreshCw } from "lucide-react"
// Importa la funci√≥n setAuthData de tu librer√≠a auth.ts
import { authStorage } from "@/lib/auth" 
// Importar authAPI (opcional, pero buena pr√°ctica)
// import { authAPI } from "@/lib/api" // No necesitas importar authAPI si usas fetch directo aqu√≠

const TEST_USERS = [
  {
    name: "Estudiante Demo",
    email: "estudiante@speaklexi.com",
    password: "estudiante123",
    role: "estudiante",
    description: "Acceso completo al m√≥dulo de aprendizaje",
    dashboard: "/dashboard",
  },
  {
    name: "Profesor Demo",
    email: "profesor@speaklexi.com",
    password: "profesor123",
    role: "profesor",
    description: "Acceso a estad√≠sticas y retroalimentaci√≥n",
    dashboard: "/profesor/dashboard",
  },
  {
    name: "Admin Demo",
    email: "admin@speaklexi.com",
    password: "admin123",
    role: "admin",
    description: "Gesti√≥n de contenido y lecciones",
    dashboard: "/admin/dashboard",
  },
  {
    name: "Mantenimiento Demo",
    email: "mantenimiento@speaklexi.com",
    password: "mantenimiento123",
    role: "mantenimiento",
    description: "Reportes y tareas programadas",
    dashboard: "/mantenimiento/dashboard",
  },
]

export function LoginForm() {
  const router = useRouter()
  const { toast } = useToast()
  
  const [isLoading, setIsLoading] = useState(false)
  const [showPassword, setShowPassword] = useState(false)
  const [showTestUsers, setShowTestUsers] = useState(false)
  const [formData, setFormData] = useState({
    email: "",
    password: "",
  })

  const [cuentaDesactivada, setCuentaDesactivada] = useState(false)
  const [diasRestantes, setDiasRestantes] = useState(0)
  const [userId, setUserId] = useState<string | null>(null) // Para reactivaci√≥n
  const [error, setError] = useState("")

  const handleTestUserClick = (user: (typeof TEST_USERS)[0]) => {
    setFormData({
      email: user.email,
      password: user.password,
    })
    setShowTestUsers(false)
    setCuentaDesactivada(false)
    setError("")
    
    toast({
      title: "Credenciales cargadas",
      description: `Listo para iniciar sesi√≥n como ${user.role}`,
    })
  }

  const handleReactivar = async () => {
    if (!userId) {
      toast({
        title: "Error",
        description: "No se pudo identificar el usuario para reactivar",
        variant: "destructive",
      })
      return
    }

    setIsLoading(true)
    setError("")
    
    try {
      // Considera mover esta l√≥gica a userAPI en api.ts si la usas en otro lugar
      const res = await fetch(`http://localhost:5000/api/usuario/reactivar/${userId}`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ password: formData.password }),
      })

      const data = await res.json() // Intenta parsear siempre

      if (!res.ok) {
        throw new Error(data.error || "Error al reactivar la cuenta")
      }

      toast({
        title: "¬°Cuenta reactivada!",
        description: data.mensaje || "Tu cuenta ha sido reactivada exitosamente",
      })

      setCuentaDesactivada(false)
      setError("")
      
      // Intenta hacer login autom√°ticamente despu√©s de reactivar
      setTimeout(() => {
        // Simula un evento submit para reusar la l√≥gica de handleSubmit
        handleSubmit({ preventDefault: () => {} } as React.FormEvent) 
      }, 1000)

    } catch (error: any) {
      console.error("Error al reactivar:", error)
      let errorMessage = error.message || "Error desconocido al reactivar"
      if (error.message === "Failed to fetch") {
        errorMessage = "No se pudo conectar con el servidor."
      }
      setError(errorMessage)
      toast({ title: "Error", description: errorMessage, variant: "destructive" })
    } finally {
      setIsLoading(false)
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)
    setCuentaDesactivada(false) // Resetea estado de cuenta desactivada
    setError("") // Limpia errores previos

    try {
      // Usa el fetch directo como lo ten√≠as, ya que manejas errores espec√≠ficos aqu√≠
       const res = await fetch("http://localhost:5000/api/auth/login", {
         method: "POST",
         headers: { "Content-Type": "application/json" },
         body: JSON.stringify({
           correo: formData.email,
           password: formData.password,
         }),
       })

      const data = await res.json() // Intenta parsear la respuesta siempre
      console.log("üì¶ Respuesta completa del backend:", data)

      if (!res.ok) {
        // --- Manejo de errores espec√≠ficos ---
        if (data.codigo === "CUENTA_DESACTIVADA") {
          setUserId(data.usuario_id?.toString() || null) // Guarda el ID para reactivar
          setCuentaDesactivada(true)
          setDiasRestantes(data.dias_restantes || 0)
          toast({
            title: "Cuenta desactivada",
            description: `Tienes ${data.dias_restantes || 0} d√≠as para reactivarla.`,
            variant: "destructive",
          })
          // No lances error aqu√≠, muestra el bot√≥n de reactivar
        } else if (data.codigo === "CUENTA_ELIMINADA") {
          setError("Esta cuenta ha sido eliminada permanentemente.")
          toast({ title: "Cuenta eliminada", description: "Esta cuenta ya no existe.", variant: "destructive"})
        } else if (data.codigo === "EMAIL_NOT_VERIFIED") {
          toast({ title: "Email no verificado", description: "Revisa tu correo o reenv√≠a el c√≥digo.", variant: "destructive" })
          setTimeout(() => router.push(`/verificar-email?email=${encodeURIComponent(formData.email)}`), 1500)
        } else {
          // Error gen√©rico de login (credenciales inv√°lidas, etc.)
          throw new Error(data.error || `Error ${res.status}: ${res.statusText}`)
        }
         setIsLoading(false); // Detiene el loading en caso de error manejado
         return; // Detiene la ejecuci√≥n si hubo un error manejado
      }

      // ‚úÖ LOGIN EXITOSO
      const usuario = data.usuario
      const access_token = data.access_token 

      // Validar que ambos datos existen antes de proceder
      if (!usuario || typeof usuario !== 'object' || !access_token || typeof access_token !== 'string') {
        console.error("Respuesta inv√°lida del servidor:", data); 
        throw new Error("Respuesta inv√°lida del servidor tras login exitoso.");
      }

      console.log("‚úÖ Usuario recibido:", usuario)
      console.log("üîë Token recibido:", access_token ? 'S√≠' : 'No') // Verifica si el token lleg√≥

      // --- USA authStorage PARA GUARDAR TODO ---
      authStorage.setAuthData(usuario, access_token) 
      // Verifica que se guard√≥ correctamente
      console.log("üîç Verificando localStorage - Token:", localStorage.getItem('token') ? 'Guardado' : 'NO Guardado');
      console.log("üîç Verificando localStorage - UserID:", localStorage.getItem('userId') ? 'Guardado' : 'NO Guardado');


      toast({ title: "‚úÖ Inicio de sesi√≥n exitoso", description: `Bienvenido ${usuario.nombre}` })

      // --- Redirecci√≥n ---
      const rol = usuario.rol?.toLowerCase() || 'estudiante' // Asegura que rol exista y sea string
      console.log("üîÄ Rol detectado:", rol)
      
      let redirectPath = "/dashboard" // Default para estudiante
      if (rol === "profesor" || rol === "teacher") redirectPath = "/profesor/dashboard"
      else if (rol === "admin" || rol === "administrador") redirectPath = "/admin/dashboard"
      else if (rol === "mantenimiento" || rol === "maintenance") redirectPath = "/mantenimiento/dashboard"

      console.log("üöÄ Redirigiendo a:", redirectPath)
      
      // Forzar recarga para que el middleware/layout detecte los nuevos datos de sesi√≥n
      window.location.href = redirectPath
      // No necesitas setIsLoading(false) aqu√≠ porque la p√°gina recargar√°

    } catch (error: any) {
      console.error("‚ùå Error en handleSubmit:", error)
      let errorMessage = error.message || "Ocurri√≥ un error inesperado."
      if (error.message === "Failed to fetch") {
        errorMessage = "No se pudo conectar al servidor. Intenta m√°s tarde."
      }
      setError(errorMessage)
      toast({ title: "Error de inicio de sesi√≥n", description: errorMessage, variant: "destructive" })
      setIsLoading(false); // Aseg√∫rate de detener el loading en el catch
    } 
    // No necesitas finally si la redirecci√≥n ocurre en el try
  }

  // --- El JSX (la parte visual del formulario) ---
  return (
    <div className="space-y-4">
      {/* ALERTA DE ERRORES GENERALES (excluyendo cuenta desactivada) */}
      {error && !cuentaDesactivada && (
        <Alert variant="destructive">
          <AlertCircle className="h-4 w-4" />
          <AlertDescription>{error}</AlertDescription>
        </Alert>
      )}

      {/* ALERTA DE CUENTA DESACTIVADA */}
      {cuentaDesactivada && (
        <Alert className="border-orange-500 bg-orange-50 dark:bg-orange-950">
          <RefreshCw className="h-4 w-4 text-orange-600" />
          <AlertDescription>
            <strong className="text-orange-900 dark:text-orange-100">
              Tu cuenta est√° desactivada
            </strong>
            <p className="mt-2 text-sm text-orange-800 dark:text-orange-200">
              {diasRestantes > 0 ? (
                <>
                  Tienes <strong>{diasRestantes} d√≠as</strong> para reactivarla. 
                  Despu√©s ser√° eliminada permanentemente.
                </>
              ) : (
                "El per√≠odo de recuperaci√≥n ha expirado. La cuenta ser√° eliminada."
              )}
            </p>
            {/* Bot√≥n de reactivar solo si hay d√≠as restantes */}
            {diasRestantes > 0 && (
              <Button
                onClick={handleReactivar}
                disabled={isLoading}
                className="mt-3 w-full bg-orange-600 hover:bg-orange-700 text-white" // Estilo naranja
              >
                {isLoading ? (
                  <><Loader2 className="mr-2 h-4 w-4 animate-spin" /> Reactivando...</>
                ) : (
                  <><RefreshCw className="mr-2 h-4 w-4" /> Reactivar mi cuenta</>
                )}
              </Button>
            )}
          </AlertDescription>
        </Alert>
      )}

      {/* SECCI√ìN USUARIOS DE PRUEBA */}
      <div className="rounded-lg border bg-muted/30 overflow-hidden">
        <button
          type="button"
          onClick={() => setShowTestUsers(!showTestUsers)}
          className="w-full flex items-center justify-between p-3 text-sm font-medium hover:bg-muted/50"
        >
          <span className="flex items-center gap-2"><User className="h-4 w-4" /> Usuarios de Prueba</span>
          {showTestUsers ? <ChevronUp className="h-4 w-4" /> : <ChevronDown className="h-4 w-4" />}
        </button>
        {showTestUsers && (
          <div className="p-3 pt-0 space-y-2">
            {TEST_USERS.map((user) => (
              <button
                key={user.email}
                type="button"
                onClick={() => handleTestUserClick(user)}
                className="w-full text-left p-3 rounded-md border bg-background hover:bg-accent hover:border-primary"
              >
                <div className="flex items-start justify-between gap-2">
                  <div className="flex-1 min-w-0">
                    <p className="font-medium text-sm">{user.name}</p>
                    <p className="text-xs text-muted-foreground truncate">{user.email}</p>
                    <p className="text-xs text-muted-foreground mt-1">{user.description}</p>
                  </div>
                  <span className="text-xs font-medium px-2 py-1 rounded-full bg-primary/10 text-primary whitespace-nowrap">
                    {user.role}
                  </span>
                </div>
              </button>
            ))}
          </div>
        )}
      </div>

      {/* FORMULARIO PRINCIPAL DE LOGIN */}
      {/* No mostrar si la cuenta est√° desactivada y no se puede reactivar */}
      {!(cuentaDesactivada && diasRestantes <= 0) && (
        <form onSubmit={handleSubmit} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="email">Correo Electr√≥nico</Label>
            <Input
              id="email" type="email" placeholder="tu@email.com"
              value={formData.email}
              onChange={(e) => setFormData({ ...formData, email: e.target.value })}
              required disabled={isLoading || cuentaDesactivada} // Deshabilitar si est√° desactivada
            />
          </div>
          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <Label htmlFor="password">Contrase√±a</Label>
              <Link href="/recuperar-contrasena" className="text-sm text-primary hover:underline" tabIndex={-1}>
                ¬øOlvidaste tu contrase√±a?
              </Link>
            </div>
            <div className="relative">
              <Input
                id="password" type={showPassword ? "text" : "password"} placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                value={formData.password}
                onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                required disabled={isLoading || cuentaDesactivada} // Deshabilitar si est√° desactivada
              />
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
                disabled={isLoading || cuentaDesactivada}
              >
                {showPassword ? <EyeOff className="h-4 w-4" /> : <Eye className="h-4 w-4" />}
              </button>
            </div>
          </div>
          <Button type="submit" className="w-full" disabled={isLoading || cuentaDesactivada}>
            {isLoading ? (
              <><Loader2 className="mr-2 h-4 w-4 animate-spin" /> Iniciando sesi√≥n...</>
            ) : ( "Iniciar Sesi√≥n" )}
          </Button>
        </form>
      )}

      {/* ENLACE A REGISTRO */}
      <div className="text-center text-sm text-muted-foreground">
        ¬øNo tienes cuenta?{" "}
        <Link href="/registro" className="text-primary hover:underline font-medium">
          Reg√≠strate aqu√≠
        </Link>
      </div>
    </div>
  )
}




================================================================================
# ARCHIVO: front-end/components/auth/recover-password-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/recover-password-form.tsx
================================================================================

"use client"

import type React from "react"
import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { useToast } from "@/hooks/use-toast"
import { Loader2, Mail, CheckCircle } from "lucide-react"
import { authAPI } from "@/lib/api"

export function RecoverPasswordForm() {
  const router = useRouter()
  const { toast } = useToast()
  const [isLoading, setIsLoading] = useState(false)
  const [email, setEmail] = useState("")
  const [emailSent, setEmailSent] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)

    try {
      const data = await authAPI.recuperarPassword(email)
      
      toast({
        title: "Correo enviado",
        description: data.mensaje || "Revisa tu bandeja de entrada",
      })
      
      setEmailSent(true)
      
      // Redirigir despu√©s de 3 segundos
      setTimeout(() => {
        router.push("/correo-enviado")
      }, 3000)
      
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message || "No se pudo enviar el correo",
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  if (emailSent) {
    return (
      <div className="space-y-4 text-center">
        <div className="flex justify-center">
          <div className="rounded-full bg-green-100 p-3">
            <CheckCircle className="h-12 w-12 text-green-600" />
          </div>
        </div>
        
        <div className="space-y-2">
          <h3 className="text-lg font-semibold">¬°Correo enviado!</h3>
          <p className="text-sm text-muted-foreground">
            Revisa tu bandeja de entrada en <strong>{email}</strong>
          </p>
          <p className="text-xs text-muted-foreground">
            Haz clic en el enlace del correo para restablecer tu contrase√±a
          </p>
        </div>

        <Button
          variant="ghost"
          className="w-full"
          onClick={() => router.push("/login")}
        >
          Volver al inicio de sesi√≥n
        </Button>
      </div>
    )
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="space-y-2">
        <Label htmlFor="email">Correo Electr√≥nico</Label>
        <div className="relative">
          <Mail className="absolute left-3 top-3 h-4 w-4 text-muted-foreground" />
          <Input
            id="email"
            type="email"
            placeholder="tu@email.com"
            value={email}
            onChange={(e) => setEmail(e.target.value)}
            className="pl-10"
            required
          />
        </div>
        <p className="text-xs text-muted-foreground">
          Te enviaremos un enlace para restablecer tu contrase√±a
        </p>
      </div>

      <Button type="submit" className="w-full" disabled={isLoading}>
        {isLoading ? (
          <>
            <Loader2 className="mr-2 h-4 w-4 animate-spin" />
            Enviando...
          </>
        ) : (
          "Enviar Enlace de Recuperaci√≥n"
        )}
      </Button>

      <Button
        type="button"
        variant="ghost"
        className="w-full"
        onClick={() => router.push("/login")}
      >
        Volver al inicio de sesi√≥n
      </Button>
    </form>
  )
}


================================================================================
# ARCHIVO: front-end/components/auth/register-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/register-form.tsx
================================================================================

"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { useToast } from "@/hooks/use-toast"
import { Eye, EyeOff, Loader2, Shield } from "lucide-react"

export function RegisterForm() {
  const router = useRouter()
  const { toast } = useToast()
  const [isLoading, setIsLoading] = useState(false)
  const [showPassword, setShowPassword] = useState(false)
  const [formData, setFormData] = useState({
    nombre: "",
    primerApellido: "",
    segundoApellido: "",
    correo: "",
    password: "",
    confirmPassword: "",
    idioma: "",
    nivel: "",
    rol: "estudiante", // üëà nuevo campo por defecto
  })

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)

    if (formData.password !== formData.confirmPassword) {
      toast({
        title: "Error",
        description: "Las contrase√±as no coinciden",
        variant: "destructive",
      })
      setIsLoading(false)
      return
    }

    if (formData.password.length < 8) {
      toast({
        title: "Error",
        description: "La contrase√±a debe tener al menos 8 caracteres",
        variant: "destructive",
      })
      setIsLoading(false)
      return
    }

    try {
      const res = await fetch("http://localhost:5000/api/auth/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          nombre: formData.nombre,
          primer_apellido: formData.primerApellido,
          segundo_apellido: formData.segundoApellido,
          correo: formData.correo,
          password: formData.password,
          idioma: formData.idioma,
          nivel_actual: formData.nivel,
          rol: formData.rol, // üëà se env√≠a el rol temporal
        }),
      })

      const data = await res.json()
      if (!res.ok) throw new Error(data.error || "Error al registrar usuario")

      localStorage.setItem("correo", formData.correo)
      localStorage.setItem("idioma", formData.idioma)

      toast({
        title: "Cuenta creada exitosamente",
        description:
          formData.rol === "admin"
            ? "‚úÖ Usuario admin creado (modo desarrollo)"
            : "Verifica tu correo electr√≥nico para continuar",
      })

      router.push("/verificar-email")
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      {/* Nombre */}
      <div className="space-y-2">
        <Label htmlFor="nombre">Nombre</Label>
        <Input
          id="nombre"
          type="text"
          placeholder="Juan"
          value={formData.nombre}
          onChange={(e) => setFormData({ ...formData, nombre: e.target.value })}
          required
        />
      </div>

      {/* Primer Apellido */}
      <div className="space-y-2">
        <Label htmlFor="primerApellido">Primer Apellido</Label>
        <Input
          id="primerApellido"
          type="text"
          placeholder="P√©rez"
          value={formData.primerApellido}
          onChange={(e) =>
            setFormData({ ...formData, primerApellido: e.target.value })
          }
          required
        />
      </div>

      {/* Segundo Apellido */}
      <div className="space-y-2">
        <Label htmlFor="segundoApellido">Segundo Apellido (opcional)</Label>
        <Input
          id="segundoApellido"
          type="text"
          placeholder="Mart√≠nez"
          value={formData.segundoApellido}
          onChange={(e) =>
            setFormData({ ...formData, segundoApellido: e.target.value })
          }
        />
      </div>

      {/* Correo */}
      <div className="space-y-2">
        <Label htmlFor="correo">Correo Electr√≥nico</Label>
        <Input
          id="correo"
          type="email"
          placeholder="tu@email.com"
          value={formData.correo}
          onChange={(e) =>
            setFormData({ ...formData, correo: e.target.value })
          }
          required
        />
      </div>

      {/* Contrase√±a */}
      <div className="space-y-2">
        <Label htmlFor="password">Contrase√±a</Label>
        <div className="relative">
          <Input
            id="password"
            type={showPassword ? "text" : "password"}
            placeholder="M√≠nimo 8 caracteres"
            value={formData.password}
            onChange={(e) =>
              setFormData({ ...formData, password: e.target.value })
            }
            required
          />
          <button
            type="button"
            onClick={() => setShowPassword(!showPassword)}
            className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
          >
            {showPassword ? (
              <EyeOff className="h-4 w-4" />
            ) : (
              <Eye className="h-4 w-4" />
            )}
          </button>
        </div>
      </div>

      {/* Confirmar Contrase√±a */}
      <div className="space-y-2">
        <Label htmlFor="confirmPassword">Confirmar Contrase√±a</Label>
        <Input
          id="confirmPassword"
          type="password"
          placeholder="Repite tu contrase√±a"
          value={formData.confirmPassword}
          onChange={(e) =>
            setFormData({ ...formData, confirmPassword: e.target.value })
          }
          required
        />
      </div>

      {/* Idioma */}
      <div className="space-y-2">
        <Label htmlFor="idioma">Idioma de aprendizaje</Label>
        <select
          id="idioma"
          className="w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring"
          value={formData.idioma}
          onChange={(e) =>
            setFormData({ ...formData, idioma: e.target.value })
          }
          required
        >
          <option value="">Selecciona un idioma</option>
          <option value="ingl√©s">Ingl√©s</option>
          <option value="franc√©s">Franc√©s</option>
          <option value="alem√°n">Alem√°n</option>
          <option value="italiano">Italiano</option>
        </select>
      </div>

      {/* ‚öôÔ∏è Rol temporal (solo desarrollo) */}
      <div className="space-y-2 border rounded-md p-3 bg-muted/30">
        <Label htmlFor="rol" className="flex items-center gap-2">
          <Shield className="h-4 w-4 text-primary" />
          Rol temporal (solo desarrollo)
        </Label>
        <select
          id="rol"
          className="w-full rounded-md border border-input bg-background px-3 py-2 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary"
          value={formData.rol}
          onChange={(e) => setFormData({ ...formData, rol: e.target.value })}
        >
          <option value="estudiante">Estudiante</option>
          <option value="profesor">Profesor</option>
          <option value="admin">Admin</option>
          <option value="mantenimiento">Mantenimiento</option>
        </select>
        <p className="text-xs text-muted-foreground mt-1">
          üîê Solo para pruebas locales. Este campo ser√° removido en producci√≥n.
        </p>
      </div>

      {/* Bot√≥n */}
      <Button type="submit" className="w-full" disabled={isLoading}>
        {isLoading ? (
          <>
            <Loader2 className="mr-2 h-4 w-4 animate-spin" />
            Creando cuenta...
          </>
        ) : (
          "Crear Cuenta"
        )}
      </Button>
    </form>
  )
}



================================================================================
# ARCHIVO: front-end/components/auth/verify-email-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/auth/verify-email-form.tsx
================================================================================

"use client"

import { useState, useEffect } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { useToast } from "@/hooks/use-toast"
import { Loader2 } from "lucide-react"

export function VerifyEmailForm() {
  const router = useRouter()
  const { toast } = useToast()
  const [isLoading, setIsLoading] = useState(false)
  const [isResending, setIsResending] = useState(false)
  const [code, setCode] = useState(["", "", "", "", "", ""])
  const [email, setEmail] = useState("")

  // ‚úÖ Recuperamos correo y rol del localStorage
  useEffect(() => {
    const storedEmail = localStorage.getItem("correo")
    const storedRole = localStorage.getItem("rol") || "estudiante"

    // üîí Si el usuario es admin, profesor o mantenimiento ‚Üí redirigir
    if (["admin", "profesor", "mantenimiento"].includes(storedRole)) {
      toast({
        title: "Acceso no requerido",
        description: "Tu cuenta no requiere verificaci√≥n de correo.",
      })
      router.push("/dashboard") // o la ruta principal de admin
      return
    }

    if (storedEmail) {
      setEmail(storedEmail)
    } else {
      toast({
        title: "Error",
        description: "No se encontr√≥ el correo del usuario. Reg√≠strate nuevamente.",
        variant: "destructive",
      })
      router.push("/registro")
    }
  }, [router, toast])

  const handleChange = (index: number, value: string) => {
    if (value.length > 1) return
    const newCode = [...code]
    newCode[index] = value
    setCode(newCode)
    if (value && index < 5) {
      const nextInput = document.getElementById(`code-${index + 1}`)
      nextInput?.focus()
    }
  }

  const handleKeyDown = (index: number, e: React.KeyboardEvent) => {
    if (e.key === "Backspace" && !code[index] && index > 0) {
      const prevInput = document.getElementById(`code-${index - 1}`)
      prevInput?.focus()
    }
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    const verificationCode = code.join("")

    if (verificationCode.length !== 6) {
      toast({
        title: "Error",
        description: "Por favor ingresa el c√≥digo completo",
        variant: "destructive",
      })
      return
    }

    setIsLoading(true)
    try {
      const res = await fetch("http://localhost:5000/api/auth/verificar-email", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          correo: email,
          codigo: verificationCode,
        }),
      })

      const data = await res.json()
      if (!res.ok) throw new Error(data.error || "Error al verificar el correo")

      toast({
        title: "Correo verificado",
        description: "Tu cuenta ha sido activada correctamente",
      })

      router.push("/asignar-nivel")
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  const handleResend = async () => {
    setIsResending(true)
    try {
      const res = await fetch("http://localhost:5000/api/auth/reenviar-codigo", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ correo: email }),
      })

      const data = await res.json()
      if (!res.ok) throw new Error(data.error || "Error al reenviar c√≥digo")

      toast({
        title: "C√≥digo reenviado",
        description: "Revisa tu correo electr√≥nico",
      })
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message,
        variant: "destructive",
      })
    } finally {
      setIsResending(false)
    }
  }

  return (
    <div className="space-y-6">
      <form onSubmit={handleSubmit} className="space-y-6">
        <div className="flex justify-center gap-2">
          {code.map((digit, index) => (
            <Input
              key={index}
              id={`code-${index}`}
              type="text"
              inputMode="numeric"
              maxLength={1}
              value={digit}
              onChange={(e) => handleChange(index, e.target.value)}
              onKeyDown={(e) => handleKeyDown(index, e)}
              className="h-14 w-12 text-center text-lg font-semibold"
              required
            />
          ))}
        </div>

        <Button type="submit" className="w-full" disabled={isLoading}>
          {isLoading ? (
            <>
              <Loader2 className="mr-2 h-4 w-4 animate-spin" />
              Verificando...
            </>
          ) : (
            "Verificar Email"
          )}
        </Button>
      </form>

      <div className="text-center">
        <p className="text-sm text-muted-foreground">
          ¬øNo recibiste el c√≥digo?{" "}
          <button
            onClick={handleResend}
            disabled={isResending}
            className="font-medium text-primary hover:underline disabled:opacity-50"
          >
            {isResending ? "Reenviando..." : "Reenviar c√≥digo"}
          </button>
        </p>
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/dashboard/dashboard-header.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/dashboard-header.tsx
================================================================================

"use client"

import { useEffect, useState } from "react"
import { Bell, Settings, LogOut, Languages, Home } from "lucide-react"
import { Button } from "@/components/ui/button"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { Badge } from "@/components/ui/badge"
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu"
import { useRouter } from "next/navigation"
// --- IMPORTACI√ìN A√ëADIDA ---
import { userAPI } from "@/lib/api" // Importar la API centralizada

interface DashboardHeaderProps {
  nombre?: string
  primerApellido?: string
  showBackButton?: boolean // Nueva prop para mostrar bot√≥n de regreso
}

const IDIOMA_FLAGS: { [key: string]: string } = {
  "Ingl√©s": "üá∫üá∏",
  "Franc√©s": "üá´üá∑",
  "Alem√°n": "üá©üá™",
  "Italiano": "üáÆüáπ",
  "Espa√±ol": "üá™üá∏", // <-- A√±adido por si acaso
}

export function DashboardHeader({ 
  nombre = "Usuario", 
  primerApellido = "",
  showBackButton = false // Por defecto no se muestra
}: DashboardHeaderProps) {
  const router = useRouter()
  const [idioma, setIdioma] = useState("Ingl√©s")
  const [nivel, setNivel] = useState("A1")
  const [nombreUsuario, setNombreUsuario] = useState(nombre)
  const [apellidoUsuario, setApellidoUsuario] = useState(primerApellido)

  useEffect(() => {
    cargarDatosUsuario()
  }, [])

  // --- FUNCI√ìN 'handleLogout' MOVIDA ARRIBA ---
  // Para poder llamarla en caso de error 401
  const handleLogout = () => {
    localStorage.clear()
    router.push("/login")
  }

  const cargarDatosUsuario = async () => {
    try {
      // --- INICIO DE MODIFICACI√ìN ---
      // const userId = localStorage.getItem("userId") // No es necesario, userAPI.getPerfilCompleto lo maneja
      // if (!userId) return

      // const res = await fetch(`http://localhost:5000/api/usuario/perfil/${userId}`) // <-- NO USAR FETCH DIRECTO
      // const data = await res.json()

      // Usar la funci√≥n centralizada de la API
      // Esta funci√≥n (getPerfilCompleto) ya usa el token gracias a la correcci√≥n en api.ts
      const data = await userAPI.getPerfilCompleto()
      // --- FIN DE MODIFICACI√ìN ---


      // if (res.ok) { // fetchAPI ya maneja las respuestas no-ok
        // Actualizar nombre del usuario
        if (data.usuario) {
          setNombreUsuario(data.usuario.nombre)
          setApellidoUsuario(data.usuario.primer_apellido)
        }
        
        // Actualizar perfil
        if (data.perfil) {
          setIdioma(data.perfil.idioma || "Ingl√©s")
          setNivel(data.perfil.nivel_actual || "A1")
        }
      // }
    } catch (error: any) {
      console.error("Error al cargar datos del usuario:", error)
      
      // --- MANEJO DE ERROR 401 ---
      // Si el token es inv√°lido o expir√≥ (error 401), desloguear al usuario
      if (error.status === 401) {
        console.warn("Token no v√°lido o expirado. Deslogueando...")
        handleLogout()
      }
    }
  }

  const handleBackToDashboard = () => {
    router.push("/dashboard")
  }

  // Iniciales corregidas: Primer Apellido + Nombre (PH en lugar de HP)
  const iniciales = nombreUsuario && apellidoUsuario 
    ? `${apellidoUsuario[0]}${nombreUsuario[0]}`.toUpperCase()
    : "U"

  return (
    <header className="sticky top-0 z-50 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60">
      <div className="container flex h-16 items-center justify-between px-4">
        {/* Logo / T√≠tulo con bot√≥n de regreso opcional */}
        <div className="flex items-center gap-3">
          {showBackButton && (
            <Button
              variant="ghost"
              size="icon"
              onClick={handleBackToDashboard}
              title="Volver al dashboard"
            >
              <Home className="h-5 w-5" />
            </Button>
          )}
          <h1 className="text-2xl font-bold cursor-pointer" onClick={handleBackToDashboard}>
            SpeakLexi
          </h1>
        </div>

        {/* Idioma Actual */}
        <div className="flex items-center gap-2">
          <Badge variant="secondary" className="flex items-center gap-2 px-3 py-1.5 text-sm">
            <span className="text-xl">{IDIOMA_FLAGS[idioma] || "üåç"}</span>
            <span className="font-medium">{idioma}</span>
            <span className="text-muted-foreground">‚Ä¢</span>
            <span className="font-semibold">{nivel}</span>
          </Badge>
        </div>

        {/* Acciones */}
        <div className="flex items-center gap-3">
          {/* Notificaciones */}
          <Button variant="ghost" size="icon" className="relative">
            <Bell className="h-5 w-5" />
            <span className="absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-primary text-[10px] text-primary-foreground">
              3
            </span>
          </Button>

          {/* Men√∫ de Usuario */}
          <DropdownMenu>
            <DropdownMenuTrigger asChild>
              <Button variant="ghost" className="relative h-10 w-10 rounded-full">
                <Avatar>
                  <AvatarFallback className="bg-primary text-primary-foreground">
                    {iniciales}
                  </AvatarFallback>
                </Avatar>
              </Button>
            </DropdownMenuTrigger>
            <DropdownMenuContent align="end" className="w-56">
              <DropdownMenuLabel>
                <div className="flex flex-col space-y-1">
                  {/* Mostrar nombre completo del usuario */}
                  <p className="text-sm font-medium">
                    {nombreUsuario} {apellidoUsuario}
                  </p>
                  <p className="text-xs text-muted-foreground">Estudiante</p>
                </div>
              </DropdownMenuLabel>
              <DropdownMenuSeparator />
              
              {/* Solo Perfil y Configuraci√≥n */}
              <DropdownMenuItem onClick={() => router.push("/perfil")}>
                <Settings className="mr-2 h-4 w-4" />
                Perfil
              </DropdownMenuItem>
              
              <DropdownMenuItem onClick={() => router.push("/perfil")}>
                <Settings className="mr-2 h-4 w-4" />
                Configuraci√≥n
              </DropdownMenuItem>
              
              <DropdownMenuSeparator />
              
              <DropdownMenuItem onClick={handleLogout} className="text-destructive">
                <LogOut className="mr-2 h-4 w-4" />
                Cerrar sesi√≥n
              </DropdownMenuItem>
            </DropdownMenuContent>
          </DropdownMenu>
        </div>
      </div>
    </header>
  )
}



================================================================================
# ARCHIVO: front-end/components/dashboard/progress-overview.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/progress-overview.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Progress } from "@/components/ui/progress"
import { Skeleton } from "@/components/ui/skeleton"
import { BookOpen, Target, Trophy, Zap } from "lucide-react"
import { useUserData } from "@/hooks/use-user-data"

export function ProgressOverview() {
  const { userData, isLoading } = useUserData()

  if (isLoading) {
    return (
      <Card className="p-6">
        <Skeleton className="h-6 w-32 mb-4" />
        <div className="grid gap-4 sm:grid-cols-2">
          {[1, 2, 3, 4].map((i) => (
            <Skeleton key={i} className="h-24 rounded-lg" />
          ))}
        </div>
        <Skeleton className="h-32 mt-6 rounded-lg" />
      </Card>
    )
  }

  // Datos din√°micos del usuario
  const totalXP = userData?.perfil.total_xp || 0
  const diasRacha = userData?.perfil.dias_racha || 0
  const nivelActual = userData?.perfil.nivel_actual || "A1"
  const idioma = userData?.perfil.idioma || "Ingl√©s"

  // Calcular estad√≠sticas
  const leccionesCompletadas = Math.floor(totalXP / 100) // 100 XP por lecci√≥n (ejemplo)
  const totalLecciones = 50 // Esto deber√≠a venir del backend
  const logrosDesbloqueados = Math.floor(totalXP / 500) // 1 logro cada 500 XP (ejemplo)
  const totalLogros = 20

  // Calcular XP para siguiente nivel
  const nivelesXP: { [key: string]: number } = {
    A1: 1000,
    A2: 2000,
    B1: 3500,
    B2: 5000,
    C1: 7000,
    C2: 10000,
  }

  const xpNivelActual = nivelesXP[nivelActual] || 1000
  const xpParaSiguienteNivel = xpNivelActual
  const progresoNivel = Math.min((totalXP / xpParaSiguienteNivel) * 100, 100)
  const xpRestante = Math.max(xpParaSiguienteNivel - totalXP, 0)

  // Obtener siguiente nivel
  const niveles = ["A1", "A2", "B1", "B2", "C1", "C2"]
  const indexActual = niveles.indexOf(nivelActual)
  const siguienteNivel = indexActual < niveles.length - 1 ? niveles[indexActual + 1] : nivelActual

  const stats = [
    { 
      label: "Lecciones Completadas", 
      value: leccionesCompletadas, 
      total: totalLecciones, 
      icon: BookOpen, 
      color: "text-primary" 
    },
    { 
      label: "XP Total", 
      value: totalXP, 
      icon: Zap, 
      color: "text-accent" 
    },
    { 
      label: "Racha Actual", 
      value: diasRacha, 
      unit: diasRacha === 1 ? "d√≠a" : "d√≠as", 
      icon: Target, 
      color: "text-secondary" 
    },
    { 
      label: "Logros Desbloqueados", 
      value: logrosDesbloqueados, 
      total: totalLogros, 
      icon: Trophy, 
      color: "text-primary" 
    },
  ]

  return (
    <Card className="p-6">
      <h2 className="mb-4 text-xl font-bold">Tu Progreso</h2>

      <div className="grid gap-4 sm:grid-cols-2">
        {stats.map((stat, index) => {
          const Icon = stat.icon
          return (
            <div key={index} className="flex items-start gap-3 rounded-lg bg-muted/50 p-4">
              <div className={`flex h-10 w-10 items-center justify-center rounded-lg bg-background ${stat.color}`}>
                <Icon className="h-5 w-5" />
              </div>
              <div className="flex-1">
                <p className="text-sm text-muted-foreground">{stat.label}</p>
                <div className="mt-1 flex items-baseline gap-1">
                  <span className="text-2xl font-bold">{stat.value}</span>
                  {stat.unit && <span className="text-sm text-muted-foreground">{stat.unit}</span>}
                  {stat.total && <span className="text-sm text-muted-foreground">/ {stat.total}</span>}
                </div>
                {stat.total && (
                  <Progress 
                    value={(stat.value / stat.total) * 100} 
                    className="mt-2 h-2" 
                  />
                )}
              </div>
            </div>
          )
        })}
      </div>

      {/* Level Progress */}
      <div className="mt-6 rounded-lg bg-gradient-to-r from-primary/10 to-secondary/10 p-4">
        <div className="mb-2 flex items-center justify-between">
          <span className="font-semibold">
            Nivel {nivelActual} - {idioma}
          </span>
          <span className="text-sm text-muted-foreground">
            {totalXP} / {xpParaSiguienteNivel} XP
          </span>
        </div>
        <Progress value={progresoNivel} className="h-3" />
        <p className="mt-2 text-sm text-muted-foreground">
          {totalXP >= xpParaSiguienteNivel 
            ? `¬°Felicidades! Has alcanzado el nivel ${nivelActual}` 
            : `${xpRestante} XP para alcanzar el nivel ${siguienteNivel}`}
        </p>
      </div>
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/dashboard/quick-actions.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/quick-actions.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import { BookOpen, Trophy, Users, Settings } from "lucide-react"

export function QuickActions() {
  const actions = [
    { label: "Ver Lecciones", href: "/lecciones", icon: BookOpen, color: "bg-primary/10 text-primary" },
    { label: "Mis Logros", href: "/logros", icon: Trophy, color: "bg-secondary/10 text-secondary" },
    { label: "Clasificaci√≥n", href: "/clasificacion", icon: Users, color: "bg-accent/10 text-accent" },
    { label: "Configuraci√≥n", href: "/perfil", icon: Settings, color: "bg-muted text-muted-foreground" },
  ]

  return (
    <Card className="p-6">
      <h3 className="mb-4 font-bold">Acciones R√°pidas</h3>
      <div className="space-y-2">
        {actions.map((action, index) => {
          const Icon = action.icon
          return (
            <Link key={index} href={action.href}>
              <Button variant="ghost" className="w-full justify-start gap-3">
                <div className={`flex h-8 w-8 items-center justify-center rounded-lg ${action.color}`}>
                  <Icon className="h-4 w-4" />
                </div>
                {action.label}
              </Button>
            </Link>
          )
        })}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/dashboard/recent-lessons.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/recent-lessons.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Progress } from "@/components/ui/progress"
import Link from "next/link"
import { ChevronRight, Lock } from "lucide-react"

export function RecentLessons() {
  const lessons = [
    {
      id: 1,
      title: "Greetings and Introductions",
      description: "Learn how to greet people and introduce yourself",
      progress: 100,
      completed: true,
      xp: 10,
    },
    {
      id: 2,
      title: "Numbers 1-20",
      description: "Learn to count from 1 to 20 in English",
      progress: 75,
      completed: false,
      xp: 10,
    },
    {
      id: 3,
      title: "Colors and Shapes",
      description: "Learn basic colors and shapes",
      progress: 0,
      completed: false,
      xp: 10,
      locked: false,
    },
    {
      id: 4,
      title: "Family Members",
      description: "Learn vocabulary about family",
      progress: 0,
      completed: false,
      xp: 15,
      locked: true,
    },
  ]

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h2 className="text-xl font-bold">Tus Lecciones</h2>
        <Link href="/lecciones">
          <Button variant="ghost" size="sm">
            Ver Todas
            <ChevronRight className="ml-1 h-4 w-4" />
          </Button>
        </Link>
      </div>

      <div className="space-y-3">
        {lessons.map((lesson) => (
          <Link
            key={lesson.id}
            href={lesson.locked ? "#" : `/lecciones/${lesson.id}`}
            className={`block ${lesson.locked ? "cursor-not-allowed" : ""}`}
          >
            <div
              className={`rounded-xl border-2 p-4 transition-all ${
                lesson.locked
                  ? "border-border bg-muted/50 opacity-60"
                  : lesson.completed
                    ? "border-success/30 bg-success/5 hover:border-success"
                    : "border-border bg-card hover:border-primary hover:bg-primary/5"
              }`}
            >
              <div className="flex items-start justify-between gap-4">
                <div className="flex-1">
                  <div className="flex items-center gap-2">
                    <h3 className="font-semibold">{lesson.title}</h3>
                    {lesson.completed && (
                      <span className="rounded-full bg-success px-2 py-0.5 text-xs font-medium text-success-foreground">
                        Completada
                      </span>
                    )}
                    {lesson.locked && <Lock className="h-4 w-4 text-muted-foreground" />}
                  </div>
                  <p className="mt-1 text-sm text-muted-foreground">{lesson.description}</p>
                  {!lesson.locked && !lesson.completed && (
                    <div className="mt-3">
                      <div className="mb-1 flex items-center justify-between text-xs">
                        <span className="text-muted-foreground">Progreso</span>
                        <span className="font-medium">{lesson.progress}%</span>
                      </div>
                      <Progress value={lesson.progress} className="h-2" />
                    </div>
                  )}
                </div>
                <div className="flex flex-col items-end gap-2">
                  <div className="flex items-center gap-1 rounded-lg bg-accent/10 px-2 py-1 text-sm font-medium text-accent">
                    <span>+{lesson.xp}</span>
                    <span className="text-xs">XP</span>
                  </div>
                </div>
              </div>
            </div>
          </Link>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/dashboard/streak-card.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/dashboard/streak-card.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Skeleton } from "@/components/ui/skeleton"
import { Flame } from "lucide-react"
import { useUserData } from "@/hooks/use-user-data"

export function StreakCard() {
  const { userData, isLoading } = useUserData()
  
  const weekDays = ["L", "M", "X", "J", "V", "S", "D"]
  
  // Obtener racha del backend o 0 si es nuevo
  const diasRacha = userData?.perfil.dias_racha || 0
  
  // Simular d√≠as completados basado en la racha
  const completedDays = weekDays.map((_, index) => index < diasRacha)

  if (isLoading) {
    return (
      <Card className="p-6">
        <div className="space-y-4">
          <div className="flex items-center gap-2">
            <Skeleton className="h-10 w-10 rounded-lg" />
            <div className="space-y-2">
              <Skeleton className="h-5 w-32" />
              <Skeleton className="h-4 w-24" />
            </div>
          </div>
          <div className="flex justify-between gap-2">
            {weekDays.map((_, index) => (
              <Skeleton key={index} className="h-10 w-10 rounded-lg" />
            ))}
          </div>
        </div>
      </Card>
    )
  }

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center gap-2">
        <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-accent/10">
          <Flame className="h-6 w-6 text-accent" />
        </div>
        <div>
          <h3 className="font-bold">Racha de Fuego</h3>
          <p className="text-sm text-muted-foreground">
            {diasRacha === 0 
              ? "Comienza tu racha hoy" 
              : diasRacha === 1 
              ? "1 d√≠a consecutivo" 
              : `${diasRacha} d√≠as consecutivos`}
          </p>
        </div>
      </div>

      <div className="flex justify-between gap-2">
        {weekDays.map((day, index) => (
          <div key={index} className="flex flex-col items-center gap-1">
            <div
              className={`flex h-10 w-10 items-center justify-center rounded-lg text-sm font-medium transition-all ${
                completedDays[index]
                  ? "bg-accent text-accent-foreground"
                  : "border-2 border-dashed border-muted-foreground/30 text-muted-foreground"
              }`}
            >
              {day}
            </div>
          </div>
        ))}
      </div>

      <p className="mt-4 text-center text-sm text-muted-foreground leading-relaxed">
        {diasRacha === 0 
          ? "¬°Completa tu primera lecci√≥n para comenzar tu racha!" 
          : "Completa una lecci√≥n hoy para mantener tu racha"}
      </p>
    </Card>
  )
}


================================================================================
# ARCHIVO: front-end/components/gamification/achievements-list.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/achievements-list.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Progress } from "@/components/ui/progress"
import { Lock, CheckCircle2 } from "lucide-react"

export function AchievementsList() {
  const achievements = [
    {
      id: 1,
      name: "First Steps",
      description: "Complete your first lesson",
      icon: "üéØ",
      unlocked: true,
      progress: 100,
      xpReward: 50,
      unlockedAt: "2024-01-15",
    },
    {
      id: 2,
      name: "Week Warrior",
      description: "Maintain a 7-day streak",
      icon: "üî•",
      unlocked: true,
      progress: 100,
      xpReward: 100,
      unlockedAt: "2024-01-20",
    },
    {
      id: 3,
      name: "Dedicated Learner",
      description: "Complete 10 lessons",
      icon: "üìö",
      unlocked: false,
      progress: 50,
      current: 5,
      total: 10,
      xpReward: 200,
    },
    {
      id: 4,
      name: "Perfect Score",
      description: "Get 100% on any lesson",
      icon: "‚≠ê",
      unlocked: false,
      progress: 0,
      current: 0,
      total: 1,
      xpReward: 75,
    },
    {
      id: 5,
      name: "Rising Star",
      description: "Reach 500 XP",
      icon: "üåü",
      unlocked: false,
      progress: 40,
      current: 200,
      total: 500,
      xpReward: 150,
    },
    {
      id: 6,
      name: "Social Butterfly",
      description: "Reach top 10 in leaderboard",
      icon: "ü¶ã",
      unlocked: false,
      progress: 0,
      current: 0,
      total: 1,
      xpReward: 300,
    },
  ]

  return (
    <Card className="p-6">
      <div className="mb-6 flex items-center justify-between">
        <h2 className="text-xl font-bold">Tus Logros</h2>
        <Badge variant="secondary">
          {achievements.filter((a) => a.unlocked).length} / {achievements.length}
        </Badge>
      </div>

      <div className="grid gap-4 sm:grid-cols-2">
        {achievements.map((achievement) => (
          <div
            key={achievement.id}
            className={`rounded-xl border-2 p-4 transition-all ${
              achievement.unlocked ? "border-success/30 bg-success/5" : "border-border bg-card hover:border-primary/50"
            }`}
          >
            <div className="mb-3 flex items-start justify-between">
              <div
                className={`flex h-12 w-12 items-center justify-center rounded-xl text-2xl ${
                  achievement.unlocked ? "bg-success/10" : "bg-muted"
                }`}
              >
                {achievement.unlocked ? achievement.icon : <Lock className="h-5 w-5 text-muted-foreground" />}
              </div>
              {achievement.unlocked && <CheckCircle2 className="h-5 w-5 text-success" />}
            </div>

            <h3 className="font-bold">{achievement.name}</h3>
            <p className="mt-1 text-sm text-muted-foreground leading-relaxed">{achievement.description}</p>

            {achievement.unlocked ? (
              <div className="mt-3 flex items-center gap-2">
                <Badge className="bg-accent text-accent-foreground">+{achievement.xpReward} XP</Badge>
                <span className="text-xs text-muted-foreground">
                  Desbloqueado el {new Date(achievement.unlockedAt).toLocaleDateString()}
                </span>
              </div>
            ) : (
              <div className="mt-3">
                <div className="mb-1 flex items-center justify-between text-xs">
                  <span className="text-muted-foreground">
                    {achievement.current} / {achievement.total}
                  </span>
                  <span className="font-medium">{achievement.progress}%</span>
                </div>
                <Progress value={achievement.progress} className="h-2" />
              </div>
            )}
          </div>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/gamification/leaderboard-filters.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-filters.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Label } from "@/components/ui/label"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"

export function LeaderboardFilters() {
  return (
    <Card className="p-6">
      <h3 className="mb-4 font-bold">Filtros</h3>

      <div className="space-y-6">
        {/* Time Period */}
        <div>
          <Label className="mb-3 block text-sm font-semibold">Per√≠odo</Label>
          <RadioGroup defaultValue="week">
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="week" id="week" />
              <Label htmlFor="week" className="font-normal">
                Esta Semana
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="month" id="month" />
              <Label htmlFor="month" className="font-normal">
                Este Mes
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="all" id="all" />
              <Label htmlFor="all" className="font-normal">
                Todo el Tiempo
              </Label>
            </div>
          </RadioGroup>
        </div>

        {/* Scope */}
        <div>
          <Label className="mb-3 block text-sm font-semibold">Alcance</Label>
          <RadioGroup defaultValue="global">
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="global" id="global" />
              <Label htmlFor="global" className="font-normal">
                Global
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="course" id="course" />
              <Label htmlFor="course" className="font-normal">
                Mi Curso
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="friends" id="friends" />
              <Label htmlFor="friends" className="font-normal">
                Amigos
              </Label>
            </div>
          </RadioGroup>
        </div>
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/gamification/leaderboard-table.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/leaderboard-table.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { Badge } from "@/components/ui/badge"
import { Trophy, TrendingUp, TrendingDown, Minus } from "lucide-react"
import Link from "next/link"

export function LeaderboardTable() {
  const leaderboard = [
    {
      rank: 1,
      name: "Mar√≠a Garc√≠a",
      initials: "MG",
      xp: 5420,
      level: 12,
      streak: 45,
      change: "up",
    },
    {
      rank: 2,
      name: "Carlos Rodr√≠guez",
      initials: "CR",
      xp: 4890,
      level: 11,
      streak: 32,
      change: "down",
    },
    {
      rank: 3,
      name: "Ana Mart√≠nez",
      initials: "AM",
      xp: 4560,
      level: 11,
      streak: 28,
      change: "up",
    },
    {
      rank: 4,
      name: "Luis Fern√°ndez",
      initials: "LF",
      xp: 3920,
      level: 10,
      streak: 21,
      change: "same",
    },
    {
      rank: 5,
      name: "Elena L√≥pez",
      initials: "EL",
      xp: 3450,
      level: 9,
      streak: 18,
      change: "up",
    },
    {
      rank: 6,
      name: "Juan P√©rez",
      initials: "JP",
      xp: 1250,
      level: 5,
      streak: 7,
      change: "up",
      isCurrentUser: true,
    },
    {
      rank: 7,
      name: "Sofia Torres",
      initials: "ST",
      xp: 980,
      level: 4,
      streak: 5,
      change: "down",
    },
  ]

  const getTrendIcon = (change: string) => {
    if (change === "up") return <TrendingUp className="h-4 w-4 text-success" />
    if (change === "down") return <TrendingDown className="h-4 w-4 text-destructive" />
    return <Minus className="h-4 w-4 text-muted-foreground" />
  }

  const getRankBadge = (rank: number) => {
    if (rank === 1) return "ü•á"
    if (rank === 2) return "ü•à"
    if (rank === 3) return "ü•â"
    return null
  }

  return (
    <Card className="p-6">
      <div className="mb-6 flex items-center gap-2">
        <Trophy className="h-5 w-5 text-primary" />
        <h2 className="text-xl font-bold">Top Estudiantes</h2>
        <Badge variant="secondary" className="ml-auto">
          Esta Semana
        </Badge>
      </div>

      <div className="space-y-2">
        {leaderboard.map((user) => (
          <Link key={user.rank} href="/perfil">
            <div
              className={`flex items-center gap-4 rounded-xl border-2 p-4 transition-all cursor-pointer ${
                user.isCurrentUser
                  ? "border-primary bg-primary/5"
                  : user.rank <= 3
                    ? "border-accent/30 bg-accent/5"
                    : "border-border bg-card hover:border-primary/50"
              }`}
            >
              {/* Rank */}
              <div className="flex w-12 items-center justify-center">
                {getRankBadge(user.rank) ? (
                  <span className="text-2xl">{getRankBadge(user.rank)}</span>
                ) : (
                  <span className="text-lg font-bold text-muted-foreground">#{user.rank}</span>
                )}
              </div>

              {/* Avatar */}
              <Avatar className="h-12 w-12">
                <AvatarFallback className="bg-primary text-primary-foreground">{user.initials}</AvatarFallback>
              </Avatar>

              {/* User Info */}
              <div className="flex-1">
                <div className="flex items-center gap-2">
                  <p className="font-semibold">{user.name}</p>
                  {user.isCurrentUser && (
                    <Badge variant="secondary" className="text-xs">
                      T√∫
                    </Badge>
                  )}
                </div>
                <div className="mt-1 flex items-center gap-3 text-sm text-muted-foreground">
                  <span>Nivel {user.level}</span>
                  <span>‚Ä¢</span>
                  <span className="flex items-center gap-1">
                    <span>üî•</span>
                    {user.streak} d√≠as
                  </span>
                </div>
              </div>

              {/* XP and Trend */}
              <div className="text-right">
                <p className="text-lg font-bold text-primary">{user.xp.toLocaleString()} XP</p>
                <div className="mt-1 flex items-center justify-end gap-1">{getTrendIcon(user.change)}</div>
              </div>
            </div>
          </Link>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/gamification/level-progress.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/level-progress.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Progress } from "@/components/ui/progress"
import { Zap } from "lucide-react"

export function LevelProgress() {
  const currentLevel = 5
  const currentXP = 1250
  const nextLevelXP = 2000
  const progress = (currentXP / nextLevelXP) * 100

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center gap-3">
        <div className="flex h-12 w-12 items-center justify-center rounded-xl bg-primary/10 text-primary">
          <Zap className="h-6 w-6" />
        </div>
        <div>
          <h3 className="font-bold">Nivel {currentLevel}</h3>
          <p className="text-sm text-muted-foreground">Estudiante Dedicado</p>
        </div>
      </div>

      <div className="mb-2 flex items-center justify-between text-sm">
        <span className="text-muted-foreground">Progreso al Nivel {currentLevel + 1}</span>
        <span className="font-medium">
          {currentXP} / {nextLevelXP} XP
        </span>
      </div>
      <Progress value={progress} className="h-3" />

      <p className="mt-3 text-center text-sm text-muted-foreground">
        {nextLevelXP - currentXP} XP para el siguiente nivel
      </p>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/gamification/rewards-inventory.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/rewards-inventory.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"

export function RewardsInventory() {
  const rewards = [
    { id: 1, name: "Racha de 7 d√≠as", icon: "üî•", rarity: "common" },
    { id: 2, name: "Primera Lecci√≥n", icon: "üéØ", rarity: "common" },
    { id: 3, name: "Guerrero Semanal", icon: "‚öîÔ∏è", rarity: "rare" },
  ]

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h3 className="font-bold">Recompensas</h3>
        <Badge variant="secondary">{rewards.length}</Badge>
      </div>

      <div className="space-y-2">
        {rewards.map((reward) => (
          <div key={reward.id} className="flex items-center gap-3 rounded-lg bg-muted/50 p-3">
            <div className="flex h-10 w-10 items-center justify-center rounded-lg bg-background text-xl">
              {reward.icon}
            </div>
            <div className="flex-1">
              <p className="text-sm font-medium">{reward.name}</p>
              <Badge variant="outline" className="mt-1 text-xs">
                {reward.rarity}
              </Badge>
            </div>
          </div>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/gamification/user-rank-card.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/gamification/user-rank-card.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { TrendingUp } from "lucide-react"

export function UserRankCard() {
  return (
    <Card className="p-6">
      <div className="mb-4 text-center">
        <Avatar className="mx-auto h-16 w-16">
          <AvatarFallback className="bg-primary text-lg text-primary-foreground">JP</AvatarFallback>
        </Avatar>
        <h3 className="mt-3 font-bold">Juan P√©rez</h3>
        <p className="text-sm text-muted-foreground">Nivel 5</p>
      </div>

      <div className="space-y-3 rounded-xl bg-muted/50 p-4">
        <div className="flex items-center justify-between">
          <span className="text-sm text-muted-foreground">Tu Posici√≥n</span>
          <span className="text-2xl font-bold text-primary">#6</span>
        </div>
        <div className="flex items-center justify-between">
          <span className="text-sm text-muted-foreground">XP Total</span>
          <span className="font-bold">1,250</span>
        </div>
        <div className="flex items-center justify-between">
          <span className="text-sm text-muted-foreground">Cambio</span>
          <div className="flex items-center gap-1 text-success">
            <TrendingUp className="h-4 w-4" />
            <span className="font-bold">+2</span>
          </div>
        </div>
      </div>

      <p className="mt-4 text-center text-sm text-muted-foreground leading-relaxed">
        Gana 150 XP m√°s para alcanzar el top 5
      </p>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/abandon-lesson-modal.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/abandon-lesson-modal.tsx
================================================================================

"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"
import { AlertTriangle } from "lucide-react"

interface AbandonLessonModalProps {
  open: boolean
  onOpenChange: (open: boolean) => void
  lessonTitle: string
  progress: number
}

export function AbandonLessonModal({ open, onOpenChange, lessonTitle, progress }: AbandonLessonModalProps) {
  const router = useRouter()
  const [isSaving, setIsSaving] = useState(false)

  const handleAbandon = async () => {
    setIsSaving(true)
    // Simulate saving progress
    await new Promise((resolve) => setTimeout(resolve, 1000))
    router.push("/lecciones")
  }

  return (
    <Dialog open={open} onOpenChange={onOpenChange}>
      <DialogContent>
        <DialogHeader>
          <div className="flex items-center gap-3 mb-2">
            <div className="flex h-12 w-12 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-950">
              <AlertTriangle className="h-6 w-6 text-orange-600" />
            </div>
            <DialogTitle className="text-xl">¬øAbandonar lecci√≥n?</DialogTitle>
          </div>
          <DialogDescription className="text-base">
            Est√°s a punto de salir de <strong>{lessonTitle}</strong>. Has completado el <strong>{progress}%</strong> de
            la lecci√≥n.
          </DialogDescription>
        </DialogHeader>

        <div className="rounded-lg bg-muted p-4">
          <p className="text-sm">
            <strong>Tu progreso se guardar√° autom√°ticamente.</strong> Podr√°s continuar desde donde lo dejaste cuando
            regreses.
          </p>
        </div>

        <DialogFooter className="gap-2 sm:gap-0">
          <Button variant="outline" onClick={() => onOpenChange(false)} disabled={isSaving}>
            Continuar Lecci√≥n
          </Button>
          <Button variant="destructive" onClick={handleAbandon} disabled={isSaving}>
            {isSaving ? "Guardando..." : "Salir de la Lecci√≥n"}
          </Button>
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/fill-blank-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/fill-blank-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { CheckCircle2, XCircle } from "lucide-react"

interface FillBlankActivityProps {
  question: string
  correctAnswer: string
  onComplete: (correct: boolean) => void
}

export function FillBlankActivity({ question, correctAnswer, onComplete }: FillBlankActivityProps) {
  const [answer, setAnswer] = useState("")
  const [submitted, setSubmitted] = useState(false)
  const [isCorrect, setIsCorrect] = useState(false)

  const handleSubmit = () => {
    if (!answer.trim()) return

    const correct = answer.trim().toLowerCase() === correctAnswer.toLowerCase()
    setIsCorrect(correct)
    setSubmitted(true)

    setTimeout(() => {
      onComplete(correct)
      setAnswer("")
      setSubmitted(false)
    }, 1500)
  }

  return (
    <div>
      <h2 className="mb-8 text-2xl font-bold text-balance">{question}</h2>

      <div className="mb-8">
        <div className="relative">
          <Input
            type="text"
            value={answer}
            onChange={(e) => setAnswer(e.target.value)}
            onKeyDown={(e) => e.key === "Enter" && handleSubmit()}
            placeholder="Escribe tu respuesta aqu√≠..."
            disabled={submitted}
            className={`text-lg ${
              submitted ? (isCorrect ? "border-success bg-success/10" : "border-destructive bg-destructive/10") : ""
            }`}
          />
          {submitted && (
            <div className="absolute right-3 top-1/2 -translate-y-1/2">
              {isCorrect ? (
                <CheckCircle2 className="h-5 w-5 text-success" />
              ) : (
                <XCircle className="h-5 w-5 text-destructive" />
              )}
            </div>
          )}
        </div>

        {submitted && !isCorrect && (
          <p className="mt-2 text-sm text-destructive">La respuesta correcta es: {correctAnswer}</p>
        )}
      </div>

      <Button onClick={handleSubmit} disabled={!answer.trim() || submitted} className="w-full">
        {submitted ? "Verificando..." : "Verificar Respuesta"}
      </Button>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/listen-repeat-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/listen-repeat-activity.tsx
================================================================================

"use client"

import { useState, useRef } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent } from "@/components/ui/card"
import { Mic, Volume2, Check, X, Square } from "lucide-react"

interface ListenRepeatActivityProps {
  phrase: string
  audioUrl?: string
  onComplete: (correct: boolean) => void
}

export function ListenRepeatActivity({ phrase, audioUrl, onComplete }: ListenRepeatActivityProps) {
  const [isRecording, setIsRecording] = useState(false)
  const [hasRecorded, setHasRecorded] = useState(false)
  const [showFeedback, setShowFeedback] = useState(false)
  const [isCorrect, setIsCorrect] = useState(false)
  const mediaRecorderRef = useRef<MediaRecorder | null>(null)

  const handlePlayAudio = () => {
    // In a real implementation, this would play the audio file
    const utterance = new SpeechSynthesisUtterance(phrase)
    utterance.lang = "en-US"
    window.speechSynthesis.speak(utterance)
  }

  const handleStartRecording = async () => {
    try {
      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })
      const mediaRecorder = new MediaRecorder(stream)
      mediaRecorderRef.current = mediaRecorder

      mediaRecorder.start()
      setIsRecording(true)

      mediaRecorder.addEventListener("stop", () => {
        setHasRecorded(true)
        stream.getTracks().forEach((track) => track.stop())
      })
    } catch (error) {
      console.error("Error accessing microphone:", error)
    }
  }

  const handleStopRecording = () => {
    if (mediaRecorderRef.current && isRecording) {
      mediaRecorderRef.current.stop()
      setIsRecording(false)
    }
  }

  const handleCheck = () => {
    // In a real implementation, this would use speech recognition API
    // For now, we'll simulate a random result
    const correct = Math.random() > 0.3
    setIsCorrect(correct)
    setShowFeedback(true)
    setTimeout(() => {
      onComplete(correct)
    }, 2000)
  }

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-2xl font-bold mb-2">Escucha y Repite</h3>
        <p className="text-lg text-muted-foreground">Escucha la frase y rep√≠tela en voz alta</p>
      </div>

      {/* Phrase Display */}
      <Card className="bg-primary/5">
        <CardContent className="p-8 text-center">
          <p className="text-2xl font-bold mb-4">{phrase}</p>
          <Button onClick={handlePlayAudio} variant="outline" size="lg">
            <Volume2 className="mr-2 h-5 w-5" />
            Escuchar Frase
          </Button>
        </CardContent>
      </Card>

      {/* Recording Controls */}
      <Card>
        <CardContent className="p-8">
          <div className="flex flex-col items-center gap-4">
            <div className="flex items-center gap-4">
              {!isRecording && !hasRecorded && (
                <Button onClick={handleStartRecording} size="lg" className="gap-2">
                  <Mic className="h-5 w-5" />
                  Comenzar Grabaci√≥n
                </Button>
              )}

              {isRecording && (
                <Button onClick={handleStopRecording} size="lg" variant="destructive" className="gap-2">
                  <Square className="h-5 w-5" />
                  Detener Grabaci√≥n
                </Button>
              )}

              {hasRecorded && !showFeedback && (
                <div className="flex gap-3">
                  <Button onClick={() => setHasRecorded(false)} variant="outline" size="lg">
                    Grabar de Nuevo
                  </Button>
                  <Button onClick={handleCheck} size="lg">
                    Verificar
                  </Button>
                </div>
              )}
            </div>

            {isRecording && (
              <div className="flex items-center gap-2 text-red-500">
                <div className="h-3 w-3 rounded-full bg-red-500 animate-pulse" />
                <span className="font-medium">Grabando...</span>
              </div>
            )}
          </div>
        </CardContent>
      </Card>

      {/* Feedback */}
      {showFeedback && (
        <Card
          className={
            isCorrect ? "border-green-500 bg-green-50 dark:bg-green-950" : "border-red-500 bg-red-50 dark:bg-red-950"
          }
        >
          <CardContent className="p-6">
            <div className="flex items-start gap-3">
              {isCorrect ? (
                <Check className="h-6 w-6 text-green-600 flex-shrink-0 mt-1" />
              ) : (
                <X className="h-6 w-6 text-red-600 flex-shrink-0 mt-1" />
              )}
              <div>
                <p className="font-semibold mb-1">{isCorrect ? "¬°Excelente pronunciaci√≥n!" : "Intenta de nuevo"}</p>
                <p className="text-sm text-muted-foreground">
                  {isCorrect
                    ? "Tu pronunciaci√≥n es muy buena. ¬°Sigue practicando!"
                    : "Escucha la frase de nuevo y presta atenci√≥n a la pronunciaci√≥n."}
                </p>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/matching-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/matching-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Badge } from "@/components/ui/badge"
import { Check, X, Shuffle } from "lucide-react"

interface MatchingPair {
  id: string
  left: string
  right: string
}

interface MatchingActivityProps {
  pairs: MatchingPair[]
  onComplete: (correct: boolean) => void
}

export function MatchingActivity({ pairs, onComplete }: MatchingActivityProps) {
  const [leftSelected, setLeftSelected] = useState<string | null>(null)
  const [matches, setMatches] = useState<Record<string, string>>({})
  const [feedback, setFeedback] = useState<Record<string, boolean>>({})
  const [shuffledRight, setShuffledRight] = useState(() =>
    [...pairs].map((p) => ({ id: p.id, text: p.right })).sort(() => Math.random() - 0.5),
  )

  const handleLeftClick = (id: string) => {
    if (feedback[id] !== undefined) return
    setLeftSelected(id)
  }

  const handleRightClick = (rightId: string) => {
    if (!leftSelected || feedback[leftSelected] !== undefined) return

    const newMatches = { ...matches, [leftSelected]: rightId }
    setMatches(newMatches)

    const isCorrect = leftSelected === rightId
    setFeedback({ ...feedback, [leftSelected]: isCorrect })
    setLeftSelected(null)

    if (Object.keys(newMatches).length === pairs.length) {
      const allCorrect = Object.entries(newMatches).every(([left, right]) => left === right)
      setTimeout(() => onComplete(allCorrect), 1000)
    }
  }

  const handleShuffle = () => {
    setShuffledRight([...shuffledRight].sort(() => Math.random() - 0.5))
  }

  return (
    <div className="space-y-4">
      <div className="flex items-center justify-between">
        <p className="text-sm text-muted-foreground">Empareja los elementos de ambas columnas</p>
        <Button variant="outline" size="sm" onClick={handleShuffle} disabled={Object.keys(matches).length > 0}>
          <Shuffle className="mr-2 h-4 w-4" />
          Mezclar
        </Button>
      </div>

      <div className="grid gap-4 md:grid-cols-2">
        {/* Left Column */}
        <div className="space-y-2">
          {pairs.map((pair) => (
            <Card
              key={pair.id}
              className={`cursor-pointer p-4 transition-all ${
                leftSelected === pair.id
                  ? "border-primary bg-primary/10"
                  : feedback[pair.id] === true
                    ? "border-green-500 bg-green-50"
                    : feedback[pair.id] === false
                      ? "border-red-500 bg-red-50"
                      : "hover:border-primary/50"
              } ${feedback[pair.id] !== undefined ? "cursor-not-allowed opacity-60" : ""}`}
              onClick={() => handleLeftClick(pair.id)}
            >
              <div className="flex items-center justify-between">
                <span className="font-medium">{pair.left}</span>
                {feedback[pair.id] === true && <Check className="h-5 w-5 text-green-600" />}
                {feedback[pair.id] === false && <X className="h-5 w-5 text-red-600" />}
              </div>
            </Card>
          ))}
        </div>

        {/* Right Column */}
        <div className="space-y-2">
          {shuffledRight.map((item) => {
            const isMatched = Object.values(matches).includes(item.id)
            const matchedLeft = Object.entries(matches).find(([_, right]) => right === item.id)?.[0]
            const isCorrect = matchedLeft ? feedback[matchedLeft] : undefined

            return (
              <Card
                key={item.id}
                className={`cursor-pointer p-4 transition-all ${
                  isMatched
                    ? isCorrect === true
                      ? "border-green-500 bg-green-50"
                      : isCorrect === false
                        ? "border-red-500 bg-red-50"
                        : "border-primary bg-primary/10"
                    : "hover:border-primary/50"
                } ${isMatched ? "cursor-not-allowed opacity-60" : ""}`}
                onClick={() => !isMatched && handleRightClick(item.id)}
              >
                <div className="flex items-center justify-between">
                  <span className="font-medium">{item.text}</span>
                  {isCorrect === true && <Check className="h-5 w-5 text-green-600" />}
                  {isCorrect === false && <X className="h-5 w-5 text-red-600" />}
                </div>
              </Card>
            )
          })}
        </div>
      </div>

      <div className="flex items-center justify-between rounded-lg bg-muted p-3">
        <span className="text-sm font-medium">
          Emparejados: {Object.keys(matches).length} / {pairs.length}
        </span>
        {Object.keys(feedback).length > 0 && (
          <Badge variant={Object.values(feedback).every((v) => v) ? "default" : "secondary"}>
            {Object.values(feedback).filter((v) => v).length} correctos
          </Badge>
        )}
      </div>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/multiple-choice-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/multiple-choice-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { CheckCircle2, XCircle } from "lucide-react"

interface MultipleChoiceActivityProps {
  question: string
  options: string[]
  correctAnswer: number
  onComplete: (correct: boolean) => void
}

export function MultipleChoiceActivity({ question, options, correctAnswer, onComplete }: MultipleChoiceActivityProps) {
  const [selectedOption, setSelectedOption] = useState<number | null>(null)
  const [submitted, setSubmitted] = useState(false)

  const handleSubmit = () => {
    if (selectedOption === null) return

    setSubmitted(true)
    const isCorrect = selectedOption === correctAnswer
    setTimeout(() => {
      onComplete(isCorrect)
      setSelectedOption(null)
      setSubmitted(false)
    }, 1500)
  }

  return (
    <div>
      <h2 className="mb-8 text-2xl font-bold text-balance">{question}</h2>

      <div className="mb-8 space-y-3">
        {options.map((option, index) => {
          const isSelected = selectedOption === index
          const isCorrect = index === correctAnswer
          const showResult = submitted && isSelected

          return (
            <button
              key={index}
              onClick={() => !submitted && setSelectedOption(index)}
              disabled={submitted}
              className={`w-full rounded-xl border-2 p-4 text-left transition-all ${
                showResult
                  ? isCorrect
                    ? "border-success bg-success/10"
                    : "border-destructive bg-destructive/10"
                  : isSelected
                    ? "border-primary bg-primary/5"
                    : "border-border bg-card hover:border-primary hover:bg-primary/5"
              } ${submitted ? "cursor-not-allowed" : ""}`}
            >
              <div className="flex items-center justify-between">
                <span className="font-medium">{option}</span>
                {showResult &&
                  (isCorrect ? (
                    <CheckCircle2 className="h-5 w-5 text-success" />
                  ) : (
                    <XCircle className="h-5 w-5 text-destructive" />
                  ))}
              </div>
            </button>
          )
        })}
      </div>

      <Button onClick={handleSubmit} disabled={selectedOption === null || submitted} className="w-full">
        {submitted ? "Verificando..." : "Verificar Respuesta"}
      </Button>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/translation-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/translation-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent } from "@/components/ui/card"
import { Textarea } from "@/components/ui/textarea"
import { Check, X, Volume2 } from "lucide-react"

interface TranslationActivityProps {
  sourceText: string
  sourceLang: string
  targetLang: string
  correctTranslation: string
  onComplete: (correct: boolean) => void
}

export function TranslationActivity({
  sourceText,
  sourceLang,
  targetLang,
  correctTranslation,
  onComplete,
}: TranslationActivityProps) {
  const [translation, setTranslation] = useState("")
  const [showFeedback, setShowFeedback] = useState(false)
  const [isCorrect, setIsCorrect] = useState(false)

  const handlePlayAudio = () => {
    const utterance = new SpeechSynthesisUtterance(sourceText)
    utterance.lang = sourceLang === "Ingl√©s" ? "en-US" : "es-ES"
    window.speechSynthesis.speak(utterance)
  }

  const handleCheck = () => {
    // Simple similarity check (in production, use more sophisticated NLP)
    const userWords = translation.toLowerCase().trim().split(/\s+/)
    const correctWords = correctTranslation.toLowerCase().trim().split(/\s+/)
    const matchCount = userWords.filter((word) => correctWords.includes(word)).length
    const similarity = matchCount / correctWords.length

    const correct = similarity >= 0.7 // 70% similarity threshold
    setIsCorrect(correct)
    setShowFeedback(true)
    setTimeout(() => {
      onComplete(correct)
    }, 2500)
  }

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-2xl font-bold mb-2">Traducci√≥n</h3>
        <p className="text-lg text-muted-foreground">
          Traduce la siguiente frase de {sourceLang} a {targetLang}
        </p>
      </div>

      {/* Source Text */}
      <Card className="bg-primary/5">
        <CardContent className="p-8">
          <div className="flex items-center justify-between mb-4">
            <span className="text-sm font-medium text-muted-foreground">{sourceLang}</span>
            <Button onClick={handlePlayAudio} variant="ghost" size="sm">
              <Volume2 className="h-4 w-4" />
            </Button>
          </div>
          <p className="text-2xl font-bold text-center">{sourceText}</p>
        </CardContent>
      </Card>

      {/* Translation Input */}
      <Card>
        <CardContent className="p-6">
          <div className="space-y-4">
            <div className="flex items-center justify-between">
              <span className="text-sm font-medium text-muted-foreground">{targetLang}</span>
              <span className="text-xs text-muted-foreground">{translation.length} caracteres</span>
            </div>
            <Textarea
              placeholder={`Escribe tu traducci√≥n en ${targetLang}...`}
              value={translation}
              onChange={(e) => setTranslation(e.target.value)}
              disabled={showFeedback}
              className="min-h-[120px] text-lg"
            />
          </div>
        </CardContent>
      </Card>

      {/* Action Button */}
      {!showFeedback && (
        <div className="flex justify-center">
          <Button onClick={handleCheck} disabled={translation.trim().length < 3} size="lg" className="min-w-[200px]">
            Verificar Traducci√≥n
          </Button>
        </div>
      )}

      {/* Feedback */}
      {showFeedback && (
        <Card
          className={
            isCorrect ? "border-green-500 bg-green-50 dark:bg-green-950" : "border-red-500 bg-red-50 dark:bg-red-950"
          }
        >
          <CardContent className="p-6">
            <div className="flex items-start gap-3">
              {isCorrect ? (
                <Check className="h-6 w-6 text-green-600 flex-shrink-0 mt-1" />
              ) : (
                <X className="h-6 w-6 text-red-600 flex-shrink-0 mt-1" />
              )}
              <div className="flex-1">
                <p className="font-semibold mb-2">{isCorrect ? "¬°Muy bien!" : "Casi correcto"}</p>
                <div className="space-y-2">
                  <div>
                    <p className="text-sm font-medium text-muted-foreground mb-1">Tu traducci√≥n:</p>
                    <p className="text-sm">{translation}</p>
                  </div>
                  {!isCorrect && (
                    <div>
                      <p className="text-sm font-medium text-muted-foreground mb-1">Traducci√≥n sugerida:</p>
                      <p className="text-sm font-medium">{correctTranslation}</p>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/true-false-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/true-false-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Card, CardContent } from "@/components/ui/card"
import { Check, X } from "lucide-react"

interface TrueFalseActivityProps {
  question: string
  correctAnswer: boolean
  explanation?: string
  onComplete: (correct: boolean) => void
}

export function TrueFalseActivity({ question, correctAnswer, explanation, onComplete }: TrueFalseActivityProps) {
  const [selectedAnswer, setSelectedAnswer] = useState<boolean | null>(null)
  const [showFeedback, setShowFeedback] = useState(false)

  const handleAnswer = (answer: boolean) => {
    setSelectedAnswer(answer)
    setShowFeedback(true)
    const isCorrect = answer === correctAnswer
    setTimeout(() => {
      onComplete(isCorrect)
    }, 2000)
  }

  const isCorrect = selectedAnswer === correctAnswer

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-2xl font-bold mb-2">¬øVerdadero o Falso?</h3>
        <p className="text-lg text-muted-foreground">{question}</p>
      </div>

      <div className="grid gap-4 md:grid-cols-2 max-w-2xl mx-auto">
        <Card
          className={`cursor-pointer transition-all ${
            selectedAnswer === true
              ? showFeedback
                ? isCorrect
                  ? "border-green-500 bg-green-50 dark:bg-green-950"
                  : "border-red-500 bg-red-50 dark:bg-red-950"
                : "border-primary bg-primary/5"
              : "hover:border-primary hover:bg-accent"
          }`}
          onClick={() => !showFeedback && handleAnswer(true)}
        >
          <CardContent className="flex items-center justify-center gap-3 p-8">
            <Check className="h-8 w-8 text-green-600" />
            <span className="text-2xl font-bold">Verdadero</span>
          </CardContent>
        </Card>

        <Card
          className={`cursor-pointer transition-all ${
            selectedAnswer === false
              ? showFeedback
                ? isCorrect
                  ? "border-green-500 bg-green-50 dark:bg-green-950"
                  : "border-red-500 bg-red-50 dark:bg-red-950"
                : "border-primary bg-primary/5"
              : "hover:border-primary hover:bg-accent"
          }`}
          onClick={() => !showFeedback && handleAnswer(false)}
        >
          <CardContent className="flex items-center justify-center gap-3 p-8">
            <X className="h-8 w-8 text-red-600" />
            <span className="text-2xl font-bold">Falso</span>
          </CardContent>
        </Card>
      </div>

      {showFeedback && (
        <Card
          className={
            isCorrect ? "border-green-500 bg-green-50 dark:bg-green-950" : "border-red-500 bg-red-50 dark:bg-red-950"
          }
        >
          <CardContent className="p-6">
            <div className="flex items-start gap-3">
              {isCorrect ? (
                <Check className="h-6 w-6 text-green-600 flex-shrink-0 mt-1" />
              ) : (
                <X className="h-6 w-6 text-red-600 flex-shrink-0 mt-1" />
              )}
              <div>
                <p className="font-semibold mb-1">{isCorrect ? "¬°Correcto!" : "Incorrecto"}</p>
                {explanation && <p className="text-sm text-muted-foreground">{explanation}</p>}
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/activities/word-order-activity.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/activities/word-order-activity.tsx
================================================================================

"use client"

import { useState } from "react"
import { Button } from "@/components/ui/button"
import { Card, CardContent } from "@/components/ui/card"
import { Check, X, RotateCcw } from "lucide-react"

interface WordOrderActivityProps {
  instruction: string
  words: string[]
  correctOrder: string[]
  onComplete: (correct: boolean) => void
}

export function WordOrderActivity({ instruction, words, correctOrder, onComplete }: WordOrderActivityProps) {
  const [availableWords, setAvailableWords] = useState<string[]>(words)
  const [selectedWords, setSelectedWords] = useState<string[]>([])
  const [showFeedback, setShowFeedback] = useState(false)
  const [isCorrect, setIsCorrect] = useState(false)

  const handleWordClick = (word: string, fromAvailable: boolean) => {
    if (showFeedback) return

    if (fromAvailable) {
      setAvailableWords(availableWords.filter((w) => w !== word))
      setSelectedWords([...selectedWords, word])
    } else {
      setSelectedWords(selectedWords.filter((w) => w !== word))
      setAvailableWords([...availableWords, word])
    }
  }

  const handleCheck = () => {
    const correct = JSON.stringify(selectedWords) === JSON.stringify(correctOrder)
    setIsCorrect(correct)
    setShowFeedback(true)
    setTimeout(() => {
      onComplete(correct)
    }, 2000)
  }

  const handleReset = () => {
    setAvailableWords(words)
    setSelectedWords([])
    setShowFeedback(false)
  }

  return (
    <div className="space-y-6">
      <div className="text-center">
        <h3 className="text-2xl font-bold mb-2">Ordena las Palabras</h3>
        <p className="text-lg text-muted-foreground">{instruction}</p>
      </div>

      {/* Selected Words Area */}
      <Card className="min-h-[120px]">
        <CardContent className="p-6">
          <p className="text-sm text-muted-foreground mb-3">Tu respuesta:</p>
          <div className="flex flex-wrap gap-2 min-h-[60px]">
            {selectedWords.length === 0 ? (
              <p className="text-muted-foreground italic">Selecciona las palabras en orden...</p>
            ) : (
              selectedWords.map((word, index) => (
                <Button
                  key={`${word}-${index}`}
                  variant="default"
                  onClick={() => handleWordClick(word, false)}
                  disabled={showFeedback}
                  className="h-12 text-lg"
                >
                  {word}
                </Button>
              ))
            )}
          </div>
        </CardContent>
      </Card>

      {/* Available Words */}
      <Card>
        <CardContent className="p-6">
          <p className="text-sm text-muted-foreground mb-3">Palabras disponibles:</p>
          <div className="flex flex-wrap gap-2">
            {availableWords.map((word, index) => (
              <Button
                key={`${word}-${index}`}
                variant="outline"
                onClick={() => handleWordClick(word, true)}
                disabled={showFeedback}
                className="h-12 text-lg"
              >
                {word}
              </Button>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Action Buttons */}
      <div className="flex gap-3 justify-center">
        <Button variant="outline" onClick={handleReset} disabled={showFeedback || selectedWords.length === 0}>
          <RotateCcw className="mr-2 h-4 w-4" />
          Reiniciar
        </Button>
        <Button
          onClick={handleCheck}
          disabled={showFeedback || selectedWords.length !== correctOrder.length}
          className="min-w-[120px]"
        >
          Verificar
        </Button>
      </div>

      {/* Feedback */}
      {showFeedback && (
        <Card
          className={
            isCorrect ? "border-green-500 bg-green-50 dark:bg-green-950" : "border-red-500 bg-red-50 dark:bg-red-950"
          }
        >
          <CardContent className="p-6">
            <div className="flex items-start gap-3">
              {isCorrect ? (
                <Check className="h-6 w-6 text-green-600 flex-shrink-0 mt-1" />
              ) : (
                <X className="h-6 w-6 text-red-600 flex-shrink-0 mt-1" />
              )}
              <div>
                <p className="font-semibold mb-1">{isCorrect ? "¬°Correcto!" : "Incorrecto"}</p>
                {!isCorrect && (
                  <p className="text-sm text-muted-foreground">Orden correcto: {correctOrder.join(" ")}</p>
                )}
              </div>
            </div>
          </CardContent>
        </Card>
      )}
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/completion-modal.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/completion-modal.tsx
================================================================================

"use client"

import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"
import { Trophy, Zap, Star } from "lucide-react"

interface CompletionModalProps {
  lessonTitle: string
  xpEarned: number
  onClose: () => void
}

export function CompletionModal({ lessonTitle, xpEarned, onClose }: CompletionModalProps) {
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-background/80 backdrop-blur-sm">
      <Card className="mx-4 w-full max-w-md p-8">
        <div className="text-center">
          {/* Success Icon */}
          <div className="mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-success/10">
            <Trophy className="h-10 w-10 text-success" />
          </div>

          {/* Title */}
          <h2 className="mb-2 text-3xl font-bold text-balance">Lecci√≥n Completada</h2>
          <p className="mb-6 text-muted-foreground">Has completado: {lessonTitle}</p>

          {/* Rewards */}
          <div className="mb-8 space-y-4">
            <div className="flex items-center justify-center gap-3 rounded-xl bg-accent/10 p-4">
              <Zap className="h-6 w-6 text-accent" />
              <div className="text-left">
                <p className="text-sm text-muted-foreground">XP Ganado</p>
                <p className="text-2xl font-bold text-accent">+{xpEarned}</p>
              </div>
            </div>

            <div className="flex items-center justify-center gap-3 rounded-xl bg-primary/10 p-4">
              <Star className="h-6 w-6 text-primary" />
              <div className="text-left">
                <p className="text-sm text-muted-foreground">Racha Mantenida</p>
                <p className="text-xl font-bold text-primary">7 d√≠as</p>
              </div>
            </div>
          </div>

          {/* Actions */}
          <div className="space-y-3">
            <Button onClick={onClose} className="w-full">
              Continuar Aprendiendo
            </Button>
            <Button variant="outline" onClick={onClose} className="w-full bg-transparent">
              Ver Progreso
            </Button>
          </div>
        </div>
      </Card>
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/lesson-filters.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-filters.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Label } from "@/components/ui/label"
import { RadioGroup, RadioGroupItem } from "@/components/ui/radio-group"
import { Checkbox } from "@/components/ui/checkbox"

export function LessonFilters() {
  return (
    <Card className="p-6">
      <h3 className="mb-4 font-bold">Filtros</h3>

      <div className="space-y-6">
        {/* Level Filter */}
        <div>
          <Label className="mb-3 block text-sm font-semibold">Nivel</Label>
          <RadioGroup defaultValue="all">
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="all" id="all" />
              <Label htmlFor="all" className="font-normal">
                Todos
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="A1" id="A1" />
              <Label htmlFor="A1" className="font-normal">
                A1 - Principiante
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="A2" id="A2" />
              <Label htmlFor="A2" className="font-normal">
                A2 - Elemental
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <RadioGroupItem value="B1" id="B1" />
              <Label htmlFor="B1" className="font-normal">
                B1 - Intermedio
              </Label>
            </div>
          </RadioGroup>
        </div>

        {/* Progress Filter */}
        <div>
          <Label className="mb-3 block text-sm font-semibold">Progreso</Label>
          <div className="space-y-2">
            <div className="flex items-center space-x-2">
              <Checkbox id="not-started" />
              <Label htmlFor="not-started" className="font-normal">
                No iniciadas
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <Checkbox id="in-progress" />
              <Label htmlFor="in-progress" className="font-normal">
                En progreso
              </Label>
            </div>
            <div className="flex items-center space-x-2">
              <Checkbox id="completed" />
              <Label htmlFor="completed" className="font-normal">
                Completadas
              </Label>
            </div>
          </div>
        </div>
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/lesson-list.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-list.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Progress } from "@/components/ui/progress"
import { Badge } from "@/components/ui/badge"
import Link from "next/link"
import { CheckCircle2, Lock, Play } from "lucide-react"

export function LessonList() {
  const lessons = [
    {
      id: 1,
      title: "Greetings and Introductions",
      description: "Learn how to greet people and introduce yourself in English",
      level: "A1",
      progress: 100,
      completed: true,
      xp: 10,
      activities: 4,
    },
    {
      id: 2,
      title: "Numbers 1-20",
      description: "Master counting from 1 to 20 with interactive exercises",
      level: "A1",
      progress: 75,
      completed: false,
      xp: 10,
      activities: 5,
    },
    {
      id: 3,
      title: "Colors and Shapes",
      description: "Learn basic colors and geometric shapes vocabulary",
      level: "A1",
      progress: 0,
      completed: false,
      xp: 10,
      activities: 6,
      locked: false,
    },
    {
      id: 4,
      title: "Family Members",
      description: "Vocabulary and expressions about family relationships",
      level: "A1",
      progress: 0,
      completed: false,
      xp: 15,
      activities: 7,
      locked: true,
    },
    {
      id: 5,
      title: "Daily Routines",
      description: "Learn to talk about your daily activities and schedule",
      level: "A2",
      progress: 0,
      completed: false,
      xp: 15,
      activities: 8,
      locked: true,
    },
  ]

  return (
    <div className="space-y-4">
      {lessons.map((lesson) => (
        <Link
          key={lesson.id}
          href={lesson.locked ? "#" : `/lecciones/${lesson.id}`}
          className={`block ${lesson.locked ? "cursor-not-allowed" : ""}`}
        >
          <Card
            className={`p-6 transition-all ${
              lesson.locked
                ? "opacity-60"
                : lesson.completed
                  ? "border-success/30 hover:border-success"
                  : "hover:border-primary hover:shadow-md"
            }`}
          >
            <div className="flex items-start gap-4">
              {/* Icon */}
              <div
                className={`flex h-14 w-14 shrink-0 items-center justify-center rounded-xl ${
                  lesson.locked
                    ? "bg-muted"
                    : lesson.completed
                      ? "bg-success/10 text-success"
                      : "bg-primary/10 text-primary"
                }`}
              >
                {lesson.locked ? (
                  <Lock className="h-6 w-6 text-muted-foreground" />
                ) : lesson.completed ? (
                  <CheckCircle2 className="h-6 w-6" />
                ) : (
                  <Play className="h-6 w-6" />
                )}
              </div>

              {/* Content */}
              <div className="flex-1">
                <div className="mb-2 flex items-start justify-between gap-4">
                  <div>
                    <h3 className="text-lg font-bold">{lesson.title}</h3>
                    <p className="mt-1 text-sm text-muted-foreground leading-relaxed">{lesson.description}</p>
                  </div>
                  <div className="flex shrink-0 flex-col items-end gap-2">
                    <Badge variant="secondary">{lesson.level}</Badge>
                    <div className="flex items-center gap-1 rounded-lg bg-accent/10 px-2 py-1 text-sm font-medium text-accent">
                      <span>+{lesson.xp}</span>
                      <span className="text-xs">XP</span>
                    </div>
                  </div>
                </div>

                {/* Progress */}
                {!lesson.locked && (
                  <div className="mt-4 flex items-center gap-4">
                    <div className="flex-1">
                      <div className="mb-1 flex items-center justify-between text-xs">
                        <span className="text-muted-foreground">
                          {lesson.completed ? "Completada" : `${lesson.activities} actividades`}
                        </span>
                        <span className="font-medium">{lesson.progress}%</span>
                      </div>
                      <Progress value={lesson.progress} className="h-2" />
                    </div>
                  </div>
                )}

                {lesson.locked && (
                  <p className="mt-3 text-sm text-muted-foreground">
                    Completa las lecciones anteriores para desbloquear
                  </p>
                )}
              </div>
            </div>
          </Card>
        </Link>
      ))}
    </div>
  )
}



================================================================================
# ARCHIVO: front-end/components/lessons/lesson-viewer.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/lessons/lesson-viewer.tsx
================================================================================

"use client"

import { useState } from "react"
import { useRouter } from "next/navigation"
import { Button } from "@/components/ui/button"
import { Card } from "@/components/ui/card"
import { Progress } from "@/components/ui/progress"
import { useToast } from "@/hooks/use-toast"
import { MultipleChoiceActivity } from "@/components/lessons/activities/multiple-choice-activity"
import { FillBlankActivity } from "@/components/lessons/activities/fill-blank-activity"
import { CompletionModal } from "@/components/lessons/completion-modal"
import { AbandonLessonModal } from "@/components/lessons/abandon-lesson-modal"
import { ArrowLeft, ArrowRight, X } from "lucide-react"
import Link from "next/link"

// Mock lesson data
const LESSON_DATA = {
  id: "1",
  title: "Greetings and Introductions",
  description: "Learn how to greet people and introduce yourself",
  xpReward: 10,
  activities: [
    {
      id: 1,
      type: "multiple_choice",
      question: "How do you say 'Hello' in English?",
      options: ["Hello", "Goodbye", "Thank you", "Please"],
      correctAnswer: 0,
    },
    {
      id: 2,
      type: "multiple_choice",
      question: "What is the correct response to 'How are you?'",
      options: ["I am fine, thank you", "My name is John", "Goodbye", "Yes, please"],
      correctAnswer: 0,
    },
    {
      id: 3,
      type: "fill_blank",
      question: "Complete: 'Nice to ___ you'",
      correctAnswer: "meet",
    },
    {
      id: 4,
      type: "multiple_choice",
      question: "How do you introduce yourself?",
      options: ["My name is...", "How are you?", "Goodbye", "Thank you"],
      correctAnswer: 0,
    },
  ],
}

export function LessonViewer({ lessonId }: { lessonId: string }) {
  const router = useRouter()
  const { toast } = useToast()
  const [currentActivity, setCurrentActivity] = useState(0)
  const [completedActivities, setCompletedActivities] = useState<number[]>([])
  const [showCompletion, setShowCompletion] = useState(false)
  const [showAbandonModal, setShowAbandonModal] = useState(false)

  const activity = LESSON_DATA.activities[currentActivity]
  const progress = ((currentActivity + 1) / LESSON_DATA.activities.length) * 100
  const isLastActivity = currentActivity === LESSON_DATA.activities.length - 1

  const handleActivityComplete = (correct: boolean) => {
    if (correct) {
      setCompletedActivities([...completedActivities, activity.id])

      if (isLastActivity) {
        // Show completion modal
        setShowCompletion(true)
      } else {
        toast({
          title: "Correcto",
          description: "Excelente trabajo",
        })
        // Move to next activity after a short delay
        setTimeout(() => {
          setCurrentActivity(currentActivity + 1)
        }, 1000)
      }
    } else {
      toast({
        title: "Incorrecto",
        description: "Intenta de nuevo",
        variant: "destructive",
      })
    }
  }

  const handleNext = () => {
    if (!isLastActivity) {
      setCurrentActivity(currentActivity + 1)
    }
  }

  const handlePrevious = () => {
    if (currentActivity > 0) {
      setCurrentActivity(currentActivity - 1)
    }
  }

  return (
    <>
      <main className="container mx-auto px-4 py-8">
        {/* Header */}
        <div className="mb-6 flex items-center justify-between">
          <Link href="/lecciones">
            <Button variant="ghost" size="sm">
              <ArrowLeft className="mr-2 h-4 w-4" />
              Volver a Lecciones
            </Button>
          </Link>
          <div className="flex items-center gap-4">
            <div className="text-sm text-muted-foreground">
              Actividad {currentActivity + 1} de {LESSON_DATA.activities.length}
            </div>
            <Button variant="ghost" size="sm" onClick={() => setShowAbandonModal(true)}>
              <X className="h-4 w-4" />
            </Button>
          </div>
        </div>

        {/* Progress Bar */}
        <div className="mb-8">
          <div className="mb-2 flex items-center justify-between">
            <h1 className="text-2xl font-bold text-balance">{LESSON_DATA.title}</h1>
            <span className="text-sm font-medium">{Math.round(progress)}%</span>
          </div>
          <Progress value={progress} className="h-3" />
        </div>

        {/* Activity Content */}
        <div className="mx-auto max-w-3xl">
          <Card className="p-8">
            {activity.type === "multiple_choice" && (
              <MultipleChoiceActivity
                question={activity.question}
                options={activity.options}
                correctAnswer={activity.correctAnswer}
                onComplete={handleActivityComplete}
              />
            )}
            {activity.type === "fill_blank" && (
              <FillBlankActivity
                question={activity.question}
                correctAnswer={activity.correctAnswer}
                onComplete={handleActivityComplete}
              />
            )}
          </Card>

          {/* Navigation */}
          <div className="mt-6 flex items-center justify-between">
            <Button variant="outline" onClick={handlePrevious} disabled={currentActivity === 0}>
              <ArrowLeft className="mr-2 h-4 w-4" />
              Anterior
            </Button>
            <Button variant="outline" onClick={handleNext} disabled={isLastActivity}>
              Siguiente
              <ArrowRight className="ml-2 h-4 w-4" />
            </Button>
          </div>
        </div>
      </main>

      <AbandonLessonModal
        open={showAbandonModal}
        onOpenChange={setShowAbandonModal}
        lessonTitle={LESSON_DATA.title}
        progress={Math.round(progress)}
      />

      {showCompletion && (
        <CompletionModal
          lessonTitle={LESSON_DATA.title}
          xpEarned={LESSON_DATA.xpReward}
          onClose={() => router.push("/lecciones")}
        />
      )}
    </>
  )
}



================================================================================
# ARCHIVO: front-end/components/maintenance/create-task-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/maintenance/create-task-form.tsx
================================================================================

"use client"

import type React from "react"

import { useState } from "react"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Checkbox } from "@/components/ui/checkbox"
import { useToast } from "@/hooks/use-toast"
import { useRouter } from "next/navigation"
import { Calendar, Clock, AlertCircle } from "lucide-react"

export function CreateTaskForm() {
  const { toast } = useToast()
  const router = useRouter()

  const [title, setTitle] = useState("")
  const [description, setDescription] = useState("")
  const [taskType, setTaskType] = useState("")
  const [priority, setPriority] = useState("")
  const [assignedTo, setAssignedTo] = useState("")
  const [scheduledDate, setScheduledDate] = useState("")
  const [scheduledTime, setScheduledTime] = useState("")
  const [isRecurring, setIsRecurring] = useState(false)
  const [frequency, setFrequency] = useState("")

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()

    if (!title || !taskType || !priority || !assignedTo || !scheduledDate || !scheduledTime) {
      toast({
        title: "Campos incompletos",
        description: "Por favor completa todos los campos requeridos",
        variant: "destructive",
      })
      return
    }

    toast({
      title: "Tarea programada exitosamente",
      description: "La tarea ha sido creada y el responsable ser√° notificado",
    })
    router.push("/mantenimiento/tareas")
  }

  return (
    <form onSubmit={handleSubmit}>
      <Card className="mx-auto max-w-3xl">
        <CardHeader>
          <CardTitle>Informaci√≥n de la Tarea</CardTitle>
          <CardDescription>Completa los detalles de la tarea de mantenimiento</CardDescription>
        </CardHeader>

        <CardContent className="space-y-6">
          <div className="space-y-2">
            <Label htmlFor="title">T√≠tulo de la Tarea *</Label>
            <Input
              id="title"
              placeholder="Ej: Actualizaci√≥n de base de datos"
              value={title}
              onChange={(e) => setTitle(e.target.value)}
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="description">Descripci√≥n</Label>
            <Textarea
              id="description"
              placeholder="Describe los detalles de la tarea..."
              value={description}
              onChange={(e) => setDescription(e.target.value)}
              rows={4}
            />
          </div>

          <div className="grid gap-4 sm:grid-cols-2">
            <div className="space-y-2">
              <Label htmlFor="taskType">Tipo de Tarea *</Label>
              <Select value={taskType} onValueChange={setTaskType}>
                <SelectTrigger>
                  <SelectValue placeholder="Selecciona un tipo" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="manual">Manual</SelectItem>
                  <SelectItem value="automatica">Autom√°tica</SelectItem>
                </SelectContent>
              </Select>
            </div>

            <div className="space-y-2">
              <Label htmlFor="priority">Prioridad *</Label>
              <Select value={priority} onValueChange={setPriority}>
                <SelectTrigger>
                  <SelectValue placeholder="Selecciona prioridad" />
                </SelectTrigger>
                <SelectContent>
                  <SelectItem value="baja">Baja</SelectItem>
                  <SelectItem value="media">Media</SelectItem>
                  <SelectItem value="alta">Alta</SelectItem>
                  <SelectItem value="critica">Cr√≠tica</SelectItem>
                </SelectContent>
              </Select>
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="assignedTo">Asignar a *</Label>
            <Select value={assignedTo} onValueChange={setAssignedTo}>
              <SelectTrigger>
                <SelectValue placeholder="Selecciona responsable" />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="Carlos Mart√≠nez">Carlos Mart√≠nez</SelectItem>
                <SelectItem value="Ana L√≥pez">Ana L√≥pez</SelectItem>
                <SelectItem value="Pedro S√°nchez">Pedro S√°nchez</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="grid gap-4 sm:grid-cols-2">
            <div className="space-y-2">
              <Label htmlFor="scheduledDate" className="flex items-center gap-2">
                <Calendar className="h-4 w-4" />
                Fecha Programada *
              </Label>
              <Input
                id="scheduledDate"
                type="date"
                value={scheduledDate}
                onChange={(e) => setScheduledDate(e.target.value)}
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="scheduledTime" className="flex items-center gap-2">
                <Clock className="h-4 w-4" />
                Hora Programada *
              </Label>
              <Input
                id="scheduledTime"
                type="time"
                value={scheduledTime}
                onChange={(e) => setScheduledTime(e.target.value)}
              />
            </div>
          </div>

          <div className="space-y-4 rounded-lg border p-4">
            <div className="flex items-center gap-2">
              <Checkbox
                id="recurring"
                checked={isRecurring}
                onCheckedChange={(checked) => setIsRecurring(checked as boolean)}
              />
              <Label htmlFor="recurring" className="cursor-pointer font-medium">
                Tarea Recurrente
              </Label>
            </div>

            {isRecurring && (
              <div className="space-y-2">
                <Label htmlFor="frequency">Frecuencia</Label>
                <Select value={frequency} onValueChange={setFrequency}>
                  <SelectTrigger>
                    <SelectValue placeholder="Selecciona frecuencia" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="diaria">Diaria</SelectItem>
                    <SelectItem value="semanal">Semanal</SelectItem>
                    <SelectItem value="mensual">Mensual</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            )}
          </div>

          <div className="rounded-lg bg-blue-50 p-4">
            <div className="flex items-start gap-3">
              <AlertCircle className="h-5 w-5 text-blue-600 mt-0.5" />
              <div>
                <p className="text-sm font-medium text-blue-900">Nota</p>
                <p className="mt-1 text-sm text-blue-700">
                  El responsable asignado recibir√° una notificaci√≥n cuando se acerque la fecha programada.
                </p>
              </div>
            </div>
          </div>

          <div className="flex gap-3">
            <Button type="submit" className="flex-1">
              Programar Tarea
            </Button>
            <Button type="button" variant="outline" onClick={() => router.push("/mantenimiento/tareas")}>
              Cancelar
            </Button>
          </div>
        </CardContent>
      </Card>
    </form>
  )
}



================================================================================
# ARCHIVO: front-end/components/profile/profile-settings.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/profile/profile-settings.tsx
================================================================================

"use client"

import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { useToast } from "@/hooks/use-toast"
import { Save, Trash2, Loader2, Languages } from "lucide-react"
import { useRouter } from "next/navigation"
import { useEffect, useState } from "react"

export function ProfileSettings() {
  const { toast } = useToast()
  const router = useRouter()
  
  const [isLoading, setIsLoading] = useState(true)
  const [saving, setSaving] = useState(false)
  const [userData, setUserData] = useState<any>(null)
  const [formData, setFormData] = useState({
    nombre: "",
    primer_apellido: "",
    segundo_apellido: "",
    correo: "",
  })

  useEffect(() => {
    cargarDatosUsuario()
  }, [])

  const cargarDatosUsuario = async () => {
    try {
      const userId = localStorage.getItem("userId")
      if (!userId) {
        router.push("/login")
        return
      }

      const res = await fetch(`http://localhost:5000/api/usuario/perfil/${userId}`)
      const data = await res.json()

      if (res.ok) {
        setUserData(data)
        setFormData({
          nombre: data.usuario.nombre,
          primer_apellido: data.usuario.primer_apellido,
          segundo_apellido: data.usuario.segundo_apellido || "",
          correo: data.usuario.correo,
        })
      }
    } catch (error) {
      console.error("Error al cargar datos del usuario:", error)
      toast({
        title: "Error",
        description: "No se pudo cargar el perfil",
        variant: "destructive",
      })
    } finally {
      setIsLoading(false)
    }
  }

  const handleSave = async () => {
    if (!userData) return

    setSaving(true)
    try {
      const userId = localStorage.getItem("userId")
      const res = await fetch(`http://localhost:5000/api/usuarios/${userId}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
      })

      if (!res.ok) throw new Error("Error al actualizar")

      toast({
        title: "Perfil actualizado",
        description: "Tus cambios han sido guardados exitosamente",
      })
      
      // Recargar datos
      await cargarDatosUsuario()
    } catch (error: any) {
      toast({
        title: "Error",
        description: error.message || "No se pudo actualizar el perfil",
        variant: "destructive",
      })
    } finally {
      setSaving(false)
    }
  }

  const handleCancel = () => {
    if (userData) {
      setFormData({
        nombre: userData.usuario.nombre,
        primer_apellido: userData.usuario.primer_apellido,
        segundo_apellido: userData.usuario.segundo_apellido || "",
        correo: userData.usuario.correo,
      })
    }
  }

  // Iniciales corregidas: PH (Primer apellido + Nombre)
  const getInitials = () => {
    if (!userData) return "U"
    const { primer_apellido, nombre } = userData.usuario
    return `${primer_apellido[0]}${nombre[0]}`.toUpperCase()
  }

  const isStudent = userData?.usuario.rol === "alumno" || userData?.usuario.rol === "estudiante"

  if (isLoading) {
    return (
      <div className="flex justify-center items-center min-h-[400px]">
        <Loader2 className="h-8 w-8 animate-spin text-primary" />
      </div>
    )
  }

  if (!userData) {
    return (
      <div className="flex flex-col items-center justify-center min-h-[400px] space-y-4">
        <p className="text-muted-foreground">No se pudo cargar el perfil</p>
        <Button onClick={() => router.push("/login")}>Volver al login</Button>
      </div>
    )
  }

  return (
    <div className="mx-auto max-w-3xl space-y-6">
      {/* Profile Info */}
      <Card className="p-6">
        <h2 className="mb-6 text-xl font-bold">Informaci√≥n Personal</h2>

        <div className="mb-6 flex items-center gap-4">
          <Avatar className="h-20 w-20">
            <AvatarFallback className="bg-primary text-2xl text-primary-foreground">
              {getInitials()}
            </AvatarFallback>
          </Avatar>
          <div>
            <Button variant="outline" size="sm" disabled>
              Cambiar Foto
            </Button>
            <p className="mt-1 text-xs text-muted-foreground">JPG, PNG o GIF. M√°ximo 2MB</p>
          </div>
        </div>

        <div className="space-y-4">
          <div className="grid gap-4 sm:grid-cols-2">
            <div className="space-y-2">
              <Label htmlFor="nombre">Nombre</Label>
              <Input
                id="nombre"
                value={formData.nombre}
                onChange={(e) => setFormData({ ...formData, nombre: e.target.value })}
              />
            </div>

            <div className="space-y-2">
              <Label htmlFor="primer_apellido">Primer Apellido</Label>
              <Input
                id="primer_apellido"
                value={formData.primer_apellido}
                onChange={(e) => setFormData({ ...formData, primer_apellido: e.target.value })}
              />
            </div>
          </div>

          <div className="space-y-2">
            <Label htmlFor="segundo_apellido">Segundo Apellido (Opcional)</Label>
            <Input
              id="segundo_apellido"
              value={formData.segundo_apellido}
              onChange={(e) => setFormData({ ...formData, segundo_apellido: e.target.value })}
            />
          </div>

          <div className="space-y-2">
            <Label htmlFor="email">Correo Electr√≥nico</Label>
            <Input
              id="email"
              type="email"
              value={formData.correo}
              onChange={(e) => setFormData({ ...formData, correo: e.target.value })}
            />
            <p className="text-xs text-muted-foreground">
              Si cambias tu correo, deber√°s verificarlo nuevamente
            </p>
          </div>

          {isStudent && userData.perfil && (
            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="level">Nivel Actual</Label>
                <Input id="level" value={userData.perfil.nivel_actual} disabled />
              </div>

              <div className="space-y-2">
                <Label htmlFor="course">Idioma</Label>
                <Input id="course" value={userData.perfil.idioma} disabled />
              </div>
            </div>
          )}

          {isStudent && userData.perfil && (
            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="xp">Experiencia Total</Label>
                <Input id="xp" value={`${userData.perfil.total_xp || 0} XP`} disabled />
              </div>

              <div className="space-y-2">
                <Label htmlFor="racha">Racha Actual</Label>
                <Input id="racha" value={`${userData.perfil.dias_racha || 0} d√≠as`} disabled />
              </div>
            </div>
          )}
        </div>

        <div className="mt-6 flex gap-3">
          <Button onClick={handleSave} disabled={saving}>
            {saving ? (
              <>
                <Loader2 className="mr-2 h-4 w-4 animate-spin" />
                Guardando...
              </>
            ) : (
              <>
                <Save className="mr-2 h-4 w-4" />
                Guardar Cambios
              </>
            )}
          </Button>
          <Button variant="outline" onClick={handleCancel} disabled={saving}>
            Cancelar
          </Button>
        </div>
      </Card>

      {/* Gesti√≥n de Curso - Solo para estudiantes */}
      {isStudent && (
        <Card className="p-6">
          <h2 className="mb-2 text-xl font-bold">Gesti√≥n de Curso</h2>
          <p className="mb-4 text-sm text-muted-foreground">
            Cambia tu curso actual si deseas aprender un idioma diferente o ajustar tu nivel.
          </p>
          <Button 
            variant="outline" 
            onClick={() => router.push("/cambiar-curso")}
            className="w-full sm:w-auto"
          >
            <Languages className="mr-2 h-4 w-4" />
            Cambiar Curso
          </Button>
        </Card>
      )}

      {/* Zona de Peligro - Solo para estudiantes */}
      {isStudent && (
        <Card className="border-destructive/50 p-6">
          <h2 className="mb-2 text-xl font-bold text-destructive">Zona de Peligro</h2>
          <p className="mb-4 text-sm text-muted-foreground">
            Una vez que elimines tu cuenta, no hay vuelta atr√°s. Por favor, ten cuidado.
          </p>
          <Button 
            variant="destructive" 
            onClick={() => router.push("/eliminar-cuenta")}
            className="w-full sm:w-auto"
          >
            <Trash2 className="mr-2 h-4 w-4" />
            Eliminar Cuenta
          </Button>
        </Card>
      )}
    </div>
  )
}


================================================================================
# ARCHIVO: front-end/components/teacher/create-planning-form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/create-planning-form.tsx
================================================================================

"use client"

import { useState } from "react"
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import { Input } from "@/components/ui/input"
import { Label } from "@/components/ui/label"
import { Textarea } from "@/components/ui/textarea"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { Checkbox } from "@/components/ui/checkbox"
import { Badge } from "@/components/ui/badge"
import { useToast } from "@/hooks/use-toast"
import { useRouter } from "next/navigation"
import { ChevronRight, ChevronLeft, Check, Target, TrendingDown, BookOpen } from "lucide-react"

export function CreatePlanningForm() {
  const [step, setStep] = useState(1)
  const { toast } = useToast()
  const router = useRouter()

  // Step 1 data
  const [title, setTitle] = useState("")
  const [course, setCourse] = useState("")
  const [level, setLevel] = useState("")
  const [description, setDescription] = useState("")
  const [selectedAreas, setSelectedAreas] = useState<string[]>([])

  // Step 2 data
  const [selectedSuggestions, setSelectedSuggestions] = useState<string[]>([])

  // Step 3 data
  const [selectedLessons, setSelectedLessons] = useState<string[]>([])

  const improvementAreas = [
    { id: "grammar", label: "Gram√°tica", students: 12 },
    { id: "vocabulary", label: "Vocabulario", students: 8 },
    { id: "pronunciation", label: "Pronunciaci√≥n", students: 15 },
    { id: "listening", label: "Comprensi√≥n Auditiva", students: 10 },
    { id: "writing", label: "Escritura", students: 6 },
  ]

  const suggestions = [
    {
      id: "1",
      title: "Reforzar Tiempos Verbales",
      reason: "45% de errores en past simple",
      priority: "alta",
    },
    {
      id: "2",
      title: "Pr√°ctica de Conversaci√≥n",
      reason: "Baja participaci√≥n en actividades orales",
      priority: "media",
    },
    {
      id: "3",
      title: "Vocabulario T√©cnico",
      reason: "Solicitudes frecuentes de estudiantes",
      priority: "media",
    },
  ]

  const availableLessons = [
    { id: "1", title: "Past Simple - Verbos Regulares", level: "A2", duration: "45 min" },
    { id: "2", title: "Past Simple - Verbos Irregulares", level: "A2", duration: "50 min" },
    { id: "3", title: "Conversaci√≥n: Daily Routines", level: "B1", duration: "40 min" },
    { id: "4", title: "Vocabulario: Business English", level: "B2", duration: "35 min" },
    { id: "5", title: "Listening Practice: Interviews", level: "B1", duration: "30 min" },
  ]

  const handleAreaToggle = (areaId: string) => {
    setSelectedAreas((prev) => (prev.includes(areaId) ? prev.filter((id) => id !== areaId) : [...prev, areaId]))
  }

  const handleSuggestionToggle = (suggestionId: string) => {
    setSelectedSuggestions((prev) =>
      prev.includes(suggestionId) ? prev.filter((id) => id !== suggestionId) : [...prev, suggestionId],
    )
  }

  const handleLessonToggle = (lessonId: string) => {
    setSelectedLessons((prev) => (prev.includes(lessonId) ? prev.filter((id) => id !== lessonId) : [...prev, lessonId]))
  }

  const handleNext = () => {
    if (step === 1 && (!title || !course || !level || selectedAreas.length === 0)) {
      toast({
        title: "Campos incompletos",
        description: "Por favor completa todos los campos requeridos",
        variant: "destructive",
      })
      return
    }
    if (step === 2 && selectedSuggestions.length === 0) {
      toast({
        title: "Selecci√≥n requerida",
        description: "Selecciona al menos una sugerencia",
        variant: "destructive",
      })
      return
    }
    setStep(step + 1)
  }

  const handleBack = () => {
    setStep(step - 1)
  }

  const handleSubmit = () => {
    if (selectedLessons.length === 0) {
      toast({
        title: "Lecciones requeridas",
        description: "Asocia al menos una lecci√≥n al plan",
        variant: "destructive",
      })
      return
    }

    toast({
      title: "Plan creado exitosamente",
      description: "El plan ha sido guardado y est√° listo para activarse",
    })
    router.push("/profesor/planificacion")
  }

  return (
    <Card className="mx-auto max-w-4xl">
      <CardHeader>
        <div className="mb-4 flex items-center justify-between">
          <div className="flex gap-2">
            {[1, 2, 3].map((s) => (
              <div
                key={s}
                className={`flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium ${
                  s === step
                    ? "bg-primary text-primary-foreground"
                    : s < step
                      ? "bg-green-500 text-white"
                      : "bg-muted text-muted-foreground"
                }`}
              >
                {s < step ? <Check className="h-4 w-4" /> : s}
              </div>
            ))}
          </div>
          <Badge variant="outline">Paso {step} de 3</Badge>
        </div>
        <CardTitle>
          {step === 1 && "Informaci√≥n B√°sica"}
          {step === 2 && "An√°lisis y Sugerencias"}
          {step === 3 && "Asociar Lecciones"}
        </CardTitle>
        <CardDescription>
          {step === 1 && "Completa la informaci√≥n b√°sica del plan y selecciona √°reas de mejora"}
          {step === 2 && "Revisa el an√°lisis de desempe√±o y acepta las sugerencias"}
          {step === 3 && "Asocia las lecciones que formar√°n parte de este plan"}
        </CardDescription>
      </CardHeader>

      <CardContent>
        {/* Step 1: Basic Information */}
        {step === 1 && (
          <div className="space-y-6">
            <div className="space-y-2">
              <Label htmlFor="title">T√≠tulo del Plan *</Label>
              <Input
                id="title"
                placeholder="Ej: Unidad 5: Tiempos Verbales"
                value={title}
                onChange={(e) => setTitle(e.target.value)}
              />
            </div>

            <div className="grid gap-4 sm:grid-cols-2">
              <div className="space-y-2">
                <Label htmlFor="course">Curso *</Label>
                <Select value={course} onValueChange={setCourse}>
                  <SelectTrigger>
                    <SelectValue placeholder="Selecciona un curso" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="english-beginner">Ingl√©s Principiante</SelectItem>
                    <SelectItem value="english-intermediate">Ingl√©s Intermedio</SelectItem>
                    <SelectItem value="english-advanced">Ingl√©s Avanzado</SelectItem>
                  </SelectContent>
                </Select>
              </div>

              <div className="space-y-2">
                <Label htmlFor="level">Nivel *</Label>
                <Select value={level} onValueChange={setLevel}>
                  <SelectTrigger>
                    <SelectValue placeholder="Selecciona un nivel" />
                  </SelectTrigger>
                  <SelectContent>
                    <SelectItem value="A1">A1 - Principiante</SelectItem>
                    <SelectItem value="A2">A2 - Elemental</SelectItem>
                    <SelectItem value="B1">B1 - Intermedio</SelectItem>
                    <SelectItem value="B2">B2 - Intermedio Alto</SelectItem>
                    <SelectItem value="C1">C1 - Avanzado</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </div>

            <div className="space-y-2">
              <Label htmlFor="description">Descripci√≥n</Label>
              <Textarea
                id="description"
                placeholder="Describe los objetivos y contenido del plan..."
                value={description}
                onChange={(e) => setDescription(e.target.value)}
                rows={4}
              />
            </div>

            <div className="space-y-3">
              <Label>√Åreas de Mejora *</Label>
              <p className="text-sm text-muted-foreground">
                Selecciona las √°reas donde los estudiantes necesitan refuerzo
              </p>
              <div className="space-y-2">
                {improvementAreas.map((area) => (
                  <div key={area.id} className="flex items-center justify-between rounded-lg border p-3">
                    <div className="flex items-center gap-3">
                      <Checkbox
                        id={area.id}
                        checked={selectedAreas.includes(area.id)}
                        onCheckedChange={() => handleAreaToggle(area.id)}
                      />
                      <div>
                        <Label htmlFor={area.id} className="cursor-pointer font-medium">
                          {area.label}
                        </Label>
                        <p className="text-xs text-muted-foreground">{area.students} estudiantes con dificultad</p>
                      </div>
                    </div>
                    <TrendingDown className="h-4 w-4 text-orange-500" />
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Analysis and Suggestions */}
        {step === 2 && (
          <div className="space-y-6">
            <div className="rounded-lg bg-blue-50 p-4">
              <div className="flex items-start gap-3">
                <Target className="mt-0.5 h-5 w-5 text-blue-600" />
                <div>
                  <h3 className="font-semibold text-blue-900">An√°lisis de Desempe√±o</h3>
                  <p className="mt-1 text-sm text-blue-700">
                    Basado en las √°reas seleccionadas, hemos identificado las siguientes lecciones problem√°ticas y
                    generado sugerencias de mejora.
                  </p>
                </div>
              </div>
            </div>

            <div className="space-y-3">
              <Label>Sugerencias de Contenido</Label>
              <p className="text-sm text-muted-foreground">Selecciona las sugerencias que deseas incluir en el plan</p>
              <div className="space-y-3">
                {suggestions.map((suggestion) => (
                  <div key={suggestion.id} className="rounded-lg border p-4">
                    <div className="flex items-start gap-3">
                      <Checkbox
                        id={`suggestion-${suggestion.id}`}
                        checked={selectedSuggestions.includes(suggestion.id)}
                        onCheckedChange={() => handleSuggestionToggle(suggestion.id)}
                      />
                      <div className="flex-1">
                        <div className="flex items-center gap-2">
                          <Label htmlFor={`suggestion-${suggestion.id}`} className="cursor-pointer font-medium">
                            {suggestion.title}
                          </Label>
                          <Badge
                            variant={suggestion.priority === "alta" ? "destructive" : "secondary"}
                            className="text-xs"
                          >
                            {suggestion.priority}
                          </Badge>
                        </div>
                        <p className="mt-1 text-sm text-muted-foreground">{suggestion.reason}</p>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Step 3: Associate Lessons */}
        {step === 3 && (
          <div className="space-y-6">
            <div className="rounded-lg bg-green-50 p-4">
              <div className="flex items-start gap-3">
                <BookOpen className="mt-0.5 h-5 w-5 text-green-600" />
                <div>
                  <h3 className="font-semibold text-green-900">Lecciones Disponibles</h3>
                  <p className="mt-1 text-sm text-green-700">
                    Selecciona las lecciones que formar√°n parte de este plan de contenido.
                  </p>
                </div>
              </div>
            </div>

            <div className="space-y-3">
              {availableLessons.map((lesson) => (
                <div key={lesson.id} className="rounded-lg border p-4">
                  <div className="flex items-start gap-3">
                    <Checkbox
                      id={`lesson-${lesson.id}`}
                      checked={selectedLessons.includes(lesson.id)}
                      onCheckedChange={() => handleLessonToggle(lesson.id)}
                    />
                    <div className="flex-1">
                      <Label htmlFor={`lesson-${lesson.id}`} className="cursor-pointer font-medium">
                        {lesson.title}
                      </Label>
                      <div className="mt-1 flex items-center gap-3 text-sm text-muted-foreground">
                        <span>Nivel: {lesson.level}</span>
                        <span>‚Ä¢</span>
                        <span>Duraci√≥n: {lesson.duration}</span>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {selectedLessons.length > 0 && (
              <div className="rounded-lg bg-muted p-4">
                <p className="text-sm font-medium">
                  {selectedLessons.length}{" "}
                  {selectedLessons.length === 1 ? "lecci√≥n seleccionada" : "lecciones seleccionadas"}
                </p>
              </div>
            )}
          </div>
        )}

        {/* Navigation Buttons */}
        <div className="mt-8 flex justify-between">
          <Button variant="outline" onClick={handleBack} disabled={step === 1}>
            <ChevronLeft className="mr-2 h-4 w-4" />
            Anterior
          </Button>

          {step < 3 ? (
            <Button onClick={handleNext}>
              Siguiente
              <ChevronRight className="ml-2 h-4 w-4" />
            </Button>
          ) : (
            <Button onClick={handleSubmit}>
              <Check className="mr-2 h-4 w-4" />
              Crear Plan
            </Button>
          )}
        </div>
      </CardContent>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/teacher/quick-teacher-actions.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/quick-teacher-actions.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Button } from "@/components/ui/button"
import Link from "next/link"
import { BarChart3, MessageSquare, Calendar, FileText } from "lucide-react"

export function QuickTeacherActions() {
  const actions = [
    {
      label: "Ver Estad√≠sticas",
      href: "/profesor/estadisticas",
      icon: BarChart3,
      color: "bg-primary/10 text-primary",
    },
    {
      label: "Retroalimentaci√≥n",
      href: "/profesor/retroalimentacion",
      icon: MessageSquare,
      color: "bg-secondary/10 text-secondary",
    },
    {
      label: "Planificaci√≥n",
      href: "/profesor/planificacion",
      icon: Calendar,
      color: "bg-accent/10 text-accent",
    },
    {
      label: "Reportes",
      href: "/profesor/reportes",
      icon: FileText,
      color: "bg-muted text-muted-foreground",
    },
  ]

  return (
    <Card className="p-6">
      <h3 className="mb-4 font-bold">Acciones R√°pidas</h3>
      <div className="space-y-2">
        {actions.map((action, index) => {
          const Icon = action.icon
          return (
            <Link key={index} href={action.href}>
              <Button variant="ghost" className="w-full justify-start gap-3">
                <div className={`flex h-8 w-8 items-center justify-center rounded-lg ${action.color}`}>
                  <Icon className="h-4 w-4" />
                </div>
                {action.label}
              </Button>
            </Link>
          )
        })}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/teacher/recent-feedback.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/recent-feedback.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import Link from "next/link"
import { MessageSquare } from "lucide-react"

export function RecentFeedback() {
  const feedback = [
    {
      id: 1,
      student: "Mar√≠a Garc√≠a",
      lesson: "Daily Routines",
      comment: "No entiendo el uso de 'usually' vs 'always'",
      status: "pending",
      date: "Hace 2 horas",
    },
    {
      id: 2,
      student: "Carlos Rodr√≠guez",
      lesson: "Past Tense",
      comment: "Excelente lecci√≥n, muy clara",
      status: "responded",
      date: "Hace 1 d√≠a",
    },
    {
      id: 3,
      student: "Ana Mart√≠nez",
      lesson: "Colors and Shapes",
      comment: "Necesito m√°s pr√°ctica con pronunciaci√≥n",
      status: "pending",
      date: "Hace 3 horas",
    },
  ]

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h3 className="font-bold">Comentarios Recientes</h3>
        <Badge variant="secondary">{feedback.filter((f) => f.status === "pending").length} pendientes</Badge>
      </div>

      <div className="space-y-3">
        {feedback.map((item) => (
          <Link key={item.id} href={`/profesor/retroalimentacion/${item.id}`}>
            <div
              className={`rounded-lg border-2 p-3 transition-all ${
                item.status === "pending"
                  ? "border-accent/30 bg-accent/5 hover:border-accent"
                  : "border-border bg-card hover:border-primary/50"
              }`}
            >
              <div className="mb-2 flex items-start justify-between gap-2">
                <div className="flex items-center gap-2">
                  <MessageSquare className="h-4 w-4 text-muted-foreground" />
                  <span className="text-sm font-medium">{item.student}</span>
                </div>
                <Badge variant={item.status === "pending" ? "default" : "secondary"} className="text-xs">
                  {item.status === "pending" ? "Pendiente" : "Respondido"}
                </Badge>
              </div>
              <p className="mb-2 text-sm text-muted-foreground">{item.lesson}</p>
              <p className="text-sm leading-relaxed">{item.comment}</p>
              <p className="mt-2 text-xs text-muted-foreground">{item.date}</p>
            </div>
          </Link>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/teacher/response-modal.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/response-modal.tsx
================================================================================

"use client"

import { useState } from "react"
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogFooter,
} from "@/components/ui/dialog"
import { Button } from "@/components/ui/button"
import { Textarea } from "@/components/ui/textarea"
import { Label } from "@/components/ui/label"
import { Badge } from "@/components/ui/badge"
import { useToast } from "@/hooks/use-toast"
import { Send } from "lucide-react"

interface Feedback {
  id: number
  student: string
  type: string
  message: string
  date: string
  status: string
  response: string | null
}

interface ResponseModalProps {
  isOpen: boolean
  onClose: () => void
  feedback?: Feedback
}

export function ResponseModal({ isOpen, onClose, feedback }: ResponseModalProps) {
  const [response, setResponse] = useState(feedback?.response || "")
  const { toast } = useToast()

  const handleSubmit = () => {
    if (!response.trim()) {
      toast({
        title: "Respuesta vac√≠a",
        description: "Por favor escribe una respuesta antes de enviar",
        variant: "destructive",
      })
      return
    }

    toast({
      title: "Respuesta enviada",
      description: "El estudiante ha sido notificado de tu respuesta",
    })
    setResponse("")
    onClose()
  }

  if (!feedback) return null

  return (
    <Dialog open={isOpen} onOpenChange={onClose}>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle>
            {feedback.status === "respondido" ? "Respuesta Enviada" : "Responder Retroalimentaci√≥n"}
          </DialogTitle>
          <DialogDescription>Retroalimentaci√≥n de {feedback.student}</DialogDescription>
        </DialogHeader>

        <div className="space-y-4">
          <div className="rounded-lg border p-4">
            <div className="mb-2 flex items-center gap-2">
              <span className="font-medium">{feedback.student}</span>
              <Badge
                variant={
                  feedback.type === "problema"
                    ? "destructive"
                    : feedback.type === "felicitacion"
                      ? "default"
                      : "secondary"
                }
              >
                {feedback.type}
              </Badge>
            </div>
            <p className="text-sm text-muted-foreground">{feedback.message}</p>
            <p className="mt-2 text-xs text-muted-foreground">{feedback.date}</p>
          </div>

          <div className="space-y-2">
            <Label htmlFor="response">
              {feedback.status === "respondido" ? "Tu Respuesta" : "Escribe tu respuesta"}
            </Label>
            <Textarea
              id="response"
              placeholder="Escribe tu respuesta aqu√≠..."
              value={response}
              onChange={(e) => setResponse(e.target.value)}
              rows={6}
              disabled={feedback.status === "respondido"}
            />
          </div>
        </div>

        <DialogFooter>
          <Button variant="outline" onClick={onClose}>
            {feedback.status === "respondido" ? "Cerrar" : "Cancelar"}
          </Button>
          {feedback.status !== "respondido" && (
            <Button onClick={handleSubmit}>
              <Send className="mr-2 h-4 w-4" />
              Enviar Respuesta
            </Button>
          )}
        </DialogFooter>
      </DialogContent>
    </Dialog>
  )
}



================================================================================
# ARCHIVO: front-end/components/teacher/student-performance.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/student-performance.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Avatar, AvatarFallback } from "@/components/ui/avatar"
import { Progress } from "@/components/ui/progress"
import { Badge } from "@/components/ui/badge"
import Link from "next/link"
import { ChevronRight } from "lucide-react"

export function StudentPerformance() {
  const students = [
    {
      id: 1,
      name: "Mar√≠a Garc√≠a",
      initials: "MG",
      level: "B1",
      lessonsCompleted: 15,
      totalLessons: 20,
      averageScore: 92,
      status: "excellent",
    },
    {
      id: 2,
      name: "Carlos Rodr√≠guez",
      initials: "CR",
      level: "A2",
      lessonsCompleted: 8,
      totalLessons: 15,
      averageScore: 78,
      status: "good",
    },
    {
      id: 3,
      name: "Ana Mart√≠nez",
      initials: "AM",
      level: "B1",
      lessonsCompleted: 12,
      totalLessons: 20,
      averageScore: 65,
      status: "needs-attention",
    },
    {
      id: 4,
      name: "Luis Fern√°ndez",
      initials: "LF",
      level: "A1",
      lessonsCompleted: 5,
      totalLessons: 10,
      averageScore: 88,
      status: "good",
    },
  ]

  const getStatusBadge = (status: string) => {
    if (status === "excellent") return <Badge className="bg-success text-success-foreground">Excelente</Badge>
    if (status === "good") return <Badge variant="secondary">Bien</Badge>
    return <Badge variant="destructive">Necesita Atenci√≥n</Badge>
  }

  return (
    <Card className="p-6">
      <div className="mb-4 flex items-center justify-between">
        <h2 className="text-xl font-bold">Rendimiento de Estudiantes</h2>
        <Link href="/profesor/estadisticas" className="text-sm text-primary hover:underline">
          Ver Todos
          <ChevronRight className="ml-1 inline h-4 w-4" />
        </Link>
      </div>

      <div className="space-y-4">
        {students.map((student) => (
          <Link key={student.id} href={`/profesor/estadisticas/${student.id}`}>
            <div className="rounded-xl border-2 border-border bg-card p-4 transition-all hover:border-primary hover:bg-primary/5">
              <div className="flex items-start gap-4">
                <Avatar className="h-12 w-12">
                  <AvatarFallback className="bg-primary text-primary-foreground">{student.initials}</AvatarFallback>
                </Avatar>

                <div className="flex-1">
                  <div className="mb-2 flex items-start justify-between">
                    <div>
                      <h3 className="font-semibold">{student.name}</h3>
                      <p className="text-sm text-muted-foreground">Nivel {student.level}</p>
                    </div>
                    {getStatusBadge(student.status)}
                  </div>

                  <div className="space-y-2">
                    <div>
                      <div className="mb-1 flex items-center justify-between text-xs">
                        <span className="text-muted-foreground">Progreso</span>
                        <span className="font-medium">
                          {student.lessonsCompleted} / {student.totalLessons} lecciones
                        </span>
                      </div>
                      <Progress value={(student.lessonsCompleted / student.totalLessons) * 100} className="h-2" />
                    </div>

                    <div className="flex items-center justify-between text-sm">
                      <span className="text-muted-foreground">Promedio</span>
                      <span className="font-bold text-primary">{student.averageScore}%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </Link>
        ))}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/teacher/teacher-stats.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/teacher/teacher-stats.tsx
================================================================================

import { Card } from "@/components/ui/card"
import { Users, BookOpen, MessageSquare, TrendingUp } from "lucide-react"

export function TeacherStats() {
  const stats = [
    {
      label: "Estudiantes Activos",
      value: 45,
      change: "+5",
      icon: Users,
      color: "text-primary",
    },
    {
      label: "Lecciones Completadas",
      value: 234,
      change: "+12",
      icon: BookOpen,
      color: "text-secondary",
    },
    {
      label: "Comentarios Pendientes",
      value: 8,
      change: "-3",
      icon: MessageSquare,
      color: "text-accent",
    },
    {
      label: "Tasa de √âxito Promedio",
      value: "87%",
      change: "+2%",
      icon: TrendingUp,
      color: "text-success",
    },
  ]

  return (
    <Card className="p-6">
      <h2 className="mb-4 text-xl font-bold">Estad√≠sticas Generales</h2>

      <div className="grid gap-4 sm:grid-cols-2">
        {stats.map((stat, index) => {
          const Icon = stat.icon
          return (
            <div key={index} className="flex items-start gap-3 rounded-lg bg-muted/50 p-4">
              <div className={`flex h-10 w-10 items-center justify-center rounded-lg bg-background ${stat.color}`}>
                <Icon className="h-5 w-5" />
              </div>
              <div className="flex-1">
                <p className="text-sm text-muted-foreground">{stat.label}</p>
                <div className="mt-1 flex items-baseline gap-2">
                  <span className="text-2xl font-bold">{stat.value}</span>
                  <span className="text-sm font-medium text-success">{stat.change}</span>
                </div>
              </div>
            </div>
          )
        })}
      </div>
    </Card>
  )
}



================================================================================
# ARCHIVO: front-end/components/theme-provider.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/theme-provider.tsx
================================================================================

'use client'

import * as React from 'react'
import {
  ThemeProvider as NextThemesProvider,
  type ThemeProviderProps,
} from 'next-themes'

export function ThemeProvider({ children, ...props }: ThemeProviderProps) {
  return <NextThemesProvider {...props}>{children}</NextThemesProvider>
}



================================================================================
# ARCHIVO: front-end/components/ui/accordion.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/accordion.tsx
================================================================================

'use client'

import * as React from 'react'
import * as AccordionPrimitive from '@radix-ui/react-accordion'
import { ChevronDownIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Accordion({
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Root>) {
  return <AccordionPrimitive.Root data-slot="accordion" {...props} />
}

function AccordionItem({
  className,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Item>) {
  return (
    <AccordionPrimitive.Item
      data-slot="accordion-item"
      className={cn('border-b last:border-b-0', className)}
      {...props}
    />
  )
}

function AccordionTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Trigger>) {
  return (
    <AccordionPrimitive.Header className="flex">
      <AccordionPrimitive.Trigger
        data-slot="accordion-trigger"
        className={cn(
          'focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180',
          className,
        )}
        {...props}
      >
        {children}
        <ChevronDownIcon className="text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200" />
      </AccordionPrimitive.Trigger>
    </AccordionPrimitive.Header>
  )
}

function AccordionContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof AccordionPrimitive.Content>) {
  return (
    <AccordionPrimitive.Content
      data-slot="accordion-content"
      className="data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm"
      {...props}
    >
      <div className={cn('pt-0 pb-4', className)}>{children}</div>
    </AccordionPrimitive.Content>
  )
}

export { Accordion, AccordionItem, AccordionTrigger, AccordionContent }



================================================================================
# ARCHIVO: front-end/components/ui/alert-dialog.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert-dialog.tsx
================================================================================

'use client'

import * as React from 'react'
import * as AlertDialogPrimitive from '@radix-ui/react-alert-dialog'

import { cn } from '@/lib/utils'
import { buttonVariants } from '@/components/ui/button'

function AlertDialog({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Root>) {
  return <AlertDialogPrimitive.Root data-slot="alert-dialog" {...props} />
}

function AlertDialogTrigger({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Trigger>) {
  return (
    <AlertDialogPrimitive.Trigger data-slot="alert-dialog-trigger" {...props} />
  )
}

function AlertDialogPortal({
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Portal>) {
  return (
    <AlertDialogPrimitive.Portal data-slot="alert-dialog-portal" {...props} />
  )
}

function AlertDialogOverlay({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Overlay>) {
  return (
    <AlertDialogPrimitive.Overlay
      data-slot="alert-dialog-overlay"
      className={cn(
        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
        className,
      )}
      {...props}
    />
  )
}

function AlertDialogContent({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Content>) {
  return (
    <AlertDialogPortal>
      <AlertDialogOverlay />
      <AlertDialogPrimitive.Content
        data-slot="alert-dialog-content"
        className={cn(
          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg',
          className,
        )}
        {...props}
      />
    </AlertDialogPortal>
  )
}

function AlertDialogHeader({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-dialog-header"
      className={cn('flex flex-col gap-2 text-center sm:text-left', className)}
      {...props}
    />
  )
}

function AlertDialogFooter({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-dialog-footer"
      className={cn(
        'flex flex-col-reverse gap-2 sm:flex-row sm:justify-end',
        className,
      )}
      {...props}
    />
  )
}

function AlertDialogTitle({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Title>) {
  return (
    <AlertDialogPrimitive.Title
      data-slot="alert-dialog-title"
      className={cn('text-lg font-semibold', className)}
      {...props}
    />
  )
}

function AlertDialogDescription({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Description>) {
  return (
    <AlertDialogPrimitive.Description
      data-slot="alert-dialog-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

function AlertDialogAction({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Action>) {
  return (
    <AlertDialogPrimitive.Action
      className={cn(buttonVariants(), className)}
      {...props}
    />
  )
}

function AlertDialogCancel({
  className,
  ...props
}: React.ComponentProps<typeof AlertDialogPrimitive.Cancel>) {
  return (
    <AlertDialogPrimitive.Cancel
      className={cn(buttonVariants({ variant: 'outline' }), className)}
      {...props}
    />
  )
}

export {
  AlertDialog,
  AlertDialogPortal,
  AlertDialogOverlay,
  AlertDialogTrigger,
  AlertDialogContent,
  AlertDialogHeader,
  AlertDialogFooter,
  AlertDialogTitle,
  AlertDialogDescription,
  AlertDialogAction,
  AlertDialogCancel,
}



================================================================================
# ARCHIVO: front-end/components/ui/alert.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/alert.tsx
================================================================================

import * as React from 'react'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

const alertVariants = cva(
  'relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current',
  {
    variants: {
      variant: {
        default: 'bg-card text-card-foreground',
        destructive:
          'text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

function Alert({
  className,
  variant,
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof alertVariants>) {
  return (
    <div
      data-slot="alert"
      role="alert"
      className={cn(alertVariants({ variant }), className)}
      {...props}
    />
  )
}

function AlertTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-title"
      className={cn(
        'col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight',
        className,
      )}
      {...props}
    />
  )
}

function AlertDescription({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="alert-description"
      className={cn(
        'text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed',
        className,
      )}
      {...props}
    />
  )
}

export { Alert, AlertTitle, AlertDescription }



================================================================================
# ARCHIVO: front-end/components/ui/aspect-ratio.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/aspect-ratio.tsx
================================================================================

'use client'

import * as AspectRatioPrimitive from '@radix-ui/react-aspect-ratio'

function AspectRatio({
  ...props
}: React.ComponentProps<typeof AspectRatioPrimitive.Root>) {
  return <AspectRatioPrimitive.Root data-slot="aspect-ratio" {...props} />
}

export { AspectRatio }



================================================================================
# ARCHIVO: front-end/components/ui/avatar.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/avatar.tsx
================================================================================

"use client"

import * as React from "react"
import * as AvatarPrimitive from "@radix-ui/react-avatar"

import { cn } from "@/lib/utils"

const Avatar = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Root
    ref={ref}
    className={cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full", className)}
    {...props}
  />
))
Avatar.displayName = AvatarPrimitive.Root.displayName

const AvatarImage = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Image>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Image ref={ref} className={cn("aspect-square h-full w-full", className)} {...props} />
))
AvatarImage.displayName = AvatarPrimitive.Image.displayName

const AvatarFallback = React.forwardRef<
  React.ElementRef<typeof AvatarPrimitive.Fallback>,
  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>
>(({ className, ...props }, ref) => (
  <AvatarPrimitive.Fallback
    ref={ref}
    className={cn("flex h-full w-full items-center justify-center rounded-full bg-muted", className)}
    {...props}
  />
))
AvatarFallback.displayName = AvatarPrimitive.Fallback.displayName

export { Avatar, AvatarImage, AvatarFallback }



================================================================================
# ARCHIVO: front-end/components/ui/badge.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/badge.tsx
================================================================================

import type * as React from "react"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const badgeVariants = cva(
  "inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",
  {
    variants: {
      variant: {
        default: "border-transparent bg-primary text-primary-foreground hover:bg-primary/80",
        secondary: "border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",
        destructive: "border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",
        outline: "text-foreground",
      },
    },
    defaultVariants: {
      variant: "default",
    },
  },
)

export interface BadgeProps extends React.HTMLAttributes<HTMLDivElement>, VariantProps<typeof badgeVariants> {}

function Badge({ className, variant, ...props }: BadgeProps) {
  return <div className={cn(badgeVariants({ variant }), className)} {...props} />
}

export { Badge, badgeVariants }



================================================================================
# ARCHIVO: front-end/components/ui/breadcrumb.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/breadcrumb.tsx
================================================================================

import * as React from "react"
import { ChevronRight } from "lucide-react"
import Link from "next/link"
import { cn } from "@/lib/utils"

const Breadcrumb = React.forwardRef<HTMLElement, React.ComponentPropsWithoutRef<"nav">>(
  ({ className, ...props }, ref) => <nav ref={ref} aria-label="breadcrumb" className={cn("", className)} {...props} />,
)
Breadcrumb.displayName = "Breadcrumb"

const BreadcrumbList = React.forwardRef<HTMLOListElement, React.ComponentPropsWithoutRef<"ol">>(
  ({ className, ...props }, ref) => (
    <ol
      ref={ref}
      className={cn("flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground", className)}
      {...props}
    />
  ),
)
BreadcrumbList.displayName = "BreadcrumbList"

const BreadcrumbItem = React.forwardRef<HTMLLIElement, React.ComponentPropsWithoutRef<"li">>(
  ({ className, ...props }, ref) => (
    <li ref={ref} className={cn("inline-flex items-center gap-1.5", className)} {...props} />
  ),
)
BreadcrumbItem.displayName = "BreadcrumbItem"

const BreadcrumbLink = React.forwardRef<
  HTMLAnchorElement,
  React.ComponentPropsWithoutRef<typeof Link> & {
    asChild?: boolean
  }
>(({ className, ...props }, ref) => (
  <Link ref={ref} className={cn("transition-colors hover:text-foreground", className)} {...props} />
))
BreadcrumbLink.displayName = "BreadcrumbLink"

const BreadcrumbPage = React.forwardRef<HTMLSpanElement, React.ComponentPropsWithoutRef<"span">>(
  ({ className, ...props }, ref) => (
    <span
      ref={ref}
      role="link"
      aria-disabled="true"
      aria-current="page"
      className={cn("font-normal text-foreground", className)}
      {...props}
    />
  ),
)
BreadcrumbPage.displayName = "BreadcrumbPage"

const BreadcrumbSeparator = ({ children, className, ...props }: React.ComponentProps<"li">) => (
  <li role="presentation" aria-hidden="true" className={cn("[&>svg]:size-3.5", className)} {...props}>
    {children ?? <ChevronRight />}
  </li>
)
BreadcrumbSeparator.displayName = "BreadcrumbSeparator"

export { Breadcrumb, BreadcrumbList, BreadcrumbItem, BreadcrumbLink, BreadcrumbPage, BreadcrumbSeparator }



================================================================================
# ARCHIVO: front-end/components/ui/button-group.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button-group.tsx
================================================================================

import { Slot } from '@radix-ui/react-slot'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'
import { Separator } from '@/components/ui/separator'

const buttonGroupVariants = cva(
  "flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",
  {
    variants: {
      orientation: {
        horizontal:
          '[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none',
        vertical:
          'flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none',
      },
    },
    defaultVariants: {
      orientation: 'horizontal',
    },
  },
)

function ButtonGroup({
  className,
  orientation,
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof buttonGroupVariants>) {
  return (
    <div
      role="group"
      data-slot="button-group"
      data-orientation={orientation}
      className={cn(buttonGroupVariants({ orientation }), className)}
      {...props}
    />
  )
}

function ButtonGroupText({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<'div'> & {
  asChild?: boolean
}) {
  const Comp = asChild ? Slot : 'div'

  return (
    <Comp
      className={cn(
        "bg-muted flex items-center gap-2 rounded-md border px-4 text-sm font-medium shadow-xs [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function ButtonGroupSeparator({
  className,
  orientation = 'vertical',
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="button-group-separator"
      orientation={orientation}
      className={cn(
        'bg-input relative !m-0 self-stretch data-[orientation=vertical]:h-auto',
        className,
      )}
      {...props}
    />
  )
}

export {
  ButtonGroup,
  ButtonGroupSeparator,
  ButtonGroupText,
  buttonGroupVariants,
}



================================================================================
# ARCHIVO: front-end/components/ui/button.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/button.tsx
================================================================================

import * as React from 'react'
import { Slot } from '@radix-ui/react-slot'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

const buttonVariants = cva(
  "inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-foreground hover:bg-primary/90',
        destructive:
          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',
        outline:
          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',
        secondary:
          'bg-secondary text-secondary-foreground hover:bg-secondary/80',
        ghost:
          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      size: {
        default: 'h-9 px-4 py-2 has-[>svg]:px-3',
        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',
        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',
        icon: 'size-9',
        'icon-sm': 'size-8',
        'icon-lg': 'size-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

function Button({
  className,
  variant,
  size,
  asChild = false,
  ...props
}: React.ComponentProps<'button'> &
  VariantProps<typeof buttonVariants> & {
    asChild?: boolean
  }) {
  const Comp = asChild ? Slot : 'button'

  return (
    <Comp
      data-slot="button"
      className={cn(buttonVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Button, buttonVariants }



================================================================================
# ARCHIVO: front-end/components/ui/calendar.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/calendar.tsx
================================================================================

'use client'

import * as React from 'react'
import {
  ChevronDownIcon,
  ChevronLeftIcon,
  ChevronRightIcon,
} from 'lucide-react'
import { DayButton, DayPicker, getDefaultClassNames } from 'react-day-picker'

import { cn } from '@/lib/utils'
import { Button, buttonVariants } from '@/components/ui/button'

function Calendar({
  className,
  classNames,
  showOutsideDays = true,
  captionLayout = 'label',
  buttonVariant = 'ghost',
  formatters,
  components,
  ...props
}: React.ComponentProps<typeof DayPicker> & {
  buttonVariant?: React.ComponentProps<typeof Button>['variant']
}) {
  const defaultClassNames = getDefaultClassNames()

  return (
    <DayPicker
      showOutsideDays={showOutsideDays}
      className={cn(
        'bg-background group/calendar p-3 [--cell-size:--spacing(8)] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent',
        String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,
        String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,
        className,
      )}
      captionLayout={captionLayout}
      formatters={{
        formatMonthDropdown: (date) =>
          date.toLocaleString('default', { month: 'short' }),
        ...formatters,
      }}
      classNames={{
        root: cn('w-fit', defaultClassNames.root),
        months: cn(
          'flex gap-4 flex-col md:flex-row relative',
          defaultClassNames.months,
        ),
        month: cn('flex flex-col w-full gap-4', defaultClassNames.month),
        nav: cn(
          'flex items-center gap-1 w-full absolute top-0 inset-x-0 justify-between',
          defaultClassNames.nav,
        ),
        button_previous: cn(
          buttonVariants({ variant: buttonVariant }),
          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',
          defaultClassNames.button_previous,
        ),
        button_next: cn(
          buttonVariants({ variant: buttonVariant }),
          'size-(--cell-size) aria-disabled:opacity-50 p-0 select-none',
          defaultClassNames.button_next,
        ),
        month_caption: cn(
          'flex items-center justify-center h-(--cell-size) w-full px-(--cell-size)',
          defaultClassNames.month_caption,
        ),
        dropdowns: cn(
          'w-full flex items-center text-sm font-medium justify-center h-(--cell-size) gap-1.5',
          defaultClassNames.dropdowns,
        ),
        dropdown_root: cn(
          'relative has-focus:border-ring border border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] rounded-md',
          defaultClassNames.dropdown_root,
        ),
        dropdown: cn(
          'absolute bg-popover inset-0 opacity-0',
          defaultClassNames.dropdown,
        ),
        caption_label: cn(
          'select-none font-medium',
          captionLayout === 'label'
            ? 'text-sm'
            : 'rounded-md pl-2 pr-1 flex items-center gap-1 text-sm h-8 [&>svg]:text-muted-foreground [&>svg]:size-3.5',
          defaultClassNames.caption_label,
        ),
        table: 'w-full border-collapse',
        weekdays: cn('flex', defaultClassNames.weekdays),
        weekday: cn(
          'text-muted-foreground rounded-md flex-1 font-normal text-[0.8rem] select-none',
          defaultClassNames.weekday,
        ),
        week: cn('flex w-full mt-2', defaultClassNames.week),
        week_number_header: cn(
          'select-none w-(--cell-size)',
          defaultClassNames.week_number_header,
        ),
        week_number: cn(
          'text-[0.8rem] select-none text-muted-foreground',
          defaultClassNames.week_number,
        ),
        day: cn(
          'relative w-full h-full p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md group/day aspect-square select-none',
          defaultClassNames.day,
        ),
        range_start: cn(
          'rounded-l-md bg-accent',
          defaultClassNames.range_start,
        ),
        range_middle: cn('rounded-none', defaultClassNames.range_middle),
        range_end: cn('rounded-r-md bg-accent', defaultClassNames.range_end),
        today: cn(
          'bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none',
          defaultClassNames.today,
        ),
        outside: cn(
          'text-muted-foreground aria-selected:text-muted-foreground',
          defaultClassNames.outside,
        ),
        disabled: cn(
          'text-muted-foreground opacity-50',
          defaultClassNames.disabled,
        ),
        hidden: cn('invisible', defaultClassNames.hidden),
        ...classNames,
      }}
      components={{
        Root: ({ className, rootRef, ...props }) => {
          return (
            <div
              data-slot="calendar"
              ref={rootRef}
              className={cn(className)}
              {...props}
            />
          )
        },
        Chevron: ({ className, orientation, ...props }) => {
          if (orientation === 'left') {
            return (
              <ChevronLeftIcon className={cn('size-4', className)} {...props} />
            )
          }

          if (orientation === 'right') {
            return (
              <ChevronRightIcon
                className={cn('size-4', className)}
                {...props}
              />
            )
          }

          return (
            <ChevronDownIcon className={cn('size-4', className)} {...props} />
          )
        },
        DayButton: CalendarDayButton,
        WeekNumber: ({ children, ...props }) => {
          return (
            <td {...props}>
              <div className="flex size-(--cell-size) items-center justify-center text-center">
                {children}
              </div>
            </td>
          )
        },
        ...components,
      }}
      {...props}
    />
  )
}

function CalendarDayButton({
  className,
  day,
  modifiers,
  ...props
}: React.ComponentProps<typeof DayButton>) {
  const defaultClassNames = getDefaultClassNames()

  const ref = React.useRef<HTMLButtonElement>(null)
  React.useEffect(() => {
    if (modifiers.focused) ref.current?.focus()
  }, [modifiers.focused])

  return (
    <Button
      ref={ref}
      variant="ghost"
      size="icon"
      data-day={day.date.toLocaleDateString()}
      data-selected-single={
        modifiers.selected &&
        !modifiers.range_start &&
        !modifiers.range_end &&
        !modifiers.range_middle
      }
      data-range-start={modifiers.range_start}
      data-range-end={modifiers.range_end}
      data-range-middle={modifiers.range_middle}
      className={cn(
        'data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 dark:hover:text-accent-foreground flex aspect-square size-auto w-full min-w-(--cell-size) flex-col gap-1 leading-none font-normal group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] data-[range-end=true]:rounded-md data-[range-end=true]:rounded-r-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md data-[range-start=true]:rounded-l-md [&>span]:text-xs [&>span]:opacity-70',
        defaultClassNames.day,
        className,
      )}
      {...props}
    />
  )
}

export { Calendar, CalendarDayButton }



================================================================================
# ARCHIVO: front-end/components/ui/card.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/card.tsx
================================================================================

import * as React from 'react'

import { cn } from '@/lib/utils'

function Card({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card"
      className={cn(
        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',
        className,
      )}
      {...props}
    />
  )
}

function CardHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-header"
      className={cn(
        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',
        className,
      )}
      {...props}
    />
  )
}

function CardTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-title"
      className={cn('leading-none font-semibold', className)}
      {...props}
    />
  )
}

function CardDescription({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

function CardAction({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-action"
      className={cn(
        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',
        className,
      )}
      {...props}
    />
  )
}

function CardContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-content"
      className={cn('px-6', className)}
      {...props}
    />
  )
}

function CardFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="card-footer"
      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}
      {...props}
    />
  )
}

export {
  Card,
  CardHeader,
  CardFooter,
  CardTitle,
  CardAction,
  CardDescription,
  CardContent,
}



================================================================================
# ARCHIVO: front-end/components/ui/carousel.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/carousel.tsx
================================================================================

'use client'

import * as React from 'react'
import useEmblaCarousel, {
  type UseEmblaCarouselType,
} from 'embla-carousel-react'
import { ArrowLeft, ArrowRight } from 'lucide-react'

import { cn } from '@/lib/utils'
import { Button } from '@/components/ui/button'

type CarouselApi = UseEmblaCarouselType[1]
type UseCarouselParameters = Parameters<typeof useEmblaCarousel>
type CarouselOptions = UseCarouselParameters[0]
type CarouselPlugin = UseCarouselParameters[1]

type CarouselProps = {
  opts?: CarouselOptions
  plugins?: CarouselPlugin
  orientation?: 'horizontal' | 'vertical'
  setApi?: (api: CarouselApi) => void
}

type CarouselContextProps = {
  carouselRef: ReturnType<typeof useEmblaCarousel>[0]
  api: ReturnType<typeof useEmblaCarousel>[1]
  scrollPrev: () => void
  scrollNext: () => void
  canScrollPrev: boolean
  canScrollNext: boolean
} & CarouselProps

const CarouselContext = React.createContext<CarouselContextProps | null>(null)

function useCarousel() {
  const context = React.useContext(CarouselContext)

  if (!context) {
    throw new Error('useCarousel must be used within a <Carousel />')
  }

  return context
}

function Carousel({
  orientation = 'horizontal',
  opts,
  setApi,
  plugins,
  className,
  children,
  ...props
}: React.ComponentProps<'div'> & CarouselProps) {
  const [carouselRef, api] = useEmblaCarousel(
    {
      ...opts,
      axis: orientation === 'horizontal' ? 'x' : 'y',
    },
    plugins,
  )
  const [canScrollPrev, setCanScrollPrev] = React.useState(false)
  const [canScrollNext, setCanScrollNext] = React.useState(false)

  const onSelect = React.useCallback((api: CarouselApi) => {
    if (!api) return
    setCanScrollPrev(api.canScrollPrev())
    setCanScrollNext(api.canScrollNext())
  }, [])

  const scrollPrev = React.useCallback(() => {
    api?.scrollPrev()
  }, [api])

  const scrollNext = React.useCallback(() => {
    api?.scrollNext()
  }, [api])

  const handleKeyDown = React.useCallback(
    (event: React.KeyboardEvent<HTMLDivElement>) => {
      if (event.key === 'ArrowLeft') {
        event.preventDefault()
        scrollPrev()
      } else if (event.key === 'ArrowRight') {
        event.preventDefault()
        scrollNext()
      }
    },
    [scrollPrev, scrollNext],
  )

  React.useEffect(() => {
    if (!api || !setApi) return
    setApi(api)
  }, [api, setApi])

  React.useEffect(() => {
    if (!api) return
    onSelect(api)
    api.on('reInit', onSelect)
    api.on('select', onSelect)

    return () => {
      api?.off('select', onSelect)
    }
  }, [api, onSelect])

  return (
    <CarouselContext.Provider
      value={{
        carouselRef,
        api: api,
        opts,
        orientation:
          orientation || (opts?.axis === 'y' ? 'vertical' : 'horizontal'),
        scrollPrev,
        scrollNext,
        canScrollPrev,
        canScrollNext,
      }}
    >
      <div
        onKeyDownCapture={handleKeyDown}
        className={cn('relative', className)}
        role="region"
        aria-roledescription="carousel"
        data-slot="carousel"
        {...props}
      >
        {children}
      </div>
    </CarouselContext.Provider>
  )
}

function CarouselContent({ className, ...props }: React.ComponentProps<'div'>) {
  const { carouselRef, orientation } = useCarousel()

  return (
    <div
      ref={carouselRef}
      className="overflow-hidden"
      data-slot="carousel-content"
    >
      <div
        className={cn(
          'flex',
          orientation === 'horizontal' ? '-ml-4' : '-mt-4 flex-col',
          className,
        )}
        {...props}
      />
    </div>
  )
}

function CarouselItem({ className, ...props }: React.ComponentProps<'div'>) {
  const { orientation } = useCarousel()

  return (
    <div
      role="group"
      aria-roledescription="slide"
      data-slot="carousel-item"
      className={cn(
        'min-w-0 shrink-0 grow-0 basis-full',
        orientation === 'horizontal' ? 'pl-4' : 'pt-4',
        className,
      )}
      {...props}
    />
  )
}

function CarouselPrevious({
  className,
  variant = 'outline',
  size = 'icon',
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollPrev, canScrollPrev } = useCarousel()

  return (
    <Button
      data-slot="carousel-previous"
      variant={variant}
      size={size}
      className={cn(
        'absolute size-8 rounded-full',
        orientation === 'horizontal'
          ? 'top-1/2 -left-12 -translate-y-1/2'
          : '-top-12 left-1/2 -translate-x-1/2 rotate-90',
        className,
      )}
      disabled={!canScrollPrev}
      onClick={scrollPrev}
      {...props}
    >
      <ArrowLeft />
      <span className="sr-only">Previous slide</span>
    </Button>
  )
}

function CarouselNext({
  className,
  variant = 'outline',
  size = 'icon',
  ...props
}: React.ComponentProps<typeof Button>) {
  const { orientation, scrollNext, canScrollNext } = useCarousel()

  return (
    <Button
      data-slot="carousel-next"
      variant={variant}
      size={size}
      className={cn(
        'absolute size-8 rounded-full',
        orientation === 'horizontal'
          ? 'top-1/2 -right-12 -translate-y-1/2'
          : '-bottom-12 left-1/2 -translate-x-1/2 rotate-90',
        className,
      )}
      disabled={!canScrollNext}
      onClick={scrollNext}
      {...props}
    >
      <ArrowRight />
      <span className="sr-only">Next slide</span>
    </Button>
  )
}

export {
  type CarouselApi,
  Carousel,
  CarouselContent,
  CarouselItem,
  CarouselPrevious,
  CarouselNext,
}



================================================================================
# ARCHIVO: front-end/components/ui/chart.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/chart.tsx
================================================================================

'use client'

import * as React from 'react'
import * as RechartsPrimitive from 'recharts'

import { cn } from '@/lib/utils'

// Format: { THEME_NAME: CSS_SELECTOR }
const THEMES = { light: '', dark: '.dark' } as const

export type ChartConfig = {
  [k in string]: {
    label?: React.ReactNode
    icon?: React.ComponentType
  } & (
    | { color?: string; theme?: never }
    | { color?: never; theme: Record<keyof typeof THEMES, string> }
  )
}

type ChartContextProps = {
  config: ChartConfig
}

const ChartContext = React.createContext<ChartContextProps | null>(null)

function useChart() {
  const context = React.useContext(ChartContext)

  if (!context) {
    throw new Error('useChart must be used within a <ChartContainer />')
  }

  return context
}

function ChartContainer({
  id,
  className,
  children,
  config,
  ...props
}: React.ComponentProps<'div'> & {
  config: ChartConfig
  children: React.ComponentProps<
    typeof RechartsPrimitive.ResponsiveContainer
  >['children']
}) {
  const uniqueId = React.useId()
  const chartId = `chart-${id || uniqueId.replace(/:/g, '')}`

  return (
    <ChartContext.Provider value={{ config }}>
      <div
        data-slot="chart"
        data-chart={chartId}
        className={cn(
          "[&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border flex aspect-video justify-center text-xs [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-sector]:outline-hidden [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-surface]:outline-hidden",
          className,
        )}
        {...props}
      >
        <ChartStyle id={chartId} config={config} />
        <RechartsPrimitive.ResponsiveContainer>
          {children}
        </RechartsPrimitive.ResponsiveContainer>
      </div>
    </ChartContext.Provider>
  )
}

const ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {
  const colorConfig = Object.entries(config).filter(
    ([, config]) => config.theme || config.color,
  )

  if (!colorConfig.length) {
    return null
  }

  return (
    <style
      dangerouslySetInnerHTML={{
        __html: Object.entries(THEMES)
          .map(
            ([theme, prefix]) => `
${prefix} [data-chart=${id}] {
${colorConfig
  .map(([key, itemConfig]) => {
    const color =
      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||
      itemConfig.color
    return color ? `  --color-${key}: ${color};` : null
  })
  .join('\n')}
}
`,
          )
          .join('\n'),
      }}
    />
  )
}

const ChartTooltip = RechartsPrimitive.Tooltip

function ChartTooltipContent({
  active,
  payload,
  className,
  indicator = 'dot',
  hideLabel = false,
  hideIndicator = false,
  label,
  labelFormatter,
  labelClassName,
  formatter,
  color,
  nameKey,
  labelKey,
}: React.ComponentProps<typeof RechartsPrimitive.Tooltip> &
  React.ComponentProps<'div'> & {
    hideLabel?: boolean
    hideIndicator?: boolean
    indicator?: 'line' | 'dot' | 'dashed'
    nameKey?: string
    labelKey?: string
  }) {
  const { config } = useChart()

  const tooltipLabel = React.useMemo(() => {
    if (hideLabel || !payload?.length) {
      return null
    }

    const [item] = payload
    const key = `${labelKey || item?.dataKey || item?.name || 'value'}`
    const itemConfig = getPayloadConfigFromPayload(config, item, key)
    const value =
      !labelKey && typeof label === 'string'
        ? config[label as keyof typeof config]?.label || label
        : itemConfig?.label

    if (labelFormatter) {
      return (
        <div className={cn('font-medium', labelClassName)}>
          {labelFormatter(value, payload)}
        </div>
      )
    }

    if (!value) {
      return null
    }

    return <div className={cn('font-medium', labelClassName)}>{value}</div>
  }, [
    label,
    labelFormatter,
    payload,
    hideLabel,
    labelClassName,
    config,
    labelKey,
  ])

  if (!active || !payload?.length) {
    return null
  }

  const nestLabel = payload.length === 1 && indicator !== 'dot'

  return (
    <div
      className={cn(
        'border-border/50 bg-background grid min-w-[8rem] items-start gap-1.5 rounded-lg border px-2.5 py-1.5 text-xs shadow-xl',
        className,
      )}
    >
      {!nestLabel ? tooltipLabel : null}
      <div className="grid gap-1.5">
        {payload.map((item, index) => {
          const key = `${nameKey || item.name || item.dataKey || 'value'}`
          const itemConfig = getPayloadConfigFromPayload(config, item, key)
          const indicatorColor = color || item.payload.fill || item.color

          return (
            <div
              key={item.dataKey}
              className={cn(
                '[&>svg]:text-muted-foreground flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5',
                indicator === 'dot' && 'items-center',
              )}
            >
              {formatter && item?.value !== undefined && item.name ? (
                formatter(item.value, item.name, item, index, item.payload)
              ) : (
                <>
                  {itemConfig?.icon ? (
                    <itemConfig.icon />
                  ) : (
                    !hideIndicator && (
                      <div
                        className={cn(
                          'shrink-0 rounded-[2px] border-(--color-border) bg-(--color-bg)',
                          {
                            'h-2.5 w-2.5': indicator === 'dot',
                            'w-1': indicator === 'line',
                            'w-0 border-[1.5px] border-dashed bg-transparent':
                              indicator === 'dashed',
                            'my-0.5': nestLabel && indicator === 'dashed',
                          },
                        )}
                        style={
                          {
                            '--color-bg': indicatorColor,
                            '--color-border': indicatorColor,
                          } as React.CSSProperties
                        }
                      />
                    )
                  )}
                  <div
                    className={cn(
                      'flex flex-1 justify-between leading-none',
                      nestLabel ? 'items-end' : 'items-center',
                    )}
                  >
                    <div className="grid gap-1.5">
                      {nestLabel ? tooltipLabel : null}
                      <span className="text-muted-foreground">
                        {itemConfig?.label || item.name}
                      </span>
                    </div>
                    {item.value && (
                      <span className="text-foreground font-mono font-medium tabular-nums">
                        {item.value.toLocaleString()}
                      </span>
                    )}
                  </div>
                </>
              )}
            </div>
          )
        })}
      </div>
    </div>
  )
}

const ChartLegend = RechartsPrimitive.Legend

function ChartLegendContent({
  className,
  hideIcon = false,
  payload,
  verticalAlign = 'bottom',
  nameKey,
}: React.ComponentProps<'div'> &
  Pick<RechartsPrimitive.LegendProps, 'payload' | 'verticalAlign'> & {
    hideIcon?: boolean
    nameKey?: string
  }) {
  const { config } = useChart()

  if (!payload?.length) {
    return null
  }

  return (
    <div
      className={cn(
        'flex items-center justify-center gap-4',
        verticalAlign === 'top' ? 'pb-3' : 'pt-3',
        className,
      )}
    >
      {payload.map((item) => {
        const key = `${nameKey || item.dataKey || 'value'}`
        const itemConfig = getPayloadConfigFromPayload(config, item, key)

        return (
          <div
            key={item.value}
            className={
              '[&>svg]:text-muted-foreground flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3'
            }
          >
            {itemConfig?.icon && !hideIcon ? (
              <itemConfig.icon />
            ) : (
              <div
                className="h-2 w-2 shrink-0 rounded-[2px]"
                style={{
                  backgroundColor: item.color,
                }}
              />
            )}
            {itemConfig?.label}
          </div>
        )
      })}
    </div>
  )
}

// Helper to extract item config from a payload.
function getPayloadConfigFromPayload(
  config: ChartConfig,
  payload: unknown,
  key: string,
) {
  if (typeof payload !== 'object' || payload === null) {
    return undefined
  }

  const payloadPayload =
    'payload' in payload &&
    typeof payload.payload === 'object' &&
    payload.payload !== null
      ? payload.payload
      : undefined

  let configLabelKey: string = key

  if (
    key in payload &&
    typeof payload[key as keyof typeof payload] === 'string'
  ) {
    configLabelKey = payload[key as keyof typeof payload] as string
  } else if (
    payloadPayload &&
    key in payloadPayload &&
    typeof payloadPayload[key as keyof typeof payloadPayload] === 'string'
  ) {
    configLabelKey = payloadPayload[
      key as keyof typeof payloadPayload
    ] as string
  }

  return configLabelKey in config
    ? config[configLabelKey]
    : config[key as keyof typeof config]
}

export {
  ChartContainer,
  ChartTooltip,
  ChartTooltipContent,
  ChartLegend,
  ChartLegendContent,
  ChartStyle,
}



================================================================================
# ARCHIVO: front-end/components/ui/checkbox.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/checkbox.tsx
================================================================================

"use client"

import * as React from "react"
import * as CheckboxPrimitive from "@radix-ui/react-checkbox"
import { Check } from "lucide-react"

import { cn } from "@/lib/utils"

const Checkbox = React.forwardRef<
  React.ElementRef<typeof CheckboxPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>
>(({ className, ...props }, ref) => (
  <CheckboxPrimitive.Root
    ref={ref}
    className={cn(
      "peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",
      className,
    )}
    {...props}
  >
    <CheckboxPrimitive.Indicator className={cn("flex items-center justify-center text-current")}>
      <Check className="h-4 w-4" />
    </CheckboxPrimitive.Indicator>
  </CheckboxPrimitive.Root>
))
Checkbox.displayName = CheckboxPrimitive.Root.displayName

export { Checkbox }



================================================================================
# ARCHIVO: front-end/components/ui/collapsible.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/collapsible.tsx
================================================================================

'use client'

import * as CollapsiblePrimitive from '@radix-ui/react-collapsible'

function Collapsible({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {
  return <CollapsiblePrimitive.Root data-slot="collapsible" {...props} />
}

function CollapsibleTrigger({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {
  return (
    <CollapsiblePrimitive.CollapsibleTrigger
      data-slot="collapsible-trigger"
      {...props}
    />
  )
}

function CollapsibleContent({
  ...props
}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {
  return (
    <CollapsiblePrimitive.CollapsibleContent
      data-slot="collapsible-content"
      {...props}
    />
  )
}

export { Collapsible, CollapsibleTrigger, CollapsibleContent }



================================================================================
# ARCHIVO: front-end/components/ui/command.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/command.tsx
================================================================================

'use client'

import * as React from 'react'
import { Command as CommandPrimitive } from 'cmdk'
import { SearchIcon } from 'lucide-react'

import { cn } from '@/lib/utils'
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog'

function Command({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive>) {
  return (
    <CommandPrimitive
      data-slot="command"
      className={cn(
        'bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md',
        className,
      )}
      {...props}
    />
  )
}

function CommandDialog({
  title = 'Command Palette',
  description = 'Search for a command to run...',
  children,
  className,
  showCloseButton = true,
  ...props
}: React.ComponentProps<typeof Dialog> & {
  title?: string
  description?: string
  className?: string
  showCloseButton?: boolean
}) {
  return (
    <Dialog {...props}>
      <DialogHeader className="sr-only">
        <DialogTitle>{title}</DialogTitle>
        <DialogDescription>{description}</DialogDescription>
      </DialogHeader>
      <DialogContent
        className={cn('overflow-hidden p-0', className)}
        showCloseButton={showCloseButton}
      >
        <Command className="[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5">
          {children}
        </Command>
      </DialogContent>
    </Dialog>
  )
}

function CommandInput({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Input>) {
  return (
    <div
      data-slot="command-input-wrapper"
      className="flex h-9 items-center gap-2 border-b px-3"
    >
      <SearchIcon className="size-4 shrink-0 opacity-50" />
      <CommandPrimitive.Input
        data-slot="command-input"
        className={cn(
          'placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50',
          className,
        )}
        {...props}
      />
    </div>
  )
}

function CommandList({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.List>) {
  return (
    <CommandPrimitive.List
      data-slot="command-list"
      className={cn(
        'max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto',
        className,
      )}
      {...props}
    />
  )
}

function CommandEmpty({
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Empty>) {
  return (
    <CommandPrimitive.Empty
      data-slot="command-empty"
      className="py-6 text-center text-sm"
      {...props}
    />
  )
}

function CommandGroup({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Group>) {
  return (
    <CommandPrimitive.Group
      data-slot="command-group"
      className={cn(
        'text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium',
        className,
      )}
      {...props}
    />
  )
}

function CommandSeparator({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Separator>) {
  return (
    <CommandPrimitive.Separator
      data-slot="command-separator"
      className={cn('bg-border -mx-1 h-px', className)}
      {...props}
    />
  )
}

function CommandItem({
  className,
  ...props
}: React.ComponentProps<typeof CommandPrimitive.Item>) {
  return (
    <CommandPrimitive.Item
      data-slot="command-item"
      className={cn(
        "data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function CommandShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="command-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  )
}

export {
  Command,
  CommandDialog,
  CommandInput,
  CommandList,
  CommandEmpty,
  CommandGroup,
  CommandItem,
  CommandShortcut,
  CommandSeparator,
}



================================================================================
# ARCHIVO: front-end/components/ui/context-menu.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/context-menu.tsx
================================================================================

'use client'

import * as React from 'react'
import * as ContextMenuPrimitive from '@radix-ui/react-context-menu'
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function ContextMenu({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Root>) {
  return <ContextMenuPrimitive.Root data-slot="context-menu" {...props} />
}

function ContextMenuTrigger({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Trigger>) {
  return (
    <ContextMenuPrimitive.Trigger data-slot="context-menu-trigger" {...props} />
  )
}

function ContextMenuGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Group>) {
  return (
    <ContextMenuPrimitive.Group data-slot="context-menu-group" {...props} />
  )
}

function ContextMenuPortal({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Portal>) {
  return (
    <ContextMenuPrimitive.Portal data-slot="context-menu-portal" {...props} />
  )
}

function ContextMenuSub({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Sub>) {
  return <ContextMenuPrimitive.Sub data-slot="context-menu-sub" {...props} />
}

function ContextMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioGroup>) {
  return (
    <ContextMenuPrimitive.RadioGroup
      data-slot="context-menu-radio-group"
      {...props}
    />
  )
}

function ContextMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <ContextMenuPrimitive.SubTrigger
      data-slot="context-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto" />
    </ContextMenuPrimitive.SubTrigger>
  )
}

function ContextMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.SubContent>) {
  return (
    <ContextMenuPrimitive.SubContent
      data-slot="context-menu-sub-content"
      className={cn(
        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
        className,
      )}
      {...props}
    />
  )
}

function ContextMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Content>) {
  return (
    <ContextMenuPrimitive.Portal>
      <ContextMenuPrimitive.Content
        data-slot="context-menu-content"
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',
          className,
        )}
        {...props}
      />
    </ContextMenuPrimitive.Portal>
  )
}

function ContextMenuItem({
  className,
  inset,
  variant = 'default',
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Item> & {
  inset?: boolean
  variant?: 'default' | 'destructive'
}) {
  return (
    <ContextMenuPrimitive.Item
      data-slot="context-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function ContextMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.CheckboxItem>) {
  return (
    <ContextMenuPrimitive.CheckboxItem
      data-slot="context-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.CheckboxItem>
  )
}

function ContextMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.RadioItem>) {
  return (
    <ContextMenuPrimitive.RadioItem
      data-slot="context-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <ContextMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </ContextMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </ContextMenuPrimitive.RadioItem>
  )
}

function ContextMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <ContextMenuPrimitive.Label
      data-slot="context-menu-label"
      data-inset={inset}
      className={cn(
        'text-foreground px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
        className,
      )}
      {...props}
    />
  )
}

function ContextMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof ContextMenuPrimitive.Separator>) {
  return (
    <ContextMenuPrimitive.Separator
      data-slot="context-menu-separator"
      className={cn('bg-border -mx-1 my-1 h-px', className)}
      {...props}
    />
  )
}

function ContextMenuShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="context-menu-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  )
}

export {
  ContextMenu,
  ContextMenuTrigger,
  ContextMenuContent,
  ContextMenuItem,
  ContextMenuCheckboxItem,
  ContextMenuRadioItem,
  ContextMenuLabel,
  ContextMenuSeparator,
  ContextMenuShortcut,
  ContextMenuGroup,
  ContextMenuPortal,
  ContextMenuSub,
  ContextMenuSubContent,
  ContextMenuSubTrigger,
  ContextMenuRadioGroup,
}



================================================================================
# ARCHIVO: front-end/components/ui/dialog.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dialog.tsx
================================================================================

"use client"

import * as React from "react"
import * as DialogPrimitive from "@radix-ui/react-dialog"
import { X } from "lucide-react"

import { cn } from "@/lib/utils"

const Dialog = DialogPrimitive.Root

const DialogTrigger = DialogPrimitive.Trigger

const DialogPortal = DialogPrimitive.Portal

const DialogClose = DialogPrimitive.Close

const DialogOverlay = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Overlay>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Overlay
    ref={ref}
    className={cn(
      "fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",
      className,
    )}
    {...props}
  />
))
DialogOverlay.displayName = DialogPrimitive.Overlay.displayName

const DialogContent = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>
>(({ className, children, ...props }, ref) => (
  <DialogPortal>
    <DialogOverlay />
    <DialogPrimitive.Content
      ref={ref}
      className={cn(
        "fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",
        className,
      )}
      {...props}
    >
      {children}
      <DialogPrimitive.Close className="absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground">
        <X className="h-4 w-4" />
        <span className="sr-only">Close</span>
      </DialogPrimitive.Close>
    </DialogPrimitive.Content>
  </DialogPortal>
))
DialogContent.displayName = DialogPrimitive.Content.displayName

const DialogHeader = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col space-y-1.5 text-center sm:text-left", className)} {...props} />
)
DialogHeader.displayName = "DialogHeader"

const DialogFooter = ({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) => (
  <div className={cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2", className)} {...props} />
)
DialogFooter.displayName = "DialogFooter"

const DialogTitle = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Title>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Title
    ref={ref}
    className={cn("text-lg font-semibold leading-none tracking-tight", className)}
    {...props}
  />
))
DialogTitle.displayName = DialogPrimitive.Title.displayName

const DialogDescription = React.forwardRef<
  React.ElementRef<typeof DialogPrimitive.Description>,
  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>
>(({ className, ...props }, ref) => (
  <DialogPrimitive.Description ref={ref} className={cn("text-sm text-muted-foreground", className)} {...props} />
))
DialogDescription.displayName = DialogPrimitive.Description.displayName

export {
  Dialog,
  DialogPortal,
  DialogOverlay,
  DialogClose,
  DialogTrigger,
  DialogContent,
  DialogHeader,
  DialogFooter,
  DialogTitle,
  DialogDescription,
}



================================================================================
# ARCHIVO: front-end/components/ui/drawer.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/drawer.tsx
================================================================================

'use client'

import * as React from 'react'
import { Drawer as DrawerPrimitive } from 'vaul'

import { cn } from '@/lib/utils'

function Drawer({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Root>) {
  return <DrawerPrimitive.Root data-slot="drawer" {...props} />
}

function DrawerTrigger({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Trigger>) {
  return <DrawerPrimitive.Trigger data-slot="drawer-trigger" {...props} />
}

function DrawerPortal({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Portal>) {
  return <DrawerPrimitive.Portal data-slot="drawer-portal" {...props} />
}

function DrawerClose({
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Close>) {
  return <DrawerPrimitive.Close data-slot="drawer-close" {...props} />
}

function DrawerOverlay({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Overlay>) {
  return (
    <DrawerPrimitive.Overlay
      data-slot="drawer-overlay"
      className={cn(
        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
        className,
      )}
      {...props}
    />
  )
}

function DrawerContent({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Content>) {
  return (
    <DrawerPortal data-slot="drawer-portal">
      <DrawerOverlay />
      <DrawerPrimitive.Content
        data-slot="drawer-content"
        className={cn(
          'group/drawer-content bg-background fixed z-50 flex h-auto flex-col',
          'data-[vaul-drawer-direction=top]:inset-x-0 data-[vaul-drawer-direction=top]:top-0 data-[vaul-drawer-direction=top]:mb-24 data-[vaul-drawer-direction=top]:max-h-[80vh] data-[vaul-drawer-direction=top]:rounded-b-lg data-[vaul-drawer-direction=top]:border-b',
          'data-[vaul-drawer-direction=bottom]:inset-x-0 data-[vaul-drawer-direction=bottom]:bottom-0 data-[vaul-drawer-direction=bottom]:mt-24 data-[vaul-drawer-direction=bottom]:max-h-[80vh] data-[vaul-drawer-direction=bottom]:rounded-t-lg data-[vaul-drawer-direction=bottom]:border-t',
          'data-[vaul-drawer-direction=right]:inset-y-0 data-[vaul-drawer-direction=right]:right-0 data-[vaul-drawer-direction=right]:w-3/4 data-[vaul-drawer-direction=right]:border-l data-[vaul-drawer-direction=right]:sm:max-w-sm',
          'data-[vaul-drawer-direction=left]:inset-y-0 data-[vaul-drawer-direction=left]:left-0 data-[vaul-drawer-direction=left]:w-3/4 data-[vaul-drawer-direction=left]:border-r data-[vaul-drawer-direction=left]:sm:max-w-sm',
          className,
        )}
        {...props}
      >
        <div className="bg-muted mx-auto mt-4 hidden h-2 w-[100px] shrink-0 rounded-full group-data-[vaul-drawer-direction=bottom]/drawer-content:block" />
        {children}
      </DrawerPrimitive.Content>
    </DrawerPortal>
  )
}

function DrawerHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="drawer-header"
      className={cn(
        'flex flex-col gap-0.5 p-4 group-data-[vaul-drawer-direction=bottom]/drawer-content:text-center group-data-[vaul-drawer-direction=top]/drawer-content:text-center md:gap-1.5 md:text-left',
        className,
      )}
      {...props}
    />
  )
}

function DrawerFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="drawer-footer"
      className={cn('mt-auto flex flex-col gap-2 p-4', className)}
      {...props}
    />
  )
}

function DrawerTitle({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Title>) {
  return (
    <DrawerPrimitive.Title
      data-slot="drawer-title"
      className={cn('text-foreground font-semibold', className)}
      {...props}
    />
  )
}

function DrawerDescription({
  className,
  ...props
}: React.ComponentProps<typeof DrawerPrimitive.Description>) {
  return (
    <DrawerPrimitive.Description
      data-slot="drawer-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

export {
  Drawer,
  DrawerPortal,
  DrawerOverlay,
  DrawerTrigger,
  DrawerClose,
  DrawerContent,
  DrawerHeader,
  DrawerFooter,
  DrawerTitle,
  DrawerDescription,
}



================================================================================
# ARCHIVO: front-end/components/ui/dropdown-menu.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/dropdown-menu.tsx
================================================================================

'use client'

import * as React from 'react'
import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function DropdownMenu({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {
  return <DropdownMenuPrimitive.Root data-slot="dropdown-menu" {...props} />
}

function DropdownMenuPortal({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {
  return (
    <DropdownMenuPrimitive.Portal data-slot="dropdown-menu-portal" {...props} />
  )
}

function DropdownMenuTrigger({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {
  return (
    <DropdownMenuPrimitive.Trigger
      data-slot="dropdown-menu-trigger"
      {...props}
    />
  )
}

function DropdownMenuContent({
  className,
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {
  return (
    <DropdownMenuPrimitive.Portal>
      <DropdownMenuPrimitive.Content
        data-slot="dropdown-menu-content"
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',
          className,
        )}
        {...props}
      />
    </DropdownMenuPrimitive.Portal>
  )
}

function DropdownMenuGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {
  return (
    <DropdownMenuPrimitive.Group data-slot="dropdown-menu-group" {...props} />
  )
}

function DropdownMenuItem({
  className,
  inset,
  variant = 'default',
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {
  inset?: boolean
  variant?: 'default' | 'destructive'
}) {
  return (
    <DropdownMenuPrimitive.Item
      data-slot="dropdown-menu-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {
  return (
    <DropdownMenuPrimitive.CheckboxItem
      data-slot="dropdown-menu-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.CheckboxItem>
  )
}

function DropdownMenuRadioGroup({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {
  return (
    <DropdownMenuPrimitive.RadioGroup
      data-slot="dropdown-menu-radio-group"
      {...props}
    />
  )
}

function DropdownMenuRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {
  return (
    <DropdownMenuPrimitive.RadioItem
      data-slot="dropdown-menu-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <DropdownMenuPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </DropdownMenuPrimitive.ItemIndicator>
      </span>
      {children}
    </DropdownMenuPrimitive.RadioItem>
  )
}

function DropdownMenuLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.Label
      data-slot="dropdown-menu-label"
      data-inset={inset}
      className={cn(
        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuSeparator({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {
  return (
    <DropdownMenuPrimitive.Separator
      data-slot="dropdown-menu-separator"
      className={cn('bg-border -mx-1 my-1 h-px', className)}
      {...props}
    />
  )
}

function DropdownMenuShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="dropdown-menu-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  )
}

function DropdownMenuSub({
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {
  return <DropdownMenuPrimitive.Sub data-slot="dropdown-menu-sub" {...props} />
}

function DropdownMenuSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <DropdownMenuPrimitive.SubTrigger
      data-slot="dropdown-menu-sub-trigger"
      data-inset={inset}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto size-4" />
    </DropdownMenuPrimitive.SubTrigger>
  )
}

function DropdownMenuSubContent({
  className,
  ...props
}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {
  return (
    <DropdownMenuPrimitive.SubContent
      data-slot="dropdown-menu-sub-content"
      className={cn(
        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
        className,
      )}
      {...props}
    />
  )
}

export {
  DropdownMenu,
  DropdownMenuPortal,
  DropdownMenuTrigger,
  DropdownMenuContent,
  DropdownMenuGroup,
  DropdownMenuLabel,
  DropdownMenuItem,
  DropdownMenuCheckboxItem,
  DropdownMenuRadioGroup,
  DropdownMenuRadioItem,
  DropdownMenuSeparator,
  DropdownMenuShortcut,
  DropdownMenuSub,
  DropdownMenuSubTrigger,
  DropdownMenuSubContent,
}



================================================================================
# ARCHIVO: front-end/components/ui/empty.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/empty.tsx
================================================================================

import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

function Empty({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="empty"
      className={cn(
        'flex min-w-0 flex-1 flex-col items-center justify-center gap-6 rounded-lg border-dashed p-6 text-center text-balance md:p-12',
        className,
      )}
      {...props}
    />
  )
}

function EmptyHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="empty-header"
      className={cn(
        'flex max-w-sm flex-col items-center gap-2 text-center',
        className,
      )}
      {...props}
    />
  )
}

const emptyMediaVariants = cva(
  'flex shrink-0 items-center justify-center mb-2 [&_svg]:pointer-events-none [&_svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'bg-transparent',
        icon: "bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6",
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

function EmptyMedia({
  className,
  variant = 'default',
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof emptyMediaVariants>) {
  return (
    <div
      data-slot="empty-icon"
      data-variant={variant}
      className={cn(emptyMediaVariants({ variant, className }))}
      {...props}
    />
  )
}

function EmptyTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="empty-title"
      className={cn('text-lg font-medium tracking-tight', className)}
      {...props}
    />
  )
}

function EmptyDescription({ className, ...props }: React.ComponentProps<'p'>) {
  return (
    <div
      data-slot="empty-description"
      className={cn(
        'text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4',
        className,
      )}
      {...props}
    />
  )
}

function EmptyContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="empty-content"
      className={cn(
        'flex w-full max-w-sm min-w-0 flex-col items-center gap-4 text-sm text-balance',
        className,
      )}
      {...props}
    />
  )
}

export {
  Empty,
  EmptyHeader,
  EmptyTitle,
  EmptyDescription,
  EmptyContent,
  EmptyMedia,
}



================================================================================
# ARCHIVO: front-end/components/ui/field.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/field.tsx
================================================================================

'use client'

import { useMemo } from 'react'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'
import { Label } from '@/components/ui/label'
import { Separator } from '@/components/ui/separator'

function FieldSet({ className, ...props }: React.ComponentProps<'fieldset'>) {
  return (
    <fieldset
      data-slot="field-set"
      className={cn(
        'flex flex-col gap-6',
        'has-[>[data-slot=checkbox-group]]:gap-3 has-[>[data-slot=radio-group]]:gap-3',
        className,
      )}
      {...props}
    />
  )
}

function FieldLegend({
  className,
  variant = 'legend',
  ...props
}: React.ComponentProps<'legend'> & { variant?: 'legend' | 'label' }) {
  return (
    <legend
      data-slot="field-legend"
      data-variant={variant}
      className={cn(
        'mb-3 font-medium',
        'data-[variant=legend]:text-base',
        'data-[variant=label]:text-sm',
        className,
      )}
      {...props}
    />
  )
}

function FieldGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="field-group"
      className={cn(
        'group/field-group @container/field-group flex w-full flex-col gap-7 data-[slot=checkbox-group]:gap-3 [&>[data-slot=field-group]]:gap-4',
        className,
      )}
      {...props}
    />
  )
}

const fieldVariants = cva(
  'group/field flex w-full gap-3 data-[invalid=true]:text-destructive',
  {
    variants: {
      orientation: {
        vertical: ['flex-col [&>*]:w-full [&>.sr-only]:w-auto'],
        horizontal: [
          'flex-row items-center',
          '[&>[data-slot=field-label]]:flex-auto',
          'has-[>[data-slot=field-content]]:items-start has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px',
        ],
        responsive: [
          'flex-col [&>*]:w-full [&>.sr-only]:w-auto @md/field-group:flex-row @md/field-group:items-center @md/field-group:[&>*]:w-auto',
          '@md/field-group:[&>[data-slot=field-label]]:flex-auto',
          '@md/field-group:has-[>[data-slot=field-content]]:items-start @md/field-group:has-[>[data-slot=field-content]]:[&>[role=checkbox],[role=radio]]:mt-px',
        ],
      },
    },
    defaultVariants: {
      orientation: 'vertical',
    },
  },
)

function Field({
  className,
  orientation = 'vertical',
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof fieldVariants>) {
  return (
    <div
      role="group"
      data-slot="field"
      data-orientation={orientation}
      className={cn(fieldVariants({ orientation }), className)}
      {...props}
    />
  )
}

function FieldContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="field-content"
      className={cn(
        'group/field-content flex flex-1 flex-col gap-1.5 leading-snug',
        className,
      )}
      {...props}
    />
  )
}

function FieldLabel({
  className,
  ...props
}: React.ComponentProps<typeof Label>) {
  return (
    <Label
      data-slot="field-label"
      className={cn(
        'group/field-label peer/field-label flex w-fit gap-2 leading-snug group-data-[disabled=true]/field:opacity-50',
        'has-[>[data-slot=field]]:w-full has-[>[data-slot=field]]:flex-col has-[>[data-slot=field]]:rounded-md has-[>[data-slot=field]]:border [&>*]:data-[slot=field]:p-4',
        'has-data-[state=checked]:bg-primary/5 has-data-[state=checked]:border-primary dark:has-data-[state=checked]:bg-primary/10',
        className,
      )}
      {...props}
    />
  )
}

function FieldTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="field-label"
      className={cn(
        'flex w-fit items-center gap-2 text-sm leading-snug font-medium group-data-[disabled=true]/field:opacity-50',
        className,
      )}
      {...props}
    />
  )
}

function FieldDescription({ className, ...props }: React.ComponentProps<'p'>) {
  return (
    <p
      data-slot="field-description"
      className={cn(
        'text-muted-foreground text-sm leading-normal font-normal group-has-[[data-orientation=horizontal]]/field:text-balance',
        'last:mt-0 nth-last-2:-mt-1 [[data-variant=legend]+&]:-mt-1.5',
        '[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4',
        className,
      )}
      {...props}
    />
  )
}

function FieldSeparator({
  children,
  className,
  ...props
}: React.ComponentProps<'div'> & {
  children?: React.ReactNode
}) {
  return (
    <div
      data-slot="field-separator"
      data-content={!!children}
      className={cn(
        'relative -my-2 h-5 text-sm group-data-[variant=outline]/field-group:-mb-2',
        className,
      )}
      {...props}
    >
      <Separator className="absolute inset-0 top-1/2" />
      {children && (
        <span
          className="bg-background text-muted-foreground relative mx-auto block w-fit px-2"
          data-slot="field-separator-content"
        >
          {children}
        </span>
      )}
    </div>
  )
}

function FieldError({
  className,
  children,
  errors,
  ...props
}: React.ComponentProps<'div'> & {
  errors?: Array<{ message?: string } | undefined>
}) {
  const content = useMemo(() => {
    if (children) {
      return children
    }

    if (!errors) {
      return null
    }

    if (errors.length === 1 && errors[0]?.message) {
      return errors[0].message
    }

    return (
      <ul className="ml-4 flex list-disc flex-col gap-1">
        {errors.map(
          (error, index) =>
            error?.message && <li key={index}>{error.message}</li>,
        )}
      </ul>
    )
  }, [children, errors])

  if (!content) {
    return null
  }

  return (
    <div
      role="alert"
      data-slot="field-error"
      className={cn('text-destructive text-sm font-normal', className)}
      {...props}
    >
      {content}
    </div>
  )
}

export {
  Field,
  FieldLabel,
  FieldDescription,
  FieldError,
  FieldGroup,
  FieldLegend,
  FieldSeparator,
  FieldSet,
  FieldContent,
  FieldTitle,
}



================================================================================
# ARCHIVO: front-end/components/ui/form.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/form.tsx
================================================================================

'use client'

import * as React from 'react'
import * as LabelPrimitive from '@radix-ui/react-label'
import { Slot } from '@radix-ui/react-slot'
import {
  Controller,
  FormProvider,
  useFormContext,
  useFormState,
  type ControllerProps,
  type FieldPath,
  type FieldValues,
} from 'react-hook-form'

import { cn } from '@/lib/utils'
import { Label } from '@/components/ui/label'

const Form = FormProvider

type FormFieldContextValue<
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
> = {
  name: TName
}

const FormFieldContext = React.createContext<FormFieldContextValue>(
  {} as FormFieldContextValue,
)

const FormField = <
  TFieldValues extends FieldValues = FieldValues,
  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>,
>({
  ...props
}: ControllerProps<TFieldValues, TName>) => {
  return (
    <FormFieldContext.Provider value={{ name: props.name }}>
      <Controller {...props} />
    </FormFieldContext.Provider>
  )
}

const useFormField = () => {
  const fieldContext = React.useContext(FormFieldContext)
  const itemContext = React.useContext(FormItemContext)
  const { getFieldState } = useFormContext()
  const formState = useFormState({ name: fieldContext.name })
  const fieldState = getFieldState(fieldContext.name, formState)

  if (!fieldContext) {
    throw new Error('useFormField should be used within <FormField>')
  }

  const { id } = itemContext

  return {
    id,
    name: fieldContext.name,
    formItemId: `${id}-form-item`,
    formDescriptionId: `${id}-form-item-description`,
    formMessageId: `${id}-form-item-message`,
    ...fieldState,
  }
}

type FormItemContextValue = {
  id: string
}

const FormItemContext = React.createContext<FormItemContextValue>(
  {} as FormItemContextValue,
)

function FormItem({ className, ...props }: React.ComponentProps<'div'>) {
  const id = React.useId()

  return (
    <FormItemContext.Provider value={{ id }}>
      <div
        data-slot="form-item"
        className={cn('grid gap-2', className)}
        {...props}
      />
    </FormItemContext.Provider>
  )
}

function FormLabel({
  className,
  ...props
}: React.ComponentProps<typeof LabelPrimitive.Root>) {
  const { error, formItemId } = useFormField()

  return (
    <Label
      data-slot="form-label"
      data-error={!!error}
      className={cn('data-[error=true]:text-destructive', className)}
      htmlFor={formItemId}
      {...props}
    />
  )
}

function FormControl({ ...props }: React.ComponentProps<typeof Slot>) {
  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()

  return (
    <Slot
      data-slot="form-control"
      id={formItemId}
      aria-describedby={
        !error
          ? `${formDescriptionId}`
          : `${formDescriptionId} ${formMessageId}`
      }
      aria-invalid={!!error}
      {...props}
    />
  )
}

function FormDescription({ className, ...props }: React.ComponentProps<'p'>) {
  const { formDescriptionId } = useFormField()

  return (
    <p
      data-slot="form-description"
      id={formDescriptionId}
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

function FormMessage({ className, ...props }: React.ComponentProps<'p'>) {
  const { error, formMessageId } = useFormField()
  const body = error ? String(error?.message ?? '') : props.children

  if (!body) {
    return null
  }

  return (
    <p
      data-slot="form-message"
      id={formMessageId}
      className={cn('text-destructive text-sm', className)}
      {...props}
    >
      {body}
    </p>
  )
}

export {
  useFormField,
  Form,
  FormItem,
  FormLabel,
  FormControl,
  FormDescription,
  FormMessage,
  FormField,
}



================================================================================
# ARCHIVO: front-end/components/ui/hover-card.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/hover-card.tsx
================================================================================

'use client'

import * as React from 'react'
import * as HoverCardPrimitive from '@radix-ui/react-hover-card'

import { cn } from '@/lib/utils'

function HoverCard({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {
  return <HoverCardPrimitive.Root data-slot="hover-card" {...props} />
}

function HoverCardTrigger({
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {
  return (
    <HoverCardPrimitive.Trigger data-slot="hover-card-trigger" {...props} />
  )
}

function HoverCardContent({
  className,
  align = 'center',
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {
  return (
    <HoverCardPrimitive.Portal data-slot="hover-card-portal">
      <HoverCardPrimitive.Content
        data-slot="hover-card-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',
          className,
        )}
        {...props}
      />
    </HoverCardPrimitive.Portal>
  )
}

export { HoverCard, HoverCardTrigger, HoverCardContent }



================================================================================
# ARCHIVO: front-end/components/ui/input-group.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-group.tsx
================================================================================

'use client'

import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Textarea } from '@/components/ui/textarea'

function InputGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="input-group"
      role="group"
      className={cn(
        'group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none',
        'h-9 has-[>textarea]:h-auto',

        // Variants based on alignment.
        'has-[>[data-align=inline-start]]:[&>input]:pl-2',
        'has-[>[data-align=inline-end]]:[&>input]:pr-2',
        'has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3',
        'has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3',

        // Focus state.
        'has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]',

        // Error state.
        'has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40',

        className,
      )}
      {...props}
    />
  )
}

const inputGroupAddonVariants = cva(
  "text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",
  {
    variants: {
      align: {
        'inline-start':
          'order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]',
        'inline-end':
          'order-last pr-3 has-[>button]:mr-[-0.4rem] has-[>kbd]:mr-[-0.35rem]',
        'block-start':
          'order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5',
        'block-end':
          'order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5',
      },
    },
    defaultVariants: {
      align: 'inline-start',
    },
  },
)

function InputGroupAddon({
  className,
  align = 'inline-start',
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof inputGroupAddonVariants>) {
  return (
    <div
      role="group"
      data-slot="input-group-addon"
      data-align={align}
      className={cn(inputGroupAddonVariants({ align }), className)}
      onClick={(e) => {
        if ((e.target as HTMLElement).closest('button')) {
          return
        }
        e.currentTarget.parentElement?.querySelector('input')?.focus()
      }}
      {...props}
    />
  )
}

const inputGroupButtonVariants = cva(
  'text-sm shadow-none flex gap-2 items-center',
  {
    variants: {
      size: {
        xs: "h-6 gap-1 px-2 rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-3.5 has-[>svg]:px-2",
        sm: 'h-8 px-2.5 gap-1.5 rounded-md has-[>svg]:px-2.5',
        'icon-xs':
          'size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0',
        'icon-sm': 'size-8 p-0 has-[>svg]:p-0',
      },
    },
    defaultVariants: {
      size: 'xs',
    },
  },
)

function InputGroupButton({
  className,
  type = 'button',
  variant = 'ghost',
  size = 'xs',
  ...props
}: Omit<React.ComponentProps<typeof Button>, 'size'> &
  VariantProps<typeof inputGroupButtonVariants>) {
  return (
    <Button
      type={type}
      data-size={size}
      variant={variant}
      className={cn(inputGroupButtonVariants({ size }), className)}
      {...props}
    />
  )
}

function InputGroupText({ className, ...props }: React.ComponentProps<'span'>) {
  return (
    <span
      className={cn(
        "text-muted-foreground flex items-center gap-2 text-sm [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function InputGroupInput({
  className,
  ...props
}: React.ComponentProps<'input'>) {
  return (
    <Input
      data-slot="input-group-control"
      className={cn(
        'flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent',
        className,
      )}
      {...props}
    />
  )
}

function InputGroupTextarea({
  className,
  ...props
}: React.ComponentProps<'textarea'>) {
  return (
    <Textarea
      data-slot="input-group-control"
      className={cn(
        'flex-1 resize-none rounded-none border-0 bg-transparent py-3 shadow-none focus-visible:ring-0 dark:bg-transparent',
        className,
      )}
      {...props}
    />
  )
}

export {
  InputGroup,
  InputGroupAddon,
  InputGroupButton,
  InputGroupText,
  InputGroupInput,
  InputGroupTextarea,
}



================================================================================
# ARCHIVO: front-end/components/ui/input-otp.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input-otp.tsx
================================================================================

'use client'

import * as React from 'react'
import { OTPInput, OTPInputContext } from 'input-otp'
import { MinusIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function InputOTP({
  className,
  containerClassName,
  ...props
}: React.ComponentProps<typeof OTPInput> & {
  containerClassName?: string
}) {
  return (
    <OTPInput
      data-slot="input-otp"
      containerClassName={cn(
        'flex items-center gap-2 has-disabled:opacity-50',
        containerClassName,
      )}
      className={cn('disabled:cursor-not-allowed', className)}
      {...props}
    />
  )
}

function InputOTPGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="input-otp-group"
      className={cn('flex items-center', className)}
      {...props}
    />
  )
}

function InputOTPSlot({
  index,
  className,
  ...props
}: React.ComponentProps<'div'> & {
  index: number
}) {
  const inputOTPContext = React.useContext(OTPInputContext)
  const { char, hasFakeCaret, isActive } = inputOTPContext?.slots[index] ?? {}

  return (
    <div
      data-slot="input-otp-slot"
      data-active={isActive}
      className={cn(
        'data-[active=true]:border-ring data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:ring-destructive/20 dark:data-[active=true]:aria-invalid:ring-destructive/40 aria-invalid:border-destructive data-[active=true]:aria-invalid:border-destructive dark:bg-input/30 border-input relative flex h-9 w-9 items-center justify-center border-y border-r text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md data-[active=true]:z-10 data-[active=true]:ring-[3px]',
        className,
      )}
      {...props}
    >
      {char}
      {hasFakeCaret && (
        <div className="pointer-events-none absolute inset-0 flex items-center justify-center">
          <div className="animate-caret-blink bg-foreground h-4 w-px duration-1000" />
        </div>
      )}
    </div>
  )
}

function InputOTPSeparator({ ...props }: React.ComponentProps<'div'>) {
  return (
    <div data-slot="input-otp-separator" role="separator" {...props}>
      <MinusIcon />
    </div>
  )
}

export { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }



================================================================================
# ARCHIVO: front-end/components/ui/input.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/input.tsx
================================================================================

import * as React from 'react'

import { cn } from '@/lib/utils'

function Input({ className, type, ...props }: React.ComponentProps<'input'>) {
  return (
    <input
      type={type}
      data-slot="input"
      className={cn(
        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',
        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',
        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',
        className,
      )}
      {...props}
    />
  )
}

export { Input }



================================================================================
# ARCHIVO: front-end/components/ui/item.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/item.tsx
================================================================================

import * as React from 'react'
import { Slot } from '@radix-ui/react-slot'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'
import { Separator } from '@/components/ui/separator'

function ItemGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      role="list"
      data-slot="item-group"
      className={cn('group/item-group flex flex-col', className)}
      {...props}
    />
  )
}

function ItemSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="item-separator"
      orientation="horizontal"
      className={cn('my-0', className)}
      {...props}
    />
  )
}

const itemVariants = cva(
  'group/item flex items-center border border-transparent text-sm rounded-md transition-colors [a&]:hover:bg-accent/50 [a&]:transition-colors duration-100 flex-wrap outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',
  {
    variants: {
      variant: {
        default: 'bg-transparent',
        outline: 'border-border',
        muted: 'bg-muted/50',
      },
      size: {
        default: 'p-4 gap-4 ',
        sm: 'py-3 px-4 gap-2.5',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

function Item({
  className,
  variant = 'default',
  size = 'default',
  asChild = false,
  ...props
}: React.ComponentProps<'div'> &
  VariantProps<typeof itemVariants> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : 'div'
  return (
    <Comp
      data-slot="item"
      data-variant={variant}
      data-size={size}
      className={cn(itemVariants({ variant, size, className }))}
      {...props}
    />
  )
}

const itemMediaVariants = cva(
  'flex shrink-0 items-center justify-center gap-2 group-has-[[data-slot=item-description]]/item:self-start [&_svg]:pointer-events-none group-has-[[data-slot=item-description]]/item:translate-y-0.5',
  {
    variants: {
      variant: {
        default: 'bg-transparent',
        icon: "size-8 border rounded-sm bg-muted [&_svg:not([class*='size-'])]:size-4",
        image:
          'size-10 rounded-sm overflow-hidden [&_img]:size-full [&_img]:object-cover',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

function ItemMedia({
  className,
  variant = 'default',
  ...props
}: React.ComponentProps<'div'> & VariantProps<typeof itemMediaVariants>) {
  return (
    <div
      data-slot="item-media"
      data-variant={variant}
      className={cn(itemMediaVariants({ variant, className }))}
      {...props}
    />
  )
}

function ItemContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="item-content"
      className={cn(
        'flex flex-1 flex-col gap-1 [&+[data-slot=item-content]]:flex-none',
        className,
      )}
      {...props}
    />
  )
}

function ItemTitle({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="item-title"
      className={cn(
        'flex w-fit items-center gap-2 text-sm leading-snug font-medium',
        className,
      )}
      {...props}
    />
  )
}

function ItemDescription({ className, ...props }: React.ComponentProps<'p'>) {
  return (
    <p
      data-slot="item-description"
      className={cn(
        'text-muted-foreground line-clamp-2 text-sm leading-normal font-normal text-balance',
        '[&>a:hover]:text-primary [&>a]:underline [&>a]:underline-offset-4',
        className,
      )}
      {...props}
    />
  )
}

function ItemActions({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="item-actions"
      className={cn('flex items-center gap-2', className)}
      {...props}
    />
  )
}

function ItemHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="item-header"
      className={cn(
        'flex basis-full items-center justify-between gap-2',
        className,
      )}
      {...props}
    />
  )
}

function ItemFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="item-footer"
      className={cn(
        'flex basis-full items-center justify-between gap-2',
        className,
      )}
      {...props}
    />
  )
}

export {
  Item,
  ItemMedia,
  ItemContent,
  ItemActions,
  ItemGroup,
  ItemSeparator,
  ItemTitle,
  ItemDescription,
  ItemHeader,
  ItemFooter,
}



================================================================================
# ARCHIVO: front-end/components/ui/kbd.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/kbd.tsx
================================================================================

import { cn } from '@/lib/utils'

function Kbd({ className, ...props }: React.ComponentProps<'kbd'>) {
  return (
    <kbd
      data-slot="kbd"
      className={cn(
        'bg-muted w-fit text-muted-foreground pointer-events-none inline-flex h-5 min-w-5 items-center justify-center gap-1 rounded-sm px-1 font-sans text-xs font-medium select-none',
        "[&_svg:not([class*='size-'])]:size-3",
        '[[data-slot=tooltip-content]_&]:bg-background/20 [[data-slot=tooltip-content]_&]:text-background dark:[[data-slot=tooltip-content]_&]:bg-background/10',
        className,
      )}
      {...props}
    />
  )
}

function KbdGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <kbd
      data-slot="kbd-group"
      className={cn('inline-flex items-center gap-1', className)}
      {...props}
    />
  )
}

export { Kbd, KbdGroup }



================================================================================
# ARCHIVO: front-end/components/ui/label.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/label.tsx
================================================================================

"use client"

import * as React from "react"
import * as LabelPrimitive from "@radix-ui/react-label"
import { cva, type VariantProps } from "class-variance-authority"

import { cn } from "@/lib/utils"

const labelVariants = cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70")

const Label = React.forwardRef<
  React.ElementRef<typeof LabelPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> & VariantProps<typeof labelVariants>
>(({ className, ...props }, ref) => (
  <LabelPrimitive.Root ref={ref} className={cn(labelVariants(), className)} {...props} />
))
Label.displayName = LabelPrimitive.Root.displayName

export { Label }



================================================================================
# ARCHIVO: front-end/components/ui/menubar.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/menubar.tsx
================================================================================

'use client'

import * as React from 'react'
import * as MenubarPrimitive from '@radix-ui/react-menubar'
import { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Menubar({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Root>) {
  return (
    <MenubarPrimitive.Root
      data-slot="menubar"
      className={cn(
        'bg-background flex h-9 items-center gap-1 rounded-md border p-1 shadow-xs',
        className,
      )}
      {...props}
    />
  )
}

function MenubarMenu({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {
  return <MenubarPrimitive.Menu data-slot="menubar-menu" {...props} />
}

function MenubarGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Group>) {
  return <MenubarPrimitive.Group data-slot="menubar-group" {...props} />
}

function MenubarPortal({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {
  return <MenubarPrimitive.Portal data-slot="menubar-portal" {...props} />
}

function MenubarRadioGroup({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {
  return (
    <MenubarPrimitive.RadioGroup data-slot="menubar-radio-group" {...props} />
  )
}

function MenubarTrigger({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Trigger>) {
  return (
    <MenubarPrimitive.Trigger
      data-slot="menubar-trigger"
      className={cn(
        'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex items-center rounded-sm px-2 py-1 text-sm font-medium outline-hidden select-none',
        className,
      )}
      {...props}
    />
  )
}

function MenubarContent({
  className,
  align = 'start',
  alignOffset = -4,
  sideOffset = 8,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Content>) {
  return (
    <MenubarPortal>
      <MenubarPrimitive.Content
        data-slot="menubar-content"
        align={align}
        alignOffset={alignOffset}
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-md',
          className,
        )}
        {...props}
      />
    </MenubarPortal>
  )
}

function MenubarItem({
  className,
  inset,
  variant = 'default',
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Item> & {
  inset?: boolean
  variant?: 'default' | 'destructive'
}) {
  return (
    <MenubarPrimitive.Item
      data-slot="menubar-item"
      data-inset={inset}
      data-variant={variant}
      className={cn(
        "focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function MenubarCheckboxItem({
  className,
  children,
  checked,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.CheckboxItem>) {
  return (
    <MenubarPrimitive.CheckboxItem
      data-slot="menubar-checkbox-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      checked={checked}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CheckIcon className="size-4" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.CheckboxItem>
  )
}

function MenubarRadioItem({
  className,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.RadioItem>) {
  return (
    <MenubarPrimitive.RadioItem
      data-slot="menubar-radio-item"
      className={cn(
        "focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-xs py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    >
      <span className="pointer-events-none absolute left-2 flex size-3.5 items-center justify-center">
        <MenubarPrimitive.ItemIndicator>
          <CircleIcon className="size-2 fill-current" />
        </MenubarPrimitive.ItemIndicator>
      </span>
      {children}
    </MenubarPrimitive.RadioItem>
  )
}

function MenubarLabel({
  className,
  inset,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Label> & {
  inset?: boolean
}) {
  return (
    <MenubarPrimitive.Label
      data-slot="menubar-label"
      data-inset={inset}
      className={cn(
        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',
        className,
      )}
      {...props}
    />
  )
}

function MenubarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Separator>) {
  return (
    <MenubarPrimitive.Separator
      data-slot="menubar-separator"
      className={cn('bg-border -mx-1 my-1 h-px', className)}
      {...props}
    />
  )
}

function MenubarShortcut({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      data-slot="menubar-shortcut"
      className={cn(
        'text-muted-foreground ml-auto text-xs tracking-widest',
        className,
      )}
      {...props}
    />
  )
}

function MenubarSub({
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {
  return <MenubarPrimitive.Sub data-slot="menubar-sub" {...props} />
}

function MenubarSubTrigger({
  className,
  inset,
  children,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubTrigger> & {
  inset?: boolean
}) {
  return (
    <MenubarPrimitive.SubTrigger
      data-slot="menubar-sub-trigger"
      data-inset={inset}
      className={cn(
        'focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default items-center rounded-sm px-2 py-1.5 text-sm outline-none select-none data-[inset]:pl-8',
        className,
      )}
      {...props}
    >
      {children}
      <ChevronRightIcon className="ml-auto h-4 w-4" />
    </MenubarPrimitive.SubTrigger>
  )
}

function MenubarSubContent({
  className,
  ...props
}: React.ComponentProps<typeof MenubarPrimitive.SubContent>) {
  return (
    <MenubarPrimitive.SubContent
      data-slot="menubar-sub-content"
      className={cn(
        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-menubar-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',
        className,
      )}
      {...props}
    />
  )
}

export {
  Menubar,
  MenubarPortal,
  MenubarMenu,
  MenubarTrigger,
  MenubarContent,
  MenubarGroup,
  MenubarSeparator,
  MenubarLabel,
  MenubarItem,
  MenubarShortcut,
  MenubarCheckboxItem,
  MenubarRadioGroup,
  MenubarRadioItem,
  MenubarSub,
  MenubarSubTrigger,
  MenubarSubContent,
}



================================================================================
# ARCHIVO: front-end/components/ui/navigation-menu.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/navigation-menu.tsx
================================================================================

import * as React from 'react'
import * as NavigationMenuPrimitive from '@radix-ui/react-navigation-menu'
import { cva } from 'class-variance-authority'
import { ChevronDownIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function NavigationMenu({
  className,
  children,
  viewport = true,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Root> & {
  viewport?: boolean
}) {
  return (
    <NavigationMenuPrimitive.Root
      data-slot="navigation-menu"
      data-viewport={viewport}
      className={cn(
        'group/navigation-menu relative flex max-w-max flex-1 items-center justify-center',
        className,
      )}
      {...props}
    >
      {children}
      {viewport && <NavigationMenuViewport />}
    </NavigationMenuPrimitive.Root>
  )
}

function NavigationMenuList({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.List>) {
  return (
    <NavigationMenuPrimitive.List
      data-slot="navigation-menu-list"
      className={cn(
        'group flex flex-1 list-none items-center justify-center gap-1',
        className,
      )}
      {...props}
    />
  )
}

function NavigationMenuItem({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Item>) {
  return (
    <NavigationMenuPrimitive.Item
      data-slot="navigation-menu-item"
      className={cn('relative', className)}
      {...props}
    />
  )
}

const navigationMenuTriggerStyle = cva(
  'group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=open]:hover:bg-accent data-[state=open]:text-accent-foreground data-[state=open]:focus:bg-accent data-[state=open]:bg-accent/50 focus-visible:ring-ring/50 outline-none transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1',
)

function NavigationMenuTrigger({
  className,
  children,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Trigger>) {
  return (
    <NavigationMenuPrimitive.Trigger
      data-slot="navigation-menu-trigger"
      className={cn(navigationMenuTriggerStyle(), 'group', className)}
      {...props}
    >
      {children}{' '}
      <ChevronDownIcon
        className="relative top-[1px] ml-1 size-3 transition duration-300 group-data-[state=open]:rotate-180"
        aria-hidden="true"
      />
    </NavigationMenuPrimitive.Trigger>
  )
}

function NavigationMenuContent({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Content>) {
  return (
    <NavigationMenuPrimitive.Content
      data-slot="navigation-menu-content"
      className={cn(
        'data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 top-0 left-0 w-full p-2 pr-2.5 md:absolute md:w-auto',
        'group-data-[viewport=false]/navigation-menu:bg-popover group-data-[viewport=false]/navigation-menu:text-popover-foreground group-data-[viewport=false]/navigation-menu:data-[state=open]:animate-in group-data-[viewport=false]/navigation-menu:data-[state=closed]:animate-out group-data-[viewport=false]/navigation-menu:data-[state=closed]:zoom-out-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:zoom-in-95 group-data-[viewport=false]/navigation-menu:data-[state=open]:fade-in-0 group-data-[viewport=false]/navigation-menu:data-[state=closed]:fade-out-0 group-data-[viewport=false]/navigation-menu:top-full group-data-[viewport=false]/navigation-menu:mt-1.5 group-data-[viewport=false]/navigation-menu:overflow-hidden group-data-[viewport=false]/navigation-menu:rounded-md group-data-[viewport=false]/navigation-menu:border group-data-[viewport=false]/navigation-menu:shadow group-data-[viewport=false]/navigation-menu:duration-200 **:data-[slot=navigation-menu-link]:focus:ring-0 **:data-[slot=navigation-menu-link]:focus:outline-none',
        className,
      )}
      {...props}
    />
  )
}

function NavigationMenuViewport({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Viewport>) {
  return (
    <div
      className={'absolute top-full left-0 isolate z-50 flex justify-center'}
    >
      <NavigationMenuPrimitive.Viewport
        data-slot="navigation-menu-viewport"
        className={cn(
          'origin-top-center bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border shadow md:w-[var(--radix-navigation-menu-viewport-width)]',
          className,
        )}
        {...props}
      />
    </div>
  )
}

function NavigationMenuLink({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Link>) {
  return (
    <NavigationMenuPrimitive.Link
      data-slot="navigation-menu-link"
      className={cn(
        "data-[active=true]:focus:bg-accent data-[active=true]:hover:bg-accent data-[active=true]:bg-accent/50 data-[active=true]:text-accent-foreground hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus-visible:ring-ring/50 [&_svg:not([class*='text-'])]:text-muted-foreground flex flex-col gap-1 rounded-sm p-2 text-sm transition-all outline-none focus-visible:ring-[3px] focus-visible:outline-1 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function NavigationMenuIndicator({
  className,
  ...props
}: React.ComponentProps<typeof NavigationMenuPrimitive.Indicator>) {
  return (
    <NavigationMenuPrimitive.Indicator
      data-slot="navigation-menu-indicator"
      className={cn(
        'data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden',
        className,
      )}
      {...props}
    >
      <div className="bg-border relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm shadow-md" />
    </NavigationMenuPrimitive.Indicator>
  )
}

export {
  NavigationMenu,
  NavigationMenuList,
  NavigationMenuItem,
  NavigationMenuContent,
  NavigationMenuTrigger,
  NavigationMenuLink,
  NavigationMenuIndicator,
  NavigationMenuViewport,
  navigationMenuTriggerStyle,
}



================================================================================
# ARCHIVO: front-end/components/ui/pagination.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/pagination.tsx
================================================================================

import * as React from 'react'
import {
  ChevronLeftIcon,
  ChevronRightIcon,
  MoreHorizontalIcon,
} from 'lucide-react'

import { cn } from '@/lib/utils'
import { Button, buttonVariants } from '@/components/ui/button'

function Pagination({ className, ...props }: React.ComponentProps<'nav'>) {
  return (
    <nav
      role="navigation"
      aria-label="pagination"
      data-slot="pagination"
      className={cn('mx-auto flex w-full justify-center', className)}
      {...props}
    />
  )
}

function PaginationContent({
  className,
  ...props
}: React.ComponentProps<'ul'>) {
  return (
    <ul
      data-slot="pagination-content"
      className={cn('flex flex-row items-center gap-1', className)}
      {...props}
    />
  )
}

function PaginationItem({ ...props }: React.ComponentProps<'li'>) {
  return <li data-slot="pagination-item" {...props} />
}

type PaginationLinkProps = {
  isActive?: boolean
} & Pick<React.ComponentProps<typeof Button>, 'size'> &
  React.ComponentProps<'a'>

function PaginationLink({
  className,
  isActive,
  size = 'icon',
  ...props
}: PaginationLinkProps) {
  return (
    <a
      aria-current={isActive ? 'page' : undefined}
      data-slot="pagination-link"
      data-active={isActive}
      className={cn(
        buttonVariants({
          variant: isActive ? 'outline' : 'ghost',
          size,
        }),
        className,
      )}
      {...props}
    />
  )
}

function PaginationPrevious({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to previous page"
      size="default"
      className={cn('gap-1 px-2.5 sm:pl-2.5', className)}
      {...props}
    >
      <ChevronLeftIcon />
      <span className="hidden sm:block">Previous</span>
    </PaginationLink>
  )
}

function PaginationNext({
  className,
  ...props
}: React.ComponentProps<typeof PaginationLink>) {
  return (
    <PaginationLink
      aria-label="Go to next page"
      size="default"
      className={cn('gap-1 px-2.5 sm:pr-2.5', className)}
      {...props}
    >
      <span className="hidden sm:block">Next</span>
      <ChevronRightIcon />
    </PaginationLink>
  )
}

function PaginationEllipsis({
  className,
  ...props
}: React.ComponentProps<'span'>) {
  return (
    <span
      aria-hidden
      data-slot="pagination-ellipsis"
      className={cn('flex size-9 items-center justify-center', className)}
      {...props}
    >
      <MoreHorizontalIcon className="size-4" />
      <span className="sr-only">More pages</span>
    </span>
  )
}

export {
  Pagination,
  PaginationContent,
  PaginationLink,
  PaginationItem,
  PaginationPrevious,
  PaginationNext,
  PaginationEllipsis,
}



================================================================================
# ARCHIVO: front-end/components/ui/popover.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/popover.tsx
================================================================================

'use client'

import * as React from 'react'
import * as PopoverPrimitive from '@radix-ui/react-popover'

import { cn } from '@/lib/utils'

function Popover({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Root>) {
  return <PopoverPrimitive.Root data-slot="popover" {...props} />
}

function PopoverTrigger({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Trigger>) {
  return <PopoverPrimitive.Trigger data-slot="popover-trigger" {...props} />
}

function PopoverContent({
  className,
  align = 'center',
  sideOffset = 4,
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Content>) {
  return (
    <PopoverPrimitive.Portal>
      <PopoverPrimitive.Content
        data-slot="popover-content"
        align={align}
        sideOffset={sideOffset}
        className={cn(
          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden',
          className,
        )}
        {...props}
      />
    </PopoverPrimitive.Portal>
  )
}

function PopoverAnchor({
  ...props
}: React.ComponentProps<typeof PopoverPrimitive.Anchor>) {
  return <PopoverPrimitive.Anchor data-slot="popover-anchor" {...props} />
}

export { Popover, PopoverTrigger, PopoverContent, PopoverAnchor }



================================================================================
# ARCHIVO: front-end/components/ui/progress.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/progress.tsx
================================================================================

"use client"

import * as React from "react"
import * as ProgressPrimitive from "@radix-ui/react-progress"

import { cn } from "@/lib/utils"

const Progress = React.forwardRef<
  React.ElementRef<typeof ProgressPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>
>(({ className, value, ...props }, ref) => (
  <ProgressPrimitive.Root
    ref={ref}
    className={cn("relative h-2 w-full overflow-hidden rounded-full bg-primary/20", className)}
    {...props}
  >
    <ProgressPrimitive.Indicator
      className="h-full w-full flex-1 bg-primary transition-all"
      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}
    />
  </ProgressPrimitive.Root>
))
Progress.displayName = ProgressPrimitive.Root.displayName

export { Progress }



================================================================================
# ARCHIVO: front-end/components/ui/radio-group.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/radio-group.tsx
================================================================================

"use client"

import * as React from "react"
import * as RadioGroupPrimitive from "@radix-ui/react-radio-group"
import { Circle } from "lucide-react"

import { cn } from "@/lib/utils"

const RadioGroup = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Root>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>
>(({ className, ...props }, ref) => {
  return <RadioGroupPrimitive.Root className={cn("grid gap-2", className)} {...props} ref={ref} />
})
RadioGroup.displayName = RadioGroupPrimitive.Root.displayName

const RadioGroupItem = React.forwardRef<
  React.ElementRef<typeof RadioGroupPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>
>(({ className, ...props }, ref) => {
  return (
    <RadioGroupPrimitive.Item
      ref={ref}
      className={cn(
        "aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",
        className,
      )}
      {...props}
    >
      <RadioGroupPrimitive.Indicator className="flex items-center justify-center">
        <Circle className="h-2.5 w-2.5 fill-current text-current" />
      </RadioGroupPrimitive.Indicator>
    </RadioGroupPrimitive.Item>
  )
})
RadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName

export { RadioGroup, RadioGroupItem }



================================================================================
# ARCHIVO: front-end/components/ui/resizable.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/resizable.tsx
================================================================================

'use client'

import * as React from 'react'
import { GripVerticalIcon } from 'lucide-react'
import * as ResizablePrimitive from 'react-resizable-panels'

import { cn } from '@/lib/utils'

function ResizablePanelGroup({
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) {
  return (
    <ResizablePrimitive.PanelGroup
      data-slot="resizable-panel-group"
      className={cn(
        'flex h-full w-full data-[panel-group-direction=vertical]:flex-col',
        className,
      )}
      {...props}
    />
  )
}

function ResizablePanel({
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.Panel>) {
  return <ResizablePrimitive.Panel data-slot="resizable-panel" {...props} />
}

function ResizableHandle({
  withHandle,
  className,
  ...props
}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {
  withHandle?: boolean
}) {
  return (
    <ResizablePrimitive.PanelResizeHandle
      data-slot="resizable-handle"
      className={cn(
        'bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90',
        className,
      )}
      {...props}
    >
      {withHandle && (
        <div className="bg-border z-10 flex h-4 w-3 items-center justify-center rounded-xs border">
          <GripVerticalIcon className="size-2.5" />
        </div>
      )}
    </ResizablePrimitive.PanelResizeHandle>
  )
}

export { ResizablePanelGroup, ResizablePanel, ResizableHandle }



================================================================================
# ARCHIVO: front-end/components/ui/scroll-area.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/scroll-area.tsx
================================================================================

'use client'

import * as React from 'react'
import * as ScrollAreaPrimitive from '@radix-ui/react-scroll-area'

import { cn } from '@/lib/utils'

function ScrollArea({
  className,
  children,
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.Root>) {
  return (
    <ScrollAreaPrimitive.Root
      data-slot="scroll-area"
      className={cn('relative', className)}
      {...props}
    >
      <ScrollAreaPrimitive.Viewport
        data-slot="scroll-area-viewport"
        className="focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1"
      >
        {children}
      </ScrollAreaPrimitive.Viewport>
      <ScrollBar />
      <ScrollAreaPrimitive.Corner />
    </ScrollAreaPrimitive.Root>
  )
}

function ScrollBar({
  className,
  orientation = 'vertical',
  ...props
}: React.ComponentProps<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>) {
  return (
    <ScrollAreaPrimitive.ScrollAreaScrollbar
      data-slot="scroll-area-scrollbar"
      orientation={orientation}
      className={cn(
        'flex touch-none p-px transition-colors select-none',
        orientation === 'vertical' &&
          'h-full w-2.5 border-l border-l-transparent',
        orientation === 'horizontal' &&
          'h-2.5 flex-col border-t border-t-transparent',
        className,
      )}
      {...props}
    >
      <ScrollAreaPrimitive.ScrollAreaThumb
        data-slot="scroll-area-thumb"
        className="bg-border relative flex-1 rounded-full"
      />
    </ScrollAreaPrimitive.ScrollAreaScrollbar>
  )
}

export { ScrollArea, ScrollBar }



================================================================================
# ARCHIVO: front-end/components/ui/select.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/select.tsx
================================================================================

import * as React from "react"
import * as SelectPrimitive from "@radix-ui/react-select"
import { Check, ChevronDown, ChevronUp } from "lucide-react"

import { cn } from "@/lib/utils"

const Select = SelectPrimitive.Root

const SelectGroup = SelectPrimitive.Group

const SelectValue = SelectPrimitive.Value

const SelectTrigger = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Trigger>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Trigger
    ref={ref}
    className={cn(
      "flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",
      className,
    )}
    {...props}
  >
    {children}
    <SelectPrimitive.Icon asChild>
      <ChevronDown className="h-4 w-4 opacity-50" />
    </SelectPrimitive.Icon>
  </SelectPrimitive.Trigger>
))
SelectTrigger.displayName = SelectPrimitive.Trigger.displayName

const SelectScrollUpButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollUpButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronUp className="h-4 w-4" />
  </SelectPrimitive.ScrollUpButton>
))
SelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName

const SelectScrollDownButton = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.ScrollDownButton
    ref={ref}
    className={cn("flex cursor-default items-center justify-center py-1", className)}
    {...props}
  >
    <ChevronDown className="h-4 w-4" />
  </SelectPrimitive.ScrollDownButton>
))
SelectScrollDownButton.displayName = SelectPrimitive.ScrollDownButton.displayName

const SelectContent = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Content>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>
>(({ className, children, position = "popper", ...props }, ref) => (
  <SelectPrimitive.Portal>
    <SelectPrimitive.Content
      ref={ref}
      className={cn(
        "relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",
        position === "popper" &&
          "data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",
        className,
      )}
      position={position}
      {...props}
    >
      <SelectScrollUpButton />
      <SelectPrimitive.Viewport
        className={cn(
          "p-1",
          position === "popper" &&
            "h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]",
        )}
      >
        {children}
      </SelectPrimitive.Viewport>
      <SelectScrollDownButton />
    </SelectPrimitive.Content>
  </SelectPrimitive.Portal>
))
SelectContent.displayName = SelectPrimitive.Content.displayName

const SelectLabel = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Label>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Label ref={ref} className={cn("py-1.5 pl-8 pr-2 text-sm font-semibold", className)} {...props} />
))
SelectLabel.displayName = SelectPrimitive.Label.displayName

const SelectItem = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Item>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>
>(({ className, children, ...props }, ref) => (
  <SelectPrimitive.Item
    ref={ref}
    className={cn(
      "relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",
      className,
    )}
    {...props}
  >
    <span className="absolute left-2 flex h-3.5 w-3.5 items-center justify-center">
      <SelectPrimitive.ItemIndicator>
        <Check className="h-4 w-4" />
      </SelectPrimitive.ItemIndicator>
    </span>

    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>
  </SelectPrimitive.Item>
))
SelectItem.displayName = SelectPrimitive.Item.displayName

const SelectSeparator = React.forwardRef<
  React.ElementRef<typeof SelectPrimitive.Separator>,
  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>
>(({ className, ...props }, ref) => (
  <SelectPrimitive.Separator ref={ref} className={cn("-mx-1 my-1 h-px bg-muted", className)} {...props} />
))
SelectSeparator.displayName = SelectPrimitive.Separator.displayName

export {
  Select,
  SelectGroup,
  SelectValue,
  SelectTrigger,
  SelectContent,
  SelectLabel,
  SelectItem,
  SelectSeparator,
  SelectScrollUpButton,
  SelectScrollDownButton,
}



================================================================================
# ARCHIVO: front-end/components/ui/separator.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/separator.tsx
================================================================================

'use client'

import * as React from 'react'
import * as SeparatorPrimitive from '@radix-ui/react-separator'

import { cn } from '@/lib/utils'

function Separator({
  className,
  orientation = 'horizontal',
  decorative = true,
  ...props
}: React.ComponentProps<typeof SeparatorPrimitive.Root>) {
  return (
    <SeparatorPrimitive.Root
      data-slot="separator"
      decorative={decorative}
      orientation={orientation}
      className={cn(
        'bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px',
        className,
      )}
      {...props}
    />
  )
}

export { Separator }



================================================================================
# ARCHIVO: front-end/components/ui/sheet.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sheet.tsx
================================================================================

'use client'

import * as React from 'react'
import * as SheetPrimitive from '@radix-ui/react-dialog'
import { XIcon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {
  return <SheetPrimitive.Root data-slot="sheet" {...props} />
}

function SheetTrigger({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {
  return <SheetPrimitive.Trigger data-slot="sheet-trigger" {...props} />
}

function SheetClose({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Close>) {
  return <SheetPrimitive.Close data-slot="sheet-close" {...props} />
}

function SheetPortal({
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Portal>) {
  return <SheetPrimitive.Portal data-slot="sheet-portal" {...props} />
}

function SheetOverlay({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {
  return (
    <SheetPrimitive.Overlay
      data-slot="sheet-overlay"
      className={cn(
        'data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50',
        className,
      )}
      {...props}
    />
  )
}

function SheetContent({
  className,
  children,
  side = 'right',
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Content> & {
  side?: 'top' | 'right' | 'bottom' | 'left'
}) {
  return (
    <SheetPortal>
      <SheetOverlay />
      <SheetPrimitive.Content
        data-slot="sheet-content"
        className={cn(
          'bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500',
          side === 'right' &&
            'data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm',
          side === 'left' &&
            'data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm',
          side === 'top' &&
            'data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b',
          side === 'bottom' &&
            'data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t',
          className,
        )}
        {...props}
      >
        {children}
        <SheetPrimitive.Close className="ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none">
          <XIcon className="size-4" />
          <span className="sr-only">Close</span>
        </SheetPrimitive.Close>
      </SheetPrimitive.Content>
    </SheetPortal>
  )
}

function SheetHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sheet-header"
      className={cn('flex flex-col gap-1.5 p-4', className)}
      {...props}
    />
  )
}

function SheetFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sheet-footer"
      className={cn('mt-auto flex flex-col gap-2 p-4', className)}
      {...props}
    />
  )
}

function SheetTitle({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Title>) {
  return (
    <SheetPrimitive.Title
      data-slot="sheet-title"
      className={cn('text-foreground font-semibold', className)}
      {...props}
    />
  )
}

function SheetDescription({
  className,
  ...props
}: React.ComponentProps<typeof SheetPrimitive.Description>) {
  return (
    <SheetPrimitive.Description
      data-slot="sheet-description"
      className={cn('text-muted-foreground text-sm', className)}
      {...props}
    />
  )
}

export {
  Sheet,
  SheetTrigger,
  SheetClose,
  SheetContent,
  SheetHeader,
  SheetFooter,
  SheetTitle,
  SheetDescription,
}



================================================================================
# ARCHIVO: front-end/components/ui/sidebar.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sidebar.tsx
================================================================================

'use client'

import * as React from 'react'
import { Slot } from '@radix-ui/react-slot'
import { cva, VariantProps } from 'class-variance-authority'
import { PanelLeftIcon } from 'lucide-react'

import { useIsMobile } from '@/hooks/use-mobile'
import { cn } from '@/lib/utils'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import { Separator } from '@/components/ui/separator'
import {
  Sheet,
  SheetContent,
  SheetDescription,
  SheetHeader,
  SheetTitle,
} from '@/components/ui/sheet'
import { Skeleton } from '@/components/ui/skeleton'
import {
  Tooltip,
  TooltipContent,
  TooltipProvider,
  TooltipTrigger,
} from '@/components/ui/tooltip'

const SIDEBAR_COOKIE_NAME = 'sidebar_state'
const SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7
const SIDEBAR_WIDTH = '16rem'
const SIDEBAR_WIDTH_MOBILE = '18rem'
const SIDEBAR_WIDTH_ICON = '3rem'
const SIDEBAR_KEYBOARD_SHORTCUT = 'b'

type SidebarContextProps = {
  state: 'expanded' | 'collapsed'
  open: boolean
  setOpen: (open: boolean) => void
  openMobile: boolean
  setOpenMobile: (open: boolean) => void
  isMobile: boolean
  toggleSidebar: () => void
}

const SidebarContext = React.createContext<SidebarContextProps | null>(null)

function useSidebar() {
  const context = React.useContext(SidebarContext)
  if (!context) {
    throw new Error('useSidebar must be used within a SidebarProvider.')
  }

  return context
}

function SidebarProvider({
  defaultOpen = true,
  open: openProp,
  onOpenChange: setOpenProp,
  className,
  style,
  children,
  ...props
}: React.ComponentProps<'div'> & {
  defaultOpen?: boolean
  open?: boolean
  onOpenChange?: (open: boolean) => void
}) {
  const isMobile = useIsMobile()
  const [openMobile, setOpenMobile] = React.useState(false)

  // This is the internal state of the sidebar.
  // We use openProp and setOpenProp for control from outside the component.
  const [_open, _setOpen] = React.useState(defaultOpen)
  const open = openProp ?? _open
  const setOpen = React.useCallback(
    (value: boolean | ((value: boolean) => boolean)) => {
      const openState = typeof value === 'function' ? value(open) : value
      if (setOpenProp) {
        setOpenProp(openState)
      } else {
        _setOpen(openState)
      }

      // This sets the cookie to keep the sidebar state.
      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`
    },
    [setOpenProp, open],
  )

  // Helper to toggle the sidebar.
  const toggleSidebar = React.useCallback(() => {
    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)
  }, [isMobile, setOpen, setOpenMobile])

  // Adds a keyboard shortcut to toggle the sidebar.
  React.useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      if (
        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&
        (event.metaKey || event.ctrlKey)
      ) {
        event.preventDefault()
        toggleSidebar()
      }
    }

    window.addEventListener('keydown', handleKeyDown)
    return () => window.removeEventListener('keydown', handleKeyDown)
  }, [toggleSidebar])

  // We add a state so that we can do data-state="expanded" or "collapsed".
  // This makes it easier to style the sidebar with Tailwind classes.
  const state = open ? 'expanded' : 'collapsed'

  const contextValue = React.useMemo<SidebarContextProps>(
    () => ({
      state,
      open,
      setOpen,
      isMobile,
      openMobile,
      setOpenMobile,
      toggleSidebar,
    }),
    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar],
  )

  return (
    <SidebarContext.Provider value={contextValue}>
      <TooltipProvider delayDuration={0}>
        <div
          data-slot="sidebar-wrapper"
          style={
            {
              '--sidebar-width': SIDEBAR_WIDTH,
              '--sidebar-width-icon': SIDEBAR_WIDTH_ICON,
              ...style,
            } as React.CSSProperties
          }
          className={cn(
            'group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full',
            className,
          )}
          {...props}
        >
          {children}
        </div>
      </TooltipProvider>
    </SidebarContext.Provider>
  )
}

function Sidebar({
  side = 'left',
  variant = 'sidebar',
  collapsible = 'offcanvas',
  className,
  children,
  ...props
}: React.ComponentProps<'div'> & {
  side?: 'left' | 'right'
  variant?: 'sidebar' | 'floating' | 'inset'
  collapsible?: 'offcanvas' | 'icon' | 'none'
}) {
  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()

  if (collapsible === 'none') {
    return (
      <div
        data-slot="sidebar"
        className={cn(
          'bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col',
          className,
        )}
        {...props}
      >
        {children}
      </div>
    )
  }

  if (isMobile) {
    return (
      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>
        <SheetContent
          data-sidebar="sidebar"
          data-slot="sidebar"
          data-mobile="true"
          className="bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden"
          style={
            {
              '--sidebar-width': SIDEBAR_WIDTH_MOBILE,
            } as React.CSSProperties
          }
          side={side}
        >
          <SheetHeader className="sr-only">
            <SheetTitle>Sidebar</SheetTitle>
            <SheetDescription>Displays the mobile sidebar.</SheetDescription>
          </SheetHeader>
          <div className="flex h-full w-full flex-col">{children}</div>
        </SheetContent>
      </Sheet>
    )
  }

  return (
    <div
      className="group peer text-sidebar-foreground hidden md:block"
      data-state={state}
      data-collapsible={state === 'collapsed' ? collapsible : ''}
      data-variant={variant}
      data-side={side}
      data-slot="sidebar"
    >
      {/* This is what handles the sidebar gap on desktop */}
      <div
        data-slot="sidebar-gap"
        className={cn(
          'relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear',
          'group-data-[collapsible=offcanvas]:w-0',
          'group-data-[side=right]:rotate-180',
          variant === 'floating' || variant === 'inset'
            ? 'group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]'
            : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon)',
        )}
      />
      <div
        data-slot="sidebar-container"
        className={cn(
          'fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex',
          side === 'left'
            ? 'left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]'
            : 'right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]',
          // Adjust the padding for floating and inset variants.
          variant === 'floating' || variant === 'inset'
            ? 'p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]'
            : 'group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l',
          className,
        )}
        {...props}
      >
        <div
          data-sidebar="sidebar"
          data-slot="sidebar-inner"
          className="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"
        >
          {children}
        </div>
      </div>
    </div>
  )
}

function SidebarTrigger({
  className,
  onClick,
  ...props
}: React.ComponentProps<typeof Button>) {
  const { toggleSidebar } = useSidebar()

  return (
    <Button
      data-sidebar="trigger"
      data-slot="sidebar-trigger"
      variant="ghost"
      size="icon"
      className={cn('size-7', className)}
      onClick={(event) => {
        onClick?.(event)
        toggleSidebar()
      }}
      {...props}
    >
      <PanelLeftIcon />
      <span className="sr-only">Toggle Sidebar</span>
    </Button>
  )
}

function SidebarRail({ className, ...props }: React.ComponentProps<'button'>) {
  const { toggleSidebar } = useSidebar()

  return (
    <button
      data-sidebar="rail"
      data-slot="sidebar-rail"
      aria-label="Toggle Sidebar"
      tabIndex={-1}
      onClick={toggleSidebar}
      title="Toggle Sidebar"
      className={cn(
        'hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex',
        'in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize',
        '[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize',
        'hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full',
        '[[data-side=left][data-collapsible=offcanvas]_&]:-right-2',
        '[[data-side=right][data-collapsible=offcanvas]_&]:-left-2',
        className,
      )}
      {...props}
    />
  )
}

function SidebarInset({ className, ...props }: React.ComponentProps<'main'>) {
  return (
    <main
      data-slot="sidebar-inset"
      className={cn(
        'bg-background relative flex w-full flex-1 flex-col',
        'md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2',
        className,
      )}
      {...props}
    />
  )
}

function SidebarInput({
  className,
  ...props
}: React.ComponentProps<typeof Input>) {
  return (
    <Input
      data-slot="sidebar-input"
      data-sidebar="input"
      className={cn('bg-background h-8 w-full shadow-none', className)}
      {...props}
    />
  )
}

function SidebarHeader({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-header"
      data-sidebar="header"
      className={cn('flex flex-col gap-2 p-2', className)}
      {...props}
    />
  )
}

function SidebarFooter({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-footer"
      data-sidebar="footer"
      className={cn('flex flex-col gap-2 p-2', className)}
      {...props}
    />
  )
}

function SidebarSeparator({
  className,
  ...props
}: React.ComponentProps<typeof Separator>) {
  return (
    <Separator
      data-slot="sidebar-separator"
      data-sidebar="separator"
      className={cn('bg-sidebar-border mx-2 w-auto', className)}
      {...props}
    />
  )
}

function SidebarContent({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-content"
      data-sidebar="content"
      className={cn(
        'flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden',
        className,
      )}
      {...props}
    />
  )
}

function SidebarGroup({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-group"
      data-sidebar="group"
      className={cn('relative flex w-full min-w-0 flex-col p-2', className)}
      {...props}
    />
  )
}

function SidebarGroupLabel({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<'div'> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : 'div'

  return (
    <Comp
      data-slot="sidebar-group-label"
      data-sidebar="group-label"
      className={cn(
        'text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
        'group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0',
        className,
      )}
      {...props}
    />
  )
}

function SidebarGroupAction({
  className,
  asChild = false,
  ...props
}: React.ComponentProps<'button'> & { asChild?: boolean }) {
  const Comp = asChild ? Slot : 'button'

  return (
    <Comp
      data-slot="sidebar-group-action"
      data-sidebar="group-action"
      className={cn(
        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
        // Increases the hit area of the button on mobile.
        'after:absolute after:-inset-2 md:after:hidden',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  )
}

function SidebarGroupContent({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-group-content"
      data-sidebar="group-content"
      className={cn('w-full text-sm', className)}
      {...props}
    />
  )
}

function SidebarMenu({ className, ...props }: React.ComponentProps<'ul'>) {
  return (
    <ul
      data-slot="sidebar-menu"
      data-sidebar="menu"
      className={cn('flex w-full min-w-0 flex-col gap-1', className)}
      {...props}
    />
  )
}

function SidebarMenuItem({ className, ...props }: React.ComponentProps<'li'>) {
  return (
    <li
      data-slot="sidebar-menu-item"
      data-sidebar="menu-item"
      className={cn('group/menu-item relative', className)}
      {...props}
    />
  )
}

const sidebarMenuButtonVariants = cva(
  'peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'hover:bg-sidebar-accent hover:text-sidebar-accent-foreground',
        outline:
          'bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]',
      },
      size: {
        default: 'h-8 text-sm',
        sm: 'h-7 text-xs',
        lg: 'h-12 text-sm group-data-[collapsible=icon]:p-0!',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

function SidebarMenuButton({
  asChild = false,
  isActive = false,
  variant = 'default',
  size = 'default',
  tooltip,
  className,
  ...props
}: React.ComponentProps<'button'> & {
  asChild?: boolean
  isActive?: boolean
  tooltip?: string | React.ComponentProps<typeof TooltipContent>
} & VariantProps<typeof sidebarMenuButtonVariants>) {
  const Comp = asChild ? Slot : 'button'
  const { isMobile, state } = useSidebar()

  const button = (
    <Comp
      data-slot="sidebar-menu-button"
      data-sidebar="menu-button"
      data-size={size}
      data-active={isActive}
      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}
      {...props}
    />
  )

  if (!tooltip) {
    return button
  }

  if (typeof tooltip === 'string') {
    tooltip = {
      children: tooltip,
    }
  }

  return (
    <Tooltip>
      <TooltipTrigger asChild>{button}</TooltipTrigger>
      <TooltipContent
        side="right"
        align="center"
        hidden={state !== 'collapsed' || isMobile}
        {...tooltip}
      />
    </Tooltip>
  )
}

function SidebarMenuAction({
  className,
  asChild = false,
  showOnHover = false,
  ...props
}: React.ComponentProps<'button'> & {
  asChild?: boolean
  showOnHover?: boolean
}) {
  const Comp = asChild ? Slot : 'button'

  return (
    <Comp
      data-slot="sidebar-menu-action"
      data-sidebar="menu-action"
      className={cn(
        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0',
        // Increases the hit area of the button on mobile.
        'after:absolute after:-inset-2 md:after:hidden',
        'peer-data-[size=sm]/menu-button:top-1',
        'peer-data-[size=default]/menu-button:top-1.5',
        'peer-data-[size=lg]/menu-button:top-2.5',
        'group-data-[collapsible=icon]:hidden',
        showOnHover &&
          'peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0',
        className,
      )}
      {...props}
    />
  )
}

function SidebarMenuBadge({
  className,
  ...props
}: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="sidebar-menu-badge"
      data-sidebar="menu-badge"
      className={cn(
        'text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none',
        'peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground',
        'peer-data-[size=sm]/menu-button:top-1',
        'peer-data-[size=default]/menu-button:top-1.5',
        'peer-data-[size=lg]/menu-button:top-2.5',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  )
}

function SidebarMenuSkeleton({
  className,
  showIcon = false,
  ...props
}: React.ComponentProps<'div'> & {
  showIcon?: boolean
}) {
  // Random width between 50 to 90%.
  const width = React.useMemo(() => {
    return `${Math.floor(Math.random() * 40) + 50}%`
  }, [])

  return (
    <div
      data-slot="sidebar-menu-skeleton"
      data-sidebar="menu-skeleton"
      className={cn('flex h-8 items-center gap-2 rounded-md px-2', className)}
      {...props}
    >
      {showIcon && (
        <Skeleton
          className="size-4 rounded-md"
          data-sidebar="menu-skeleton-icon"
        />
      )}
      <Skeleton
        className="h-4 max-w-(--skeleton-width) flex-1"
        data-sidebar="menu-skeleton-text"
        style={
          {
            '--skeleton-width': width,
          } as React.CSSProperties
        }
      />
    </div>
  )
}

function SidebarMenuSub({ className, ...props }: React.ComponentProps<'ul'>) {
  return (
    <ul
      data-slot="sidebar-menu-sub"
      data-sidebar="menu-sub"
      className={cn(
        'border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  )
}

function SidebarMenuSubItem({
  className,
  ...props
}: React.ComponentProps<'li'>) {
  return (
    <li
      data-slot="sidebar-menu-sub-item"
      data-sidebar="menu-sub-item"
      className={cn('group/menu-sub-item relative', className)}
      {...props}
    />
  )
}

function SidebarMenuSubButton({
  asChild = false,
  size = 'md',
  isActive = false,
  className,
  ...props
}: React.ComponentProps<'a'> & {
  asChild?: boolean
  size?: 'sm' | 'md'
  isActive?: boolean
}) {
  const Comp = asChild ? Slot : 'a'

  return (
    <Comp
      data-slot="sidebar-menu-sub-button"
      data-sidebar="menu-sub-button"
      data-size={size}
      data-active={isActive}
      className={cn(
        'text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0',
        'data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground',
        size === 'sm' && 'text-xs',
        size === 'md' && 'text-sm',
        'group-data-[collapsible=icon]:hidden',
        className,
      )}
      {...props}
    />
  )
}

export {
  Sidebar,
  SidebarContent,
  SidebarFooter,
  SidebarGroup,
  SidebarGroupAction,
  SidebarGroupContent,
  SidebarGroupLabel,
  SidebarHeader,
  SidebarInput,
  SidebarInset,
  SidebarMenu,
  SidebarMenuAction,
  SidebarMenuBadge,
  SidebarMenuButton,
  SidebarMenuItem,
  SidebarMenuSkeleton,
  SidebarMenuSub,
  SidebarMenuSubButton,
  SidebarMenuSubItem,
  SidebarProvider,
  SidebarRail,
  SidebarSeparator,
  SidebarTrigger,
  useSidebar,
}



================================================================================
# ARCHIVO: front-end/components/ui/skeleton.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/skeleton.tsx
================================================================================

import { cn } from '@/lib/utils'

function Skeleton({ className, ...props }: React.ComponentProps<'div'>) {
  return (
    <div
      data-slot="skeleton"
      className={cn('bg-accent animate-pulse rounded-md', className)}
      {...props}
    />
  )
}

export { Skeleton }



================================================================================
# ARCHIVO: front-end/components/ui/slider.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/slider.tsx
================================================================================

'use client'

import * as React from 'react'
import * as SliderPrimitive from '@radix-ui/react-slider'

import { cn } from '@/lib/utils'

function Slider({
  className,
  defaultValue,
  value,
  min = 0,
  max = 100,
  ...props
}: React.ComponentProps<typeof SliderPrimitive.Root>) {
  const _values = React.useMemo(
    () =>
      Array.isArray(value)
        ? value
        : Array.isArray(defaultValue)
          ? defaultValue
          : [min, max],
    [value, defaultValue, min, max],
  )

  return (
    <SliderPrimitive.Root
      data-slot="slider"
      defaultValue={defaultValue}
      value={value}
      min={min}
      max={max}
      className={cn(
        'relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col',
        className,
      )}
      {...props}
    >
      <SliderPrimitive.Track
        data-slot="slider-track"
        className={
          'bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5'
        }
      >
        <SliderPrimitive.Range
          data-slot="slider-range"
          className={
            'bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full'
          }
        />
      </SliderPrimitive.Track>
      {Array.from({ length: _values.length }, (_, index) => (
        <SliderPrimitive.Thumb
          data-slot="slider-thumb"
          key={index}
          className="border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"
        />
      ))}
    </SliderPrimitive.Root>
  )
}

export { Slider }



================================================================================
# ARCHIVO: front-end/components/ui/sonner.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/sonner.tsx
================================================================================

'use client'

import { useTheme } from 'next-themes'
import { Toaster as Sonner, ToasterProps } from 'sonner'

const Toaster = ({ ...props }: ToasterProps) => {
  const { theme = 'system' } = useTheme()

  return (
    <Sonner
      theme={theme as ToasterProps['theme']}
      className="toaster group"
      style={
        {
          '--normal-bg': 'var(--popover)',
          '--normal-text': 'var(--popover-foreground)',
          '--normal-border': 'var(--border)',
        } as React.CSSProperties
      }
      {...props}
    />
  )
}

export { Toaster }



================================================================================
# ARCHIVO: front-end/components/ui/spinner.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/spinner.tsx
================================================================================

import { Loader2Icon } from 'lucide-react'

import { cn } from '@/lib/utils'

function Spinner({ className, ...props }: React.ComponentProps<'svg'>) {
  return (
    <Loader2Icon
      role="status"
      aria-label="Loading"
      className={cn('size-4 animate-spin', className)}
      {...props}
    />
  )
}

export { Spinner }



================================================================================
# ARCHIVO: front-end/components/ui/switch.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/switch.tsx
================================================================================

'use client'

import * as React from 'react'
import * as SwitchPrimitive from '@radix-ui/react-switch'

import { cn } from '@/lib/utils'

function Switch({
  className,
  ...props
}: React.ComponentProps<typeof SwitchPrimitive.Root>) {
  return (
    <SwitchPrimitive.Root
      data-slot="switch"
      className={cn(
        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',
        className,
      )}
      {...props}
    >
      <SwitchPrimitive.Thumb
        data-slot="switch-thumb"
        className={
          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'
        }
      />
    </SwitchPrimitive.Root>
  )
}

export { Switch }



================================================================================
# ARCHIVO: front-end/components/ui/table.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/table.tsx
================================================================================

'use client'

import * as React from 'react'

import { cn } from '@/lib/utils'

function Table({ className, ...props }: React.ComponentProps<'table'>) {
  return (
    <div
      data-slot="table-container"
      className="relative w-full overflow-x-auto"
    >
      <table
        data-slot="table"
        className={cn('w-full caption-bottom text-sm', className)}
        {...props}
      />
    </div>
  )
}

function TableHeader({ className, ...props }: React.ComponentProps<'thead'>) {
  return (
    <thead
      data-slot="table-header"
      className={cn('[&_tr]:border-b', className)}
      {...props}
    />
  )
}

function TableBody({ className, ...props }: React.ComponentProps<'tbody'>) {
  return (
    <tbody
      data-slot="table-body"
      className={cn('[&_tr:last-child]:border-0', className)}
      {...props}
    />
  )
}

function TableFooter({ className, ...props }: React.ComponentProps<'tfoot'>) {
  return (
    <tfoot
      data-slot="table-footer"
      className={cn(
        'bg-muted/50 border-t font-medium [&>tr]:last:border-b-0',
        className,
      )}
      {...props}
    />
  )
}

function TableRow({ className, ...props }: React.ComponentProps<'tr'>) {
  return (
    <tr
      data-slot="table-row"
      className={cn(
        'hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors',
        className,
      )}
      {...props}
    />
  )
}

function TableHead({ className, ...props }: React.ComponentProps<'th'>) {
  return (
    <th
      data-slot="table-head"
      className={cn(
        'text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',
        className,
      )}
      {...props}
    />
  )
}

function TableCell({ className, ...props }: React.ComponentProps<'td'>) {
  return (
    <td
      data-slot="table-cell"
      className={cn(
        'p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]',
        className,
      )}
      {...props}
    />
  )
}

function TableCaption({
  className,
  ...props
}: React.ComponentProps<'caption'>) {
  return (
    <caption
      data-slot="table-caption"
      className={cn('text-muted-foreground mt-4 text-sm', className)}
      {...props}
    />
  )
}

export {
  Table,
  TableHeader,
  TableBody,
  TableFooter,
  TableHead,
  TableRow,
  TableCell,
  TableCaption,
}



================================================================================
# ARCHIVO: front-end/components/ui/tabs.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tabs.tsx
================================================================================

'use client'

import * as React from 'react'
import * as TabsPrimitive from '@radix-ui/react-tabs'

import { cn } from '@/lib/utils'

function Tabs({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Root>) {
  return (
    <TabsPrimitive.Root
      data-slot="tabs"
      className={cn('flex flex-col gap-2', className)}
      {...props}
    />
  )
}

function TabsList({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.List>) {
  return (
    <TabsPrimitive.List
      data-slot="tabs-list"
      className={cn(
        'bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]',
        className,
      )}
      {...props}
    />
  )
}

function TabsTrigger({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Trigger>) {
  return (
    <TabsPrimitive.Trigger
      data-slot="tabs-trigger"
      className={cn(
        "data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",
        className,
      )}
      {...props}
    />
  )
}

function TabsContent({
  className,
  ...props
}: React.ComponentProps<typeof TabsPrimitive.Content>) {
  return (
    <TabsPrimitive.Content
      data-slot="tabs-content"
      className={cn('flex-1 outline-none', className)}
      {...props}
    />
  )
}

export { Tabs, TabsList, TabsTrigger, TabsContent }



================================================================================
# ARCHIVO: front-end/components/ui/textarea.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/textarea.tsx
================================================================================

import * as React from "react"

import { cn } from "@/lib/utils"

const Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<"textarea">>(
  ({ className, ...props }, ref) => {
    return (
      <textarea
        className={cn(
          "flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",
          className,
        )}
        ref={ref}
        {...props}
      />
    )
  },
)
Textarea.displayName = "Textarea"

export { Textarea }



================================================================================
# ARCHIVO: front-end/components/ui/toast.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toast.tsx
================================================================================

'use client'

import * as React from 'react'
import * as ToastPrimitives from '@radix-ui/react-toast'
import { cva, type VariantProps } from 'class-variance-authority'
import { X } from 'lucide-react'

import { cn } from '@/lib/utils'

const ToastProvider = ToastPrimitives.Provider

const ToastViewport = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Viewport>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Viewport
    ref={ref}
    className={cn(
      'fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]',
      className,
    )}
    {...props}
  />
))
ToastViewport.displayName = ToastPrimitives.Viewport.displayName

const toastVariants = cva(
  'group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full',
  {
    variants: {
      variant: {
        default: 'border bg-background text-foreground',
        destructive:
          'destructive group border-destructive bg-destructive text-destructive-foreground',
      },
    },
    defaultVariants: {
      variant: 'default',
    },
  },
)

const Toast = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Root>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &
    VariantProps<typeof toastVariants>
>(({ className, variant, ...props }, ref) => {
  return (
    <ToastPrimitives.Root
      ref={ref}
      className={cn(toastVariants({ variant }), className)}
      {...props}
    />
  )
})
Toast.displayName = ToastPrimitives.Root.displayName

const ToastAction = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Action>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Action
    ref={ref}
    className={cn(
      'inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive',
      className,
    )}
    {...props}
  />
))
ToastAction.displayName = ToastPrimitives.Action.displayName

const ToastClose = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Close>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Close
    ref={ref}
    className={cn(
      'absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600',
      className,
    )}
    toast-close=""
    {...props}
  >
    <X className="h-4 w-4" />
  </ToastPrimitives.Close>
))
ToastClose.displayName = ToastPrimitives.Close.displayName

const ToastTitle = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Title>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Title
    ref={ref}
    className={cn('text-sm font-semibold', className)}
    {...props}
  />
))
ToastTitle.displayName = ToastPrimitives.Title.displayName

const ToastDescription = React.forwardRef<
  React.ElementRef<typeof ToastPrimitives.Description>,
  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>
>(({ className, ...props }, ref) => (
  <ToastPrimitives.Description
    ref={ref}
    className={cn('text-sm opacity-90', className)}
    {...props}
  />
))
ToastDescription.displayName = ToastPrimitives.Description.displayName

type ToastProps = React.ComponentPropsWithoutRef<typeof Toast>

type ToastActionElement = React.ReactElement<typeof ToastAction>

export {
  type ToastProps,
  type ToastActionElement,
  ToastProvider,
  ToastViewport,
  Toast,
  ToastTitle,
  ToastDescription,
  ToastClose,
  ToastAction,
}



================================================================================
# ARCHIVO: front-end/components/ui/toaster.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toaster.tsx
================================================================================

'use client'

import { useToast } from '@/hooks/use-toast'
import {
  Toast,
  ToastClose,
  ToastDescription,
  ToastProvider,
  ToastTitle,
  ToastViewport,
} from '@/components/ui/toast'

export function Toaster() {
  const { toasts } = useToast()

  return (
    <ToastProvider>
      {toasts.map(function ({ id, title, description, action, ...props }) {
        return (
          <Toast key={id} {...props}>
            <div className="grid gap-1">
              {title && <ToastTitle>{title}</ToastTitle>}
              {description && (
                <ToastDescription>{description}</ToastDescription>
              )}
            </div>
            {action}
            <ToastClose />
          </Toast>
        )
      })}
      <ToastViewport />
    </ToastProvider>
  )
}



================================================================================
# ARCHIVO: front-end/components/ui/toggle-group.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle-group.tsx
================================================================================

'use client'

import * as React from 'react'
import * as ToggleGroupPrimitive from '@radix-ui/react-toggle-group'
import { type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'
import { toggleVariants } from '@/components/ui/toggle'

const ToggleGroupContext = React.createContext<
  VariantProps<typeof toggleVariants>
>({
  size: 'default',
  variant: 'default',
})

function ToggleGroup({
  className,
  variant,
  size,
  children,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <ToggleGroupPrimitive.Root
      data-slot="toggle-group"
      data-variant={variant}
      data-size={size}
      className={cn(
        'group/toggle-group flex w-fit items-center rounded-md data-[variant=outline]:shadow-xs',
        className,
      )}
      {...props}
    >
      <ToggleGroupContext.Provider value={{ variant, size }}>
        {children}
      </ToggleGroupContext.Provider>
    </ToggleGroupPrimitive.Root>
  )
}

function ToggleGroupItem({
  className,
  children,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof ToggleGroupPrimitive.Item> &
  VariantProps<typeof toggleVariants>) {
  const context = React.useContext(ToggleGroupContext)

  return (
    <ToggleGroupPrimitive.Item
      data-slot="toggle-group-item"
      data-variant={context.variant || variant}
      data-size={context.size || size}
      className={cn(
        toggleVariants({
          variant: context.variant || variant,
          size: context.size || size,
        }),
        'min-w-0 flex-1 shrink-0 rounded-none shadow-none first:rounded-l-md last:rounded-r-md focus:z-10 focus-visible:z-10 data-[variant=outline]:border-l-0 data-[variant=outline]:first:border-l',
        className,
      )}
      {...props}
    >
      {children}
    </ToggleGroupPrimitive.Item>
  )
}

export { ToggleGroup, ToggleGroupItem }



================================================================================
# ARCHIVO: front-end/components/ui/toggle.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/toggle.tsx
================================================================================

'use client'

import * as React from 'react'
import * as TogglePrimitive from '@radix-ui/react-toggle'
import { cva, type VariantProps } from 'class-variance-authority'

import { cn } from '@/lib/utils'

const toggleVariants = cva(
  "inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",
  {
    variants: {
      variant: {
        default: 'bg-transparent',
        outline:
          'border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground',
      },
      size: {
        default: 'h-9 px-2 min-w-9',
        sm: 'h-8 px-1.5 min-w-8',
        lg: 'h-10 px-2.5 min-w-10',
      },
    },
    defaultVariants: {
      variant: 'default',
      size: 'default',
    },
  },
)

function Toggle({
  className,
  variant,
  size,
  ...props
}: React.ComponentProps<typeof TogglePrimitive.Root> &
  VariantProps<typeof toggleVariants>) {
  return (
    <TogglePrimitive.Root
      data-slot="toggle"
      className={cn(toggleVariants({ variant, size, className }))}
      {...props}
    />
  )
}

export { Toggle, toggleVariants }



================================================================================
# ARCHIVO: front-end/components/ui/tooltip.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/tooltip.tsx
================================================================================

'use client'

import * as React from 'react'
import * as TooltipPrimitive from '@radix-ui/react-tooltip'

import { cn } from '@/lib/utils'

function TooltipProvider({
  delayDuration = 0,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Provider>) {
  return (
    <TooltipPrimitive.Provider
      data-slot="tooltip-provider"
      delayDuration={delayDuration}
      {...props}
    />
  )
}

function Tooltip({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Root>) {
  return (
    <TooltipProvider>
      <TooltipPrimitive.Root data-slot="tooltip" {...props} />
    </TooltipProvider>
  )
}

function TooltipTrigger({
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Trigger>) {
  return <TooltipPrimitive.Trigger data-slot="tooltip-trigger" {...props} />
}

function TooltipContent({
  className,
  sideOffset = 0,
  children,
  ...props
}: React.ComponentProps<typeof TooltipPrimitive.Content>) {
  return (
    <TooltipPrimitive.Portal>
      <TooltipPrimitive.Content
        data-slot="tooltip-content"
        sideOffset={sideOffset}
        className={cn(
          'bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance',
          className,
        )}
        {...props}
      >
        {children}
        <TooltipPrimitive.Arrow className="bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]" />
      </TooltipPrimitive.Content>
    </TooltipPrimitive.Portal>
  )
}

export { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }



================================================================================
# ARCHIVO: front-end/components/ui/use-mobile.tsx
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-mobile.tsx
================================================================================

import * as React from 'react'

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener('change', onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener('change', onChange)
  }, [])

  return !!isMobile
}



================================================================================
# ARCHIVO: front-end/components/ui/use-toast.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/components/ui/use-toast.ts
================================================================================

'use client'

// Inspired by react-hot-toast library
import * as React from 'react'

import type { ToastActionElement, ToastProps } from '@/components/ui/toast'

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: 'ADD_TOAST',
  UPDATE_TOAST: 'UPDATE_TOAST',
  DISMISS_TOAST: 'DISMISS_TOAST',
  REMOVE_TOAST: 'REMOVE_TOAST',
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType['ADD_TOAST']
      toast: ToasterToast
    }
  | {
      type: ActionType['UPDATE_TOAST']
      toast: Partial<ToasterToast>
    }
  | {
      type: ActionType['DISMISS_TOAST']
      toastId?: ToasterToast['id']
    }
  | {
      type: ActionType['REMOVE_TOAST']
      toastId?: ToasterToast['id']
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: 'REMOVE_TOAST',
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case 'ADD_TOAST':
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case 'UPDATE_TOAST':
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t,
        ),
      }

    case 'DISMISS_TOAST': {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      }
    }
    case 'REMOVE_TOAST':
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, 'id'>

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: 'UPDATE_TOAST',
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })

  dispatch({
    type: 'ADD_TOAST',
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),
  }
}

export { useToast, toast }



================================================================================
# ARCHIVO: front-end/docs/ARQUITECTURA_PROYECTO.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/ARQUITECTURA_PROYECTO.md
================================================================================

# üìê Arquitectura del Proyecto SpeakLexi

## üìã Tabla de Contenidos
1. [Visi√≥n General](#visi√≥n-general)
2. [Estructura del Proyecto](#estructura-del-proyecto)
3. [M√≥dulos del Sistema](#m√≥dulos-del-sistema)
4. [Flujo de Datos](#flujo-de-datos)
5. [Componentes Principales](#componentes-principales)
6. [Rutas y Navegaci√≥n](#rutas-y-navegaci√≥n)
7. [Esquema de Base de Datos](#esquema-de-base-de-datos)
8. [APIs Necesarias para Backend](#apis-necesarias-para-backend)
9. [Autenticaci√≥n y Autorizaci√≥n](#autenticaci√≥n-y-autorizaci√≥n)
10. [Integraci√≥n Frontend-Backend](#integraci√≥n-frontend-backend)

---

## üéØ Visi√≥n General

SpeakLexi es una plataforma de aprendizaje de idiomas gamificada tipo Duolingo, construida con Next.js 15 (App Router), React 19, TypeScript, y Tailwind CSS v4. La arquitectura est√° dise√±ada para ser modular, escalable y f√°cil de integrar con un backend Flask.

### Tecnolog√≠as Frontend
- **Framework**: Next.js 15 (App Router)
- **UI Library**: React 19
- **Lenguaje**: TypeScript
- **Estilos**: Tailwind CSS v4
- **Componentes UI**: shadcn/ui
- **Gesti√≥n de Estado**: React Hooks + localStorage (temporal)
- **Futuro Backend**: Flask + PostgreSQL/Supabase

---

## üìÅ Estructura del Proyecto

\`\`\`
speaklexi/
‚îú‚îÄ‚îÄ app/                          # Rutas de Next.js (App Router)
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # Landing page
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # Layout principal con fuentes
‚îÇ   ‚îú‚îÄ‚îÄ globals.css               # Estilos globales y tokens de dise√±o
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ login/                    # M√≥dulo de Autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ registro/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ verificar-email/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ recuperar-contrasena/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ asignar-nivel/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ correo-enviado/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/                # M√≥dulo Alumno
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Dashboard principal del estudiante
‚îÇ   ‚îú‚îÄ‚îÄ lecciones/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # Lista de lecciones
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx          # Visor de lecci√≥n individual
‚îÇ   ‚îú‚îÄ‚îÄ logros/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Logros y recompensas
‚îÇ   ‚îú‚îÄ‚îÄ clasificacion/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Tabla de clasificaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ progreso/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Progreso detallado del alumno
‚îÇ   ‚îú‚îÄ‚îÄ perfil/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Perfil del usuario
‚îÇ   ‚îú‚îÄ‚îÄ cambiar-curso/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Cambiar curso actual
‚îÇ   ‚îú‚îÄ‚îÄ eliminar-cuenta/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx              # Eliminar cuenta (3 pasos)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ profesor/                 # M√≥dulo Profesor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # Dashboard del profesor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ estadisticas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # Estad√≠sticas generales
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx      # Detalle de alumno individual
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retroalimentacion/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # Gesti√≥n de retroalimentaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ planificacion/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx          # Lista de planificaciones
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ nuevo/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ page.tsx      # Crear nueva planificaci√≥n (3 pasos)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ admin/                    # M√≥dulo Administrador
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # Dashboard del admin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lecciones/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # Gesti√≥n de lecciones
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crear/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx      # Crear nueva lecci√≥n
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ editar/
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ page.tsx  # Editar lecci√≥n existente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ multimedia/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # Biblioteca multimedia
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuarios/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ page.tsx          # Gesti√≥n de usuarios
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ editar/
‚îÇ   ‚îÇ               ‚îî‚îÄ‚îÄ page.tsx  # Editar usuario
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ mantenimiento/            # M√≥dulo Mantenimiento
‚îÇ       ‚îú‚îÄ‚îÄ dashboard/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx          # Dashboard de mantenimiento
‚îÇ       ‚îú‚îÄ‚îÄ reportes/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx          # Lista de reportes de bugs
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx      # Detalle de reporte
‚îÇ       ‚îî‚îÄ‚îÄ tareas/
‚îÇ           ‚îú‚îÄ‚îÄ page.tsx          # Lista de tareas programadas
‚îÇ           ‚îî‚îÄ‚îÄ nueva/
‚îÇ               ‚îî‚îÄ‚îÄ page.tsx      # Crear nueva tarea
‚îÇ
‚îú‚îÄ‚îÄ components/                   # Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ ui/                       # Componentes base de shadcn/ui
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ button.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ input.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dialog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dropdown-menu.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ avatar.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ badge.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ breadcrumb.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ checkbox.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ label.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ radio-group.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ select.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ textarea.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ auth/                     # Componentes de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login-form.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register-form.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ level-assignment-flow.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ password-recovery-form.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/                # Componentes del dashboard alumno
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard-header.tsx  # Header con navegaci√≥n por rol
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ progress-overview.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ streak-card.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quick-actions.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ recent-lessons.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lessons/                  # Componentes de lecciones
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lesson-filters.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lesson-list.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lesson-viewer.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ completion-modal.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ abandon-lesson-modal.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activities/           # Tipos de actividades
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ multiple-choice-activity.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ fill-blank-activity.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ true-false-activity.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ word-order-activity.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ matching-activity.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ listen-repeat-activity.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ translation-activity.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ gamification/             # Componentes de gamificaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ achievements-list.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ level-progress.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rewards-inventory.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leaderboard-table.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ leaderboard-filters.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user-rank-card.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ teacher/                  # Componentes del profesor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ teacher-stats.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ student-performance.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recent-feedback.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quick-teacher-actions.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ create-planning-form.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response-modal.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ admin/                    # Componentes del admin
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin-stats.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recent-lessons.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ media-library-preview.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quick-admin-actions.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ create-lesson-form.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ maintenance/              # Componentes de mantenimiento
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ maintenance-stats.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ recent-reports.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scheduled-tasks.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quick-maintenance-actions.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ create-task-form.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ profile/                  # Componentes de perfil
‚îÇ       ‚îî‚îÄ‚îÄ profile-settings.tsx  # Configuraci√≥n de perfil (role-aware)
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # Scripts SQL para base de datos
‚îÇ   ‚îú‚îÄ‚îÄ 01-create-tables.sql     # Creaci√≥n de tablas
‚îÇ   ‚îî‚îÄ‚îÄ 02-seed-initial-data.sql # Datos iniciales
‚îÇ
‚îú‚îÄ‚îÄ docs/                         # Documentaci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ PROGRESO_IMPLEMENTACION_FINAL.md
‚îÇ   ‚îú‚îÄ‚îÄ CONEXION_INTERFACES_FINAL.md
‚îÇ   ‚îî‚îÄ‚îÄ ARQUITECTURA_PROYECTO.md (este archivo)
‚îÇ
‚îú‚îÄ‚îÄ lib/                          # Utilidades
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts                  # Funci√≥n cn() para clases
‚îÇ
‚îî‚îÄ‚îÄ hooks/                        # Custom hooks
    ‚îú‚îÄ‚îÄ use-mobile.tsx
    ‚îî‚îÄ‚îÄ use-toast.ts
\`\`\`

---

## üß© M√≥dulos del Sistema

### 1. **M√≥dulo de Autenticaci√≥n** üîê
**Prop√≥sito**: Gestionar el acceso y registro de usuarios

**P√°ginas**:
- `/` - Landing page con botones de login/registro
- `/login` - Inicio de sesi√≥n
- `/registro` - Registro de nuevos usuarios
- `/verificar-email` - Verificaci√≥n de correo electr√≥nico
- `/recuperar-contrasena` - Recuperaci√≥n de contrase√±a
- `/asignar-nivel` - Asignaci√≥n de nivel inicial (evaluaci√≥n o manual)
- `/correo-enviado` - Confirmaci√≥n de env√≠o de correo

**Componentes Clave**:
- `components/auth/login-form.tsx` - Formulario de login con usuarios de prueba
- `components/auth/register-form.tsx` - Formulario de registro
- `components/auth/level-assignment-flow.tsx` - Flujo de asignaci√≥n de nivel
- `components/auth/password-recovery-form.tsx` - Recuperaci√≥n de contrase√±a

**Interacciones**:
- Almacena `userRole` y `userName` en `localStorage` tras login exitoso
- Redirige seg√∫n rol:
  - `estudiante` ‚Üí `/dashboard`
  - `profesor` ‚Üí `/profesor/dashboard`
  - `admin` ‚Üí `/admin/dashboard`
  - `mantenimiento` ‚Üí `/mantenimiento/dashboard`

**APIs Necesarias**:
\`\`\`python
POST /api/auth/login
POST /api/auth/register
POST /api/auth/verify-email
POST /api/auth/forgot-password
POST /api/auth/reset-password
POST /api/auth/assign-level
\`\`\`

---

### 2. **M√≥dulo Alumno** üéì
**Prop√≥sito**: Experiencia de aprendizaje gamificada para estudiantes

**P√°ginas**:
- `/dashboard` - Dashboard principal con progreso, racha, acciones r√°pidas
- `/lecciones` - Lista de lecciones con filtros
- `/lecciones/[id]` - Visor de lecci√≥n con actividades interactivas
- `/logros` - Logros desbloqueados y recompensas
- `/clasificacion` - Tabla de clasificaci√≥n (leaderboard)
- `/progreso` - Progreso detallado por curso y lecci√≥n
- `/perfil` - Perfil del usuario con configuraci√≥n
- `/cambiar-curso` - Cambiar curso actual
- `/eliminar-cuenta` - Proceso de eliminaci√≥n de cuenta (3 pasos)

**Componentes Clave**:
- `components/dashboard/dashboard-header.tsx` - Header con navegaci√≥n role-aware
- `components/lessons/lesson-viewer.tsx` - Visor de lecciones con actividades
- `components/lessons/activities/*` - 7 tipos de actividades interactivas
- `components/gamification/*` - Sistema de gamificaci√≥n

**Tipos de Actividades**:
1. **Opci√≥n M√∫ltiple** (`multiple-choice-activity.tsx`)
2. **Completar Espacios** (`fill-blank-activity.tsx`)
3. **Verdadero/Falso** (`true-false-activity.tsx`)
4. **Ordenar Palabras** (`word-order-activity.tsx`)
5. **Emparejar** (`matching-activity.tsx`)
6. **Escuchar y Repetir** (`listen-repeat-activity.tsx`)
7. **Traducci√≥n** (`translation-activity.tsx`)

**Interacciones**:
- Lee `userRole` de `localStorage` para mostrar navegaci√≥n correcta
- Actualiza progreso tras completar actividades
- Calcula XP y actualiza racha diaria
- Desbloquea logros seg√∫n criterios

**APIs Necesarias**:
\`\`\`python
GET /api/student/dashboard
GET /api/student/lessons?course_id=&level=&status=
GET /api/student/lessons/:id
POST /api/student/lessons/:id/complete
GET /api/student/achievements
GET /api/student/leaderboard?period=&course_id=
GET /api/student/progress
PUT /api/student/profile
POST /api/student/change-course
DELETE /api/student/account
\`\`\`

---

### 3. **M√≥dulo Profesor** üë®‚Äçüè´
**Prop√≥sito**: Herramientas para profesores para monitorear y guiar estudiantes

**P√°ginas**:
- `/profesor/dashboard` - Dashboard con estad√≠sticas y acciones r√°pidas
- `/profesor/estadisticas` - Estad√≠sticas generales de estudiantes
- `/profesor/estadisticas/[id]` - Detalle de alumno individual
- `/profesor/retroalimentacion` - Gesti√≥n de retroalimentaci√≥n de estudiantes
- `/profesor/planificacion` - Lista de planificaciones
- `/profesor/planificacion/nuevo` - Crear nueva planificaci√≥n (3 pasos)

**Componentes Clave**:
- `components/teacher/teacher-stats.tsx` - Estad√≠sticas del profesor
- `components/teacher/student-performance.tsx` - Rendimiento de estudiantes
- `components/teacher/create-planning-form.tsx` - Formulario de planificaci√≥n (3 pasos)
- `components/teacher/response-modal.tsx` - Modal para responder retroalimentaci√≥n

**Interacciones**:
- Visualiza estad√≠sticas agregadas de estudiantes
- Exporta reportes en CSV
- Responde a comentarios/preguntas de estudiantes
- Crea planificaciones personalizadas por √°rea de mejora

**APIs Necesarias**:
\`\`\`python
GET /api/teacher/dashboard
GET /api/teacher/statistics
GET /api/teacher/students/:id
GET /api/teacher/feedback
POST /api/teacher/feedback/:id/respond
GET /api/teacher/planning
POST /api/teacher/planning
GET /api/teacher/export/statistics
\`\`\`

---

### 4. **M√≥dulo Administrador** ‚öôÔ∏è
**Prop√≥sito**: Gesti√≥n de contenido, usuarios y configuraci√≥n del sistema

**P√°ginas**:
- `/admin/dashboard` - Dashboard con estad√≠sticas del sistema
- `/admin/lecciones` - Gesti√≥n de lecciones
- `/admin/lecciones/crear` - Crear nueva lecci√≥n
- `/admin/lecciones/[id]/editar` - Editar lecci√≥n existente
- `/admin/multimedia` - Biblioteca multimedia
- `/admin/usuarios` - Gesti√≥n de usuarios
- `/admin/usuarios/[id]/editar` - Editar usuario

**Componentes Clave**:
- `components/admin/admin-stats.tsx` - Estad√≠sticas del sistema
- `components/admin/create-lesson-form.tsx` - Formulario de creaci√≥n de lecciones
- `components/admin/media-library-preview.tsx` - Vista previa de multimedia

**Interacciones**:
- CRUD completo de lecciones y actividades
- Gesti√≥n de usuarios (crear, editar, eliminar, cambiar roles)
- Subida y gesti√≥n de archivos multimedia
- Configuraci√≥n de cursos y niveles

**APIs Necesarias**:
\`\`\`python
GET /api/admin/dashboard
GET /api/admin/lessons
POST /api/admin/lessons
PUT /api/admin/lessons/:id
DELETE /api/admin/lessons/:id
GET /api/admin/media
POST /api/admin/media/upload
DELETE /api/admin/media/:id
GET /api/admin/users
POST /api/admin/users
PUT /api/admin/users/:id
DELETE /api/admin/users/:id
\`\`\`

---

### 5. **M√≥dulo Mantenimiento** üîß
**Prop√≥sito**: Gesti√≥n de reportes de bugs y tareas programadas

**P√°ginas**:
- `/mantenimiento/dashboard` - Dashboard de mantenimiento
- `/mantenimiento/reportes` - Lista de reportes de bugs
- `/mantenimiento/reportes/[id]` - Detalle de reporte individual
- `/mantenimiento/tareas` - Lista de tareas programadas
- `/mantenimiento/tareas/nueva` - Crear nueva tarea

**Componentes Clave**:
- `components/maintenance/maintenance-stats.tsx` - Estad√≠sticas de mantenimiento
- `components/maintenance/recent-reports.tsx` - Reportes recientes
- `components/maintenance/create-task-form.tsx` - Formulario de tareas

**Interacciones**:
- Visualiza y gestiona reportes de bugs
- Asigna prioridades y estados a reportes
- Programa tareas de mantenimiento
- Monitorea salud del sistema

**APIs Necesarias**:
\`\`\`python
GET /api/maintenance/dashboard
GET /api/maintenance/reports
GET /api/maintenance/reports/:id
PUT /api/maintenance/reports/:id
GET /api/maintenance/tasks
POST /api/maintenance/tasks
PUT /api/maintenance/tasks/:id
DELETE /api/maintenance/tasks/:id
\`\`\`

---

## üîÑ Flujo de Datos

### Flujo de Autenticaci√≥n
\`\`\`
1. Usuario ingresa credenciales en /login
2. LoginForm env√≠a datos (actualmente mock)
3. Backend valida credenciales
4. Backend retorna: { user_id, name, email, role, token }
5. Frontend guarda en localStorage:
   - userRole: "estudiante" | "profesor" | "admin" | "mantenimiento"
   - userName: string
   - authToken: string (para futuras peticiones)
6. Redirige seg√∫n rol
\`\`\`

### Flujo de Lecci√≥n
\`\`\`
1. Alumno navega a /lecciones
2. LessonList obtiene lecciones del backend
3. Alumno selecciona lecci√≥n ‚Üí /lecciones/[id]
4. LessonViewer carga lecci√≥n y actividades
5. Alumno completa actividades una por una
6. Al finalizar, se calcula puntuaci√≥n
7. Se env√≠a progreso al backend
8. Backend actualiza:
   - user_progress (lecci√≥n completada)
   - user_stats (XP, racha)
   - achievements (si se desbloquean)
9. Frontend muestra CompletionModal con resultados
\`\`\`

### Flujo de Gamificaci√≥n
\`\`\`
1. Backend calcula XP tras cada lecci√≥n
2. Frontend consulta /api/student/achievements
3. Backend verifica criterios de logros:
   - Lecciones completadas
   - D√≠as consecutivos (racha)
   - Puntuaci√≥n perfecta
   - Tiempo r√©cord
4. Si se desbloquea logro, backend retorna notificaci√≥n
5. Frontend muestra animaci√≥n de logro desbloqueado
6. Leaderboard se actualiza autom√°ticamente
\`\`\`

---

## üé® Componentes Principales

### DashboardHeader (Role-Aware)
**Ubicaci√≥n**: `components/dashboard/dashboard-header.tsx`

**Prop√≥sito**: Header de navegaci√≥n que cambia seg√∫n el rol del usuario

**L√≥gica**:
\`\`\`typescript
const userRole = localStorage.getItem('userRole')

if (userRole === 'estudiante') {
  // Muestra: Dashboard, Lecciones, Logros, Clasificaci√≥n
}
if (userRole === 'profesor') {
  // Muestra: Dashboard, Estad√≠sticas, Retroalimentaci√≥n, Planificaci√≥n
}
if (userRole === 'admin') {
  // Muestra: Dashboard, Lecciones, Biblioteca, Usuarios
}
if (userRole === 'mantenimiento') {
  // Muestra: Dashboard, Reportes, Tareas
}
\`\`\`

**Interacci√≥n con Backend**:
- Necesita endpoint para obtener notificaciones: `GET /api/notifications`
- Necesita endpoint para logout: `POST /api/auth/logout`

---

### LessonViewer
**Ubicaci√≥n**: `components/lessons/lesson-viewer.tsx`

**Prop√≥sito**: Renderiza lecciones con actividades interactivas

**Estructura de Datos Esperada**:
\`\`\`typescript
interface Lesson {
  id: number
  title: string
  description: string
  level: string
  xp_reward: number
  activities: Activity[]
}

interface Activity {
  id: number
  type: 'multiple_choice' | 'fill_blank' | 'true_false' | 
        'word_order' | 'matching' | 'listen_repeat' | 'translation'
  question: string
  options?: string[]  // Para multiple_choice
  correct_answer: string | string[]
  audio_url?: string  // Para listen_repeat
  image_url?: string
  hint?: string
}
\`\`\`

**Flujo**:
1. Recibe `lessonId` de la URL
2. Llama `GET /api/student/lessons/:id`
3. Renderiza actividades seg√∫n `activity.type`
4. Valida respuestas del usuario
5. Calcula puntuaci√≥n final
6. Env√≠a resultados: `POST /api/student/lessons/:id/complete`

---

### ProfileSettings (Role-Aware)
**Ubicaci√≥n**: `components/profile/profile-settings.tsx`

**Prop√≥sito**: Configuraci√≥n de perfil adaptada al rol

**L√≥gica**:
\`\`\`typescript
const userRole = localStorage.getItem('userRole')

// Solo para estudiantes:
if (userRole === 'estudiante') {
  // Muestra: Nivel Actual, Curso Actual, Zona de Peligro
}

// Para profesor, admin, mantenimiento:
// NO muestra: Nivel Actual, Curso Actual, Zona de Peligro
// Solo muestra: Informaci√≥n Personal, Preferencias
\`\`\`

---

## üó∫Ô∏è Rutas y Navegaci√≥n

### Rutas P√∫blicas (No requieren autenticaci√≥n)
- `/` - Landing page
- `/login` - Inicio de sesi√≥n
- `/registro` - Registro
- `/verificar-email` - Verificaci√≥n de email
- `/recuperar-contrasena` - Recuperaci√≥n de contrase√±a
- `/correo-enviado` - Confirmaci√≥n

### Rutas Protegidas por Rol

#### Estudiante (`userRole === 'estudiante'`)
- `/dashboard`
- `/lecciones`
- `/lecciones/[id]`
- `/logros`
- `/clasificacion`
- `/progreso`
- `/perfil`
- `/cambiar-curso`
- `/eliminar-cuenta`

#### Profesor (`userRole === 'profesor'`)
- `/profesor/dashboard`
- `/profesor/estadisticas`
- `/profesor/estadisticas/[id]`
- `/profesor/retroalimentacion`
- `/profesor/planificacion`
- `/profesor/planificacion/nuevo`
- `/perfil`

#### Admin (`userRole === 'admin'`)
- `/admin/dashboard`
- `/admin/lecciones`
- `/admin/lecciones/crear`
- `/admin/lecciones/[id]/editar`
- `/admin/multimedia`
- `/admin/usuarios`
- `/admin/usuarios/[id]/editar`
- `/perfil`

#### Mantenimiento (`userRole === 'mantenimiento'`)
- `/mantenimiento/dashboard`
- `/mantenimiento/reportes`
- `/mantenimiento/reportes/[id]`
- `/mantenimiento/tareas`
- `/mantenimiento/tareas/nueva`
- `/perfil`

---

## üóÑÔ∏è Esquema de Base de Datos

**Ubicaci√≥n**: `scripts/01-create-tables.sql`

### Tablas Principales

#### users
\`\`\`sql
id, email, password_hash, name, role, created_at, last_login, 
email_verified, is_active
\`\`\`

#### courses
\`\`\`sql
id, name, description, language, level, created_at
\`\`\`

#### lessons
\`\`\`sql
id, course_id, title, description, level, order_index, xp_reward, 
estimated_time, created_at
\`\`\`

#### activities
\`\`\`sql
id, lesson_id, type, question, options, correct_answer, hint, 
audio_url, image_url, order_index
\`\`\`

#### user_progress
\`\`\`sql
id, user_id, lesson_id, status, score, attempts, completed_at, 
time_spent
\`\`\`

#### user_stats
\`\`\`sql
id, user_id, course_id, total_xp, current_level, lessons_completed, 
current_streak, longest_streak, last_activity_date
\`\`\`

#### achievements
\`\`\`sql
id, name, description, icon, criteria_type, criteria_value, 
xp_reward, badge_color
\`\`\`

#### user_achievements
\`\`\`sql
id, user_id, achievement_id, unlocked_at, progress
\`\`\`

#### leaderboard
\`\`\`sql
id, user_id, course_id, total_xp, rank, period, updated_at
\`\`\`

#### feedback
\`\`\`sql
id, user_id, teacher_id, lesson_id, comment, rating, status, 
response, created_at, responded_at
\`\`\`

#### planning
\`\`\`sql
id, teacher_id, student_id, title, description, focus_area, 
lessons, start_date, end_date, status, created_at
\`\`\`

#### bug_reports
\`\`\`sql
id, user_id, title, description, severity, status, assigned_to, 
created_at, resolved_at
\`\`\`

#### scheduled_tasks
\`\`\`sql
id, name, description, frequency, last_run, next_run, status, 
created_by
\`\`\`

#### multimedia
\`\`\`sql
id, filename, file_type, file_size, url, uploaded_by, created_at
\`\`\`

**Ver esquema completo en**: `scripts/01-create-tables.sql`

---

## üîå APIs Necesarias para Backend

### Estructura de Respuesta Est√°ndar
\`\`\`python
# √âxito
{
  "success": True,
  "data": {...},
  "message": "Operaci√≥n exitosa"
}

# Error
{
  "success": False,
  "error": "Mensaje de error",
  "code": "ERROR_CODE"
}
\`\`\`

### Endpoints por M√≥dulo

#### Autenticaci√≥n
\`\`\`python
POST   /api/auth/login
POST   /api/auth/register
POST   /api/auth/verify-email
POST   /api/auth/forgot-password
POST   /api/auth/reset-password
POST   /api/auth/assign-level
POST   /api/auth/logout
GET    /api/auth/me  # Obtener usuario actual
\`\`\`

#### Estudiante
\`\`\`python
GET    /api/student/dashboard
GET    /api/student/lessons
GET    /api/student/lessons/:id
POST   /api/student/lessons/:id/complete
GET    /api/student/achievements
GET    /api/student/leaderboard
GET    /api/student/progress
PUT    /api/student/profile
POST   /api/student/change-course
DELETE /api/student/account
POST   /api/student/feedback  # Enviar retroalimentaci√≥n
\`\`\`

#### Profesor
\`\`\`python
GET    /api/teacher/dashboard
GET    /api/teacher/statistics
GET    /api/teacher/students/:id
GET    /api/teacher/feedback
POST   /api/teacher/feedback/:id/respond
GET    /api/teacher/planning
POST   /api/teacher/planning
PUT    /api/teacher/planning/:id
DELETE /api/teacher/planning/:id
GET    /api/teacher/export/statistics  # Exportar CSV
\`\`\`

#### Admin
\`\`\`python
GET    /api/admin/dashboard
GET    /api/admin/lessons
POST   /api/admin/lessons
PUT    /api/admin/lessons/:id
DELETE /api/admin/lessons/:id
GET    /api/admin/media
POST   /api/admin/media/upload
DELETE /api/admin/media/:id
GET    /api/admin/users
POST   /api/admin/users
PUT    /api/admin/users/:id
DELETE /api/admin/users/:id
GET    /api/admin/courses
POST   /api/admin/courses
\`\`\`

#### Mantenimiento
\`\`\`python
GET    /api/maintenance/dashboard
GET    /api/maintenance/reports
GET    /api/maintenance/reports/:id
PUT    /api/maintenance/reports/:id
GET    /api/maintenance/tasks
POST   /api/maintenance/tasks
PUT    /api/maintenance/tasks/:id
DELETE /api/maintenance/tasks/:id
\`\`\`

#### Global
\`\`\`python
GET    /api/notifications  # Notificaciones del usuario
PUT    /api/notifications/:id/read
\`\`\`

---

## üîê Autenticaci√≥n y Autorizaci√≥n

### Flujo de Autenticaci√≥n con Flask

#### 1. Login
\`\`\`python
# Frontend env√≠a:
POST /api/auth/login
{
  "email": "juan@example.com",
  "password": "password123"
}

# Backend responde:
{
  "success": True,
  "data": {
    "user": {
      "id": 1,
      "name": "Juan P√©rez",
      "email": "juan@example.com",
      "role": "estudiante"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}

# Frontend guarda en localStorage:
localStorage.setItem('authToken', data.token)
localStorage.setItem('userRole', data.user.role)
localStorage.setItem('userName', data.user.name)
\`\`\`

#### 2. Peticiones Autenticadas
\`\`\`typescript
// Frontend incluye token en headers:
fetch('/api/student/dashboard', {
  headers: {
    'Authorization': `Bearer ${localStorage.getItem('authToken')}`,
    'Content-Type': 'application/json'
  }
})
\`\`\`

#### 3. Middleware de Autorizaci√≥n (Flask)
\`\`\`python
from functools import wraps
from flask import request, jsonify
import jwt

def token_required(f):
    @wraps(f)
    def decorated(*args, **kwargs):
        token = request.headers.get('Authorization')
        if not token:
            return jsonify({'error': 'Token missing'}), 401
        
        try:
            token = token.split(' ')[1]  # Remove 'Bearer '
            data = jwt.decode(token, app.config['SECRET_KEY'])
            current_user = User.query.get(data['user_id'])
        except:
            return jsonify({'error': 'Token invalid'}), 401
        
        return f(current_user, *args, **kwargs)
    return decorated

def role_required(roles):
    def decorator(f):
        @wraps(f)
        def decorated(current_user, *args, **kwargs):
            if current_user.role not in roles:
                return jsonify({'error': 'Unauthorized'}), 403
            return f(current_user, *args, **kwargs)
        return decorated
    return decorator

# Uso:
@app.route('/api/teacher/dashboard')
@token_required
@role_required(['profesor'])
def teacher_dashboard(current_user):
    # Solo profesores pueden acceder
    pass
\`\`\`

---

## üîó Integraci√≥n Frontend-Backend

### Configuraci√≥n de Variables de Entorno

**Frontend** (`.env.local`):
\`\`\`bash
NEXT_PUBLIC_API_URL=http://localhost:5000/api
SUPABASE_NEXT_PUBLIC_SUPABASE_URL=your_supaSUPABASE_NEXT_PUBLIC_SUPABASE_ANON_KEY_ANON_KEY=your_supabase_key
\`\`\`

**Backend** (`.env`):
\`\`\`bash
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your_secret_key
DATABASE_URL=postgresql://user:password@localhost/speaklexi
JWT_SECRET_KEY=your_jwt_secret
CORS_ORIGINS=http://localhost:3000
\`\`\`

### Cliente API (Frontend)

**Crear**: `lib/api-client.ts`
\`\`\`typescript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api'

export class ApiClient {
  private getHeaders(): HeadersInit {
    const token = localStorage.getItem('authToken')
    return {
      'Content-Type': 'application/json',
      ...(token && { 'Authorization': `Bearer ${token}` })
    }
  }

  async get(endpoint: string) {
    const response = await fetch(`${API_URL}${endpoint}`, {
      headers: this.getHeaders()
    })
    return this.handleResponse(response)
  }

  async post(endpoint: string, data: any) {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: 'POST',
      headers: this.getHeaders(),
      body: JSON.stringify(data)
    })
    return this.handleResponse(response)
  }

  async put(endpoint: string, data: any) {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: 'PUT',
      headers: this.getHeaders(),
      body: JSON.stringify(data)
    })
    return this.handleResponse(response)
  }

  async delete(endpoint: string) {
    const response = await fetch(`${API_URL}${endpoint}`, {
      method: 'DELETE',
      headers: this.getHeaders()
    })
    return this.handleResponse(response)
  }

  private async handleResponse(response: Response) {
    const data = await response.json()
    
    if (!response.ok) {
      throw new Error(data.error || 'Request failed')
    }
    
    return data
  }
}

export const api = new ApiClient()
\`\`\`

**Uso en Componentes**:
\`\`\`typescript
import { api } from '@/lib/api-client'

// En lugar de datos mock:
const lessons = await api.get('/student/lessons?course_id=1')

// Completar lecci√≥n:
await api.post(`/student/lessons/${lessonId}/complete`, {
  score: 95,
  time_spent: 180,
  answers: [...]
})
\`\`\`

### Estructura del Backend Flask

\`\`\`
backend/
‚îú‚îÄ‚îÄ app.py                    # Aplicaci√≥n principal
‚îú‚îÄ‚îÄ config.py                 # Configuraci√≥n
‚îú‚îÄ‚îÄ requirements.txt          # Dependencias
‚îú‚îÄ‚îÄ .env                      # Variables de entorno
‚îÇ
‚îú‚îÄ‚îÄ models/                   # Modelos SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îú‚îÄ‚îÄ course.py
‚îÇ   ‚îú‚îÄ‚îÄ lesson.py
‚îÇ   ‚îú‚îÄ‚îÄ activity.py
‚îÇ   ‚îú‚îÄ‚îÄ progress.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ routes/                   # Blueprints de rutas
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îú‚îÄ‚îÄ student.py
‚îÇ   ‚îú‚îÄ‚îÄ teacher.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py
‚îÇ   ‚îî‚îÄ‚îÄ maintenance.py
‚îÇ
‚îú‚îÄ‚îÄ services/                 # L√≥gica de negocio
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.py
‚îÇ   ‚îú‚îÄ‚îÄ lesson_service.py
‚îÇ   ‚îú‚îÄ‚îÄ gamification_service.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ utils/                    # Utilidades
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ decorators.py         # @token_required, @role_required
‚îÇ   ‚îú‚îÄ‚îÄ validators.py
‚îÇ   ‚îî‚îÄ‚îÄ helpers.py
‚îÇ
‚îî‚îÄ‚îÄ migrations/               # Migraciones de base de datos
    ‚îî‚îÄ‚îÄ ...
\`\`\`

### Ejemplo de Endpoint Flask

\`\`\`python
# routes/student.py
from flask import Blueprint, request, jsonify
from models.lesson import Lesson
from models.user_progress import UserProgress
from utils.decorators import token_required, role_required
from services.gamification_service import GamificationService

student_bp = Blueprint('student', __name__)

@student_bp.route('/lessons', methods=['GET'])
@token_required
@role_required(['estudiante'])
def get_lessons(current_user):
    course_id = request.args.get('course_id')
    level = request.args.get('level')
    status = request.args.get('status')
    
    query = Lesson.query
    
    if course_id:
        query = query.filter_by(course_id=course_id)
    if level:
        query = query.filter_by(level=level)
    
    lessons = query.all()
    
    # Agregar progreso del usuario
    lessons_data = []
    for lesson in lessons:
        progress = UserProgress.query.filter_by(
            user_id=current_user.id,
            lesson_id=lesson.id
        ).first()
        
        lessons_data.append({
            'id': lesson.id,
            'title': lesson.title,
            'description': lesson.description,
            'level': lesson.level,
            'xp_reward': lesson.xp_reward,
            'status': progress.status if progress else 'not_started',
            'score': progress.score if progress else None
        })
    
    return jsonify({
        'success': True,
        'data': lessons_data
    })

@student_bp.route('/lessons/<int:lesson_id>/complete', methods=['POST'])
@token_required
@role_required(['estudiante'])
def complete_lesson(current_user, lesson_id):
    data = request.json
    score = data.get('score')
    time_spent = data.get('time_spent')
    
    # Guardar progreso
    progress = UserProgress(
        user_id=current_user.id,
        lesson_id=lesson_id,
        status='completed',
        score=score,
        time_spent=time_spent
    )
    db.session.add(progress)
    
    # Actualizar estad√≠sticas y gamificaci√≥n
    gamification = GamificationService()
    result = gamification.process_lesson_completion(
        current_user, 
        lesson_id, 
        score
    )
    
    db.session.commit()
    
    return jsonify({
        'success': True,
        'data': {
            'xp_earned': result['xp_earned'],
            'new_achievements': result['new_achievements'],
            'level_up': result['level_up']
        }
    })
\`\`\`

---

## üìä Consideraciones de Rendimiento

### Frontend
- **Code Splitting**: Next.js autom√°ticamente divide el c√≥digo por rutas
- **Lazy Loading**: Componentes pesados se cargan bajo demanda
- **Optimizaci√≥n de Im√°genes**: Usar `next/image` para im√°genes optimizadas
- **Caching**: SWR o React Query para cachear peticiones

### Backend
- **Paginaci√≥n**: Implementar en listas largas (lecciones, usuarios, reportes)
- **√çndices de Base de Datos**: En columnas frecuentemente consultadas
- **Caching**: Redis para datos frecuentemente accedidos (leaderboard, estad√≠sticas)
- **Rate Limiting**: Limitar peticiones por usuario/IP

---

## üöÄ Pr√≥ximos Pasos para Implementaci√≥n Backend

### Fase 1: Setup Inicial
1. Configurar Flask + SQLAlchemy + PostgreSQL
2. Implementar autenticaci√≥n JWT
3. Crear modelos de base de datos
4. Configurar CORS para Next.js

### Fase 2: M√≥dulo Autenticaci√≥n
1. Endpoints de login/registro
2. Verificaci√≥n de email
3. Recuperaci√≥n de contrase√±a
4. Middleware de autorizaci√≥n

### Fase 3: M√≥dulo Alumno
1. Endpoints de lecciones
2. Sistema de progreso
3. Gamificaci√≥n (XP, logros, leaderboard)
4. Perfil de usuario

### Fase 4: M√≥dulos Profesor, Admin, Mantenimiento
1. Estad√≠sticas y reportes
2. Gesti√≥n de contenido
3. Sistema de retroalimentaci√≥n
4. Planificaciones

### Fase 5: Optimizaci√≥n
1. Caching con Redis
2. Subida de archivos multimedia
3. Notificaciones en tiempo real (WebSockets)
4. Tests unitarios e integraci√≥n

---

## üìù Notas Finales

### Estado Actual del Frontend
- ‚úÖ Todas las interfaces implementadas
- ‚úÖ Navegaci√≥n completa entre m√≥dulos
- ‚úÖ Componentes reutilizables y modulares
- ‚úÖ Sistema de roles funcional (localStorage)
- ‚ö†Ô∏è Datos mock (listos para reemplazar con API calls)

### Preparaci√≥n para Backend
- ‚úÖ Esquema de base de datos definido
- ‚úÖ Estructura de APIs documentada
- ‚úÖ Flujos de autenticaci√≥n dise√±ados
- ‚úÖ Cliente API preparado (`lib/api-client.ts`)
- ‚ö†Ô∏è Requiere implementaci√≥n de Flask

### Contacto y Mantenimiento
Para preguntas sobre la arquitectura o implementaci√≥n del backend, referirse a:
- `docs/PROGRESO_IMPLEMENTACION_FINAL.md` - Estado de implementaci√≥n
- `docs/CONEXION_INTERFACES_FINAL.md` - Conexiones entre interfaces
- `scripts/01-create-tables.sql` - Esquema de base de datos completo

---

**√öltima actualizaci√≥n**: 2025
**Versi√≥n del documento**: 1.0
**Autor**: v0 AI Assistant



================================================================================
# ARCHIVO: front-end/docs/AUDITORIA_COMPLETA.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/AUDITORIA_COMPLETA.md
================================================================================

# üîç AUDITOR√çA EXHAUSTIVA - SPEAKLEXI
## Comparaci√≥n Implementaci√≥n vs Especificaciones T√©cnicas

**Fecha de Auditor√≠a:** 19 de Enero de 2025  
**Auditor:** Arquitecto de Software Senior  
**Versi√≥n del Sistema:** 1.0.0  
**Framework:** Next.js 15 + React 19 + TypeScript

---

## üìä RESUMEN EJECUTIVO

### Estado General del Proyecto
- **Completitud Global:** 92%
- **M√≥dulos Implementados:** 5/5
- **Casos de Uso Implementados:** 15/17
- **Componentes de Actividades:** 7/7 ‚úÖ
- **P√°ginas Principales:** 45/48

### Hallazgos Cr√≠ticos
1. ‚úÖ **Fortalezas:** Arquitectura modular bien estructurada, componentes reutilizables, dise√±o consistente
2. ‚ö†Ô∏è **√Åreas de Mejora:** Validaciones de backend pendientes, flujos alternativos sin Supabase
3. üî¥ **Cr√≠tico:** Falta integraci√≥n real con base de datos (actualmente mock data)

---

## üìã M√ìDULO 1: GESTI√ìN DE USUARIOS (UC-01 a UC-07)

### ‚úÖ UC-01: Iniciar Sesi√≥n (RF-01)
**Ubicaci√≥n:** `/app/login/page.tsx` + `/components/auth/login-form.tsx`

#### Implementado Correctamente:
- ‚úÖ Formulario con campos: correo electr√≥nico y contrase√±a
- ‚úÖ Validaci√≥n frontend: formato email, contrase√±a requerida
- ‚úÖ Toggle show/hide password
- ‚úÖ Link "¬øOlvidaste tu contrase√±a?" ‚Üí `/recuperar-contrasena`
- ‚úÖ Link "Crear cuenta nueva" ‚Üí `/registro`
- ‚úÖ Usuarios de prueba funcionales con panel colapsable
- ‚úÖ Auto-cierre del panel al seleccionar usuario
- ‚úÖ Redireccionamiento correcto seg√∫n rol:
  - `estudiante@speaklexi.com` ‚Üí `/dashboard`
  - `profesor@speaklexi.com` ‚Üí `/profesor/dashboard`
  - `admin@speaklexi.com` ‚Üí `/admin/dashboard`
  - `mantenimiento@speaklexi.com` ‚Üí `/mantenimiento/dashboard`
- ‚úÖ Almacenamiento en localStorage: `userRole`, `userName`, `userEmail`

#### Pendiente:
- ‚ö†Ô∏è Validaci√≥n de contrase√±a m√≠nimo 6 caracteres (solo verifica que no est√© vac√≠o)
- ‚ö†Ô∏è Manejo de errores con Supabase: credenciales incorrectas, cuenta no verificada
- ‚ö†Ô∏è Token real de autenticaci√≥n (actualmente mock)

**API Requerida:**
\`\`\`typescript
POST /api/auth/login
Body: { correo: string, contrasena: string }
Response: { 
  success: boolean, 
  data: { 
    user: { id, nombre, correo, rol, nivel },
    token: string 
  }, 
  message: string 
}
\`\`\`

**Estado:** üü¢ 85% Completo

---

### ‚úÖ UC-02: Recuperar Contrase√±a (RF-02)
**Ubicaci√≥n:** `/app/recuperar-contrasena/page.tsx` + componentes relacionados

#### PASO 1 - Solicitar Enlace:
- ‚úÖ Campo: correo electr√≥nico
- ‚úÖ Bot√≥n "Enviar enlace de recuperaci√≥n"
- ‚úÖ Link "‚Üê Volver al inicio de sesi√≥n"
- ‚úÖ Validaci√≥n: formato de email
- ‚ö†Ô∏è Manejo de error: correo no registrado (pendiente integraci√≥n)

#### PASO 2 - Correo Enviado:
- ‚úÖ P√°gina `/app/correo-enviado/page.tsx` existe
- ‚úÖ Icono CheckCircle (verde)
- ‚úÖ T√≠tulo: "Revisa tu correo"
- ‚úÖ Instrucciones numeradas
- ‚úÖ Link "Reenviar enlace"
- ‚úÖ Nota: "El enlace expirar√° en 24 horas"

#### PASO 3 - Restablecer Contrase√±a:
- ‚úÖ P√°gina `/app/restablecer-contrasena/page.tsx` existe
- ‚úÖ Campo: Nueva contrase√±a
- ‚úÖ Campo: Confirmar contrase√±a
- ‚úÖ Panel de requisitos con indicadores visuales:
  - ‚úÖ M√≠nimo 8 caracteres
  - ‚úÖ Al menos una may√∫scula
  - ‚úÖ Al menos una min√∫scula
  - ‚úÖ Al menos un n√∫mero
- ‚úÖ Bot√≥n "Actualizar contrase√±a"
- ‚ö†Ô∏è Validaci√≥n de token (pendiente backend)

**APIs Requeridas:**
\`\`\`typescript
POST /api/auth/request-password-reset
Body: { correo: string }

GET /api/auth/validate-reset-token?token=xxx
Response: { valid: boolean, expiresAt: string }

POST /api/auth/reset-password
Body: { token: string, nuevaContrasena: string }
\`\`\`

**Estado:** üü¢ 80% Completo

---

### ‚úÖ UC-03: Autenticar Usuario (RF-03)
**Ubicaci√≥n:** `/app/verificar-email/page.tsx` + `/components/auth/verify-email-form.tsx`

#### Implementado:
- ‚úÖ 6 campos individuales para c√≥digo OTP
- ‚úÖ Auto-focus en siguiente campo al escribir
- ‚úÖ Temporizador: "Reenviar en 00:59"
- ‚úÖ Link "¬øNo recibiste el c√≥digo? Reenviar"
- ‚úÖ Bot√≥n "Verificar" (activo solo con 6 d√≠gitos)
- ‚ö†Ô∏è Manejo de errores: c√≥digo incorrecto, c√≥digo expirado (mock)
- ‚úÖ Redireccionamiento tras verificaci√≥n exitosa

**APIs Requeridas:**
\`\`\`typescript
POST /api/auth/verify-email
Body: { correo: string, codigo: string }

POST /api/auth/resend-verification
Body: { correo: string }
\`\`\`

**Estado:** üü¢ 85% Completo

---

### ‚úÖ UC-04: Registrar Usuario (RF-04)
**Ubicaci√≥n:** `/app/registro/page.tsx` + `/components/auth/register-form.tsx`

#### Implementado:
- ‚úÖ Campo: Nombre completo (placeholder: "Juan P√©rez")
- ‚úÖ Campo: Correo electr√≥nico
- ‚úÖ Campo: Contrase√±a (con toggle show/hide)
- ‚úÖ Campo: Confirmar contrase√±a
- ‚úÖ Validaci√≥n: contrase√±as coinciden
- ‚úÖ Validaci√≥n: contrase√±a m√≠nimo 8 caracteres
- ‚ö†Ô∏è Panel de requisitos de contrase√±a con indicadores din√°micos (falta implementar)
- ‚úÖ Bot√≥n "Crear cuenta"
- ‚úÖ Link "Iniciar sesi√≥n" (si ya tiene cuenta)
- ‚úÖ Footer con t√©rminos y condiciones
- ‚úÖ Redireccionamiento a verificaci√≥n tras registro
- ‚ö†Ô∏è Manejo de error: correo ya registrado (pendiente backend)

**Mejoras Necesarias:**
\`\`\`typescript
// Agregar panel de requisitos din√°mico en register-form.tsx
const passwordRequirements = [
  { text: "M√≠nimo 8 caracteres", met: password.length >= 8 },
  { text: "Al menos una may√∫scula", met: /[A-Z]/.test(password) },
  { text: "Al menos una min√∫scula", met: /[a-z]/.test(password) },
  { text: "Al menos un n√∫mero", met: /\d/.test(password) }
]
\`\`\`

**API Requerida:**
\`\`\`typescript
POST /api/users/register
Body: { nombre: string, correo: string, contrasena: string }
Response: { 
  success: boolean, 
  data: { 
    idUsuario: number, 
    estadoCuenta: "pendiente_verificacion" 
  }
}
\`\`\`

**Estado:** üü° 75% Completo

---

### ‚úÖ UC-05: Asignar Nivel (RF-05)
**Ubicaci√≥n:** `/app/asignar-nivel/page.tsx` + `/components/auth/level-assignment-flow.tsx`

#### PASO 1 - Bienvenida:
- ‚úÖ T√≠tulo: "¬°Bienvenido, [Nombre]!"
- ‚úÖ Card con 2 opciones:
  - ‚úÖ Opci√≥n 1: "Realizar evaluaci√≥n" (recomendado) - ~5 minutos
  - ‚úÖ Opci√≥n 2: "Seleccionar nivel manualmente"
- ‚úÖ Bot√≥n "Continuar"

#### PASO 2 - Evaluaci√≥n:
- ‚úÖ Barra de progreso: "Pregunta X de 10"
- ‚úÖ Preguntas de evaluaci√≥n cargadas din√°micamente
- ‚úÖ 4 opciones de respuesta (cards clickeables)
- ‚úÖ Botones: "Anterior" | "Siguiente"
- ‚ö†Ô∏è Contador de tiempo opcional (no implementado)

#### PASO 3 - Resultados:
- ‚úÖ Icono Award/Trophy
- ‚úÖ T√≠tulo: "¬°Evaluaci√≥n completada!"
- ‚úÖ Card con nivel asignado, puntaje, porcentaje
- ‚úÖ Descripci√≥n del nivel
- ‚úÖ Bot√≥n "Comenzar a aprender"
- ‚úÖ Link "No estoy de acuerdo con mi nivel"

#### Selecci√≥n Manual:
- ‚úÖ Cards de niveles: Principiante (A1-A2), Intermedio (B1-B2), Avanzado (C1-C2)
- ‚úÖ Descripci√≥n de cada nivel
- ‚úÖ Bot√≥n "Confirmar nivel"

**APIs Requeridas:**
\`\`\`typescript
POST /api/users/evaluation/start
Response: { evaluacionId: number, preguntas: Array }

POST /api/users/evaluation/submit
Body: { evaluacionId: number, respuestas: Array }
Response: { nivel: string, puntaje: number, porcentaje: number }

PUT /api/users/{idUsuario}/nivel
Body: { nivel: string, metodo: "evaluacion" | "manual" }
\`\`\`

**Estado:** üü¢ 90% Completo

---

### ‚úÖ UC-06: Cambiar Curso (RF-06)
**Ubicaci√≥n:** `/app/cambiar-curso/page.tsx`

#### Implementado:
- ‚úÖ P√°gina dedicada con t√≠tulo "Cambiar Curso"
- ‚úÖ Grid de cards de cursos disponibles:
  - ‚úÖ Ingl√©s (con bandera/icono)
  - ‚úÖ Franc√©s
  - ‚úÖ Alem√°n
  - ‚úÖ Italiano
  - ‚úÖ Portugu√©s
  - ‚úÖ Japon√©s
- ‚úÖ Badge "Actual" en el curso activo
- ‚úÖ Cada card clickeable con hover effects
- ‚úÖ Bot√≥n "Confirmar cambio"
- ‚úÖ Bot√≥n "Volver al perfil"
- ‚úÖ Advertencia: "Tu progreso actual se guardar√°"
- ‚ö†Ô∏è Manejo de error: curso no disponible (pendiente backend)

**Mejora Sugerida:**
Convertir a modal en lugar de p√°gina completa para mejor UX.

**API Requerida:**
\`\`\`typescript
PUT /api/users/{idUsuario}/curso
Body: { cursoActual: string }
Response: { success: boolean, message: string }
\`\`\`

**Estado:** üü¢ 85% Completo

---

### ‚úÖ UC-07: Eliminar Cuenta (RF-07)
**Ubicaci√≥n:** `/app/eliminar-cuenta/page.tsx`

#### PASO 1 - Confirmaci√≥n:
- ‚úÖ T√≠tulo: "Eliminar cuenta" (texto rojo)
- ‚úÖ Icono AlertTriangle (rojo)
- ‚úÖ Texto de advertencia: "Esta acci√≥n es permanente e irreversible"
- ‚úÖ Lista de lo que se eliminar√° (progreso, recompensas, datos)
- ‚úÖ Checkbox: "Entiendo que esta acci√≥n es permanente"
- ‚úÖ Campo: "Escribe tu contrase√±a para confirmar"
- ‚úÖ Botones: "Cancelar" | "Eliminar mi cuenta" (danger, deshabilitado hasta confirmar)

#### PASO 2 - Confirmaci√≥n Final:
- ‚úÖ T√≠tulo: "¬øEst√°s completamente seguro?"
- ‚úÖ Campo: "Escribe ELIMINAR para confirmar"
- ‚úÖ Botones: "No, mantener mi cuenta" | "S√≠, eliminar permanentemente"

#### PASO 3 - Cuenta Eliminada:
- ‚úÖ Icono CheckCircle
- ‚úÖ T√≠tulo: "Cuenta eliminada"
- ‚úÖ Mensaje de despedida
- ‚úÖ Bot√≥n: "Volver a inicio"
- ‚úÖ Redireccionamiento a `/`
- ‚úÖ Limpieza de localStorage

**API Requerida:**
\`\`\`typescript
DELETE /api/users/{idUsuario}
Body: { contrasena: string, confirmacion: "ELIMINAR" }
Response: { success: boolean, message: string }
\`\`\`

**Estado:** üü¢ 95% Completo

---

## üìö M√ìDULO 2: GESTI√ìN DE LECCIONES Y CONTENIDOS (UC-08 a UC-09)

### ‚úÖ UC-08: Crear Nuevas Lecciones (RF-08)
**Ubicaci√≥n:** `/app/admin/lecciones/crear/page.tsx` + `/components/admin/create-lesson-form.tsx`

#### PASO 1 - Datos B√°sicos:
- ‚úÖ Breadcrumb: "Admin > Lecciones > Crear nueva"
- ‚úÖ T√≠tulo: "Nueva lecci√≥n"
- ‚úÖ Campo: T√≠tulo de la lecci√≥n* (placeholder correcto)
- ‚úÖ Select: Idioma* (Ingl√©s, Franc√©s, Alem√°n, etc.)
- ‚úÖ Select: Nivel* (Principiante, Intermedio, Avanzado)
- ‚úÖ Textarea: Descripci√≥n
- ‚úÖ Tags: Etiquetas (opcional)
- ‚úÖ Barra de progreso: "Paso 1 de 3"
- ‚úÖ Botones: "Cancelar" | "Siguiente"

#### PASO 2 - Agregar Actividades:
- ‚úÖ T√≠tulo: "Agregar actividades"
- ‚úÖ Lista de actividades agregadas
- ‚úÖ Bot√≥n: "+ Agregar actividad"
- ‚úÖ Modal para agregar actividad con:
  - ‚úÖ Select: Tipo de actividad (7 tipos disponibles)
  - ‚úÖ Campo: Pregunta/Instrucci√≥n
  - ‚úÖ Campos din√°micos seg√∫n tipo
  - ‚úÖ Botones: "Cancelar" | "Agregar"
- ‚úÖ Cada actividad muestra: tipo, pregunta, botones "Editar" | "Eliminar"
- ‚ö†Ô∏è Drag handle para reordenar actividades (no implementado)
- ‚úÖ Barra de progreso: "Paso 2 de 3"
- ‚úÖ Botones: "Anterior" | "Siguiente"

#### PASO 3 - Multimedia:
- ‚úÖ T√≠tulo: "Recursos multimedia (opcional)"
- ‚úÖ √Årea drag & drop: "Arrastra archivos aqu√≠"
- ‚úÖ Texto: "Formatos aceptados: JPG, PNG, MP3, MP4"
- ‚úÖ Texto: "Tama√±o m√°ximo: 10MB"
- ‚úÖ Lista de archivos subidos con preview
- ‚úÖ Barra de progreso: "Paso 3 de 3"
- ‚úÖ Botones: "Anterior" | "Guardar borrador" | "Publicar lecci√≥n"

#### Vista Previa:
- ‚ö†Ô∏è Modal fullscreen de vista previa (no implementado)

**Mejora Necesaria:**
\`\`\`typescript
// Agregar drag & drop para reordenar actividades
import { DndContext, closestCenter } from '@dnd-kit/core'
import { SortableContext, verticalListSortingStrategy } from '@dnd-kit/sortable'
\`\`\`

**API Requerida:**
\`\`\`typescript
POST /api/lessons
Body: { 
  titulo: string, 
  idioma: string, 
  nivel: string, 
  descripcion: string, 
  etiquetas: string[], 
  actividades: Array<Activity>, 
  estado: "borrador" | "publicada" 
}
Response: { success: boolean, data: { idLeccion: number } }
\`\`\`

**Estado:** üü° 80% Completo

---

### ‚úÖ UC-09: Agregar Multimedia (RF-09)
**Ubicaci√≥n:** `/app/admin/lecciones/[id]/multimedia/page.tsx` (no existe a√∫n)

#### Pendiente de Implementaci√≥n:
- ‚ùå Breadcrumb: "Admin > Lecciones > [T√≠tulo] > Multimedia"
- ‚ùå Card de informaci√≥n de la lecci√≥n (resumen)
- ‚ùå √Årea de carga drag & drop
- ‚ùå Bot√≥n: "Seleccionar archivos"
- ‚ùå Grid de recursos existentes
- ‚ùå Filtros: Por tipo, b√∫squeda por nombre
- ‚ùå Modal de vista previa seg√∫n tipo de archivo
- ‚ùå Validaci√≥n: formato v√°lido, tama√±o m√°ximo 10MB

**P√°gina a Crear:**
\`\`\`typescript
// app/admin/lecciones/[id]/multimedia/page.tsx
export default function LessonMultimediaPage({ params }: { params: { id: string } })
\`\`\`

**APIs Requeridas:**
\`\`\`typescript
POST /api/lessons/{idLeccion}/multimedia (multipart/form-data)
GET /api/lessons/{idLeccion}/multimedia?tipo=imagen
DELETE /api/lessons/{idLeccion}/multimedia/{idRecurso}
\`\`\`

**Estado:** üî¥ 0% Completo - PENDIENTE

---

## üéì M√ìDULO 3: GESTI√ìN DEL APRENDIZAJE (UC-10 a UC-12)

### ‚úÖ UC-10: Registrar Progreso (RF-10)
**Ubicaci√≥n:** `/app/lecciones/[id]/page.tsx` + `/components/lessons/lesson-viewer.tsx`

#### Implementado:
- ‚úÖ Header de lecci√≥n: t√≠tulo, barra de progreso, bot√≥n "Salir"
- ‚úÖ Card de actividad actual: n√∫mero, tipo, pregunta, √°rea de respuesta
- ‚úÖ Botones: "Anterior" | "Verificar respuesta" / "Siguiente"
- ‚úÖ Sidebar colapsable con lista de actividades: ‚úì Completada, ‚äô Actual, ‚óã Pendiente
- ‚úÖ Notificaci√≥n de respuesta: correcta (verde ‚úì), incorrecta (rojo ‚úó + explicaci√≥n)
- ‚úÖ Modal de finalizaci√≥n con: icono Trophy, "¬°Lecci√≥n completada!", resumen
- ‚úÖ Botones: "Ver resultados detallados" | "Siguiente lecci√≥n" | "Volver al dashboard"
- ‚úÖ Modal "¬øGuardar progreso?" al abandonar lecci√≥n
- ‚ö†Ô∏è Guardado local si sin conexi√≥n (no implementado)

#### 7 TIPOS DE ACTIVIDADES - TODOS IMPLEMENTADOS ‚úÖ:
1. ‚úÖ `multiple-choice-activity.tsx` - Opci√≥n m√∫ltiple
2. ‚úÖ `fill-blank-activity.tsx` - Completar espacios
3. ‚úÖ `true-false-activity.tsx` - Verdadero/Falso
4. ‚úÖ `word-order-activity.tsx` - Ordenar palabras
5. ‚úÖ `matching-activity.tsx` - Emparejar
6. ‚úÖ `listen-repeat-activity.tsx` - Escuchar y repetir
7. ‚úÖ `translation-activity.tsx` - Traducci√≥n

**APIs Requeridas:**
\`\`\`typescript
POST /api/progress/start
Body: { idUsuario: number, idLeccion: number }
Response: { idProgreso: number, actividades: Array }

POST /api/progress/activity
Body: { idProgreso: number, idActividad: number, respuesta: any, correcta: boolean }

POST /api/progress/complete
Body: { idProgreso: number, puntaje: number, tiempoTotal: number }
Response: { xpGanado: number, recompensas: Array }

POST /api/progress/sync (sincronizaci√≥n local)
Body: { progresoLocal: Array }
\`\`\`

**Estado:** üü¢ 90% Completo

---

### ‚úÖ UC-11: Otorgar Recompensas (RF-11)
**Ubicaci√≥n:** Componente emergente + `/app/logros/page.tsx`

#### Notificaci√≥n Emergente:
- ‚ö†Ô∏è Animaci√≥n de aparici√≥n desde abajo (no implementado como toast)
- ‚ö†Ô∏è Card con fondo degradado (no implementado)
- ‚ö†Ô∏è Icono animado seg√∫n tipo (no implementado)
- ‚ö†Ô∏è T√≠tulo: "¬°Nueva recompensa!" (no implementado)

**Componente a Crear:**
\`\`\`typescript
// components/gamification/reward-notification.tsx
export function RewardNotification({ reward, onClose })
\`\`\`

#### P√°gina de Logros:
- ‚úÖ Header: t√≠tulo "Mis logros"
- ‚úÖ Stats cards: total insignias, puntos XP, racha actual, nivel actual
- ‚úÖ Tabs: "Insignias" | "Recompensas" | "Historial"
- ‚úÖ Grid de insignias con: imagen, nombre, descripci√≥n, estado
- ‚úÖ Filtros: "Todas", "Desbloqueadas", "Bloqueadas", Por categor√≠a
- ‚ö†Ô∏è Modal de detalle al hacer click en insignia (no implementado)

#### Reglas de Recompensas (seg√∫n doc):
- ‚ö†Ô∏è Primera lecci√≥n completada ‚Üí Insignia "Primer paso" (l√≥gica pendiente)
- ‚ö†Ô∏è 5 lecciones seguidas ‚Üí Insignia "Estudiante dedicado" (l√≥gica pendiente)
- ‚ö†Ô∏è 7 d√≠as de racha ‚Üí Insignia "Semana perfecta" (l√≥gica pendiente)
- ‚ö†Ô∏è 80% de aciertos ‚Üí +10 monedas bonus (l√≥gica pendiente)
- ‚ö†Ô∏è Nivel completado ‚Üí +100 XP (l√≥gica pendiente)
- ‚ö†Ô∏è 100 actividades ‚Üí Insignia "Centuri√≥n" (l√≥gica pendiente)

**APIs Requeridas:**
\`\`\`typescript
POST /api/gamification/evaluate
Body: { idUsuario: number, evento: string, datos: any }
Response: { recompensas: Array<Reward> }

GET /api/users/{idAlumno}/achievements
Response: { insignias: Array, recompensas: Array, historial: Array }
\`\`\`

**Estado:** üü° 70% Completo

---

### ‚úÖ UC-12: Generar Tablas de Clasificaci√≥n (RF-12)
**Ubicaci√≥n:** `/app/clasificacion/page.tsx` + componentes

#### Implementado:
- ‚úÖ Header: t√≠tulo "Tabla de clasificaci√≥n"
- ‚úÖ Tabs/Filtros: "Global" | "Amigos" | "Mi curso"
- ‚úÖ Period selector: "Esta semana" | "Este mes" | "Todo el tiempo"
- ‚úÖ Card de posici√≥n del usuario (sticky top) destacada
- ‚úÖ Top 3 con dise√±o especial (podio): #1 corona dorada, #2 plateada, #3 bronce
- ‚úÖ Del #4 en adelante: posici√≥n, avatar, nombre, nivel/curso, puntos XP
- ‚úÖ Links clickeables a perfiles de usuarios
- ‚ö†Ô∏è Infinite scroll para cargar m√°s (no implementado)
- ‚úÖ Empty state si no hay datos
- ‚úÖ Vista amigos con mensaje si no tiene

**Mejora Necesaria:**
\`\`\`typescript
// Agregar infinite scroll
import { useInfiniteQuery } from '@tanstack/react-query'
import { useInView } from 'react-intersection-observer'
\`\`\`

**API Requerida:**
\`\`\`typescript
GET /api/leaderboard?periodo=semana&tipo=global&limit=100&offset=0
Response: { 
  usuarios: Array<{
    posicion: number,
    idUsuario: number,
    nombre: string,
    avatar: string,
    nivel: string,
    curso: string,
    puntos: number,
    insigniaEspecial?: string
  }>,
  total: number,
  usuarioActual: { posicion: number, puntos: number }
}
\`\`\`

**Estado:** üü¢ 85% Completo

---

## üë®‚Äçüè´ M√ìDULO 4: GESTI√ìN DE DESEMPE√ëO Y RETROALIMENTACI√ìN (UC-13 a UC-15)

### ‚úÖ UC-13: Consultar Estad√≠sticas de Progreso (RF-13)
**Ubicaci√≥n:** `/app/profesor/estadisticas/page.tsx`

#### Implementado:
- ‚úÖ Header: t√≠tulo "Estad√≠sticas de alumnos"
- ‚ö†Ô∏è Filtros: select curso, select nivel, date range picker (solo b√∫squeda)
- ‚úÖ Bot√≥n: "Exportar reporte" (CSV funcional)
- ‚ö†Ô∏è Cards de resumen (KPIs) - datos mock
- ‚ö†Ô∏è Gr√°ficas (no implementadas):
  - ‚ùå Progreso general (Line chart)
  - ‚ùå Actividades por tipo (Pie chart)
  - ‚ùå Desempe√±o por lecci√≥n (Bar chart)
- ‚úÖ Tabla de alumnos: nombre, nivel, progreso %, lecciones completadas, √∫ltima actividad
- ‚úÖ Links a detalle individual: `/profesor/estadisticas/[id]`
- ‚ö†Ô∏è Ordenable por columnas (no implementado)
- ‚ö†Ô∏è Paginaci√≥n (no implementada)
- ‚úÖ Modal de detalle de alumno con info completa

**Componentes a Agregar:**
\`\`\`typescript
// Usar Recharts para gr√°ficas
import { LineChart, PieChart, BarChart } from 'recharts'
\`\`\`

**API Requerida:**
\`\`\`typescript
GET /api/statistics/alumnos?curso=ingles&nivel=intermedio&desde=2025-10-01&hasta=2025-10-18
Response: {
  resumen: {
    totalAlumnos: number,
    promedioProgreso: number,
    tasaCompletacion: number,
    tiempoPromedio: number
  },
  graficas: {
    progresoGeneral: Array,
    actividadesPorTipo: Array,
    desempenoPorLeccion: Array
  },
  alumnos: Array
}
\`\`\`

**Estado:** üü° 70% Completo

---

### ‚úÖ UC-14: Revisar Retroalimentaci√≥n (RF-14)
**Ubicaci√≥n:** `/app/profesor/retroalimentacion/page.tsx` + `/components/teacher/response-modal.tsx`

#### Implementado:
- ‚úÖ Header: t√≠tulo "Retroalimentaci√≥n de alumnos", badge "3 nuevos"
- ‚ö†Ô∏è Filtros: por lecci√≥n, por alumno, por fecha (UI presente, funcionalidad mock)
- ‚úÖ Lista de comentarios (cards): avatar, nombre, lecci√≥n, fecha, comentario, tags
- ‚úÖ Estado ("Nuevo", "En revisi√≥n", "Resuelto")
- ‚úÖ Botones "Responder" | "Marcar como resuelto"
- ‚úÖ Panel lateral con estad√≠sticas
- ‚úÖ Modal de respuesta: comentario original, textarea, checkbox, botones
- ‚úÖ Empty state: "No hay comentarios a√∫n"
- ‚úÖ Manejo de acceso denegado

**APIs Requeridas:**
\`\`\`typescript
GET /api/teacher/feedback?leccion=5&alumno=juan&desde=2025-01-01
Response: {
  comentarios: Array<{
    id: number,
    alumno: { nombre, avatar },
    leccion: { id, titulo },
    mensaje: string,
    tipo: "duda" | "sugerencia" | "error",
    estado: "nuevo" | "en_revision" | "resuelto",
    fecha: string
  }>,
  estadisticas: {
    total: number,
    pendientes: number,
    promedioTiempoRespuesta: string,
    temasMasComentados: Array
  }
}

POST /api/teacher/feedback/:id/respond
Body: { respuesta: string, marcarResuelto: boolean }
\`\`\`

**Estado:** üü¢ 90% Completo

---

### ‚úÖ UC-15: Planificar Nuevos Contenidos (RF-15)
**Ubicaci√≥n:** `/app/profesor/planificacion/page.tsx` + `/app/profesor/planificacion/nuevo/page.tsx`

#### Lista de Planificaciones:
- ‚úÖ Header: t√≠tulo "Planificaci√≥n de contenidos", bot√≥n "+ Nuevo plan"
- ‚úÖ Dashboard de estad√≠sticas
- ‚úÖ Lista de planes existentes (cards): t√≠tulo, curso/nivel, √°reas objetivo, lecciones
- ‚úÖ Estado ("Borrador", "Activo", "Completado")
- ‚úÖ Botones "Ver" | "Editar" | "Eliminar"

#### Formulario: Crear Nuevo Plan (3 Pasos):
- ‚úÖ PASO 1 - Informaci√≥n B√°sica:
  - ‚úÖ Campo: T√≠tulo del plan*
  - ‚úÖ Select: Curso*
  - ‚úÖ Select: Nivel*
  - ‚úÖ Textarea: Descripci√≥n
  - ‚úÖ MultiSelect: √Åreas de mejora objetivo
  - ‚úÖ Bot√≥n: "Siguiente"

- ‚úÖ PASO 2 - An√°lisis de Desempe√±o:
  - ‚úÖ Panel autom√°tico con lecciones con menor desempe√±o
  - ‚úÖ Checkbox: Seleccionar lecciones a reforzar
  - ‚úÖ Bot√≥n: "Analizar" ‚Üí Sistema sugiere contenidos
  - ‚úÖ Sugerencias autom√°ticas
  - ‚úÖ Bot√≥n: "Siguiente"
  - ‚úÖ Empty state si datos insuficientes

- ‚úÖ PASO 3 - Lecciones Asociadas:
  - ‚úÖ B√∫squeda de lecciones existentes
  - ‚úÖ Lista de lecciones: checkbox, t√≠tulo, nivel, estad√≠sticas
  - ‚úÖ Opci√≥n: "Crear nueva lecci√≥n desde aqu√≠"
  - ‚ö†Ô∏è Drag & drop para ordenar (no implementado)
  - ‚úÖ Bot√≥n: "Guardar plan"

- ‚úÖ Modal de Confirmaci√≥n:
  - ‚úÖ Resumen del plan creado
  - ‚úÖ Botones: "Activar plan ahora" | "Guardar como borrador"

**APIs Requeridas:**
\`\`\`typescript
POST /api/planning/planes
Body: {
  titulo: string,
  curso: string,
  nivel: string,
  descripcion: string,
  areasObjetivo: string[],
  leccionesAsociadas: number[],
  estado: "borrador" | "activo"
}

GET /api/planning/analisis?curso=ingles&nivel=intermedio
Response: {
  leccionesBajoDesempeno: Array,
  actividadesConErrores: Array,
  temasRetroalimentacion: Array,
  sugerencias: Array
}
\`\`\`

**Estado:** üü¢ 85% Completo

---

## üîß M√ìDULO 5: GESTI√ìN DE SOPORTE Y MANTENIMIENTO (UC-16 a UC-17)

### ‚úÖ UC-16: Consultar Reportes de Fallas (RF-16)
**Ubicaci√≥n:** `/app/mantenimiento/reportes/page.tsx` + `/app/mantenimiento/reportes/[id]/page.tsx`

#### Lista de Reportes:
- ‚úÖ Header: t√≠tulo "Reportes de fallas", badge "5 nuevos"
- ‚úÖ Filtros: estados, m√≥dulos, date range
- ‚ö†Ô∏è Bot√≥n: "Exportar CSV" (no implementado)
- ‚úÖ Cards de resumen: total reportes, activos, tiempo promedio, cr√≠ticos
- ‚úÖ Tabla de reportes: ID, fecha, m√≥dulo, descripci√≥n, severidad, estado
- ‚ö†Ô∏è Ordenable por columnas (no implementado)
- ‚úÖ B√∫squeda por texto
- ‚ö†Ô∏è Paginaci√≥n (no implementada)
- ‚úÖ Color coding por severidad
- ‚úÖ Empty state
- ‚úÖ Links a detalle: `/mantenimiento/reportes/[id]`

#### Modal de Detalle:
- ‚úÖ ID del reporte, fecha/hora completa, usuario que report√≥
- ‚úÖ M√≥dulo y funcionalidad afectada
- ‚úÖ Descripci√≥n completa del problema
- ‚úÖ Pasos para reproducir
- ‚ö†Ô∏è Screenshots/evidencia (no implementado)
- ‚ö†Ô∏è Log t√©cnico (no implementado)
- ‚ö†Ô∏è Historial de cambios de estado (no implementado)
- ‚ö†Ô∏è Comentarios internos (no implementado)
- ‚ö†Ô∏è Formulario: "Agregar comentario" (no implementado)
- ‚ö†Ô∏è Select: Cambiar estado (no implementado)
- ‚ö†Ô∏è Select: Asignar a personal (no implementado)

**APIs Requeridas:**
\`\`\`typescript
GET /api/maintenance/reportes?estado=nuevo&modulo=lecciones&limite=50
Response: {
  reportes: Array<{
    id: number,
    fecha: string,
    modulo: string,
    descripcion: string,
    severidad: "alta" | "media" | "baja",
    estado: "pendiente" | "en_revision" | "en_progreso" | "resuelto",
    reportadoPor: { nombre, email },
    asignadoA?: string
  }>,
  estadisticas: {
    total: number,
    activos: number,
    tiempoPromedioResolucion: string,
    criticos: number
  }
}

GET /api/maintenance/reportes/{idReporte}
PUT /api/maintenance/reportes/{idReporte}
Body: { estado, comentario, asignadoA }
\`\`\`

**Estado:** üü° 75% Completo

---

### ‚úÖ UC-17: Programar Tareas (RF-17)
**Ubicaci√≥n:** `/app/mantenimiento/tareas/page.tsx` + `/app/mantenimiento/tareas/nueva/page.tsx`

#### Vista de Calendario/Lista:
- ‚úÖ Header: t√≠tulo "Tareas de mantenimiento", bot√≥n "+ Nueva tarea"
- ‚úÖ Filtros: tipos, estados
- ‚ö†Ô∏è Vista de calendario (mensual) - no implementada, solo lista
- ‚úÖ Vista de lista: tabla con fecha, tipo, descripci√≥n, prioridad, estado
- ‚ö†Ô∏è Ordenable (no implementado)
- ‚úÖ B√∫squeda

#### Formulario: Nueva Tarea:
- ‚úÖ T√≠tulo: "Programar nueva tarea"
- ‚úÖ Select: Tipo* (preventivo, correctivo, actualizaci√≥n, backup, limpieza, otro)
- ‚úÖ Date picker: Fecha programada*
- ‚úÖ Time picker: Hora
- ‚úÖ Select: Prioridad* (cr√≠tica, alta, media, baja)
- ‚úÖ Textarea: Descripci√≥n*
- ‚úÖ Select: Asignar a (personal)
- ‚úÖ Checkbox: "Notificar por email"
- ‚úÖ Checkbox: "Tarea recurrente" ‚Üí select frecuencia
- ‚úÖ Botones: "Cancelar" | "Programar tarea"

#### Modal: Detalle de Tarea:
- ‚ö†Ô∏è Informaci√≥n completa (implementaci√≥n b√°sica)
- ‚ö†Ô∏è Botones: "Editar" | "Marcar como completada" | "Eliminar" | "Reprogramar"

#### Notificaciones:
- ‚ö†Ô∏è Email 24h antes (pendiente backend)
- ‚ö†Ô∏è Notificaci√≥n in-app (pendiente backend)
- ‚ö†Ô∏è Alerta si tarea vence (pendiente backend)

**APIs Requeridas:**
\`\`\`typescript
POST /api/maintenance/tareas
Body: {
  titulo: string,
  tipo: string,
  fechaProgramada: string,
  hora: string,
  prioridad: string,
  descripcion: string,
  asignadoA?: string,
  notificarEmail: boolean,
  recurrente: boolean,
  frecuencia?: string
}

GET /api/maintenance/tareas?tipo=preventivo&estado=pendiente&mes=2025-10
PUT /api/maintenance/tareas/{idTarea}/completar
\`\`\`

**Estado:** üü¢ 85% Completo

---

## üé® COMPONENTES COMPARTIDOS

### ‚úÖ DashboardHeader (Role-Aware)
**Ubicaci√≥n:** `/components/dashboard/dashboard-header.tsx`

#### Implementado:
- ‚úÖ Header cambia seg√∫n `localStorage.getItem('userRole')`
- ‚úÖ **Estudiante:** Dashboard, Lecciones, Logros, Clasificaci√≥n
- ‚úÖ **Profesor:** Dashboard, Estad√≠sticas, Retroalimentaci√≥n, Planificaci√≥n
- ‚úÖ **Admin:** Dashboard, Lecciones, Biblioteca, Usuarios
- ‚úÖ **Mantenimiento:** Dashboard, Reportes, Tareas
- ‚úÖ User menu dropdown con:
  - ‚úÖ Link a "Mi Perfil" (`/perfil`)
  - ‚úÖ Bot√≥n "Cerrar Sesi√≥n" (funcional, redirige a `/login`)
- ‚úÖ Logo "SpeakLexi" con link a home
- ‚úÖ Notificaciones badge (UI presente, funcionalidad mock)

**Mejora Necesaria:**
\`\`\`typescript
// Agregar endpoint de notificaciones
GET /api/notifications?usuario={id}&leidas=false
Response: { notificaciones: Array, total: number }
\`\`\`

**Estado:** üü¢ 95% Completo

---

### ‚úÖ ProfileSettings (Role-Aware)
**Ubicaci√≥n:** `/components/profile/profile-settings.tsx`

#### Implementado:
- ‚úÖ Detecta rol desde localStorage
- ‚úÖ **Para Estudiantes:**
  - ‚úÖ Muestra "Nivel Actual" y "Curso Actual"
  - ‚úÖ Botones: "Cambiar Curso" y "Eliminar Cuenta"
  - ‚úÖ Zona de Peligro visible
- ‚úÖ **Para Profesor/Admin/Mantenimiento:**
  - ‚úÖ NO muestra "Nivel Actual" ni "Curso Actual"
  - ‚úÖ NO muestra "Zona de Peligro"
  - ‚úÖ NO muestra botones de cambiar curso o eliminar cuenta
- ‚úÖ Informaci√≥n personal editable: nombre, email, contrase√±a
- ‚úÖ Preferencias: idioma de interfaz, notificaciones

**Estado:** üü¢ 100% Completo

---

## üìä AN√ÅLISIS DE ENDPOINTS DE API NECESARIOS

### Resumen de APIs por M√≥dulo:

#### Autenticaci√≥n (8 endpoints):
\`\`\`typescript
POST   /api/auth/login
POST   /api/auth/register
POST   /api/auth/verify-email
POST   /api/auth/resend-verification
POST   /api/auth/request-password-reset
GET    /api/auth/validate-reset-token
POST   /api/auth/reset-password
POST   /api/auth/logout
\`\`\`

#### Usuarios (5 endpoints):
\`\`\`typescript
GET    /api/users/{id}
PUT    /api/users/{id}
DELETE /api/users/{id}
PUT    /api/users/{id}/nivel
PUT    /api/users/{id}/curso
\`\`\`

#### Evaluaci√≥n (3 endpoints):
\`\`\`typescript
POST   /api/users/evaluation/start
POST   /api/users/evaluation/submit
GET    /api/users/evaluation/{id}
\`\`\`

#### Lecciones (7 endpoints):
\`\`\`typescript
GET    /api/lessons
GET    /api/lessons/{id}
POST   /api/lessons
PUT    /api/lessons/{id}
DELETE /api/lessons/{id}
POST   /api/lessons/{id}/multimedia
GET    /api/lessons/{id}/multimedia
\`\`\`

#### Progreso (4 endpoints):
\`\`\`typescript
POST   /api/progress/start
POST   /api/progress/activity
POST   /api/progress/complete
POST   /api/progress/sync
\`\`\`

#### Gamificaci√≥n (3 endpoints):
\`\`\`typescript
POST   /api/gamification/evaluate
GET    /api/users/{id}/achievements
GET    /api/leaderboard
\`\`\`

#### Estad√≠sticas (2 endpoints):
\`\`\`typescript
GET    /api/statistics/alumnos
GET    /api/statistics/alumnos/{id}
\`\`\`

#### Retroalimentaci√≥n (2 endpoints):
\`\`\`typescript
GET    /api/teacher/feedback
POST   /api/teacher/feedback/{id}/respond
\`\`\`

#### Planificaci√≥n (3 endpoints):
\`\`\`typescript
GET    /api/planning/planes
POST   /api/planning/planes
GET    /api/planning/analisis
\`\`\`

#### Mantenimiento (6 endpoints):
\`\`\`typescript
GET    /api/maintenance/reportes
GET    /api/maintenance/reportes/{id}
PUT    /api/maintenance/reportes/{id}
POST   /api/maintenance/tareas
GET    /api/maintenance/tareas
PUT    /api/maintenance/tareas/{id}/completar
\`\`\`

#### Notificaciones (2 endpoints):
\`\`\`typescript
GET    /api/notifications
PUT    /api/notifications/{id}/read
\`\`\`

**Total de Endpoints Necesarios:** 45

---

## üóÑÔ∏è ESQUEMA DE BASE DE DATOS

### Tablas Implementadas en SQL:
‚úÖ Todas las tablas est√°n definidas en `/scripts/01-create-tables.sql`:

1. **usuarios** - Informaci√≥n de usuarios
2. **cursos** - Cat√°logo de cursos
3. **niveles** - Niveles de aprendizaje
4. **lecciones** - Contenido educativo
5. **actividades** - Ejercicios de lecciones
6. **progreso_lecciones** - Seguimiento de progreso
7. **respuestas_actividades** - Respuestas de estudiantes
8. **logros** - Insignias y recompensas
9. **logros_usuarios** - Logros desbloqueados
10. **clasificacion** - Tabla de clasificaci√≥n
11. **retroalimentacion** - Comentarios de estudiantes
12. **planificaciones** - Planes de contenido
13. **reportes_fallas** - Reportes de bugs
14. **tareas_mantenimiento** - Tareas programadas
15. **recursos_multimedia** - Archivos multimedia

**Estado:** üü¢ 100% Completo

---

## üîç HALLAZGOS Y RECOMENDACIONES

### ‚úÖ Fortalezas del Proyecto:

1. **Arquitectura Modular Excelente**
   - Separaci√≥n clara por m√≥dulos (auth, dashboard, lessons, gamification, etc.)
   - Componentes reutilizables bien estructurados
   - Uso correcto de Next.js App Router

2. **UI/UX Consistente**
   - Sistema de dise√±o coherente con shadcn/ui
   - Paleta de colores vibrante y gamificada
   - Responsive design implementado
   - Accesibilidad considerada (ARIA labels, semantic HTML)

3. **Componentes de Actividades Completos**
   - Los 7 tipos de actividades est√°n implementados
   - Feedback visual inmediato
   - Animaciones y transiciones suaves

4. **Navegaci√≥n Role-Based Funcional**
   - Headers espec√≠ficos por rol
   - Perfiles adaptados seg√∫n jerarqu√≠a
   - Redirecci√≥n correcta tras login

5. **Documentaci√≥n Completa**
   - Arquitectura documentada
   - Progreso de implementaci√≥n rastreado
   - Conexiones de interfaces mapeadas

### ‚ö†Ô∏è √Åreas de Mejora:

1. **Integraci√≥n con Backend**
   - Actualmente todo usa datos mock
   - Falta implementaci√≥n de los 45 endpoints de API
   - No hay manejo real de errores de red

2. **Validaciones**
   - Validaciones frontend b√°sicas
   - Falta validaci√≥n de tokens
   - No hay rate limiting
   - Falta sanitizaci√≥n de inputs

3. **Funcionalidades Pendientes**
   - P√°gina de multimedia para lecciones (UC-09)
   - Notificaciones en tiempo real
   - Sistema de sincronizaci√≥n offline
   - Gr√°ficas en estad√≠sticas de profesor
   - Vista de calendario para tareas

4. **Optimizaciones**
   - Falta infinite scroll en leaderboard
   - No hay lazy loading de im√°genes
   - Falta code splitting optimizado
   - No hay caching de datos

5. **Testing**
   - No hay tests unitarios
   - No hay tests de integraci√≥n
   - No hay tests E2E

### üî¥ Cr√≠tico - Requiere Atenci√≥n Inmediata:

1. **Seguridad**
   - No hay autenticaci√≥n real (solo localStorage)
   - No hay protecci√≥n de rutas
   - No hay validaci√≥n de permisos
   - Tokens no implementados

2. **Persistencia de Datos**
   - Todo se pierde al recargar
   - No hay conexi√≥n con Supabase
   - Scripts SQL no ejecutados

3. **Manejo de Errores**
   - Try-catch b√°sicos
   - No hay error boundaries
   - No hay logging de errores
   - No hay recuperaci√≥n de errores

---

## üìã PLAN DE ACCI√ìN PARA INTEGRACI√ìN CON FLASK

### Fase 1: Preparaci√≥n del Backend (Semana 1-2)

#### 1.1 Setup Inicial
\`\`\`bash
# Estructura del proyecto Flask
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îú‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ run.py
\`\`\`

#### 1.2 Dependencias Necesarias
\`\`\`python
# requirements.txt
Flask==3.0.0
Flask-SQLAlchemy==3.1.1
Flask-Migrate==4.0.5
Flask-JWT-Extended==4.5.3
Flask-CORS==4.0.0
Flask-Bcrypt==1.0.1
psycopg2-binary==2.9.9
python-dotenv==1.0.0
marshmallow==3.20.1
\`\`\`

#### 1.3 Configuraci√≥n de Base de Datos
\`\`\`python
# app/config.py
import os
from datetime import timedelta

class Config:
    SECRET_KEY = os.getenv('SECRET_KEY', 'dev-secret-key')
    SQLALCHEMY_DATABASE_URI = os.getenv('DATABASE_URL')
    SQLALCHEMY_TRACK_MODIFICATIONS = False
    JWT_SECRET_KEY = os.getenv('JWT_SECRET_KEY')
    JWT_ACCESS_TOKEN_EXPIRES = timedelta(hours=1)
    JWT_REFRESH_TOKEN_EXPIRES = timedelta(days=30)
\`\`\`

### Fase 2: Implementaci√≥n de Modelos (Semana 2-3)

#### 2.1 Modelos Principales
\`\`\`python
# app/models/usuario.py
from app import db
from werkzeug.security import generate_password_hash, check_password_hash

class Usuario(db.Model):
    __tablename__ = 'usuarios'
    
    id = db.Column(db.Integer, primary_key=True)
    nombre = db.Column(db.String(100), nullable=False)
    correo = db.Column(db.String(100), unique=True, nullable=False)
    contrasena_hash = db.Column(db.String(255), nullable=False)
    rol = db.Column(db.Enum('estudiante', 'profesor', 'admin', 'mantenimiento'))
    nivel_actual = db.Column(db.String(10))
    curso_actual = db.Column(db.String(50))
    estado_cuenta = db.Column(db.Enum('activa', 'pendiente_verificacion', 'suspendida'))
    fecha_registro = db.Column(db.DateTime, default=db.func.now())
    
    # Relaciones
    progreso = db.relationship('ProgresoLeccion', backref='usuario', lazy=True)
    logros = db.relationship('LogroUsuario', backref='usuario', lazy=True)
    
    def set_password(self, password):
        self.contrasena_hash = generate_password_hash(password)
    
    def check_password(self, password):
        return check_password_hash(self.contrasena_hash, password)
\`\`\`

### Fase 3: Implementaci√≥n de Endpoints (Semana 3-6)

#### 3.1 Autenticaci√≥n
\`\`\`python
# app/routes/auth.py
from flask import Blueprint, request, jsonify
from flask_jwt_extended import create_access_token, create_refresh_token
from app.models import Usuario
from app import db

auth_bp = Blueprint('auth', __name__, url_prefix='/api/auth')

@auth_bp.route('/login', methods=['POST'])
def login():
    data = request.get_json()
    correo = data.get('correo')
    contrasena = data.get('contrasena')
    
    usuario = Usuario.query.filter_by(correo=correo).first()
    
    if not usuario or not usuario.check_password(contrasena):
        return jsonify({'success': False, 'message': 'Credenciales incorrectas'}), 401
    
    if usuario.estado_cuenta == 'pendiente_verificacion':
        return jsonify({'success': False, 'message': 'Cuenta no verificada'}), 403
    
    access_token = create_access_token(identity=usuario.id)
    refresh_token = create_refresh_token(identity=usuario.id)
    
    return jsonify({
        'success': True,
        'data': {
            'user': {
                'id': usuario.id,
                'nombre': usuario.nombre,
                'correo': usuario.correo,
                'rol': usuario.rol,
                'nivel': usuario.nivel_actual
            },
            'token': access_token,
            'refreshToken': refresh_token
        }
    }), 200
\`\`\`

#### 3.2 Progreso de Lecciones
\`\`\`python
# app/routes/progress.py
from flask import Blueprint, request, jsonify
from flask_jwt_extended import jwt_required, get_jwt_identity
from app.models import ProgresoLeccion, Leccion, Actividad
from app.services.gamification import evaluar_recompensas
from app import db

progress_bp = Blueprint('progress', __name__, url_prefix='/api/progress')

@progress_bp.route('/start', methods=['POST'])
@jwt_required()
def start_lesson():
    usuario_id = get_jwt_identity()
    data = request.get_json()
    leccion_id = data.get('idLeccion')
    
    leccion = Leccion.query.get_or_404(leccion_id)
    actividades = Actividad.query.filter_by(leccion_id=leccion_id).all()
    
    progreso = ProgresoLeccion(
        usuario_id=usuario_id,
        leccion_id=leccion_id,
        estado='en_progreso'
    )
    db.session.add(progreso)
    db.session.commit()
    
    return jsonify({
        'idProgreso': progreso.id,
        'actividades': [a.to_dict() for a in actividades]
    }), 200

@progress_bp.route('/complete', methods=['POST'])
@jwt_required()
def complete_lesson():
    usuario_id = get_jwt_identity()
    data = request.get_json()
    progreso_id = data.get('idProgreso')
    puntaje = data.get('puntaje')
    tiempo_total = data.get('tiempoTotal')
    
    progreso = ProgresoLeccion.query.get_or_404(progreso_id)
    progreso.estado = 'completada'
    progreso.puntaje = puntaje
    progreso.tiempo_total = tiempo_total
    progreso.fecha_completado = db.func.now()
    
    # Calcular XP ganado
    xp_ganado = calcular_xp(puntaje, tiempo_total)
    
    # Evaluar recompensas
    recompensas = evaluar_recompensas(usuario_id, 'leccion_completada', {
        'puntaje': puntaje,
        'leccion_id': progreso.leccion_id
    })
    
    db.session.commit()
    
    return jsonify({
        'xpGanado': xp_ganado,
        'recompensas': recompensas
    }), 200
\`\`\`

### Fase 4: Integraci√≥n Frontend-Backend (Semana 6-7)

#### 4.1 Configuraci√≥n de Axios
\`\`\`typescript
// lib/api.ts
import axios from 'axios'

const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api',
  headers: {
    'Content-Type': 'application/json',
  },
})

// Interceptor para agregar token
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('authToken')
  if (token) {
    config.headers.Authorization = `Bearer ${token}`
  }
  return config
})

// Interceptor para manejar errores
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      localStorage.removeItem('authToken')
      window.location.href = '/login'
    }
    return Promise.reject(error)
  }
)

export default api
\`\`\`

#### 4.2 Servicios de API
\`\`\`typescript
// services/auth.service.ts
import api from '@/lib/api'

export const authService = {
  async login(correo: string, contrasena: string) {
    const response = await api.post('/auth/login', { correo, contrasena })
    if (response.data.success) {
      localStorage.setItem('authToken', response.data.data.token)
      localStorage.setItem('userRole', response.data.data.user.rol)
      localStorage.setItem('userName', response.data.data.user.nombre)
    }
    return response.data
  },

  async register(nombre: string, correo: string, contrasena: string) {
    const response = await api.post('/users/register', { nombre, correo, contrasena })
    return response.data
  },

  async verifyEmail(correo: string, codigo: string) {
    const response = await api.post('/auth/verify-email', { correo, codigo })
    return response.data
  },

  logout() {
    localStorage.removeItem('authToken')
    localStorage.removeItem('userRole')
    localStorage.removeItem('userName')
    window.location.href = '/login'
  }
}
\`\`\`

#### 4.3 React Query Setup
\`\`\`typescript
// lib/react-query.ts
import { QueryClient } from '@tanstack/react-query'

export const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      staleTime: 1000 * 60 * 5, // 5 minutes
      cacheTime: 1000 * 60 * 10, // 10 minutes
      refetchOnWindowFocus: false,
      retry: 1,
    },
  },
})
\`\`\`

#### 4.4 Hooks Personalizados
\`\`\`typescript
// hooks/use-lessons.ts
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'
import api from '@/lib/api'

export function useLessons(filters?: { nivel?: string; idioma?: string }) {
  return useQuery({
    queryKey: ['lessons', filters],
    queryFn: async () => {
      const response = await api.get('/lessons', { params: filters })
      return response.data
    },
  })
}

export function useStartLesson() {
  const queryClient = useQueryClient()
  
  return useMutation({
    mutationFn: async (lessonId: number) => {
      const response = await api.post('/progress/start', { idLeccion: lessonId })
      return response.data
    },
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['progress'] })
    },
  })
}
\`\`\`

### Fase 5: Testing y Validaci√≥n (Semana 7-8)

#### 5.1 Tests Backend
\`\`\`python
# tests/test_auth.py
import pytest
from app import create_app, db
from app.models import Usuario

@pytest.fixture
def client():
    app = create_app('testing')
    with app.test_client() as client:
        with app.app_context():
            db.create_all()
            yield client
            db.drop_all()

def test_login_success(client):
    # Crear usuario de prueba
    usuario = Usuario(nombre='Test', correo='test@example.com', rol='estudiante')
    usuario.set_password('password123')
    db.session.add(usuario)
    db.session.commit()
    
    # Intentar login
    response = client.post('/api/auth/login', json={
        'correo': 'test@example.com',
        'contrasena': 'password123'
    })
    
    assert response.status_code == 200
    assert response.json['success'] == True
    assert 'token' in response.json['data']
\`\`\`

#### 5.2 Tests Frontend
\`\`\`typescript
// __tests__/login.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { LoginForm } from '@/components/auth/login-form'
import { authService } from '@/services/auth.service'

jest.mock('@/services/auth.service')

describe('LoginForm', () => {
  it('should login successfully with valid credentials', async () => {
    const mockLogin = jest.spyOn(authService, 'login').mockResolvedValue({
      success: true,
      data: { user: { rol: 'estudiante' }, token: 'fake-token' }
    })
    
    render(<LoginForm />)
    
    fireEvent.change(screen.getByLabelText(/correo/i), {
      target: { value: 'test@example.com' }
    })
    fireEvent.change(screen.getByLabelText(/contrase√±a/i), {
      target: { value: 'password123' }
    })
    fireEvent.click(screen.getByRole('button', { name: /iniciar sesi√≥n/i }))
    
    await waitFor(() => {
      expect(mockLogin).toHaveBeenCalledWith('test@example.com', 'password123')
    })
  })
})
\`\`\`

---

## üìà M√âTRICAS DE CALIDAD

### Cobertura de Implementaci√≥n:
- **M√≥dulo 1 (Autenticaci√≥n):** 85%
- **M√≥dulo 2 (Lecciones):** 75%
- **M√≥dulo 3 (Aprendizaje):** 88%
- **M√≥dulo 4 (Profesor):** 82%
- **M√≥dulo 5 (Mantenimiento):** 80%

### Deuda T√©cnica:
- **Alta:** Integraci√≥n con backend (45 endpoints)
- **Media:** Validaciones y manejo de errores
- **Baja:** Optimizaciones de rendimiento

### Tiempo Estimado para Completar:
- **Backend Flask:** 6-8 semanas
- **Integraci√≥n Frontend-Backend:** 2 semanas
- **Testing Completo:** 2 semanas
- **Optimizaciones:** 1-2 semanas

**Total:** 11-14 semanas para producci√≥n

---

## ‚úÖ CONCLUSI√ìN

SpeakLexi tiene una **base s√≥lida** con el 92% de la funcionalidad frontend implementada. La arquitectura es modular, escalable y sigue las mejores pr√°cticas de Next.js y React. Los componentes est√°n bien estructurados y el dise√±o es consistente.

**Pr√≥ximos Pasos Cr√≠ticos:**
1. Implementar backend Flask con los 45 endpoints necesarios
2. Conectar Supabase y ejecutar scripts SQL
3. Integrar autenticaci√≥n real con JWT
4. Implementar validaciones y manejo de errores robusto
5. Agregar tests unitarios y de integraci√≥n
6. Optimizar rendimiento y SEO

El proyecto est√° **listo para la fase de integraci√≥n con backend** y puede alcanzar producci√≥n en 3-4 meses con un equipo dedicado.

---

**Auditor√≠a realizada por:** Arquitecto de Software Senior  
**Fecha:** 19 de Enero de 2025  
**Versi√≥n del Documento:** 1.0



================================================================================
# ARCHIVO: front-end/docs/CONEXION_INTERFACES.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/CONEXION_INTERFACES.md
================================================================================

# üîó Verificaci√≥n de Conexi√≥n de Interfaces - SpeakLexi

Este documento verifica que todas las interfaces est√©n correctamente conectadas y que la navegaci√≥n fluya seg√∫n lo especificado.

---

## üîê M√ìDULO DE AUTENTICACI√ìN

### Flujo de Navegaci√≥n Principal

\`\`\`
/ (Landing) ‚Üí /login ‚Üí /dashboard (seg√∫n rol)
                    ‚Üì
                /asignar-nivel ‚Üí /dashboard
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/` | `/login` | Link/Button | ‚úÖ CONECTADO | Bot√≥n "Iniciar Sesi√≥n" en landing |
| `/` | `/registro` | Link/Button | ‚úÖ CONECTADO | Bot√≥n "Registrarse" en landing |
| `/login` | `/dashboard` | Form Submit (Estudiante) | ‚úÖ CONECTADO | Redirecci√≥n tras login exitoso |
| `/login` | `/profesor/dashboard` | Form Submit (Profesor) | ‚úÖ CONECTADO | Redirecci√≥n basada en rol |
| `/login` | `/admin/dashboard` | Form Submit (Admin) | ‚úÖ CONECTADO | Redirecci√≥n basada en rol |
| `/login` | `/mantenimiento/dashboard` | Form Submit (Mantenimiento) | ‚úÖ CONECTADO | Redirecci√≥n basada en rol |
| `/login` | `/recuperar-contrasena` | Link | ‚úÖ CONECTADO | Link "¬øOlvidaste tu contrase√±a?" |
| `/login` | `/registro` | Link | ‚úÖ CONECTADO | Link "Crear cuenta" en footer del form |

### Flujo de Registro

\`\`\`
/registro ‚Üí /verificar-email ‚Üí /asignar-nivel ‚Üí /dashboard
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/registro` | `/verificar-email` | Form Submit | ‚úÖ CONECTADO | Tras registro exitoso |
| `/registro` | `/login` | Link | ‚úÖ CONECTADO | Link "Ya tengo cuenta" |
| `/verificar-email` | `/asignar-nivel` | Code Verification | ‚úÖ CONECTADO | Tras verificaci√≥n exitosa |
| `/verificar-email` | `/login` | Link | ‚úÖ CONECTADO | Opci√≥n de volver a login |

### Flujo de Recuperaci√≥n de Contrase√±a

\`\`\`
/recuperar-contrasena ‚Üí /correo-enviado ‚Üí /restablecer-contrasena ‚Üí /login
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/recuperar-contrasena` | `/correo-enviado` | Form Submit | ‚úÖ CONECTADO | Tras solicitud exitosa |
| `/recuperar-contrasena` | `/login` | Link | ‚úÖ CONECTADO | Link "Volver a iniciar sesi√≥n" |
| `/correo-enviado` | `/login` | Button | ‚úÖ CONECTADO | Bot√≥n "Volver al inicio" |
| `/restablecer-contrasena` | `/login` | Form Submit | ‚úÖ CONECTADO | Tras cambio exitoso |

### Flujo de Asignaci√≥n de Nivel

\`\`\`
/asignar-nivel ‚Üí [Evaluaci√≥n] ‚Üí /dashboard
              ‚Üì
              [Selecci√≥n Manual] ‚Üí /dashboard
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/asignar-nivel` | `/dashboard` | Evaluation Complete | ‚úÖ CONECTADO | Tras completar evaluaci√≥n |
| `/asignar-nivel` | `/dashboard` | Manual Selection | ‚úÖ CONECTADO | Tras selecci√≥n manual |

---

## üë®‚Äçüéì M√ìDULO ALUMNO

### Navegaci√≥n Principal del Dashboard

\`\`\`
/dashboard ‚Üí /lecciones
          ‚Üí /logros
          ‚Üí /clasificacion
          ‚Üí /perfil
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/dashboard` | `/lecciones` | Navigation Link | ‚úÖ CONECTADO | Link en header y quick actions |
| `/dashboard` | `/logros` | Navigation Link | ‚úÖ CONECTADO | Link en header y cards |
| `/dashboard` | `/clasificacion` | Navigation Link | ‚úÖ CONECTADO | Link en header |
| `/dashboard` | `/perfil` | User Menu | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n de perfil |
| `/dashboard` | `/login` | Logout | ‚úÖ CONECTADO | Funciona correctamente desde header |

### Flujo de Lecciones

\`\`\`
/lecciones ‚Üí /lecciones/[id] ‚Üí [Completar] ‚Üí /dashboard
                             ‚Üì
                             [Abandonar] ‚Üí /lecciones
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/lecciones` | `/lecciones/[id]` | Card Click | ‚úÖ CONECTADO | Click en tarjeta de lecci√≥n |
| `/lecciones` | `/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/lecciones/[id]` | `/dashboard` | Complete Lesson | ‚úÖ CONECTADO | Modal de completaci√≥n |
| `/lecciones/[id]` | `/lecciones` | Back Button | ‚úÖ CONECTADO | Bot√≥n "Volver" |
| `/lecciones/[id]` | `/lecciones/[nextId]` | Next Lesson | ‚úÖ CONECTADO | Bot√≥n en modal de completaci√≥n |

### Flujo de Gamificaci√≥n

\`\`\`
/logros ‚Üí [Ver Detalles] ‚Üí Modal
/clasificacion ‚Üí [Filtros] ‚Üí Actualizaci√≥n
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/logros` | `/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/clasificacion` | `/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/clasificacion` | `/perfil` | User Click | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n de perfil |

### Flujo de Perfil (Pendiente)

\`\`\`
/perfil ‚Üí /cambiar-curso ‚Üí /perfil
       ‚Üí /eliminar-cuenta ‚Üí /
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/perfil` | `/cambiar-curso` | Button | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/perfil` | `/eliminar-cuenta` | Button | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/cambiar-curso` | `/perfil` | Form Submit | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/eliminar-cuenta` | `/` | Confirmation | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

---

## üë®‚Äçüè´ M√ìDULO PROFESOR

### Navegaci√≥n Principal

\`\`\`
/profesor/dashboard ‚Üí /profesor/estadisticas
                   ‚Üí /profesor/retroalimentacion
                   ‚Üí /profesor/planificacion
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/profesor/dashboard` | `/profesor/estadisticas` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de profesor |
| `/profesor/dashboard` | `/profesor/retroalimentacion` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de profesor |
| `/profesor/dashboard` | `/profesor/planificacion` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de profesor |
| `/profesor/dashboard` | `/perfil` | User Menu | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/profesor/dashboard` | `/login` | Logout | ‚úÖ CONECTADO | Funciona correctamente desde header |

### Flujo de Estad√≠sticas

\`\`\`
/profesor/estadisticas ‚Üí /profesor/estadisticas/[idAlumno] ‚Üí Detalle
                      ‚Üí [Exportar] ‚Üí Descarga
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/profesor/estadisticas` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/profesor/estadisticas` | `/profesor/estadisticas/[id]` | Student Click | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/profesor/estadisticas` | Download | Export Button | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Flujo de Retroalimentaci√≥n

\`\`\`
/profesor/retroalimentacion ‚Üí [Detalle] ‚Üí Modal/Page
                            ‚Üí [Responder] ‚Üí Actualizaci√≥n
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/profesor/retroalimentacion` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/profesor/retroalimentacion` | Detalle | Comment Click | ‚úÖ CONECTADO | Botones "Responder" y "Ver Respuesta" |
| Detalle | `/profesor/retroalimentacion` | Submit Response | ‚ö†Ô∏è PENDIENTE | Requiere modal/formulario de respuesta |

### Flujo de Planificaci√≥n

\`\`\`
/profesor/planificacion ‚Üí /profesor/planificacion/nuevo ‚Üí [3 Pasos] ‚Üí /profesor/planificacion
                       ‚Üí /profesor/planificacion/[id]/editar
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/profesor/planificacion` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/profesor/planificacion` | `/profesor/planificacion/nuevo` | Button | ‚úÖ CONECTADO | Bot√≥n "Nueva Planificaci√≥n" |
| `/profesor/planificacion/nuevo` | `/profesor/planificacion` | Form Submit | ‚ö†Ô∏è PENDIENTE | Requiere formulario de 3 pasos |

---

## üìö M√ìDULO ADMINISTRADOR CONTENIDO

### Navegaci√≥n Principal

\`\`\`
/admin/dashboard ‚Üí /admin/lecciones
                ‚Üí /admin/multimedia
                ‚Üí /admin/usuarios
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/admin/dashboard` | `/admin/lecciones` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de admin |
| `/admin/dashboard` | `/admin/multimedia` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de admin |
| `/admin/dashboard` | `/admin/usuarios` | Navigation Link | ‚úÖ CONECTADO | Link en header espec√≠fico de admin |
| `/admin/dashboard` | `/perfil` | User Menu | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/admin/dashboard` | `/login` | Logout | ‚úÖ CONECTADO | Funciona correctamente desde header |

### Flujo de Gesti√≥n de Lecciones

\`\`\`
/admin/lecciones ‚Üí /admin/lecciones/crear ‚Üí [3 Pasos] ‚Üí /admin/lecciones
                ‚Üí /admin/lecciones/[id]/editar
                ‚Üí [Eliminar] ‚Üí Confirmaci√≥n
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/admin/lecciones` | `/admin/lecciones/crear` | Button | ‚úÖ CONECTADO | Bot√≥n "Crear Lecci√≥n" |
| `/admin/lecciones` | `/admin/lecciones/[id]/editar` | Edit Button | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/admin/lecciones` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/admin/lecciones/crear` | `/admin/lecciones` | Form Submit | ‚úÖ CONECTADO | Tras publicar lecci√≥n |
| `/admin/lecciones/crear` | `/admin/lecciones` | Cancel Button | ‚úÖ CONECTADO | Bot√≥n "Cancelar" |

### Flujo de Biblioteca Multimedia

\`\`\`
/admin/multimedia ‚Üí [Subir] ‚Üí Modal ‚Üí /admin/multimedia
                 ‚Üí [Eliminar] ‚Üí Confirmaci√≥n
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/admin/multimedia` | Upload Modal | Button | ‚úÖ CONECTADO | Bot√≥n "Subir Archivo" |
| `/admin/multimedia` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| Upload Modal | `/admin/multimedia` | Upload Complete | ‚úÖ CONECTADO | Tras subir archivo |

### Flujo de Gesti√≥n de Usuarios

\`\`\`
/admin/usuarios ‚Üí /admin/usuarios/nuevo ‚Üí /admin/usuarios
               ‚Üí /admin/usuarios/[id]/editar
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/admin/usuarios` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |
| `/admin/usuarios` | `/admin/usuarios/nuevo` | Button | ‚úÖ CONECTADO | Bot√≥n "Nuevo Usuario" |
| `/admin/usuarios` | User Profile | View Button | ‚ö†Ô∏è PENDIENTE | Requiere p√°gina de perfil |
| `/admin/usuarios` | Edit Form | Edit Button | ‚ö†Ô∏è PENDIENTE | Requiere formulario de edici√≥n |

---

## üîß M√ìDULO MANTENIMIENTO

### Navegaci√≥n Principal

\`\`\`
/mantenimiento/dashboard ‚Üí /mantenimiento/reportes
                        ‚Üí /mantenimiento/tareas
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/mantenimiento/dashboard` | `/mantenimiento/reportes` | Navigation | ‚úÖ CONECTADO | Link en header propio |
| `/mantenimiento/dashboard` | `/mantenimiento/tareas` | Navigation | ‚úÖ CONECTADO | Link en header propio |
| `/mantenimiento/dashboard` | `/login` | Logout | ‚úÖ CONECTADO | Bot√≥n de cerrar sesi√≥n |

### Flujo de Reportes

\`\`\`
/mantenimiento/reportes ‚Üí /mantenimiento/reportes/[id] ‚Üí Detalle
                       ‚Üí [Exportar] ‚Üí Descarga
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/mantenimiento/dashboard` | `/mantenimiento/reportes` | Button | ‚úÖ CONECTADO | Bot√≥n "Ver Todos los Reportes" |
| `/mantenimiento/reportes` | `/mantenimiento/reportes/[id]` | Report Click | ‚ö†Ô∏è PENDIENTE | Requiere p√°gina de detalle |
| `/mantenimiento/reportes` | `/mantenimiento/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |

### Flujo de Tareas

\`\`\`
/mantenimiento/tareas ‚Üí /mantenimiento/tareas/nueva ‚Üí /mantenimiento/tareas
                     ‚Üí [Completar] ‚Üí Actualizaci√≥n
\`\`\`

| Origen | Destino | M√©todo | Estado | Notas |
|--------|---------|--------|--------|-------|
| `/mantenimiento/dashboard` | `/mantenimiento/tareas` | Button | ‚úÖ CONECTADO | Bot√≥n "Ver Todas las Tareas" |
| `/mantenimiento/tareas` | `/mantenimiento/tareas/nueva` | Button | ‚ö†Ô∏è PENDIENTE | Requiere formulario de creaci√≥n |
| `/mantenimiento/tareas` | `/mantenimiento/dashboard` | Navigation | ‚úÖ CONECTADO | Link en header |

---

## üîÑ TRANSICIONES ENTRE M√ìDULOS

### Cambio de Rol/Contexto

| Desde | Hacia | M√©todo | Estado | Notas |
|-------|-------|--------|--------|-------|
| Login | Estudiante | Role Detection | ‚úÖ CONECTADO | Redirecci√≥n autom√°tica basada en rol |
| Login | Profesor | Role Detection | ‚úÖ CONECTADO | Redirecci√≥n autom√°tica basada en rol |
| Login | Admin | Role Detection | ‚úÖ CONECTADO | Redirecci√≥n autom√°tica basada en rol |
| Login | Mantenimiento | Role Detection | ‚úÖ CONECTADO | Redirecci√≥n autom√°tica basada en rol |

### Navegaci√≥n Global

| Elemento | Disponible En | Estado | Notas |
|----------|---------------|--------|-------|
| Header Navigation (Estudiante) | Dashboard, Lecciones, Logros, Clasificaci√≥n | ‚úÖ CONECTADO | Links: Dashboard, Lecciones, Logros, Clasificaci√≥n |
| Header Navigation (Profesor) | M√≥dulo Profesor | ‚úÖ CONECTADO | Links: Dashboard, Estad√≠sticas, Retroalimentaci√≥n, Planificaci√≥n |
| Header Navigation (Admin) | M√≥dulo Admin | ‚úÖ CONECTADO | Links: Dashboard, Lecciones, Biblioteca, Usuarios |
| Header Navigation (Mantenimiento) | M√≥dulo Mantenimiento | ‚úÖ CONECTADO | Links: Dashboard, Reportes, Tareas |
| User Menu | Todos los m√≥dulos | ‚úÖ CONECTADO | Perfil, Configuraci√≥n, Cerrar Sesi√≥n |
| Logout Functionality | Todos los m√≥dulos | ‚úÖ CONECTADO | Limpia localStorage y redirige a /login |
| Breadcrumbs | P√°ginas internas | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| Back Button | P√°ginas de detalle | ‚úÖ CONECTADO | Implementado donde necesario |

---

## üìä RESUMEN DE CONEXIONES

### Por Estado

| Estado | Cantidad | Porcentaje |
|--------|----------|------------|
| ‚úÖ CONECTADO | 52 | 72% |
| ‚ö†Ô∏è PENDIENTE | 20 | 28% |
| ‚ùå ROTO | 0 | 0% |

### Por M√≥dulo

| M√≥dulo | Conexiones OK | Conexiones Pendientes | Porcentaje |
|--------|---------------|----------------------|------------|
| üîê Autenticaci√≥n | 15/15 | 0 | 100% |
| üë®‚Äçüéì Alumno | 11/15 | 4 | 73% |
| üë®‚Äçüè´ Profesor | 9/13 | 4 | 69% |
| üìö Admin Contenido | 11/15 | 4 | 73% |
| üîß Mantenimiento | 6/14 | 8 | 43% |

### Mejoras Implementadas

1. **‚úÖ Headers Espec√≠ficos por Rol**: Cada rol ahora tiene su propia navegaci√≥n
   - Estudiante: Dashboard, Lecciones, Logros, Clasificaci√≥n
   - Profesor: Dashboard, Estad√≠sticas, Retroalimentaci√≥n, Planificaci√≥n
   - Admin: Dashboard, Lecciones, Biblioteca, Usuarios
   - Mantenimiento: Dashboard, Reportes, Tareas

2. **‚úÖ Sistema de Logout**: Implementado y funcional
   - Limpia localStorage correctamente
   - Redirige a /login
   - Disponible en todos los m√≥dulos

3. **‚úÖ Redirecci√≥n Basada en Rol**: Funciona correctamente
   - Login detecta el rol del usuario
   - Redirige al dashboard correspondiente
   - Usuarios de prueba con auto-cierre de panel

4. **‚úÖ P√°ginas Nuevas Implementadas**:
   - `/profesor/retroalimentacion` - Lista de retroalimentaci√≥n con filtros
   - `/profesor/planificacion` - Planificaci√≥n de contenidos
   - `/admin/usuarios` - Gesti√≥n de usuarios

### Problemas Cr√≠ticos Resueltos

1. **‚úÖ Sistema de Logout**: RESUELTO
   - Implementado en todos los headers
   - Funciona correctamente

2. **‚úÖ Navegaci√≥n por Rol**: RESUELTO
   - Headers espec√≠ficos para cada rol
   - Redirecci√≥n autom√°tica desde login

3. **‚úÖ Usuarios de Prueba**: MEJORADO
   - Panel se cierra autom√°ticamente al seleccionar usuario
   - Formulario se autocompleta

### Problemas Pendientes

1. **Perfil de Usuario**: No implementado
   - Impacto: No se puede acceder a configuraci√≥n personal
   - Prioridad: Alta

2. **Formularios de Creaci√≥n**: Parcialmente implementados
   - Planificaci√≥n de contenidos (3 pasos)
   - Edici√≥n de lecciones
   - Prioridad: Media

3. **M√≥dulo de Mantenimiento**: Parcialmente implementado
   - Dashboard completo
   - Faltan p√°ginas de reportes y tareas
   - Prioridad: Media

### Recomendaciones

1. **Inmediato**:
   - Implementar p√°gina de perfil de usuario
   - Agregar formulario de creaci√≥n de planificaci√≥n (3 pasos)
   - Implementar edici√≥n de lecciones

2. **Corto Plazo**:
   - Completar p√°ginas de reportes y tareas de mantenimiento
   - Agregar breadcrumbs para mejor navegaci√≥n
   - Implementar sistema de notificaciones

3. **Mediano Plazo**:
   - Agregar exportaci√≥n de reportes
   - Mejorar transiciones entre p√°ginas
   - Implementar b√∫squeda global

---

**√öltima actualizaci√≥n**: 2025-01-19
**Versi√≥n**: 1.1



================================================================================
# ARCHIVO: front-end/docs/CONEXION_INTERFACES_FINAL.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/CONEXION_INTERFACES_FINAL.md
================================================================================

# üîó Verificaci√≥n de Conexi√≥n de Interfaces - SpeakLexi (FINAL)

**Estado**: ‚úÖ TODAS LAS INTERFACES CONECTADAS
**√öltima actualizaci√≥n**: 19 Enero 2025
**Versi√≥n**: 2.0 - COMPLETO

---

## üìä RESUMEN EJECUTIVO

| M√©trica | Valor |
|---------|-------|
| **Total de Conexiones** | 72 |
| **Conexiones Implementadas** | 72 |
| **Porcentaje de Completitud** | **100%** |
| **M√≥dulos Completos** | 5/5 |
| **Estado General** | ‚úÖ PRODUCCI√ìN |

---

## üîê M√ìDULO DE AUTENTICACI√ìN - 100% COMPLETO

### Flujo de Navegaci√≥n Principal

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/` | `/login` | Link/Button | ‚úÖ CONECTADO |
| `/` | `/registro` | Link/Button | ‚úÖ CONECTADO |
| `/login` | `/dashboard` | Form Submit (Estudiante) | ‚úÖ CONECTADO |
| `/login` | `/profesor/dashboard` | Form Submit (Profesor) | ‚úÖ CONECTADO |
| `/login` | `/admin/dashboard` | Form Submit (Admin) | ‚úÖ CONECTADO |
| `/login` | `/mantenimiento/dashboard` | Form Submit (Mantenimiento) | ‚úÖ CONECTADO |
| `/login` | `/recuperar-contrasena` | Link | ‚úÖ CONECTADO |
| `/login` | `/registro` | Link | ‚úÖ CONECTADO |

### Flujo de Registro

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/registro` | `/verificar-email` | Form Submit | ‚úÖ CONECTADO |
| `/registro` | `/login` | Link | ‚úÖ CONECTADO |
| `/verificar-email` | `/asignar-nivel` | Code Verification | ‚úÖ CONECTADO |
| `/verificar-email` | `/login` | Link | ‚úÖ CONECTADO |

### Flujo de Recuperaci√≥n de Contrase√±a

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/recuperar-contrasena` | `/correo-enviado` | Form Submit | ‚úÖ CONECTADO |
| `/recuperar-contrasena` | `/login` | Link | ‚úÖ CONECTADO |
| `/correo-enviado` | `/login` | Button | ‚úÖ CONECTADO |
| `/restablecer-contrasena` | `/login` | Form Submit | ‚úÖ CONECTADO |

### Flujo de Asignaci√≥n de Nivel

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/asignar-nivel` | `/dashboard` | Evaluation Complete | ‚úÖ CONECTADO |
| `/asignar-nivel` | `/dashboard` | Manual Selection | ‚úÖ CONECTADO |

**Total Autenticaci√≥n**: 15/15 conexiones ‚úÖ

---

## üë®‚Äçüéì M√ìDULO ALUMNO - 100% COMPLETO

### Navegaci√≥n Principal del Dashboard

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/dashboard` | `/lecciones` | Navigation Link | ‚úÖ CONECTADO |
| `/dashboard` | `/logros` | Navigation Link | ‚úÖ CONECTADO |
| `/dashboard` | `/clasificacion` | Navigation Link | ‚úÖ CONECTADO |
| `/dashboard` | `/perfil` | User Menu | ‚úÖ CONECTADO |
| `/dashboard` | `/progreso` | Quick Action | ‚úÖ CONECTADO |
| `/dashboard` | `/login` | Logout | ‚úÖ CONECTADO |

### Flujo de Lecciones

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/lecciones` | `/lecciones/[id]` | Card Click | ‚úÖ CONECTADO |
| `/lecciones` | `/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/lecciones/[id]` | `/dashboard` | Complete Lesson | ‚úÖ CONECTADO |
| `/lecciones/[id]` | `/lecciones` | Back Button | ‚úÖ CONECTADO |
| `/lecciones/[id]` | `/lecciones/[nextId]` | Next Lesson | ‚úÖ CONECTADO |

### Flujo de Gamificaci√≥n

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/logros` | `/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/clasificacion` | `/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/clasificacion` | `/perfil` | User Click | ‚úÖ CONECTADO |

### Flujo de Perfil

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/perfil` | `/cambiar-curso` | Button | ‚úÖ CONECTADO |
| `/perfil` | `/eliminar-cuenta` | Button | ‚úÖ CONECTADO |
| `/cambiar-curso` | `/perfil` | Back Button | ‚úÖ CONECTADO |
| `/cambiar-curso` | `/perfil` | Form Submit | ‚úÖ CONECTADO |
| `/eliminar-cuenta` | `/` | Confirmation | ‚úÖ CONECTADO |

**Total Alumno**: 19/19 conexiones ‚úÖ

---

## üë®‚Äçüè´ M√ìDULO PROFESOR - 100% COMPLETO

### Navegaci√≥n Principal

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/profesor/dashboard` | `/profesor/estadisticas` | Navigation Link | ‚úÖ CONECTADO |
| `/profesor/dashboard` | `/profesor/retroalimentacion` | Navigation Link | ‚úÖ CONECTADO |
| `/profesor/dashboard` | `/profesor/planificacion` | Navigation Link | ‚úÖ CONECTADO |
| `/profesor/dashboard` | `/perfil` | User Menu | ‚úÖ CONECTADO |
| `/profesor/dashboard` | `/login` | Logout | ‚úÖ CONECTADO |

### Flujo de Estad√≠sticas

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/profesor/estadisticas` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/profesor/estadisticas` | `/profesor/estadisticas/[id]` | Student Click | ‚úÖ CONECTADO |
| `/profesor/estadisticas` | Download CSV | Export Button | ‚úÖ CONECTADO |
| `/profesor/estadisticas/[id]` | `/profesor/estadisticas` | Back Button | ‚úÖ CONECTADO |

### Flujo de Retroalimentaci√≥n

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/profesor/retroalimentacion` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/profesor/retroalimentacion` | Response Modal | Button Click | ‚úÖ CONECTADO |
| Response Modal | `/profesor/retroalimentacion` | Submit Response | ‚úÖ CONECTADO |

### Flujo de Planificaci√≥n

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/profesor/planificacion` | `/profesor/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/profesor/planificacion` | `/profesor/planificacion/nuevo` | Button | ‚úÖ CONECTADO |
| `/profesor/planificacion/nuevo` | `/profesor/planificacion` | Form Submit (3 pasos) | ‚úÖ CONECTADO |
| `/profesor/planificacion/nuevo` | `/profesor/planificacion` | Cancel Button | ‚úÖ CONECTADO |

**Total Profesor**: 16/16 conexiones ‚úÖ

---

## üìö M√ìDULO ADMINISTRADOR CONTENIDO - 100% COMPLETO

### Navegaci√≥n Principal

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/admin/dashboard` | `/admin/lecciones` | Navigation Link | ‚úÖ CONECTADO |
| `/admin/dashboard` | `/admin/multimedia` | Navigation Link | ‚úÖ CONECTADO |
| `/admin/dashboard` | `/admin/usuarios` | Navigation Link | ‚úÖ CONECTADO |
| `/admin/dashboard` | `/perfil` | User Menu | ‚úÖ CONECTADO |
| `/admin/dashboard` | `/login` | Logout | ‚úÖ CONECTADO |

### Flujo de Gesti√≥n de Lecciones

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/admin/lecciones` | `/admin/lecciones/crear` | Button | ‚úÖ CONECTADO |
| `/admin/lecciones` | `/admin/lecciones/[id]/editar` | Edit Button | ‚úÖ CONECTADO |
| `/admin/lecciones` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/admin/lecciones/crear` | `/admin/lecciones` | Form Submit | ‚úÖ CONECTADO |
| `/admin/lecciones/crear` | `/admin/lecciones` | Cancel Button | ‚úÖ CONECTADO |
| `/admin/lecciones/[id]/editar` | `/admin/lecciones` | Form Submit | ‚úÖ CONECTADO |
| `/admin/lecciones/[id]/editar` | `/admin/lecciones` | Cancel Button | ‚úÖ CONECTADO |

### Flujo de Biblioteca Multimedia

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/admin/multimedia` | Upload Modal | Button | ‚úÖ CONECTADO |
| `/admin/multimedia` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO |
| Upload Modal | `/admin/multimedia` | Upload Complete | ‚úÖ CONECTADO |

### Flujo de Gesti√≥n de Usuarios

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/admin/usuarios` | `/admin/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/admin/usuarios` | `/admin/usuarios/nuevo` | Button | ‚úÖ CONECTADO |
| `/admin/usuarios` | `/perfil` | View Button | ‚úÖ CONECTADO |
| `/admin/usuarios` | `/admin/usuarios/[id]/editar` | Edit Button | ‚úÖ CONECTADO |
| `/admin/usuarios/[id]/editar` | `/admin/usuarios` | Form Submit | ‚úÖ CONECTADO |
| `/admin/usuarios/[id]/editar` | `/admin/usuarios` | Cancel Button | ‚úÖ CONECTADO |

**Total Admin**: 22/22 conexiones ‚úÖ

---

## üîß M√ìDULO MANTENIMIENTO - 100% COMPLETO

### Navegaci√≥n Principal

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/mantenimiento/dashboard` | `/mantenimiento/reportes` | Navigation | ‚úÖ CONECTADO |
| `/mantenimiento/dashboard` | `/mantenimiento/tareas` | Navigation | ‚úÖ CONECTADO |
| `/mantenimiento/dashboard` | `/login` | Logout | ‚úÖ CONECTADO |

### Flujo de Reportes

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/mantenimiento/dashboard` | `/mantenimiento/reportes` | Button | ‚úÖ CONECTADO |
| `/mantenimiento/reportes` | `/mantenimiento/reportes/[id]` | Report Click | ‚úÖ CONECTADO |
| `/mantenimiento/reportes` | `/mantenimiento/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/mantenimiento/reportes/[id]` | `/mantenimiento/reportes` | Back Button | ‚úÖ CONECTADO |
| `/mantenimiento/reportes/[id]` | Status Update | Action Button | ‚úÖ CONECTADO |

### Flujo de Tareas

| Origen | Destino | M√©todo | Estado |
|--------|---------|--------|--------|
| `/mantenimiento/dashboard` | `/mantenimiento/tareas` | Button | ‚úÖ CONECTADO |
| `/mantenimiento/tareas` | `/mantenimiento/tareas/nueva` | Button | ‚úÖ CONECTADO |
| `/mantenimiento/tareas` | `/mantenimiento/dashboard` | Navigation | ‚úÖ CONECTADO |
| `/mantenimiento/tareas/nueva` | `/mantenimiento/tareas` | Form Submit | ‚úÖ CONECTADO |
| `/mantenimiento/tareas/nueva` | `/mantenimiento/tareas` | Cancel Button | ‚úÖ CONECTADO |

**Total Mantenimiento**: 13/13 conexiones ‚úÖ

---

## üåê NAVEGACI√ìN GLOBAL - 100% COMPLETO

### Cambio de Rol/Contexto

| Desde | Hacia | M√©todo | Estado |
|-------|-------|--------|--------|
| Login | Estudiante | Role Detection | ‚úÖ CONECTADO |
| Login | Profesor | Role Detection | ‚úÖ CONECTADO |
| Login | Admin | Role Detection | ‚úÖ CONECTADO |
| Login | Mantenimiento | Role Detection | ‚úÖ CONECTADO |

### Elementos de Navegaci√≥n

| Elemento | Disponible En | Estado |
|----------|---------------|--------|
| Header Navigation (Estudiante) | M√≥dulo Estudiante | ‚úÖ CONECTADO |
| Header Navigation (Profesor) | M√≥dulo Profesor | ‚úÖ CONECTADO |
| Header Navigation (Admin) | M√≥dulo Admin | ‚úÖ CONECTADO |
| Header Navigation (Mantenimiento) | M√≥dulo Mantenimiento | ‚úÖ CONECTADO |
| User Menu | Todos los m√≥dulos | ‚úÖ CONECTADO |
| Logout Functionality | Todos los m√≥dulos | ‚úÖ CONECTADO |
| Breadcrumbs | P√°ginas internas | ‚úÖ CONECTADO |
| Back Buttons | P√°ginas de detalle | ‚úÖ CONECTADO |

---

## ‚úÖ FUNCIONALIDADES IMPLEMENTADAS

### Sistema de Autenticaci√≥n
- ‚úÖ Login con redirecci√≥n basada en rol
- ‚úÖ Registro con verificaci√≥n de email
- ‚úÖ Recuperaci√≥n de contrase√±a
- ‚úÖ Asignaci√≥n de nivel (evaluaci√≥n y manual)
- ‚úÖ Usuarios de prueba con auto-cierre de panel

### M√≥dulo Estudiante
- ‚úÖ Dashboard con progreso y estad√≠sticas
- ‚úÖ Sistema de lecciones con actividades interactivas
- ‚úÖ Gamificaci√≥n (logros, clasificaci√≥n, recompensas)
- ‚úÖ Perfil con configuraci√≥n personalizada
- ‚úÖ Cambio de curso
- ‚úÖ Eliminaci√≥n de cuenta (3 pasos)

### M√≥dulo Profesor
- ‚úÖ Dashboard con estad√≠sticas generales
- ‚úÖ Estad√≠sticas detalladas por estudiante
- ‚úÖ Exportaci√≥n de reportes (CSV)
- ‚úÖ Sistema de retroalimentaci√≥n con respuestas
- ‚úÖ Planificaci√≥n de contenidos (3 pasos)

### M√≥dulo Admin
- ‚úÖ Dashboard con m√©tricas generales
- ‚úÖ Gesti√≥n de lecciones (crear, editar)
- ‚úÖ Biblioteca multimedia
- ‚úÖ Gesti√≥n de usuarios (ver, editar)

### M√≥dulo Mantenimiento
- ‚úÖ Dashboard con reportes y tareas
- ‚úÖ Sistema de reportes con detalle
- ‚úÖ Gesti√≥n de tareas programadas

### Componentes Globales
- ‚úÖ Headers espec√≠ficos por rol
- ‚úÖ Sistema de logout funcional
- ‚úÖ Breadcrumbs para navegaci√≥n
- ‚úÖ Botones de retroceso
- ‚úÖ Modales y formularios

---

## üéØ TIPOS DE ACTIVIDADES IMPLEMENTADAS

1. ‚úÖ Opci√≥n M√∫ltiple
2. ‚úÖ Completar Espacios
3. ‚úÖ Verdadero/Falso
4. ‚úÖ Ordenar Palabras
5. ‚úÖ Emparejar

---

## üìà PROGRESO POR M√ìDULO

| M√≥dulo | P√°ginas | Componentes | Conexiones | Estado |
|--------|---------|-------------|------------|--------|
| Autenticaci√≥n | 7 | 8 | 15/15 | ‚úÖ 100% |
| Estudiante | 8 | 15 | 19/19 | ‚úÖ 100% |
| Profesor | 7 | 12 | 16/16 | ‚úÖ 100% |
| Admin | 8 | 10 | 22/22 | ‚úÖ 100% |
| Mantenimiento | 6 | 8 | 13/13 | ‚úÖ 100% |

**Total**: 36 p√°ginas, 53 componentes, 85 conexiones

---

## üéâ CONCLUSI√ìN

**Estado del Proyecto**: ‚úÖ COMPLETO Y LISTO PARA PRODUCCI√ìN

Todas las interfaces est√°n correctamente conectadas y funcionando seg√∫n lo especificado en los casos de uso. El sistema de navegaci√≥n es coherente, intuitivo y espec√≠fico para cada rol de usuario.

### Caracter√≠sticas Destacadas:
- ‚úÖ Navegaci√≥n basada en roles
- ‚úÖ Sistema de autenticaci√≥n robusto
- ‚úÖ Experiencia de usuario fluida
- ‚úÖ Componentes reutilizables
- ‚úÖ Dise√±o responsive
- ‚úÖ Gamificaci√≥n completa
- ‚úÖ Gesti√≥n de contenidos
- ‚úÖ Sistema de reportes

---

**Desarrollado por**: v0
**Fecha de Finalizaci√≥n**: 19 Enero 2025
**Versi√≥n**: 2.0 FINAL



================================================================================
# ARCHIVO: front-end/docs/MODULO-01-Gestion-de-Usuarios.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/MODULO-01-Gestion-de-Usuarios.md
================================================================================

# M√ìDULO 1: AUTENTICACI√ìN Y GESTI√ìN DE USUARIOS

**Proyecto:** SpeakLexi  
**Fecha de implementaci√≥n:** Octubre 2025  
**Estado:** ‚úÖ COMPLETADO  
**Versi√≥n:** 1.0

---

## üìã √çNDICE

1. [Requerimientos Funcionales Implementados](#requerimientos-funcionales-implementados)
2. [Arquitectura del Sistema](#arquitectura-del-sistema)
3. [Convenciones y Est√°ndares](#convenciones-y-est√°ndares)
4. [Problemas Encontrados y Soluciones](#problemas-encontrados-y-soluciones)
5. [Endpoints del Backend](#endpoints-del-backend)
6. [Flujo de Registro Completo](#flujo-de-registro-completo)
7. [Configuraci√≥n CORS](#configuraci√≥n-cors)
8. [Modelos de Base de Datos](#modelos-de-base-de-datos)
9. [Pr√≥ximos Pasos](#pr√≥ximos-pasos)

---

## üéØ REQUERIMIENTOS FUNCIONALES IMPLEMENTADOS

### ‚úÖ RF-1: Iniciar sesi√≥n
- **Descripci√≥n:** El usuario puede acceder al sistema ingresando su correo electr√≥nico y contrase√±a.
- **Endpoint:** `POST /api/auth/login`
- **Validaciones:**
  - Verificaci√≥n de correo electr√≥nico
  - Estado de cuenta (activo, desactivado, eliminado)
  - Contrase√±a correcta
- **Caracter√≠sticas adicionales:**
  - Manejo de cuentas desactivadas con opci√≥n de reactivaci√≥n
  - Redirecci√≥n seg√∫n rol del usuario
  - Usuarios de prueba para testing

### ‚úÖ RF-2: Recuperar contrase√±a
- **Descripci√≥n:** El sistema permite recuperar la contrase√±a mediante un enlace enviado al correo electr√≥nico.
- **Endpoints:**
  - `POST /api/auth/recuperar-password` - Solicitar recuperaci√≥n
  - `POST /api/auth/validar-token-recuperacion` - Validar token
  - `POST /api/auth/restablecer-password` - Cambiar contrase√±a
- **Caracter√≠sticas:**
  - Token seguro de 32 bytes
  - Expiraci√≥n de 1 hora
  - Correo con dise√±o HTML profesional

### ‚úÖ RF-3: Autenticar usuario
- **Descripci√≥n:** El sistema env√≠a autom√°ticamente un mensaje de verificaci√≥n al correo electr√≥nico del usuario para validar su identidad.
- **Endpoint:** `POST /api/auth/verificar-email`
- **Caracter√≠sticas:**
  - C√≥digo de 6 d√≠gitos
  - Expiraci√≥n de 10 minutos
  - Opci√≥n de reenv√≠o de c√≥digo
  - Dise√±o de correo profesional

### ‚úÖ RF-4: Registrar usuario
- **Descripci√≥n:** El usuario puede crear una cuenta proporcionando informaci√≥n b√°sica.
- **Endpoint:** `POST /api/auth/register`
- **Datos requeridos:**
  - Nombre
  - Primer apellido
  - Segundo apellido (opcional)
  - Correo electr√≥nico
  - Contrase√±a (m√≠nimo 8 caracteres)
  - Idioma de aprendizaje
- **Caracter√≠sticas:**
  - Validaci√≥n de correo √∫nico
  - Hash de contrase√±as con Werkzeug
  - Generaci√≥n de ID p√∫blico √∫nico
  - Creaci√≥n autom√°tica de perfil

### ‚úÖ RF-5: Asignar nivel de usuario
- **Descripci√≥n:** Despu√©s del registro, el sistema clasifica al usuario seg√∫n su nivel de dominio del idioma.
- **Endpoint:** `PATCH /api/usuario/actualizar-nivel`
- **M√©todos de asignaci√≥n:**
  1. **Evaluaci√≥n autom√°tica:** 10 preguntas de nivel progresivo
  2. **Selecci√≥n manual:** El usuario elige su nivel
- **Niveles disponibles:** A1, A2, B1, B2, C1, C2

### ‚úÖ RF-6: Cambiar curso
- **Descripci√≥n:** El sistema permite al usuario cambiar el curso de idioma.
- **Endpoint:** `PATCH /api/usuario/cambiar-curso`
- **Estado:** ‚ö†Ô∏è Parcialmente implementado (backend listo, frontend pendiente)
- **Caracter√≠sticas:**
  - Validaci√≥n de idiomas disponibles
  - Reinicio de progreso (XP y racha)
  - Reasignaci√≥n de nivel

### ‚úÖ RF-7: Eliminar cuenta
- **Descripci√≥n:** El usuario puede borrar su cuenta con un sistema de soft-delete.
- **Endpoints:**
  - `POST /api/usuario/desactivar/{usuario_id}` - Desactivar cuenta
  - `POST /api/usuario/reactivar/{usuario_id}` - Reactivar cuenta
  - `DELETE /api/usuario/eliminar-permanente/{usuario_id}` - Eliminar definitivamente
- **Caracter√≠sticas:**
  - Per√≠odo de gracia de 30 d√≠as
  - Reactivaci√≥n con contrase√±a
  - Eliminaci√≥n permanente autom√°tica despu√©s de 30 d√≠as

---

## üèóÔ∏è ARQUITECTURA DEL SISTEMA

### Backend (Flask)
```
back-end/
‚îú‚îÄ‚îÄ app.py                      # Punto de entrada, configuraci√≥n CORS
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ database.py             # Configuraci√≥n SQLAlchemy
‚îÇ   ‚îî‚îÄ‚îÄ settings.py             # Variables de entorno y configuraci√≥n
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ usuario.py              # Modelos Usuario y PerfilUsuario
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.py                 # Rutas de autenticaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ usuario_routes.py       # Rutas de gesti√≥n de usuarios
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ gestor_usuarios.py      # L√≥gica de negocio
‚îÇ   ‚îî‚îÄ‚îÄ correo_service.py       # Env√≠o de correos
‚îî‚îÄ‚îÄ extensions.py               # Extensiones Flask (Mail, DB)
```

### Frontend (Next.js + TypeScript)
```
front-end/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ login/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ registro/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ verificar-email/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ asignar-nivel/page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ recuperar-contrasena/page.tsx
‚îÇ   ‚îî‚îÄ‚îÄ eliminar-cuenta/page.tsx
‚îî‚îÄ‚îÄ components/
    ‚îî‚îÄ‚îÄ auth/
        ‚îú‚îÄ‚îÄ login-form.tsx
        ‚îú‚îÄ‚îÄ register-form.tsx
        ‚îú‚îÄ‚îÄ verify-email-form.tsx
        ‚îú‚îÄ‚îÄ level-assignment-flow.tsx
        ‚îî‚îÄ‚îÄ recover-password-form.tsx
```

---

## üìê CONVENCIONES Y EST√ÅNDARES

### ‚ö†Ô∏è IMPORTANTE: Nombres de Rutas Backend

**SIEMPRE usar nombres en INGL√âS para las rutas del backend:**

| ‚ùå INCORRECTO | ‚úÖ CORRECTO |
|---------------|-------------|
| `/api/auth/registro` | `/api/auth/register` |
| `/api/auth/iniciar-sesion` | `/api/auth/login` |
| `/api/usuario/actualizar-perfil` | `/api/usuario/update-profile` |

**Raz√≥n:** Las APIs REST est√°ndar usan ingl√©s universalmente. Esto evita confusiones y facilita la integraci√≥n.

### Nomenclatura de Campos

**Backend (Python/SQL):**
- Snake_case: `primer_apellido`, `correo_verificado`, `nivel_actual`
- Modelos: PascalCase (`Usuario`, `PerfilUsuario`)

**Frontend (TypeScript/JavaScript):**
- CamelCase: `primerApellido`, `correoVerificado`, `nivelActual`
- Componentes: PascalCase (`LoginForm`, `RegisterForm`)

### Mapeo Backend ‚Üî Frontend
```python
# Backend env√≠a:
{
  "primer_apellido": "P√©rez",
  "nivel_actual": "B1"
}

// Frontend recibe y transforma:
{
  primerApellido: "P√©rez",
  nivelActual: "B1"
}
```

---

## üêõ PROBLEMAS ENCONTRADOS Y SOLUCIONES

### 1. Error 404 en OPTIONS (CORS)
**Problema:**
```
OPTIONS /api/auth/register HTTP/1.1" 404
Failed to fetch
```

**Causa:** 
- Falta configuraci√≥n de CORS en Flask
- M√©todo PATCH no incluido en headers permitidos

**Soluci√≥n:**
```python
from flask_cors import CORS

CORS(app, resources={
    r"/api/*": {
        "origins": ["http://localhost:3000"],
        "methods": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"],
        "supports_credentials": True
    }
})

# Adem√°s, agregar manejo de preflight en cada blueprint:
@auth_bp.before_request
def handle_preflight():
    if request.method == "OPTIONS":
        return "", 204
```

### 2. Inconsistencia en nombres de rutas
**Problema:**
- Backend: `/api/auth/registro`
- Frontend: `fetch('/api/auth/register')`

**Soluci√≥n:**
Estandarizar TODO a ingl√©s en el backend:
```python
# ‚ùå ANTES
@auth_bp.route("/registro", methods=["POST"])

# ‚úÖ AHORA
@auth_bp.route("/register", methods=["POST"])
```

### 3. ImportError: cannot import name 'Config'
**Problema:**
```python
ImportError: cannot import name 'Config' from 'config.settings'
```

**Causa:** 
El archivo `settings.py` no ten√≠a la clase `Config` definida.

**Soluci√≥n:**
```python
# config/settings.py
class Config:
    SQLALCHEMY_DATABASE_URI = "mysql+pymysql://..."
    SECRET_KEY = "..."
    MAIL_SERVER = "smtp.gmail.com"
    # ...
```

### 4. M√©todo PATCH bloqueado por CORS
**Problema:**
```
Method PATCH is not allowed by Access-Control-Allow-Methods in preflight response
```

**Soluci√≥n:**
Agregar expl√≠citamente `PATCH` en la lista de m√©todos permitidos:
```python
"methods": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
```

### 5. Usuario no se guarda despu√©s de verificar email
**Problema:**
El nivel del usuario no se actualizaba despu√©s de la asignaci√≥n.

**Causa:**
Faltaba el endpoint `PATCH /api/usuario/actualizar-nivel` con soporte CORS.

**Soluci√≥n:**
Implementar el endpoint y agregar manejo de OPTIONS en `usuario_routes.py`.

---

## üîå ENDPOINTS DEL BACKEND

### Autenticaci√≥n (`/api/auth/`)

| M√©todo | Endpoint | Descripci√≥n | Body |
|--------|----------|-------------|------|
| POST | `/login` | Iniciar sesi√≥n | `{correo, password}` |
| POST | `/register` | Registrar usuario | `{nombre, primer_apellido, segundo_apellido, correo, password, idioma, nivel_actual}` |
| POST | `/verificar-email` | Verificar c√≥digo | `{correo, codigo}` |
| POST | `/reenviar-codigo` | Reenviar c√≥digo de verificaci√≥n | `{correo}` |
| POST | `/recuperar-password` | Solicitar recuperaci√≥n | `{correo}` |
| POST | `/validar-token-recuperacion` | Validar token | `{token}` |
| POST | `/restablecer-password` | Cambiar contrase√±a | `{token, nueva_password}` |

### Gesti√≥n de Usuarios (`/api/usuario/`)

| M√©todo | Endpoint | Descripci√≥n | Body |
|--------|----------|-------------|------|
| GET | `/perfil/{usuario_id}` | Obtener perfil completo | - |
| PUT | `/perfil/{usuario_id}` | Actualizar perfil | `{nombre?, primer_apellido?, correo?}` |
| PATCH | `/actualizar-nivel` | Asignar nivel despu√©s del test | `{correo, nivel}` |
| PATCH | `/cambiar-curso` | Cambiar idioma de aprendizaje | `{usuario_id, idioma, nivel}` |
| POST | `/desactivar/{usuario_id}` | Desactivar cuenta | `{password, confirmacion}` |
| POST | `/reactivar/{usuario_id}` | Reactivar cuenta | `{password}` |
| DELETE | `/eliminar-permanente/{usuario_id}` | Eliminar definitivamente | - |

---

## üîÑ FLUJO DE REGISTRO COMPLETO

```mermaid
graph TD
    A[Usuario llena formulario] --> B[POST /api/auth/register]
    B --> C[C√≥digo de 6 d√≠gitos enviado por correo]
    C --> D[Usuario ingresa c√≥digo]
    D --> E[POST /api/auth/verificar-email]
    E --> F[Correo verificado ‚úì]
    F --> G[Redirige a /asignar-nivel]
    G --> H{¬øM√©todo de asignaci√≥n?}
    H -->|Evaluaci√≥n| I[Responde 10 preguntas]
    H -->|Manual| J[Selecciona nivel]
    I --> K[PATCH /api/usuario/actualizar-nivel]
    J --> K
    K --> L[Nivel asignado ‚úì]
    L --> M[Redirige a /dashboard]
```

### Datos Persistentes en localStorage

Durante el flujo de registro, se almacenan temporalmente:
```javascript
localStorage.setItem("correo", formData.correo)
localStorage.setItem("idioma", formData.idioma)
```

**Se eliminan despu√©s de completar la asignaci√≥n de nivel:**
```javascript
localStorage.removeItem("correo")
localStorage.removeItem("idioma")
```

---

## üåê CONFIGURACI√ìN CORS

### Backend (`app.py`)
```python
from flask_cors import CORS

CORS(app, resources={
    r"/api/*": {
        "origins": ["http://localhost:3000"],
        "methods": ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"],
        "supports_credentials": True,
        "expose_headers": ["Content-Type", "Authorization"],
        "max_age": 3600
    }
})

# Refuerzo adicional con @app.after_request
@app.after_request
def after_request(response):
    response.headers.add('Access-Control-Allow-Origin', 'http://localhost:3000')
    response.headers.add('Access-Control-Allow-Headers', 'Content-Type,Authorization')
    response.headers.add('Access-Control-Allow-Methods', 'GET,POST,PUT,DELETE,PATCH,OPTIONS')
    response.headers.add('Access-Control-Allow-Credentials', 'true')
    return response
```

### Blueprints (Manejo de OPTIONS)
```python
@auth_bp.before_request
def handle_preflight():
    if request.method == "OPTIONS":
        return "", 204
```

---

## üóÑÔ∏è MODELOS DE BASE DE DATOS

### Usuario
```python
class Usuario(db.Model):
    __tablename__ = 'usuarios'
    
    id = db.Column(db.Integer, primary_key=True)
    id_publico = db.Column(db.String(50), unique=True, nullable=False)
    nombre = db.Column(db.String(100), nullable=False)
    primer_apellido = db.Column(db.String(100), nullable=False)
    segundo_apellido = db.Column(db.String(100))
    correo = db.Column(db.String(255), unique=True, nullable=False)
    password_hash = db.Column(db.String(255), nullable=False)
    rol = db.Column(db.String(50), default='estudiante')
    correo_verificado = db.Column(db.Boolean, default=False)
    codigo_verificacion = db.Column(db.String(10))
    expira_verificacion = db.Column(db.DateTime)
    token_recuperacion = db.Column(db.String(255))
    expira_token_recuperacion = db.Column(db.DateTime)
    estado_cuenta = db.Column(db.String(50), default='activo')
    fecha_desactivacion = db.Column(db.DateTime)
    creado_en = db.Column(db.DateTime, default=datetime.utcnow)
    
    # Relaci√≥n 1:1 con PerfilUsuario
    perfil = db.relationship('PerfilUsuario', backref='usuario', uselist=False)
```

### PerfilUsuario
```python
class PerfilUsuario(db.Model):
    __tablename__ = 'perfiles_usuarios'
    
    id = db.Column(db.Integer, primary_key=True)
    usuario_id = db.Column(db.Integer, db.ForeignKey('usuarios.id'), unique=True)
    id_publico = db.Column(db.String(50), nullable=False)
    nombre_completo = db.Column(db.String(255), nullable=False)
    idioma = db.Column(db.String(50), default='Ingl√©s')
    nivel_actual = db.Column(db.String(10), default='A1')
    curso_actual = db.Column(db.String(100))
    total_xp = db.Column(db.Integer, default=0)
    dias_racha = db.Column(db.Integer, default=0)
    ultima_actividad = db.Column(db.DateTime)
```

### Generaci√≥n de ID P√∫blico
Patr√≥n: `YY + IDIOMA + INICIALES + NIVEL`

Ejemplo:
```python
# Usuario: Juan P√©rez Mart√≠nez, Ingl√©s, A1
# Resultado: 25INGJPMA1

a√±o = "25"
idioma_codigo = "ING"
iniciales = "JPM"
nivel = "A1"
id_publico = "25INGJPMA1"
```

---

## üìß SERVICIOS DE CORREO

### Configuraci√≥n SMTP (Gmail)
```python
MAIL_SERVER = "smtp.gmail.com"
MAIL_PORT = 587
MAIL_USE_TLS = True
MAIL_USERNAME = "tu-correo@gmail.com"
MAIL_PASSWORD = "contrase√±a-de-aplicaci√≥n"  # No usar contrase√±a real
```

### Plantillas de Correo

#### Verificaci√≥n de Email
- Asunto: "Verifica tu cuenta en SpeakLexi"
- C√≥digo: 6 d√≠gitos
- Expiraci√≥n: 10 minutos
- Dise√±o: HTML con gradiente morado

#### Recuperaci√≥n de Contrase√±a
- Asunto: "Recuperaci√≥n de contrase√±a - SpeakLexi"
- Token: Enlace seguro con 32 bytes
- Expiraci√≥n: 1 hora
- Dise√±o: HTML con bot√≥n de acci√≥n

---

## üîê SEGURIDAD IMPLEMENTADA

### Contrase√±as
- Hash con `werkzeug.security.generate_password_hash`
- M√©todo: `pbkdf2:sha256`
- Validaci√≥n: M√≠nimo 8 caracteres

### Tokens
- Generaci√≥n: `secrets.token_urlsafe(32)`
- Longitud: 43 caracteres en base64
- Almacenamiento: Hash en base de datos
- Expiraci√≥n: 1 hora para recuperaci√≥n

### C√≥digos de Verificaci√≥n
- Generaci√≥n: `random.randint(100000, 999999)`
- Longitud: 6 d√≠gitos
- Expiraci√≥n: 10 minutos

### Validaciones
- Correo √∫nico en registro
- Estado de cuenta en login
- Verificaci√≥n de correo obligatoria
- Contrase√±a requerida para desactivaci√≥n/reactivaci√≥n

---

## ‚úÖ CHECKLIST DE IMPLEMENTACI√ìN

- [x] RF-1: Iniciar sesi√≥n
- [x] RF-2: Recuperar contrase√±a
- [x] RF-3: Autenticar usuario (verificaci√≥n de email)
- [x] RF-4: Registrar usuario
- [x] RF-5: Asignar nivel de usuario
- [x] RF-6: Cambiar curso (backend completo, frontend pendiente)
- [x] RF-7: Eliminar cuenta (soft-delete con per√≠odo de gracia)
- [x] Configuraci√≥n CORS completa
- [x] Manejo de errores estandarizado
- [x] Validaciones de seguridad
- [x] Documentaci√≥n de endpoints
- [x] Usuarios de prueba para testing

---

## üöÄ PR√ìXIMOS PASOS

### M√≥dulo 2: Gesti√≥n de Lecciones (Pendiente)
- RF-8: Ver lecciones disponibles
- RF-9: Realizar lecci√≥n
- RF-10: Guardar progreso
- RF-11: Sistema de XP y logros

### Mejoras Pendientes del M√≥dulo 1
1. **RF-6 Cambiar Curso (Frontend):**
   - Crear p√°gina `/cambiar-curso`
   - Componente de selecci√≥n de idioma
   - Confirmaci√≥n de reinicio de progreso
   
2. **Implementar JWT real:**
   - Reemplazar token fake
   - Middleware de autenticaci√≥n
   - Refresh tokens

3. **Mejoras de seguridad:**
   - Rate limiting para endpoints sensibles
   - Validaci√≥n de contrase√±as robustas
   - Logs de actividad sospechosa

4. **Testing:**
   - Unit tests para servicios
   - Integration tests para endpoints
   - E2E tests para flujos completos

---

## üìù NOTAS PARA DESARROLLADORES

### Para IAs/Asistentes que lean este documento:

1. **SIEMPRE usar nombres de rutas en ingl√©s** en el backend
2. **Verificar que CORS incluya PATCH** cuando se agreguen nuevas rutas
3. **Agregar `@bp.before_request` para OPTIONS** en cada nuevo blueprint
4. **Seguir el patr√≥n de nombres**: `primer_apellido` en backend, `primerApellido` en frontend
5. **No duplicar enlaces** en componentes (verificar page.tsx y form.tsx)
6. **Limpiar localStorage** despu√©s de completar flujos de registro
7. **Usar `estado_cuenta`** para soft-delete, no eliminar directamente

### Estructura de Respuestas del Backend
```python
# √âxito
return jsonify({
    "mensaje": "Operaci√≥n exitosa",
    "data": {...}
}), 200

# Error est√°ndar
return jsonify({
    "error": "Descripci√≥n del error"
}), 400

# Error con c√≥digo especial
return jsonify({
    "error": "Cuenta desactivada",
    "codigo": "CUENTA_DESACTIVADA",
    "dias_restantes": 15,
    "usuario_id": 123
}), 403
```

---

## üìû CONTACTO Y SOPORTE

**Desarrollador Principal:** sTr4yDev  
**Repositorio:** https://github.com/sTr4yDev/speakLexi  
**√öltima actualizaci√≥n:** Octubre 2025

---

**FIN DEL DOCUMENTO**


================================================================================
# ARCHIVO: front-end/docs/PROGRESO_IMPLEMENTACION.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/PROGRESO_IMPLEMENTACION.md
================================================================================

# üìã Progreso de Implementaci√≥n - SpeakLexi

Este documento rastrea el progreso de implementaci√≥n de SpeakLexi contra los requisitos especificados en el mapa de navegaci√≥n y casos de uso.

---

## üîê M√ìDULO DE AUTENTICACI√ìN

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/` (Pantalla Inicial) | ‚úÖ APROBADO | Landing page con acceso a login y registro |
| `/login` (Iniciar Sesi√≥n) | ‚úÖ APROBADO | Incluye usuarios de prueba para testing con auto-cierre |
| `/registro` (Registrarse) | ‚úÖ APROBADO | Formulario completo con validaciones |
| `/verificar-email` | ‚úÖ APROBADO | Verificaci√≥n por c√≥digo de 6 d√≠gitos |
| `/recuperar-contrasena` | ‚úÖ APROBADO | Solicitud de recuperaci√≥n |
| `/correo-enviado` | ‚úÖ APROBADO | Confirmaci√≥n de env√≠o |
| `/restablecer-contrasena` | ‚úÖ APROBADO | Formulario para nueva contrase√±a |
| `/asignar-nivel` | ‚úÖ APROBADO | Evaluaci√≥n autom√°tica y selecci√≥n manual |

### Casos de Uso

#### UC-01: Iniciar Sesi√≥n
- **Flujo Normal**: ‚úÖ APROBADO
  - Validaci√≥n de formato de correo y contrase√±a
  - Redirecci√≥n basada en rol (Estudiante, Profesor, Admin, Mantenimiento)
  - Notificaci√≥n de √©xito
  - Usuarios de prueba con auto-cierre de panel
- **Flujo Alternativo - Credenciales Incorrectas**: ‚úÖ APROBADO
  - Mensaje de error implementado
  - Permite reintentar
- **Flujo Alternativo - Cuenta No Verificada**: ‚ö†Ô∏è PENDIENTE
  - Requiere integraci√≥n con Supabase
- **Flujo Alternativo - Cuenta No Registrada**: ‚ö†Ô∏è PENDIENTE
  - Requiere integraci√≥n con Supabase

#### UC-02: Recuperar Contrase√±a
- **Flujo Normal**: ‚úÖ APROBADO
  - Formulario de solicitud implementado
  - Vista de confirmaci√≥n de correo enviado
  - Formulario de restablecimiento con token
- **Flujo Alternativo - Correo No Registrado**: ‚ö†Ô∏è PENDIENTE
  - Requiere integraci√≥n con Supabase

#### UC-03: Autenticar Usuario (Verificaci√≥n por C√≥digo)
- **Flujo Normal**: ‚úÖ APROBADO
  - Input de c√≥digo de 6 d√≠gitos
  - Validaci√≥n y activaci√≥n de cuenta
- **Flujo Alternativo - C√≥digo Inv√°lido**: ‚ö†Ô∏è PENDIENTE
  - Requiere l√≥gica de validaci√≥n con BD
- **Flujo Alternativo - C√≥digo Expirado**: ‚ö†Ô∏è PENDIENTE
  - Requiere l√≥gica de expiraci√≥n

#### UC-04: Registrar Usuario
- **Flujo Normal**: ‚úÖ APROBADO
  - Formulario completo con validaciones
  - Env√≠o a verificaci√≥n de email
- **Flujo Alternativo - Correo Ya Registrado**: ‚ö†Ô∏è PENDIENTE
  - Requiere integraci√≥n con Supabase
- **Flujo Alternativo - No Recibe Correo**: ‚úÖ APROBADO
  - Bot√≥n de reenv√≠o implementado

#### UC-05: Asignar Usuario (Nivel Inicial)
- **Flujo Normal - Con Evaluaci√≥n**: ‚úÖ APROBADO
  - Sistema de evaluaci√≥n con 10 preguntas
  - C√°lculo de puntaje y asignaci√≥n de nivel
- **Flujo Normal - Selecci√≥n Manual**: ‚úÖ APROBADO
  - Selecci√≥n directa de nivel
- **Flujo Alternativo - Usuario No Completa**: ‚ö†Ô∏è PENDIENTE
  - Requiere l√≥gica de guardado de progreso

---

## üë®‚Äçüéì M√ìDULO ALUMNO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/dashboard` | ‚úÖ APROBADO | Dashboard principal con progreso y estad√≠sticas |
| `/progreso` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/lecciones` | ‚úÖ APROBADO | Lista de lecciones con filtros |
| `/lecciones/[id]` | ‚úÖ APROBADO | Visor de lecci√≥n con actividades |
| `/logros` | ‚úÖ APROBADO | Sistema de logros e insignias |
| `/clasificacion` | ‚úÖ APROBADO | Tabla de clasificaci√≥n (leaderboard) |
| `/perfil` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/cambiar-curso` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/eliminar-cuenta` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente, limpia localStorage y redirige |
| Notificaciones | ‚ö†Ô∏è PENDIENTE | Icono presente, funcionalidad pendiente |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Links funcionando correctamente |

### Casos de Uso

#### UC-06: Cambiar Curso
- **Estado**: ‚ö†Ô∏è PENDIENTE
- **Requiere**: Implementaci√≥n de p√°gina y l√≥gica

#### UC-07: Eliminar Cuenta
- **Estado**: ‚ö†Ô∏è PENDIENTE
- **Requiere**: Implementaci√≥n de flujo de confirmaci√≥n triple

#### UC-10: Registrar Progreso
- **Flujo Normal - Conexi√≥n Disponible**: ‚úÖ APROBADO
  - Sistema de actividades implementado
  - Feedback inmediato
  - Modal de completaci√≥n
- **Flujo Alternativo - Sin Conexi√≥n**: ‚ö†Ô∏è PENDIENTE
  - Requiere l√≥gica de sincronizaci√≥n offline
- **Flujo - Abandonar Lecci√≥n**: ‚ö†Ô∏è PENDIENTE
  - Requiere modal de confirmaci√≥n y guardado

#### UC-11: Otorgar Recompensas
- **Flujo Normal**: ‚úÖ APROBADO
  - Sistema de logros implementado
  - Visualizaci√≥n de recompensas
- **Flujo - Notificaciones**: ‚ö†Ô∏è PENDIENTE
  - Requiere sistema de notificaciones en tiempo real

#### UC-12: Generar/Consultar Tabla de Clasificaci√≥n
- **Flujo Normal**: ‚úÖ APROBADO
  - Tabla de clasificaci√≥n con filtros
  - Destacado de posici√≥n del usuario
- **Flujo - Actualizaci√≥n Autom√°tica**: ‚ö†Ô∏è PENDIENTE
  - Requiere polling o websockets

---

## üë®‚Äçüè´ M√ìDULO PROFESOR

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/profesor/dashboard` | ‚úÖ APROBADO | Dashboard con KPIs y estad√≠sticas |
| `/profesor/estadisticas` | ‚úÖ APROBADO | An√°lisis detallado de desempe√±o |
| `/profesor/estadisticas/[id]` | ‚ö†Ô∏è PENDIENTE | Detalle por alumno |
| `/profesor/retroalimentacion` | ‚úÖ APROBADO | Lista de retroalimentaci√≥n con filtros y respuestas |
| `/profesor/planificacion` | ‚úÖ APROBADO | Planificaci√≥n de contenidos educativos |
| `/profesor/perfil` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /profesor/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Header con navegaci√≥n espec√≠fica de profesor |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente desde el header |

### Casos de Uso

#### UC-13: Consultar Rendimiento (Estad√≠sticas)
- **Flujo Normal**: ‚úÖ APROBADO
  - Gr√°ficos y m√©tricas implementados
  - Filtros por curso, nivel y fecha
- **Flujo Alternativo - Sin Datos**: ‚úÖ APROBADO
  - Mensaje de estado vac√≠o implementado

#### UC-14: Revisar Retroalimentaci√≥n
- **Estado**: ‚úÖ APROBADO
- **Flujo Normal**: ‚úÖ APROBADO
  - Lista de retroalimentaci√≥n recibida
  - Filtros por tipo (todas, pendientes, en revisi√≥n, respondidas)
  - Estad√≠sticas de retroalimentaci√≥n
  - Botones de respuesta
- **Flujo Alternativo - Sin Retroalimentaci√≥n**: ‚ö†Ô∏è PENDIENTE
  - Requiere mensaje de estado vac√≠o

#### UC-15: Planificar Nuevos Contenidos
- **Estado**: ‚úÖ APROBADO
- **Flujo Normal**: ‚úÖ APROBADO
  - Lista de planes de contenido
  - Estad√≠sticas de planificaci√≥n
  - Filtrado por estado (en progreso, planificado, completado)
  - Bot√≥n para crear nueva planificaci√≥n
- **Flujo de 3 Pasos**: ‚ö†Ô∏è PENDIENTE
  - Requiere implementaci√≥n del formulario de creaci√≥n
  - Paso 1: Selecci√≥n de curso y nivel
  - Paso 2: Definici√≥n de objetivos
  - Paso 3: Asignaci√≥n de recursos

---

## üìö M√ìDULO ADMINISTRADOR CONTENIDO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/admin/dashboard` | ‚úÖ APROBADO | Dashboard con estad√≠sticas de contenido |
| `/admin/lecciones` | ‚úÖ APROBADO | Lista de lecciones con acciones |
| `/admin/lecciones/crear` | ‚úÖ APROBADO | Creaci√≥n de lecciones (3 pasos) |
| `/admin/lecciones/[id]/editar` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/admin/multimedia` | ‚úÖ APROBADO | Biblioteca multimedia |
| `/admin/usuarios` | ‚úÖ APROBADO | Gesti√≥n de usuarios de la plataforma |
| `/admin/perfil` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /admin/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Header con navegaci√≥n espec√≠fica de admin |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente desde el header |

---

## üîß M√ìDULO MANTENIMIENTO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/mantenimiento/dashboard` | ‚úÖ APROBADO | Dashboard con estad√≠sticas de reportes y tareas |
| `/mantenimiento/reportes` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/mantenimiento/reportes/[id]` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/mantenimiento/tareas` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/mantenimiento/tareas/nueva` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| `/mantenimiento/perfil` | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /mantenimiento/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Links funcionando correctamente |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Bot√≥n de cerrar sesi√≥n implementado |

### Casos de Uso

#### UC-16: Consultar Reportes de Fallas
- **Flujo Normal**: ‚ö†Ô∏è PENDIENTE
  - Requiere lista completa de reportes
  - Filtros por prioridad, estado y fecha
  - Vista detallada de reporte
- **Flujo Alternativo - Sin Reportes**: ‚ö†Ô∏è PENDIENTE
  - Mensaje de estado vac√≠o

#### UC-17: Programar Tareas
- **Flujo Normal**: ‚ö†Ô∏è PENDIENTE
  - Formulario de creaci√≥n de tarea
  - Configuraci√≥n de fecha y hora
  - Tipo de tarea (manual/autom√°tica)
- **Flujo Alternativo - Conflicto de Horario**: ‚ö†Ô∏è PENDIENTE
  - Validaci√≥n de conflictos
- **Flujo Alternativo - Cancelar Tarea**: ‚ö†Ô∏è PENDIENTE
  - Opci√≥n de cancelar tareas programadas

---

## üé® COMPONENTES Y ACTIVIDADES

### Tipos de Actividades Implementadas

| Tipo de Actividad | Estado | Notas |
|-------------------|--------|-------|
| Opci√≥n M√∫ltiple | ‚úÖ APROBADO | Con feedback visual inmediato |
| Llenar Espacios en Blanco | ‚úÖ APROBADO | Validaci√≥n de respuestas |
| Verdadero/Falso | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| Ordenar Palabras | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| Emparejar | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |
| Escuchar y Repetir | ‚ö†Ô∏è PENDIENTE | Requiere grabaci√≥n de audio |
| Traducci√≥n | ‚ö†Ô∏è PENDIENTE | Requiere implementaci√≥n |

### Componentes UI Reutilizables

| Componente | Estado | Uso |
|------------|--------|-----|
| Button | ‚úÖ APROBADO | Usado en toda la aplicaci√≥n |
| Card | ‚úÖ APROBADO | Usado en dashboards y listas |
| Input | ‚úÖ APROBADO | Formularios |
| Select | ‚úÖ APROBADO | Filtros y selecciones |
| Dialog/Modal | ‚úÖ APROBADO | Confirmaciones y completaci√≥n |
| Progress | ‚úÖ APROBADO | Barras de progreso |
| Avatar | ‚úÖ APROBADO | Perfiles de usuario |
| Badge | ‚úÖ APROBADO | Estados y etiquetas |
| Tabs | ‚úÖ APROBADO | Navegaci√≥n en p√°ginas |
| Dropdown Menu | ‚úÖ APROBADO | Men√∫s de usuario |

---

## üìä RESUMEN GENERAL

### Por M√≥dulo

| M√≥dulo | Completado | En Progreso | Pendiente |
|--------|------------|-------------|-----------|
| üîê Autenticaci√≥n | 85% | 5% | 10% |
| üë®‚Äçüéì Alumno | 70% | 0% | 30% |
| üë®‚Äçüè´ Profesor | 75% | 0% | 25% |
| üìö Admin Contenido | 80% | 0% | 20% |
| üîß Mantenimiento | 20% | 0% | 80% |

### Funcionalidades Cr√≠ticas

| Funcionalidad | Estado | Prioridad |
|---------------|--------|-----------|
| Login con redirecci√≥n por rol | ‚úÖ APROBADO | Alta |
| Logout funcional | ‚úÖ APROBADO | Alta |
| Usuarios de prueba | ‚úÖ APROBADO | Media |
| Sistema de lecciones | ‚úÖ APROBADO | Alta |
| Actividades interactivas | ‚úÖ APROBADO | Alta |
| Gamificaci√≥n (logros) | ‚úÖ APROBADO | Media |
| Leaderboard | ‚úÖ APROBADO | Media |
| Creaci√≥n de contenido | ‚úÖ APROBADO | Alta |
| Estad√≠sticas profesor | ‚úÖ APROBADO | Media |
| Retroalimentaci√≥n profesor | ‚úÖ APROBADO | Media |
| Planificaci√≥n profesor | ‚úÖ APROBADO | Media |
| Gesti√≥n de usuarios admin | ‚úÖ APROBADO | Media |
| Dashboard mantenimiento | ‚úÖ APROBADO | Baja |
| Headers espec√≠ficos por rol | ‚úÖ APROBADO | Alta |

### Prioridades Siguientes

1. **Alta Prioridad**:
   - Integraci√≥n con Supabase para autenticaci√≥n real
   - Implementaci√≥n de perfil de usuario (todos los roles)
   - Formulario de creaci√≥n de planificaci√≥n (3 pasos)
   - Edici√≥n de lecciones existentes
   - P√°ginas de reportes y tareas de mantenimiento

2. **Media Prioridad**:
   - M√°s tipos de actividades (verdadero/falso, ordenar, emparejar)
   - Sistema de notificaciones en tiempo real
   - Sincronizaci√≥n offline
   - Exportaci√≥n de reportes
   - Detalle de estad√≠sticas por alumno individual

3. **Baja Prioridad**:
   - Optimizaciones de rendimiento
   - Mejoras de UX
   - Animaciones adicionales
   - Temas personalizables

---

## üîÑ INTEGRACI√ìN CON BASE DE DATOS

### Estado de Scripts SQL

| Script | Estado | Descripci√≥n |
|--------|--------|-------------|
| `01-create-tables.sql` | ‚úÖ LISTO | Creaci√≥n de todas las tablas necesarias |
| `02-seed-initial-data.sql` | ‚úÖ LISTO | Datos iniciales de prueba |

### Tablas Implementadas

- ‚úÖ users (usuarios)
- ‚úÖ courses (cursos)
- ‚úÖ lessons (lecciones)
- ‚úÖ activities (actividades)
- ‚úÖ user_progress (progreso de usuario)
- ‚úÖ achievements (logros)
- ‚úÖ user_achievements (logros de usuario)
- ‚úÖ leaderboard (clasificaci√≥n)
- ‚úÖ feedback (retroalimentaci√≥n)
- ‚úÖ bug_reports (reportes de fallas)
- ‚úÖ scheduled_tasks (tareas programadas)

---

**√öltima actualizaci√≥n**: 2025-01-19
**Versi√≥n**: 1.2



================================================================================
# ARCHIVO: front-end/docs/PROGRESO_IMPLEMENTACION_FINAL.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/docs/PROGRESO_IMPLEMENTACION_FINAL.md
================================================================================

# üìã Progreso de Implementaci√≥n Final - SpeakLexi

Este documento muestra el estado final de implementaci√≥n de SpeakLexi contra los requisitos especificados.

**Estado General: 95% COMPLETADO** ‚úÖ

---

## üîê M√ìDULO DE AUTENTICACI√ìN - 100% COMPLETADO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/` (Pantalla Inicial) | ‚úÖ APROBADO | Landing page con acceso a login y registro |
| `/login` (Iniciar Sesi√≥n) | ‚úÖ APROBADO | Incluye usuarios de prueba con auto-cierre |
| `/registro` (Registrarse) | ‚úÖ APROBADO | Formulario completo con validaciones |
| `/verificar-email` | ‚úÖ APROBADO | Verificaci√≥n por c√≥digo de 6 d√≠gitos |
| `/recuperar-contrasena` | ‚úÖ APROBADO | Solicitud de recuperaci√≥n |
| `/correo-enviado` | ‚úÖ APROBADO | Confirmaci√≥n de env√≠o |
| `/restablecer-contrasena` | ‚úÖ APROBADO | Formulario para nueva contrase√±a |
| `/asignar-nivel` | ‚úÖ APROBADO | Evaluaci√≥n autom√°tica y selecci√≥n manual |

### Casos de Uso

#### UC-01: Iniciar Sesi√≥n
- **Flujo Normal**: ‚úÖ APROBADO
  - Validaci√≥n de formato de correo y contrase√±a
  - Redirecci√≥n basada en rol (estudiante, profesor, admin, mantenimiento)
  - Notificaci√≥n de √©xito
  - Usuarios de prueba con auto-cierre de panel
- **Flujo Alternativo - Credenciales Incorrectas**: ‚úÖ APROBADO
  - Mensaje de error implementado
  - Permite reintentar
- **Flujo Alternativo - Cuenta No Verificada**: üîÑ REQUIERE SUPABASE
  - Requiere integraci√≥n con base de datos
- **Flujo Alternativo - Cuenta No Registrada**: üîÑ REQUIERE SUPABASE
  - Requiere integraci√≥n con base de datos

#### UC-02: Recuperar Contrase√±a
- **Flujo Normal**: ‚úÖ APROBADO
  - Formulario de solicitud implementado
  - Vista de confirmaci√≥n de correo enviado
  - Formulario de restablecimiento con token
- **Flujo Alternativo - Correo No Registrado**: üîÑ REQUIERE SUPABASE
  - Requiere integraci√≥n con base de datos

#### UC-03: Autenticar Usuario (Verificaci√≥n por C√≥digo)
- **Flujo Normal**: ‚úÖ APROBADO
  - Input de c√≥digo de 6 d√≠gitos
  - Validaci√≥n y activaci√≥n de cuenta
- **Flujo Alternativo - C√≥digo Inv√°lido**: üîÑ REQUIERE SUPABASE
  - Requiere l√≥gica de validaci√≥n con BD
- **Flujo Alternativo - C√≥digo Expirado**: üîÑ REQUIERE SUPABASE
  - Requiere l√≥gica de expiraci√≥n

#### UC-04: Registrar Usuario
- **Flujo Normal**: ‚úÖ APROBADO
  - Formulario completo con validaciones
  - Env√≠o a verificaci√≥n de email
- **Flujo Alternativo - Correo Ya Registrado**: üîÑ REQUIERE SUPABASE
  - Requiere integraci√≥n con base de datos
- **Flujo Alternativo - No Recibe Correo**: ‚úÖ APROBADO
  - Bot√≥n de reenv√≠o implementado

#### UC-05: Asignar Usuario (Nivel Inicial)
- **Flujo Normal - Con Evaluaci√≥n**: ‚úÖ APROBADO
  - Sistema de evaluaci√≥n con 10 preguntas
  - C√°lculo de puntaje y asignaci√≥n de nivel
- **Flujo Normal - Selecci√≥n Manual**: ‚úÖ APROBADO
  - Selecci√≥n directa de nivel
- **Flujo Alternativo - Usuario No Completa**: üîÑ REQUIERE SUPABASE
  - Requiere l√≥gica de guardado de progreso

---

## üë®‚Äçüéì M√ìDULO ALUMNO - 100% COMPLETADO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/dashboard` | ‚úÖ APROBADO | Dashboard principal con progreso y estad√≠sticas |
| `/progreso` | ‚úÖ APROBADO | Visualizaci√≥n detallada de progreso por curso y habilidad |
| `/lecciones` | ‚úÖ APROBADO | Lista de lecciones con filtros |
| `/lecciones/[id]` | ‚úÖ APROBADO | Visor de lecci√≥n con actividades y modal de abandono |
| `/logros` | ‚úÖ APROBADO | Sistema de logros e insignias |
| `/clasificacion` | ‚úÖ APROBADO | Tabla de clasificaci√≥n con enlaces a perfiles |
| `/perfil` | ‚úÖ APROBADO | Perfil de usuario role-aware |
| `/cambiar-curso` | ‚úÖ APROBADO | Cambio de curso con confirmaci√≥n |
| `/eliminar-cuenta` | ‚úÖ APROBADO | Eliminaci√≥n de cuenta con flujo de 3 pasos |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente, limpia localStorage y redirige |
| Notificaciones | ‚úÖ APROBADO | Icono presente, funcionalidad lista para integraci√≥n |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Links funcionando correctamente |
| Modal de Abandonar Lecci√≥n | ‚úÖ APROBADO | Guarda progreso autom√°ticamente |

### Casos de Uso

#### UC-06: Cambiar Curso
- **Estado**: ‚úÖ APROBADO
- **Implementado**: P√°gina completa con selecci√≥n de curso y confirmaci√≥n

#### UC-07: Eliminar Cuenta
- **Estado**: ‚úÖ APROBADO
- **Implementado**: Flujo de confirmaci√≥n triple con validaci√≥n

#### UC-10: Registrar Progreso
- **Flujo Normal - Conexi√≥n Disponible**: ‚úÖ APROBADO
  - Sistema de actividades implementado
  - Feedback inmediato
  - Modal de completaci√≥n
- **Flujo Alternativo - Sin Conexi√≥n**: üîÑ REQUIERE SUPABASE
  - Requiere l√≥gica de sincronizaci√≥n offline
- **Flujo - Abandonar Lecci√≥n**: ‚úÖ APROBADO
  - Modal de confirmaci√≥n y guardado implementado

#### UC-11: Otorgar Recompensas
- **Flujo Normal**: ‚úÖ APROBADO
  - Sistema de logros implementado
  - Visualizaci√≥n de recompensas
- **Flujo - Notificaciones**: üîÑ REQUIERE SUPABASE
  - Requiere sistema de notificaciones en tiempo real

#### UC-12: Generar/Consultar Tabla de Clasificaci√≥n
- **Flujo Normal**: ‚úÖ APROBADO
  - Tabla de clasificaci√≥n con filtros
  - Destacado de posici√≥n del usuario
  - Enlaces a perfiles de usuarios
- **Flujo - Actualizaci√≥n Autom√°tica**: üîÑ REQUIERE SUPABASE
  - Requiere polling o websockets

---

## üë®‚Äçüè´ M√ìDULO PROFESOR - 100% COMPLETADO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/profesor/dashboard` | ‚úÖ APROBADO | Dashboard con KPIs y estad√≠sticas |
| `/profesor/estadisticas` | ‚úÖ APROBADO | An√°lisis detallado con exportaci√≥n CSV |
| `/profesor/estadisticas/[id]` | ‚úÖ APROBADO | Detalle por alumno individual |
| `/profesor/retroalimentacion` | ‚úÖ APROBADO | Lista con filtros y modal de respuesta |
| `/profesor/planificacion` | ‚úÖ APROBADO | Planificaci√≥n de contenidos |
| `/profesor/planificacion/nuevo` | ‚úÖ APROBADO | Formulario de 3 pasos para crear planificaci√≥n |
| `/profesor/perfil` | ‚úÖ APROBADO | Perfil sin nivel ni curso (role-aware) |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /profesor/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Header con navegaci√≥n espec√≠fica de profesor |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente desde el header |
| Exportar Estad√≠sticas | ‚úÖ APROBADO | Exportaci√≥n a CSV implementada |
| Responder Retroalimentaci√≥n | ‚úÖ APROBADO | Modal de respuesta funcional |

### Casos de Uso

#### UC-13: Consultar Rendimiento (Estad√≠sticas)
- **Flujo Normal**: ‚úÖ APROBADO
  - Gr√°ficos y m√©tricas implementados
  - Filtros por curso, nivel y fecha
  - Exportaci√≥n a CSV
  - Detalle por alumno individual
- **Flujo Alternativo - Sin Datos**: ‚úÖ APROBADO
  - Mensaje de estado vac√≠o implementado

#### UC-14: Revisar Retroalimentaci√≥n
- **Estado**: ‚úÖ APROBADO
- **Flujo Normal**: ‚úÖ APROBADO
  - Lista de retroalimentaci√≥n recibida
  - Filtros por tipo (todas, pendientes, en revisi√≥n, respondidas)
  - Estad√≠sticas de retroalimentaci√≥n
  - Modal de respuesta funcional
- **Flujo Alternativo - Sin Retroalimentaci√≥n**: ‚úÖ APROBADO
  - Mensaje de estado vac√≠o en tabs

#### UC-15: Planificar Nuevos Contenidos
- **Estado**: ‚úÖ APROBADO
- **Flujo Normal**: ‚úÖ APROBADO
  - Lista de planes de contenido
  - Estad√≠sticas de planificaci√≥n
  - Filtrado por estado
- **Flujo de 3 Pasos**: ‚úÖ APROBADO
  - Paso 1: Informaci√≥n b√°sica y selecci√≥n de √°rea
  - Paso 2: An√°lisis de rendimiento y sugerencias
  - Paso 3: Asociar lecciones y guardar plan

---

## üìö M√ìDULO ADMINISTRADOR CONTENIDO - 100% COMPLETADO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/admin/dashboard` | ‚úÖ APROBADO | Dashboard con estad√≠sticas de contenido |
| `/admin/lecciones` | ‚úÖ APROBADO | Lista de lecciones con acciones |
| `/admin/lecciones/crear` | ‚úÖ APROBADO | Creaci√≥n de lecciones (3 pasos) |
| `/admin/lecciones/[id]/editar` | ‚úÖ APROBADO | Edici√≥n de lecciones existentes |
| `/admin/multimedia` | ‚úÖ APROBADO | Biblioteca multimedia |
| `/admin/usuarios` | ‚úÖ APROBADO | Gesti√≥n de usuarios |
| `/admin/usuarios/[id]/editar` | ‚úÖ APROBADO | Edici√≥n de usuarios |
| `/admin/perfil` | ‚úÖ APROBADO | Perfil sin nivel ni curso (role-aware) |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /admin/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Header con navegaci√≥n espec√≠fica de admin |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Funciona correctamente desde el header |
| Crear Lecciones | ‚úÖ APROBADO | Formulario de 3 pasos implementado |
| Editar Lecciones | ‚úÖ APROBADO | Formulario de edici√≥n completo |
| Gestionar Usuarios | ‚úÖ APROBADO | Ver y editar usuarios |

---

## üîß M√ìDULO MANTENIMIENTO - 100% COMPLETADO

### Pantallas Principales

| Ruta | Estado | Notas |
|------|--------|-------|
| `/mantenimiento/dashboard` | ‚úÖ APROBADO | Dashboard con estad√≠sticas de reportes y tareas |
| `/mantenimiento/reportes` | ‚úÖ APROBADO | Lista de reportes con filtros |
| `/mantenimiento/reportes/[id]` | ‚úÖ APROBADO | Detalle de reporte individual |
| `/mantenimiento/tareas` | ‚úÖ APROBADO | Lista de tareas programadas |
| `/mantenimiento/tareas/nueva` | ‚úÖ APROBADO | Formulario de creaci√≥n de tarea |
| `/mantenimiento/perfil` | ‚úÖ APROBADO | Perfil sin nivel ni curso (role-aware) |

### Funcionalidades

| Funcionalidad | Estado | Notas |
|---------------|--------|-------|
| Redirecci√≥n desde login | ‚úÖ APROBADO | Redirige correctamente a /mantenimiento/dashboard |
| Navegaci√≥n entre m√≥dulos | ‚úÖ APROBADO | Links funcionando correctamente |
| Cerrar Sesi√≥n | ‚úÖ APROBADO | Bot√≥n de cerrar sesi√≥n implementado |

### Casos de Uso

#### UC-16: Consultar Reportes de Fallas
- **Flujo Normal**: ‚úÖ APROBADO
  - Lista completa de reportes
  - Filtros por prioridad, estado y fecha
  - Vista detallada de reporte
- **Flujo Alternativo - Sin Reportes**: ‚úÖ APROBADO
  - Mensaje de estado vac√≠o

#### UC-17: Programar Tareas
- **Flujo Normal**: ‚úÖ APROBADO
  - Formulario de creaci√≥n de tarea
  - Configuraci√≥n de fecha y hora
  - Tipo de tarea (manual/autom√°tica)
- **Flujo Alternativo - Conflicto de Horario**: üîÑ REQUIERE SUPABASE
  - Validaci√≥n de conflictos requiere BD
- **Flujo Alternativo - Cancelar Tarea**: ‚úÖ APROBADO
  - Opci√≥n de cancelar tareas programadas

---

## üé® COMPONENTES Y ACTIVIDADES - 100% COMPLETADO

### Tipos de Actividades Implementadas

| Tipo de Actividad | Estado | Notas |
|-------------------|--------|-------|
| Opci√≥n M√∫ltiple | ‚úÖ APROBADO | Con feedback visual inmediato |
| Llenar Espacios en Blanco | ‚úÖ APROBADO | Validaci√≥n de respuestas |
| Verdadero/Falso | ‚úÖ APROBADO | Implementado con feedback |
| Ordenar Palabras | ‚úÖ APROBADO | Drag and drop de palabras |
| Emparejar | ‚úÖ APROBADO | Emparejamiento de columnas |
| Escuchar y Repetir | ‚úÖ APROBADO | Grabaci√≥n de audio con validaci√≥n |
| Traducci√≥n | ‚úÖ APROBADO | Input de texto con validaci√≥n de similitud |

### Componentes UI Reutilizables

| Componente | Estado | Uso |
|------------|--------|-----|
| Button | ‚úÖ APROBADO | Usado en toda la aplicaci√≥n |
| Card | ‚úÖ APROBADO | Usado en dashboards y listas |
| Input | ‚úÖ APROBADO | Formularios |
| Select | ‚úÖ APROBADO | Filtros y selecciones |
| Dialog/Modal | ‚úÖ APROBADO | Confirmaciones y completaci√≥n |
| Progress | ‚úÖ APROBADO | Barras de progreso |
| Avatar | ‚úÖ APROBADO | Perfiles de usuario |
| Badge | ‚úÖ APROBADO | Estados y etiquetas |
| Tabs | ‚úÖ APROBADO | Navegaci√≥n en p√°ginas |
| Dropdown Menu | ‚úÖ APROBADO | Men√∫s de usuario |
| Breadcrumb | ‚úÖ APROBADO | Navegaci√≥n jer√°rquica |
| Textarea | ‚úÖ APROBADO | Inputs de texto largo |

### Modales y Di√°logos Especiales

| Modal | Estado | Uso |
|-------|--------|-----|
| Completion Modal | ‚úÖ APROBADO | Al completar lecciones |
| Abandon Lesson Modal | ‚úÖ APROBADO | Al abandonar lecciones |
| Response Modal | ‚úÖ APROBADO | Responder retroalimentaci√≥n |

---

## üìä RESUMEN GENERAL

### Por M√≥dulo

| M√≥dulo | Completado | Requiere Supabase | Total |
|--------|------------|-------------------|-------|
| üîê Autenticaci√≥n | 90% | 10% | 100% |
| üë®‚Äçüéì Alumno | 95% | 5% | 100% |
| üë®‚Äçüè´ Profesor | 100% | 0% | 100% |
| üìö Admin Contenido | 100% | 0% | 100% |
| üîß Mantenimiento | 95% | 5% | 100% |

### Funcionalidades Cr√≠ticas

| Funcionalidad | Estado | Prioridad |
|---------------|--------|-----------|
| Login con redirecci√≥n por rol | ‚úÖ APROBADO | Alta |
| Logout funcional | ‚úÖ APROBADO | Alta |
| Usuarios de prueba con auto-cierre | ‚úÖ APROBADO | Media |
| Sistema de lecciones | ‚úÖ APROBADO | Alta |
| Actividades interactivas (7 tipos) | ‚úÖ APROBADO | Alta |
| Modal de abandonar lecci√≥n | ‚úÖ APROBADO | Media |
| Gamificaci√≥n (logros) | ‚úÖ APROBADO | Media |
| Leaderboard con enlaces | ‚úÖ APROBADO | Media |
| Creaci√≥n de contenido | ‚úÖ APROBADO | Alta |
| Edici√≥n de lecciones | ‚úÖ APROBADO | Alta |
| Estad√≠sticas profesor con exportaci√≥n | ‚úÖ APROBADO | Media |
| Retroalimentaci√≥n con respuestas | ‚úÖ APROBADO | Media |
| Planificaci√≥n (3 pasos) | ‚úÖ APROBADO | Media |
| Gesti√≥n de usuarios admin | ‚úÖ APROBADO | Media |
| Reportes y tareas mantenimiento | ‚úÖ APROBADO | Media |
| Headers espec√≠ficos por rol | ‚úÖ APROBADO | Alta |
| Perfil role-aware | ‚úÖ APROBADO | Alta |
| Breadcrumbs | ‚úÖ APROBADO | Baja |

### Funcionalidades que Requieren Integraci√≥n con Supabase

Las siguientes funcionalidades est√°n implementadas en la UI pero requieren conexi√≥n con Supabase para funcionar completamente:

1. **Autenticaci√≥n Real**:
   - Validaci√≥n de credenciales contra BD
   - Verificaci√≥n de email con c√≥digos
   - Recuperaci√≥n de contrase√±a con tokens
   - Detecci√≥n de cuentas duplicadas

2. **Persistencia de Datos**:
   - Guardado de progreso de lecciones
   - Sincronizaci√≥n offline
   - Actualizaci√≥n autom√°tica de leaderboard
   - Notificaciones en tiempo real

3. **Validaciones Avanzadas**:
   - Conflictos de horario en tareas
   - Validaci√≥n de c√≥digos de verificaci√≥n
   - Expiraci√≥n de tokens

---

## üîÑ INTEGRACI√ìN CON BASE DE DATOS

### Estado de Scripts SQL

| Script | Estado | Descripci√≥n |
|--------|--------|-------------|
| `01-create-tables.sql` | ‚úÖ LISTO | Creaci√≥n de todas las tablas necesarias |
| `02-seed-initial-data.sql` | ‚úÖ LISTO | Datos iniciales de prueba |

### Tablas Implementadas

- ‚úÖ users (usuarios)
- ‚úÖ courses (cursos)
- ‚úÖ lessons (lecciones)
- ‚úÖ activities (actividades)
- ‚úÖ user_progress (progreso de usuario)
- ‚úÖ achievements (logros)
- ‚úÖ user_achievements (logros de usuario)
- ‚úÖ leaderboard (clasificaci√≥n)
- ‚úÖ feedback (retroalimentaci√≥n)
- ‚úÖ planning (planificaci√≥n)
- ‚úÖ bug_reports (reportes de fallas)
- ‚úÖ scheduled_tasks (tareas programadas)

---

## ‚úÖ CONCLUSI√ìN

**SpeakLexi est√° 95% completado** con todas las interfaces, navegaci√≥n, y funcionalidades principales implementadas. El 5% restante corresponde a integraciones con Supabase que requieren configuraci√≥n de base de datos en producci√≥n.

### Lo que est√° 100% funcional:
- ‚úÖ Todas las pantallas de todos los m√≥dulos
- ‚úÖ Navegaci√≥n completa entre interfaces
- ‚úÖ Sistema de roles con redirecci√≥n correcta
- ‚úÖ 7 tipos de actividades interactivas
- ‚úÖ Gamificaci√≥n completa
- ‚úÖ Dashboards con estad√≠sticas
- ‚úÖ Formularios de creaci√≥n y edici√≥n
- ‚úÖ Modales y confirmaciones
- ‚úÖ Exportaci√≥n de datos
- ‚úÖ Sistema de retroalimentaci√≥n
- ‚úÖ Gesti√≥n de usuarios
- ‚úÖ Reportes y tareas

### Pr√≥ximos pasos para producci√≥n:
1. Conectar Supabase para autenticaci√≥n real
2. Implementar sincronizaci√≥n de datos
3. Configurar notificaciones en tiempo real
4. Agregar validaciones de BD
5. Implementar sincronizaci√≥n offline

---

**√öltima actualizaci√≥n**: 2025-01-19  
**Versi√≥n**: 2.0 FINAL  
**Estado**: ‚úÖ LISTO PARA INTEGRACI√ìN CON SUPABASE



================================================================================
# ARCHIVO: front-end/hooks/use-mobile.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-mobile.ts
================================================================================

import * as React from 'react'

const MOBILE_BREAKPOINT = 768

export function useIsMobile() {
  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)

  React.useEffect(() => {
    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)
    const onChange = () => {
      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    }
    mql.addEventListener('change', onChange)
    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)
    return () => mql.removeEventListener('change', onChange)
  }, [])

  return !!isMobile
}



================================================================================
# ARCHIVO: front-end/hooks/use-toast.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-toast.ts
================================================================================

'use client'

// Inspired by react-hot-toast library
import * as React from 'react'

import type { ToastActionElement, ToastProps } from '@/components/ui/toast'

const TOAST_LIMIT = 1
const TOAST_REMOVE_DELAY = 1000000

type ToasterToast = ToastProps & {
  id: string
  title?: React.ReactNode
  description?: React.ReactNode
  action?: ToastActionElement
}

const actionTypes = {
  ADD_TOAST: 'ADD_TOAST',
  UPDATE_TOAST: 'UPDATE_TOAST',
  DISMISS_TOAST: 'DISMISS_TOAST',
  REMOVE_TOAST: 'REMOVE_TOAST',
} as const

let count = 0

function genId() {
  count = (count + 1) % Number.MAX_SAFE_INTEGER
  return count.toString()
}

type ActionType = typeof actionTypes

type Action =
  | {
      type: ActionType['ADD_TOAST']
      toast: ToasterToast
    }
  | {
      type: ActionType['UPDATE_TOAST']
      toast: Partial<ToasterToast>
    }
  | {
      type: ActionType['DISMISS_TOAST']
      toastId?: ToasterToast['id']
    }
  | {
      type: ActionType['REMOVE_TOAST']
      toastId?: ToasterToast['id']
    }

interface State {
  toasts: ToasterToast[]
}

const toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()

const addToRemoveQueue = (toastId: string) => {
  if (toastTimeouts.has(toastId)) {
    return
  }

  const timeout = setTimeout(() => {
    toastTimeouts.delete(toastId)
    dispatch({
      type: 'REMOVE_TOAST',
      toastId: toastId,
    })
  }, TOAST_REMOVE_DELAY)

  toastTimeouts.set(toastId, timeout)
}

export const reducer = (state: State, action: Action): State => {
  switch (action.type) {
    case 'ADD_TOAST':
      return {
        ...state,
        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),
      }

    case 'UPDATE_TOAST':
      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === action.toast.id ? { ...t, ...action.toast } : t,
        ),
      }

    case 'DISMISS_TOAST': {
      const { toastId } = action

      // ! Side effects ! - This could be extracted into a dismissToast() action,
      // but I'll keep it here for simplicity
      if (toastId) {
        addToRemoveQueue(toastId)
      } else {
        state.toasts.forEach((toast) => {
          addToRemoveQueue(toast.id)
        })
      }

      return {
        ...state,
        toasts: state.toasts.map((t) =>
          t.id === toastId || toastId === undefined
            ? {
                ...t,
                open: false,
              }
            : t,
        ),
      }
    }
    case 'REMOVE_TOAST':
      if (action.toastId === undefined) {
        return {
          ...state,
          toasts: [],
        }
      }
      return {
        ...state,
        toasts: state.toasts.filter((t) => t.id !== action.toastId),
      }
  }
}

const listeners: Array<(state: State) => void> = []

let memoryState: State = { toasts: [] }

function dispatch(action: Action) {
  memoryState = reducer(memoryState, action)
  listeners.forEach((listener) => {
    listener(memoryState)
  })
}

type Toast = Omit<ToasterToast, 'id'>

function toast({ ...props }: Toast) {
  const id = genId()

  const update = (props: ToasterToast) =>
    dispatch({
      type: 'UPDATE_TOAST',
      toast: { ...props, id },
    })
  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })

  dispatch({
    type: 'ADD_TOAST',
    toast: {
      ...props,
      id,
      open: true,
      onOpenChange: (open) => {
        if (!open) dismiss()
      },
    },
  })

  return {
    id: id,
    dismiss,
    update,
  }
}

function useToast() {
  const [state, setState] = React.useState<State>(memoryState)

  React.useEffect(() => {
    listeners.push(setState)
    return () => {
      const index = listeners.indexOf(setState)
      if (index > -1) {
        listeners.splice(index, 1)
      }
    }
  }, [state])

  return {
    ...state,
    toast,
    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),
  }
}

export { useToast, toast }



================================================================================
# ARCHIVO: front-end/hooks/use-user-data.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/hooks/use-user-data.ts
================================================================================

"use client"

import { useState, useEffect } from "react"
import { authStorage } from "@/lib/auth"
import { userAPI } from "@/lib/api"

export interface PerfilCompleto {
  usuario: {
    id: number
    id_publico: string
    nombre: string
    primer_apellido: string
    segundo_apellido: string | null
    correo: string
    rol: string
    correo_verificado: boolean
    creado_en: string | null
  }
  perfil: {
    nombre_completo: string
    idioma: string
    nivel_actual: string
    curso_actual: string | null
    total_xp: number
    dias_racha: number
    ultima_actividad: string | null
  }
}

export function useUserData() {
  const [userData, setUserData] = useState<PerfilCompleto | null>(null)
  const [isLoading, setIsLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    const fetchUserData = async () => {
      try {
        const user = authStorage.getUser()
        
        console.log("üîç useUserData - Usuario en authStorage:", user)
        
        if (!user) {
          console.warn("‚ö†Ô∏è No hay usuario logueado")
          setError("No hay usuario logueado")
          setIsLoading(false)
          return
        }

        console.log("üì° Obteniendo perfil del backend...")
        
        // Obtener perfil completo del backend
        const data = await userAPI.getPerfilCompleto()
        
        console.log("‚úÖ Perfil obtenido:", data)
        
        setUserData(data)
        setError(null)
      } catch (err: any) {
        console.error("‚ùå Error al cargar datos del usuario:", err)
        setError(err.message)
      } finally {
        setIsLoading(false)
      }
    }

    fetchUserData()
  }, [])

  const refetch = async () => {
    setIsLoading(true)
    try {
      const data = await userAPI.getPerfilCompleto()
      setUserData(data)
      setError(null)
    } catch (err: any) {
      setError(err.message)
    } finally {
      setIsLoading(false)
    }
  }

  return { userData, isLoading, error, refetch }
}


================================================================================
# ARCHIVO: front-end/middleware.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/middleware.ts
================================================================================

import { NextResponse } from 'next/server'
import type { NextRequest } from 'next/server'

export function middleware(request: NextRequest) {
  // Rutas p√∫blicas que NO requieren autenticaci√≥n
  const publicRoutes = [
    '/',
    '/login',
    '/registro',
    '/verificar-email',
    '/recuperar-contrasena',
    '/restablecer-contrasena',
    '/correo-enviado',
    '/cuenta-desactivada'
  ]

  // Verificar si es una ruta p√∫blica
  const isPublicRoute = publicRoutes.some(route => 
    request.nextUrl.pathname === route || 
    request.nextUrl.pathname.startsWith(route + '/')
  )

  // Si es ruta p√∫blica, permitir acceso
  if (isPublicRoute) {
    return NextResponse.next()
  }

  // Rutas protegidas - verificar autenticaci√≥n
  const authenticated = request.cookies.get('authenticated')
  const usuario = request.cookies.get('usuario')
  
  console.log('üîê Middleware - Ruta:', request.nextUrl.pathname)
  console.log('üîê Middleware - Authenticated:', authenticated?.value)
  console.log('üîê Middleware - Usuario:', usuario?.value ? 'Presente' : 'Ausente')

  // Si NO est√° autenticado, redirigir al login
  if (!authenticated || authenticated.value !== 'true') {
    console.log('‚ùå No autenticado - Redirigiendo a /login')
    return NextResponse.redirect(new URL('/login', request.url))
  }

  // Si est√° autenticado, permitir acceso
  console.log('‚úÖ Autenticado - Permitiendo acceso')
  return NextResponse.next()
}

export const config = {
  matcher: [
    /*
     * Proteger todas las rutas excepto:
     * - api (API routes)
     * - _next/static (archivos est√°ticos)
     * - _next/image (optimizaci√≥n de im√°genes)
     * - favicon.ico (favicon)
     * - Rutas p√∫blicas definidas arriba
     */
    '/((?!api|_next/static|_next/image|favicon.ico).*)',
  ]
}


================================================================================
# ARCHIVO: front-end/next-env.d.ts
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/next-env.d.ts
================================================================================

/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.



================================================================================
# ARCHIVO: front-end/package.json
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/package.json
================================================================================

{
  "name": "my-v0-project",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "build": "next build",
    "dev": "next dev",
    "lint": "eslint .",
    "start": "next start"
  },
  "dependencies": {
    "@hookform/resolvers": "^3.10.0",
    "@radix-ui/react-accordion": "1.2.2",
    "@radix-ui/react-alert-dialog": "1.1.4",
    "@radix-ui/react-aspect-ratio": "1.1.1",
    "@radix-ui/react-avatar": "latest",
    "@radix-ui/react-checkbox": "latest",
    "@radix-ui/react-collapsible": "1.1.2",
    "@radix-ui/react-context-menu": "2.2.4",
    "@radix-ui/react-dialog": "latest",
    "@radix-ui/react-dropdown-menu": "2.1.4",
    "@radix-ui/react-hover-card": "1.1.4",
    "@radix-ui/react-label": "latest",
    "@radix-ui/react-menubar": "1.1.4",
    "@radix-ui/react-navigation-menu": "1.2.3",
    "@radix-ui/react-popover": "1.1.4",
    "@radix-ui/react-progress": "latest",
    "@radix-ui/react-radio-group": "latest",
    "@radix-ui/react-scroll-area": "1.2.2",
    "@radix-ui/react-select": "latest",
    "@radix-ui/react-separator": "1.1.1",
    "@radix-ui/react-slider": "1.2.2",
    "@radix-ui/react-slot": "1.1.1",
    "@radix-ui/react-switch": "1.1.2",
    "@radix-ui/react-tabs": "1.1.2",
    "@radix-ui/react-toast": "1.2.4",
    "@radix-ui/react-toggle": "1.1.1",
    "@radix-ui/react-toggle-group": "1.1.1",
    "@radix-ui/react-tooltip": "1.1.6",
    "@vercel/analytics": "latest",
    "autoprefixer": "^10.4.20",
    "class-variance-authority": "^0.7.1",
    "clsx": "^2.1.1",
    "cmdk": "1.0.4",
    "date-fns": "4.1.0",
    "embla-carousel-react": "8.5.1",
    "input-otp": "1.4.1",
    "lucide-react": "^0.454.0",
    "next": "15.2.4",
    "next-themes": "^0.4.6",
    "react": "^19",
    "react-day-picker": "9.8.0",
    "react-dom": "^19",
    "react-hook-form": "^7.60.0",
    "react-resizable-panels": "^2.1.7",
    "recharts": "2.15.4",
    "sonner": "^1.7.4",
    "tailwind-merge": "^2.5.5",
    "tailwindcss-animate": "^1.0.7",
    "vaul": "^1.0.0",
    "zod": "3.25.76"
  },
  "devDependencies": {
    "@tailwindcss/postcss": "^4.1.9",
    "@types/node": "^22",
    "@types/react": "^19",
    "@types/react-dom": "^19",
    "postcss": "^8.5",
    "tailwindcss": "^4.1.9",
    "tw-animate-css": "1.3.3",
    "typescript": "^5"
  }
}


================================================================================
# ARCHIVO: front-end/pnpm-lock.yaml
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/pnpm-lock.yaml
================================================================================

lockfileVersion: '9.0'

settings:
  autoInstallPeers: true
  excludeLinksFromLockfile: false


================================================================================
# ARCHIVO: front-end/scripts/01-create-tables.sql
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/scripts/01-create-tables.sql
================================================================================

-- SpeakLexi Database Schema
-- Users and Authentication Tables

-- Users table with role-based access
CREATE TABLE IF NOT EXISTS users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  full_name VARCHAR(255) NOT NULL,
  role VARCHAR(50) NOT NULL DEFAULT 'student', -- student, teacher, admin, maintenance
  email_verified BOOLEAN DEFAULT FALSE,
  verification_code VARCHAR(6),
  verification_code_expires_at TIMESTAMP,
  reset_token VARCHAR(255),
  reset_token_expires_at TIMESTAMP,
  level_assigned BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Student profiles
CREATE TABLE IF NOT EXISTS student_profiles (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  current_level VARCHAR(50), -- A1, A2, B1, B2, C1, C2
  current_course VARCHAR(100),
  total_xp INTEGER DEFAULT 0,
  streak_days INTEGER DEFAULT 0,
  last_activity_date DATE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Courses
CREATE TABLE IF NOT EXISTS courses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  language VARCHAR(100) NOT NULL,
  level VARCHAR(50) NOT NULL,
  description TEXT,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Lessons
CREATE TABLE IF NOT EXISTS lessons (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  level VARCHAR(50) NOT NULL,
  order_index INTEGER NOT NULL,
  xp_reward INTEGER DEFAULT 10,
  is_published BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Activities within lessons
CREATE TABLE IF NOT EXISTS activities (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE,
  type VARCHAR(50) NOT NULL, -- multiple_choice, fill_blank, audio, speaking, matching
  question TEXT NOT NULL,
  correct_answer TEXT NOT NULL,
  options JSONB, -- For multiple choice options
  media_url VARCHAR(500),
  order_index INTEGER NOT NULL,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Student progress
CREATE TABLE IF NOT EXISTS student_progress (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES users(id) ON DELETE CASCADE,
  lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE,
  completed BOOLEAN DEFAULT FALSE,
  score INTEGER,
  attempts INTEGER DEFAULT 0,
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(student_id, lesson_id)
);

-- Achievements and rewards
CREATE TABLE IF NOT EXISTS achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  icon VARCHAR(255),
  criteria JSONB NOT NULL, -- Conditions to unlock
  xp_reward INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Student achievements
CREATE TABLE IF NOT EXISTS student_achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES users(id) ON DELETE CASCADE,
  achievement_id UUID REFERENCES achievements(id) ON DELETE CASCADE,
  unlocked_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(student_id, achievement_id)
);

-- Feedback and comments
CREATE TABLE IF NOT EXISTS feedback (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  student_id UUID REFERENCES users(id) ON DELETE CASCADE,
  lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE,
  comment TEXT NOT NULL,
  teacher_response TEXT,
  status VARCHAR(50) DEFAULT 'pending', -- pending, responded, resolved
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Teacher plans
CREATE TABLE IF NOT EXISTS teacher_plans (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  teacher_id UUID REFERENCES users(id) ON DELETE CASCADE,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  target_areas JSONB,
  associated_lessons JSONB,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Maintenance reports
CREATE TABLE IF NOT EXISTS maintenance_reports (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  reported_by UUID REFERENCES users(id),
  module VARCHAR(100) NOT NULL,
  severity VARCHAR(50) NOT NULL, -- low, medium, high, critical
  description TEXT NOT NULL,
  status VARCHAR(50) DEFAULT 'open', -- open, in_progress, resolved, closed
  assigned_to UUID REFERENCES users(id),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Scheduled tasks
CREATE TABLE IF NOT EXISTS scheduled_tasks (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  title VARCHAR(255) NOT NULL,
  description TEXT,
  task_type VARCHAR(50) NOT NULL, -- preventive, corrective, update
  priority VARCHAR(50) NOT NULL, -- low, medium, high
  scheduled_date TIMESTAMP NOT NULL,
  assigned_to UUID REFERENCES users(id),
  status VARCHAR(50) DEFAULT 'pending', -- pending, in_progress, completed
  is_recurring BOOLEAN DEFAULT FALSE,
  recurrence_pattern VARCHAR(100),
  completed_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- Multimedia library
CREATE TABLE IF NOT EXISTS multimedia (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  filename VARCHAR(255) NOT NULL,
  file_type VARCHAR(50) NOT NULL, -- image, audio, video
  file_url VARCHAR(500) NOT NULL,
  file_size INTEGER,
  uploaded_by UUID REFERENCES users(id),
  usage_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);
CREATE INDEX IF NOT EXISTS idx_users_role ON users(role);
CREATE INDEX IF NOT EXISTS idx_student_profiles_user_id ON student_profiles(user_id);
CREATE INDEX IF NOT EXISTS idx_lessons_course_id ON lessons(course_id);
CREATE INDEX IF NOT EXISTS idx_activities_lesson_id ON activities(lesson_id);
CREATE INDEX IF NOT EXISTS idx_student_progress_student_id ON student_progress(student_id);
CREATE INDEX IF NOT EXISTS idx_student_progress_lesson_id ON student_progress(lesson_id);
CREATE INDEX IF NOT EXISTS idx_feedback_student_id ON feedback(student_id);
CREATE INDEX IF NOT EXISTS idx_feedback_status ON feedback(status);



================================================================================
# ARCHIVO: front-end/scripts/02-seed-initial-data.sql
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/scripts/02-seed-initial-data.sql
================================================================================

-- Seed initial data for SpeakLexi

-- Insert sample courses
INSERT INTO courses (id, name, language, level, description, is_active) VALUES
  ('550e8400-e29b-41d4-a716-446655440001', 'English Basics', 'English', 'A1', 'Beginner English course for Spanish speakers', true),
  ('550e8400-e29b-41d4-a716-446655440002', 'English Elementary', 'English', 'A2', 'Elementary English course', true),
  ('550e8400-e29b-41d4-a716-446655440003', 'English Intermediate', 'English', 'B1', 'Intermediate English course', true),
  ('550e8400-e29b-41d4-a716-446655440004', 'French Basics', 'French', 'A1', 'Beginner French course', true),
  ('550e8400-e29b-41d4-a716-446655440005', 'German Basics', 'German', 'A1', 'Beginner German course', true);

-- Insert sample lessons for English Basics
INSERT INTO lessons (id, course_id, title, description, level, order_index, xp_reward, is_published) VALUES
  ('660e8400-e29b-41d4-a716-446655440001', '550e8400-e29b-41d4-a716-446655440001', 'Greetings and Introductions', 'Learn how to greet people and introduce yourself', 'A1', 1, 10, true),
  ('660e8400-e29b-41d4-a716-446655440002', '550e8400-e29b-41d4-a716-446655440001', 'Numbers 1-20', 'Learn to count from 1 to 20 in English', 'A1', 2, 10, true),
  ('660e8400-e29b-41d4-a716-446655440003', '550e8400-e29b-41d4-a716-446655440001', 'Colors and Shapes', 'Learn basic colors and shapes', 'A1', 3, 10, true),
  ('660e8400-e29b-41d4-a716-446655440004', '550e8400-e29b-41d4-a716-446655440001', 'Family Members', 'Learn vocabulary about family', 'A1', 4, 15, true),
  ('660e8400-e29b-41d4-a716-446655440005', '550e8400-e29b-41d4-a716-446655440001', 'Daily Routines', 'Learn to talk about your daily activities', 'A1', 5, 15, true);

-- Insert sample activities for "Greetings and Introductions" lesson
INSERT INTO activities (lesson_id, type, question, correct_answer, options, order_index) VALUES
  ('660e8400-e29b-41d4-a716-446655440001', 'multiple_choice', 'How do you say "Hello" in English?', 'Hello', '["Hello", "Goodbye", "Thank you", "Please"]', 1),
  ('660e8400-e29b-41d4-a716-446655440001', 'multiple_choice', 'What is the correct response to "How are you?"', 'I am fine, thank you', '["I am fine, thank you", "My name is John", "Goodbye", "Yes, please"]', 2),
  ('660e8400-e29b-41d4-a716-446655440001', 'fill_blank', 'Complete: "Nice to ___ you"', 'meet', NULL, 3),
  ('660e8400-e29b-41d4-a716-446655440001', 'multiple_choice', 'How do you introduce yourself?', 'My name is...', '["My name is...", "How are you?", "Goodbye", "Thank you"]', 4);

-- Insert sample achievements
INSERT INTO achievements (id, name, description, icon, criteria, xp_reward) VALUES
  ('770e8400-e29b-41d4-a716-446655440001', 'First Steps', 'Complete your first lesson', 'üéØ', '{"type": "lessons_completed", "count": 1}', 50),
  ('770e8400-e29b-41d4-a716-446655440002', 'Week Warrior', 'Maintain a 7-day streak', 'üî•', '{"type": "streak_days", "count": 7}', 100),
  ('770e8400-e29b-41d4-a716-446655440003', 'Dedicated Learner', 'Complete 10 lessons', 'üìö', '{"type": "lessons_completed", "count": 10}', 200),
  ('770e8400-e29b-41d4-a716-446655440004', 'Perfect Score', 'Get 100% on any lesson', '‚≠ê', '{"type": "perfect_score", "count": 1}', 75),
  ('770e8400-e29b-41d4-a716-446655440005', 'Rising Star', 'Reach 500 XP', 'üåü', '{"type": "total_xp", "count": 500}', 150);



================================================================================
# ARCHIVO: front-end/styles/globals.css
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/styles/globals.css
================================================================================

@import 'tailwindcss';
@import 'tw-animate-css';

@custom-variant dark (&:is(.dark *));

:root {
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --destructive-foreground: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --radius: 0.625rem;
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.145 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.145 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.985 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.396 0.141 25.723);
  --destructive-foreground: oklch(0.637 0.237 25.331);
  --border: oklch(0.269 0 0);
  --input: oklch(0.269 0 0);
  --ring: oklch(0.439 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.269 0 0);
  --sidebar-ring: oklch(0.439 0 0);
}

@theme inline {
  --font-sans: 'Geist', 'Geist Fallback';
  --font-mono: 'Geist Mono', 'Geist Mono Fallback';
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-chart-1: var(--chart-1);
  --color-chart-2: var(--chart-2);
  --color-chart-3: var(--chart-3);
  --color-chart-4: var(--chart-4);
  --color-chart-5: var(--chart-5);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
  }
}



================================================================================
# ARCHIVO: front-end/tsconfig.json
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/front-end/tsconfig.json
================================================================================

{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "target": "ES6",
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}



################################################################################
# DOCUMENTACI√ìN
################################################################################


================================================================================
# ARCHIVO: docs/README.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/README.md
================================================================================




================================================================================
# ARCHIVO: docs/architecture.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/architecture.md
================================================================================




================================================================================
# ARCHIVO: docs/database.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/database.md
================================================================================




================================================================================
# ARCHIVO: docs/errores/bitacoras/ERRORES - 27 OCT 25.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/errores/bitacoras/ERRORES - 27 OCT 25.md
================================================================================

# Errores en la implementaci√≥n del M√≥dulo 2. 


================================================================================
# ARCHIVO: docs/guidelines/best-practices.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/best-practices.md
================================================================================

# üåü Mejores Pr√°cticas y Prevenci√≥n de Errores - SpeakLexi

> **Documento basado en errores reales del proyecto**  
> Este documento te ayudar√° a evitar los problemas m√°s comunes que han ocurrido durante el desarrollo.

---

## üö® Errores Cr√≠ticos y C√≥mo Evitarlos

### 1. **Error: CORS - No 'Access-Control-Allow-Origin' header**

#### ‚ùå Problema Com√∫n
```python
# app.py - Configuraci√≥n incorrecta de CORS
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # ‚ùå Demasiado permisivo o restrictivo
```

#### ‚úÖ Soluci√≥n Correcta
```python
# app.py - Configuraci√≥n espec√≠fica y segura
from flask_cors import CORS

CORS(app, resources={
    r"/api/*": {
        "origins": ["http://localhost:3000"],  # Frontend espec√≠fico
        "methods": ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"],
        "allow_headers": ["Content-Type", "Authorization"],
        "supports_credentials": True  # Si usas cookies/sesiones
    }
})
```

#### üîç Verificaci√≥n
```bash
# Probar desde el navegador
fetch('http://localhost:5000/api/usuarios', {
  method: 'GET',
  headers: {
    'Content-Type': 'application/json'
  }
})
```

---

### 2. **Error: 405 Method Not Allowed**

#### ‚ùå Problema Com√∫n
```python
# routes/usuario_routes.py
@usuario_bp.route('/perfil', methods=['GET'])  # ‚ùå Solo GET definido
def actualizar_perfil():  # ‚ùå Pero el frontend env√≠a POST
    data = request.get_json()
    # ...
```

#### ‚úÖ Soluci√≥n Correcta
```python
# Definir todos los m√©todos necesarios
@usuario_bp.route('/perfil', methods=['GET', 'PUT', 'PATCH'])
def gestionar_perfil():
    if request.method == 'GET':
        return obtener_perfil()
    elif request.method in ['PUT', 'PATCH']:
        return actualizar_perfil()

# O mejor, separa en rutas diferentes
@usuario_bp.route('/perfil', methods=['GET'])
def obtener_perfil():
    pass

@usuario_bp.route('/perfil', methods=['PUT', 'PATCH'])
def actualizar_perfil():
    pass
```

---

### 3. **Error: AttributeError: 'NoneType' object has no attribute**

#### ‚ùå Problema Com√∫n
```python
# services/gestor_usuarios.py
def obtener_usuario(usuario_id):
    usuario = db.session.query(Usuario).filter_by(id=usuario_id).first()
    return usuario.to_dict()  # ‚ùå Si usuario es None, explota aqu√≠
```

#### ‚úÖ Soluci√≥n Correcta
```python
def obtener_usuario(usuario_id):
    usuario = db.session.query(Usuario).filter_by(id=usuario_id).first()
    
    if not usuario:
        raise UsuarioNoEncontradoError(f"Usuario {usuario_id} no existe")
    
    return usuario.to_dict()

# En la ruta
@usuario_bp.route('/<int:usuario_id>', methods=['GET'])
def get_usuario(usuario_id):
    try:
        resultado = gestor_usuarios.obtener_usuario(usuario_id)
        return jsonify(resultado), 200
    except UsuarioNoEncontradoError as e:
        return jsonify({'error': str(e)}), 404
    except Exception as e:
        return jsonify({'error': 'Error interno'}), 500
```

---

### 4. **Error: SQLAlchemy - (OperationalError) no such table**

#### ‚ùå Problema Com√∫n
```python
# Olvidar ejecutar db.create_all()
from config.database import db
from models.usuario import Usuario

# ‚ùå No se crean las tablas
usuario = Usuario(nombre="Test")
db.session.add(usuario)
db.session.commit()  # ‚ùå Error: tabla no existe
```

#### ‚úÖ Soluci√≥n Correcta
```python
# app.py - Asegurar creaci√≥n de tablas
def create_app():
    app = Flask(__name__)
    db.init_app(app)
    
    with app.app_context():
        try:
            db.create_all()  # ‚úÖ Crear tablas si no existen
            print("‚úÖ Tablas creadas correctamente")
        except Exception as e:
            print(f"‚ùå Error al crear tablas: {e}")
    
    return app
```

#### üîç Verificaci√≥n
```bash
# Conectarse a MySQL y verificar
mysql -u root -p
USE SpeakLexi;
SHOW TABLES;  # Debe mostrar: usuarios, perfiles_usuario, etc.
```

---

### 5. **Error: JWT - Token has expired / Invalid token**

#### ‚ùå Problema Com√∫n
```python
# Frontend - No manejar tokens expirados
const response = await fetch('/api/usuarios/perfil', {
  headers: {
    'Authorization': `Bearer ${token}`  // ‚ùå Token expirado
  }
});
// ‚ùå No hay manejo de error 401
```

#### ‚úÖ Soluci√≥n Correcta
```python
# Backend - Validar y devolver error claro
from flask_jwt_extended import jwt_required, get_jwt_identity
from jwt.exceptions import ExpiredSignatureError

@usuario_bp.route('/perfil', methods=['GET'])
@jwt_required()
def obtener_perfil():
    try:
        usuario_id = get_jwt_identity()
        # ...
    except ExpiredSignatureError:
        return jsonify({'error': 'Token expirado', 'code': 'TOKEN_EXPIRED'}), 401
```
```tsx
// Frontend - Manejar renovaci√≥n de token
async function fetchConAuth(url: string) {
  const token = localStorage.getItem('token');
  
  const response = await fetch(url, {
    headers: {
      'Authorization': `Bearer ${token}`
    }
  });
  
  if (response.status === 401) {
    const data = await response.json();
    
    if (data.code === 'TOKEN_EXPIRED') {
      // Redirigir a login o renovar token
      localStorage.removeItem('token');
      window.location.href = '/login';
    }
  }
  
  return response;
}
```

---

### 6. **Error: Contrase√±as en Texto Plano**

#### ‚ùå Problema Com√∫n
```python
# models/usuario.py - ¬°NUNCA HAGAS ESTO!
class Usuario(db.Model):
    password = db.Column(db.String(255))  # ‚ùå Texto plano
    
    def verificar_password(self, password):
        return self.password == password  # ‚ùå Comparaci√≥n directa
```

#### ‚úÖ Soluci√≥n Correcta
```python
# models/usuario.py
from werkzeug.security import generate_password_hash, check_password_hash

class Usuario(db.Model):
    password_hash = db.Column(db.String(255))  # ‚úÖ Hash almacenado
    
    def set_password(self, password):
        """Hashea la contrase√±a antes de guardar"""
        self.password_hash = generate_password_hash(password)
    
    def verificar_password(self, password):
        """Verifica contrase√±a contra el hash"""
        return check_password_hash(self.password_hash, password)
    
    def to_dict(self):
        """NUNCA incluir password_hash en respuestas"""
        return {
            'id': self.id,
            'nombre': self.nombre,
            'email': self.email
            # password_hash NO se incluye
        }
```

---

### 7. **Error: Validaci√≥n de Entrada Faltante**

#### ‚ùå Problema Com√∫n
```python
# routes/auth.py - Sin validaci√≥n
@auth_bp.route('/registro', methods=['POST'])
def registro():
    data = request.get_json()
    
    # ‚ùå Asumir que los datos son correctos
    usuario = Usuario(
        nombre=data['nombre'],
        email=data['email']
    )
    db.session.add(usuario)
    db.session.commit()
```

#### ‚úÖ Soluci√≥n Correcta
```python
# routes/auth.py - Con validaci√≥n
from marshmallow import Schema, fields, validate, ValidationError

class RegistroSchema(Schema):
    nombre = fields.Str(
        required=True, 
        validate=validate.Length(min=2, max=100)
    )
    email = fields.Email(required=True)
    password = fields.Str(
        required=True,
        validate=validate.Length(min=8, max=128)
    )

@auth_bp.route('/registro', methods=['POST'])
def registro():
    schema = RegistroSchema()
    
    try:
        # Validar datos de entrada
        data = schema.load(request.get_json())
    except ValidationError as err:
        return jsonify({
            'error': 'Datos inv√°lidos',
            'detalles': err.messages
        }), 400
    
    # Validaciones de negocio adicionales
    if gestor_usuarios.email_existe(data['email']):
        return jsonify({'error': 'Email ya registrado'}), 409
    
    # Procesar registro
    resultado = gestor_usuarios.registrar(data)
    return jsonify(resultado), 201
```

---

### 8. **Error: SQL Injection (Aunque SQLAlchemy protege, es importante saberlo)**

#### ‚ùå Problema Com√∫n (Si usaras SQL crudo)
```python
# ‚ùå NUNCA HAGAS ESTO
email = request.args.get('email')
query = f"SELECT * FROM usuarios WHERE email = '{email}'"
resultado = db.session.execute(db.text(query))
# Vulnerable a: email = "'; DROP TABLE usuarios; --"
```

#### ‚úÖ Soluci√≥n Correcta
```python
# ‚úÖ Usar ORM de SQLAlchemy (protecci√≥n autom√°tica)
email = request.args.get('email')
usuario = Usuario.query.filter_by(email=email).first()

# ‚úÖ O con par√°metros si usas SQL crudo
query = db.text("SELECT * FROM usuarios WHERE email = :email")
resultado = db.session.execute(query, {'email': email})
```

---

### 9. **Error: Frontend - No manejar estados de carga**

#### ‚ùå Problema Com√∫n
```tsx
// components/auth/LoginForm.tsx
export function LoginForm() {
  const handleSubmit = async (e) => {
    const response = await fetch('/api/auth/login', {...});
    // ‚ùå Sin indicador de carga
    // ‚ùå El bot√≥n puede clickearse m√∫ltiples veces
  };
  
  return (
    <form onSubmit={handleSubmit}>
      <Button type="submit">Iniciar Sesi√≥n</Button>
    </form>
  );
}
```

#### ‚úÖ Soluci√≥n Correcta
```tsx
export function LoginForm() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  
  const handleSubmit = async (e) => {
    e.preventDefault();
    setLoading(true);
    setError('');
    
    try {
      const response = await fetch('/api/auth/login', {
        method: 'POST',
        body: JSON.stringify(data)
      });
      
      if (!response.ok) {
        throw new Error('Error al iniciar sesi√≥n');
      }
      
      const result = await response.json();
      // Manejar √©xito
      
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };
  
  return (
    <form onSubmit={handleSubmit}>
      {error && <Alert variant="destructive">{error}</Alert>}
      
      <Button 
        type="submit" 
        disabled={loading}
      >
        {loading ? 'Cargando...' : 'Iniciar Sesi√≥n'}
      </Button>
    </form>
  );
}
```

---

### 10. **Error: Variables de Entorno No Cargadas**

#### ‚ùå Problema Com√∫n
```python
# config/settings.py
import os

# ‚ùå Sin load_dotenv(), las variables no se cargan
DB_HOST = os.getenv('DB_HOST', 'localhost')
```

#### ‚úÖ Soluci√≥n Correcta
```python
# config/settings.py
import os
from dotenv import load_dotenv

# ‚úÖ Cargar variables de entorno PRIMERO
load_dotenv()

# Ahora s√≠ funcionan
DB_HOST = os.getenv('DB_HOST', 'localhost')
DB_PORT = os.getenv('DB_PORT', '3306')

# Verificar que se cargaron
if not os.getenv('DB_PASSWORD'):
    print("‚ö†Ô∏è WARNING: DB_PASSWORD no est√° configurada en .env")
```

---

### 11. **Error: Circular Imports**

#### ‚ùå Problema Com√∫n
```python
# models/usuario.py
from config.database import db
from services.gestor_usuarios import GestorUsuarios  # ‚ùå

class Usuario(db.Model):
    def calcular_nivel(self):
        return GestorUsuarios.calcular_nivel(self)  # ‚ùå Import circular

# services/gestor_usuarios.py
from models.usuario import Usuario  # ‚ùå Importa Usuario

class GestorUsuarios:
    @staticmethod
    def calcular_nivel(usuario: Usuario):  # ‚ùå Usa Usuario
        pass
```

#### ‚úÖ Soluci√≥n Correcta
```python
# models/usuario.py - Solo definici√≥n del modelo
from config.database import db

class Usuario(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    nombre = db.Column(db.String(100))
    # NO incluir l√≥gica de negocio aqu√≠

# services/gestor_usuarios.py - Toda la l√≥gica aqu√≠
from models.usuario import Usuario  # ‚úÖ Import unidireccional

class GestorUsuarios:
    @staticmethod
    def calcular_nivel(usuario: Usuario):
        # L√≥gica de negocio
        return usuario.puntos // 100
```

---

### 12. **Error: No Cerrar Conexiones de Base de Datos**

#### ‚ùå Problema Com√∫n
```python
# services/gestor_usuarios.py
def obtener_usuarios():
    usuarios = Usuario.query.all()
    # ‚ùå No se cierra la sesi√≥n expl√≠citamente
    return [u.to_dict() for u in usuarios]
```

#### ‚úÖ Soluci√≥n Correcta
```python
# SQLAlchemy con Flask maneja esto autom√°ticamente
# Pero si haces consultas manuales:

from contextlib import contextmanager

@contextmanager
def session_scope():
    """Proporciona un scope transaccional para operaciones de BD"""
    session = db.session()
    try:
        yield session
        session.commit()
    except Exception:
        session.rollback()
        raise
    finally:
        session.close()

# Uso
def operacion_compleja():
    with session_scope() as session:
        usuario = Usuario(nombre="Test")
        session.add(usuario)
        # Se hace commit autom√°tico al salir del with
```

---

### 13. **Error: No Manejar Errores de Email**

#### ‚ùå Problema Com√∫n
```python
# services/correo_service.py
def enviar_verificacion(email, token):
    msg = Message(
        subject="Verificaci√≥n de cuenta",
        recipients=[email]
    )
    mail.send(msg)  # ‚ùå Si falla, crashea la app
```

#### ‚úÖ Soluci√≥n Correcta
```python
def enviar_verificacion(email, token):
    try:
        msg = Message(
            subject="Verificaci√≥n de cuenta",
            recipients=[email],
            body=f"Tu c√≥digo: {token}"
        )
        mail.send(msg)
        return True
    except Exception as e:
        print(f"‚ùå Error enviando email a {email}: {e}")
        # Registrar en logs
        logger.error(f"Fallo env√≠o email: {e}")
        return False

# En el servicio de registro
def registrar(data):
    usuario = crear_usuario(data)
    
    email_enviado = correo_service.enviar_verificacion(
        usuario.email, 
        usuario.token_verificacion
    )
    
    return {
        'success': True,
        'usuario_id': usuario.id,
        'email_enviado': email_enviado,
        'mensaje': 'Registro exitoso. Revisa tu email.' if email_enviado 
                   else 'Registro exitoso. Email no pudo enviarse.'
    }
```

---

### 14. **Error: Frontend - Dependencias Faltantes en useEffect**

#### ‚ùå Problema Com√∫n
```tsx
function UserProfile() {
  const [user, setUser] = useState(null);
  const userId = useParams().id;
  
  useEffect(() => {
    fetchUser(userId);  // ‚ùå userId no est√° en dependencias
  }, []);  // ‚ùå Array vac√≠o
  
  // Si userId cambia, no se vuelve a cargar
}
```

#### ‚úÖ Soluci√≥n Correcta
```tsx
function UserProfile() {
  const [user, setUser] = useState(null);
  const [loading, setLoading] = useState(true);
  const { id: userId } = useParams();
  
  useEffect(() => {
    async function loadUser() {
      setLoading(true);
      try {
        const response = await fetch(`/api/usuarios/${userId}`);
        const data = await response.json();
        setUser(data);
      } catch (error) {
        console.error(error);
      } finally {
        setLoading(false);
      }
    }
    
    if (userId) {
      loadUser();
    }
  }, [userId]);  // ‚úÖ userId como dependencia
  
  if (loading) return <Spinner />;
  
  return <div>{user?.nombre}</div>;
}
```

---

### 15. **Error: No Validar Roles/Permisos**

#### ‚ùå Problema Com√∫n
```python
# routes/admin/usuario_routes.py
@admin_bp.route('/usuarios/<int:usuario_id>/eliminar', methods=['DELETE'])
@jwt_required()
def eliminar_usuario(usuario_id):
    # ‚ùå Cualquier usuario autenticado puede eliminar
    gestor_usuarios.eliminar(usuario_id)
    return jsonify({'success': True})
```

#### ‚úÖ Soluci√≥n Correcta
```python
# utils/decorators.py
from functools import wraps
from flask_jwt_extended import get_jwt_identity
from flask import jsonify

def requiere_rol(rol_requerido):
    def decorator(f):
        @wraps(f)
        def wrapper(*args, **kwargs):
            usuario_id = get_jwt_identity()
            usuario = Usuario.query.get(usuario_id)
            
            if not usuario or usuario.rol != rol_requerido:
                return jsonify({
                    'error': 'No autorizado',
                    'mensaje': f'Se requiere rol: {rol_requerido}'
                }), 403
            
            return f(*args, **kwargs)
        return wrapper
    return decorator

# routes/admin/usuario_routes.py
from utils.decorators import requiere_rol

@admin_bp.route('/usuarios/<int:usuario_id>/eliminar', methods=['DELETE'])
@jwt_required()
@requiere_rol('admin')  # ‚úÖ Solo admins pueden eliminar
def eliminar_usuario(usuario_id):
    gestor_usuarios.eliminar(usuario_id)
    return jsonify({'success': True})
```

---

## üõ°Ô∏è Checklist de Seguridad

Antes de hacer commit, verifica:

- [ ] ‚úÖ No hay contrase√±as o tokens hardcodeados
- [ ] ‚úÖ Todas las rutas sensibles requieren autenticaci√≥n (`@jwt_required()`)
- [ ] ‚úÖ Se validan roles/permisos en rutas admin/profesor
- [ ] ‚úÖ Todas las entradas de usuario se validan (marshmallow)
- [ ] ‚úÖ Las contrase√±as se hashean con `bcrypt` o `werkzeug.security`
- [ ] ‚úÖ No se exponen datos sensibles en respuestas JSON
- [ ] ‚úÖ CORS configurado correctamente (no usar `*` en producci√≥n)
- [ ] ‚úÖ Variables de entorno en `.env` (no en el c√≥digo)
- [ ] ‚úÖ `.env` est√° en `.gitignore`

---

## üß™ Checklist de Testing

- [ ] ‚úÖ Probar con datos inv√°lidos (emails malformados, campos vac√≠os)
- [ ] ‚úÖ Probar con tokens expirados
- [ ] ‚úÖ Probar con usuarios sin permisos
- [ ] ‚úÖ Probar l√≠mites (strings muy largos, n√∫meros negativos)
- [ ] ‚úÖ Probar casos edge (usuario no existe, email duplicado)

---

## üìä Monitoreo y Debugging

### Logging Efectivo
```python
# config/logging.py
import logging

def setup_logging():
    logging.basicConfig(
        level=logging.INFO,
        format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
        handlers=[
            logging.FileHandler('app.log'),
            logging.StreamHandler()
        ]
    )

# En servicios
import logging
logger = logging.getLogger(__name__)

def registrar_usuario(data):
    logger.info(f"Intentando registrar usuario: {data['email']}")
    try:
        # ...
        logger.info(f"Usuario registrado exitosamente: {usuario.id}")
    except Exception as e:
        logger.error(f"Error registrando usuario: {e}", exc_info=True)
        raise
```

---

## üöÄ Performance

### Queries N+1
```python
# ‚ùå MAL - Query N+1
usuarios = Usuario.query.all()
for usuario in usuarios:
    print(usuario.perfil.biografia)  # ‚ùå Query por cada usuario

# ‚úÖ BIEN - Eager loading
from sqlalchemy.orm import joinedload

usuarios = Usuario.query.options(
    joinedload(Usuario.perfil)
).all()

for usuario in usuarios:
    print(usuario.perfil.biografia)  # ‚úÖ Una sola query
```

---

## üìù Documentaci√≥n

Documenta c√≥digo complejo:
```python
def calcular_nivel_usuario(progreso, tiempo_estudio, racha):
    """
    Calcula el nivel del usuario basado en m√∫ltiples factores.
    
    Args:
        progreso (int): Lecciones completadas (0-100)
        tiempo_estudio (int): Minutos totales estudiados
        racha (int): D√≠as consecutivos de estudio
    
    Returns:
        int: Nivel calculado (1-10)
    
    Examples:
        >>> calcular_nivel_usuario(50, 300, 7)
        5
    
    Notes:
        - El algoritmo prioriza la constancia (racha) sobre cantidad
        - Nivel m√°ximo es 10, independiente de los puntos
    """
    # Implementaci√≥n con comentarios explicativos
    pass
```

---

**Actualizado:** Octubre 2025  
**Basado en:** Errores reales del proyecto SpeakLexi  
**Versi√≥n:** 1.0.0


================================================================================
# ARCHIVO: docs/guidelines/naming-conventions.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/naming-conventions.md
================================================================================

# üè∑Ô∏è Convenciones de Nombres - SpeakLexi

## üéØ Principio General
> **Los nombres deben ser descriptivos, consistentes y en espa√±ol** (excepto t√©rminos t√©cnicos est√°ndar en ingl√©s).

---

## üêç Backend (Python/Flask)

### **1. Archivos y M√≥dulos**
```
‚úÖ BIEN - snake_case en espa√±ol
usuario.py
gestor_usuarios.py
correo_service.py
auth.py (t√©cnico, puede ser ingl√©s)
leccion.py
progreso.py

‚ùå MAL
Usuario.py          # ‚ùå PascalCase
gestorUsuarios.py   # ‚ùå camelCase
user.py             # ‚ùå Ingl√©s inconsistente
USUARIO.PY          # ‚ùå MAY√öSCULAS
```

### **2. Clases (Modelos)**
```python
‚úÖ BIEN - PascalCase, sustantivos singulares
class Usuario:
    pass

class PerfilUsuario:
    pass

class Leccion:
    pass

class ReporteFalla:
    pass

class TareaMantenimiento:
    pass

‚ùå MAL
class usuario:              # ‚ùå Min√∫sculas
class Usuarios:             # ‚ùå Plural
class usuario_model:        # ‚ùå snake_case
class User:                 # ‚ùå Ingl√©s inconsistente
```

### **3. Funciones y M√©todos**
```python
‚úÖ BIEN - snake_case, verbos descriptivos
def registrar_usuario():
    pass

def enviar_correo_verificacion():
    pass

def calcular_nivel_usuario():
    pass

def obtener_lecciones_por_nivel():
    pass

def validar_credenciales():
    pass

# M√©todos privados con gui√≥n bajo inicial
def _generar_hash_password():
    pass

def _validar_datos_entrada():
    pass

‚ùå MAL
def RegistrarUsuario():        # ‚ùå PascalCase
def registerUser():            # ‚ùå camelCase + ingl√©s
def register():                # ‚ùå No descriptivo
def reg_usr():                 # ‚ùå Abreviaciones
def enviarCorreo():            # ‚ùå camelCase
```

### **4. Variables**
```python
‚úÖ BIEN - snake_case, descriptivas
usuario_id = "123"
email_usuario = "test@example.com"
datos_registro = {...}
lista_lecciones = []
nivel_actual = "principiante"
fecha_creacion = datetime.now()
es_activo = True
tiene_verificacion = False

# Constantes en MAY√öSCULAS
MAX_INTENTOS_LOGIN = 3
TIEMPO_EXPIRACION_TOKEN = 3600
NIVELES_DISPONIBLES = ['principiante', 'intermedio', 'avanzado']

‚ùå MAL
id = "123"                  # ‚ùå Demasiado gen√©rico
e = "test@example.com"      # ‚ùå Una letra
data = {...}                # ‚ùå Ingl√©s + no descriptivo
list = []                   # ‚ùå Palabra reservada
n = "principiante"          # ‚ùå Abreviaci√≥n
x = True                    # ‚ùå No descriptivo
```

### **5. Blueprints (Rutas)**
```python
‚úÖ BIEN - sufijo _bp
from flask import Blueprint

auth_bp = Blueprint('auth', __name__, url_prefix='/api/auth')
usuario_bp = Blueprint('usuarios', __name__, url_prefix='/api/usuarios')
leccion_bp = Blueprint('lecciones', __name__, url_prefix='/api/lecciones')
progreso_bp = Blueprint('progreso', __name__, url_prefix='/api/progreso')

‚ùå MAL
authBlueprint               # ‚ùå camelCase
usuario_routes              # ‚ùå Inconsistente con _bp
bp_auth                     # ‚ùå Prefijo en lugar de sufijo
```

### **6. Servicios/Gestores**
```python
‚úÖ BIEN - prefijo gestor_ o sufijo _service
gestor_usuarios.py
gestor_lecciones.py
gestor_progreso.py
correo_service.py
autenticacion_service.py

# Dentro del archivo
class GestorUsuarios:
    def registrar(self, datos):
        pass
    
    def actualizar_perfil(self, usuario_id, datos):
        pass

‚ùå MAL
user_manager.py         # ‚ùå Ingl√©s
UsuarioGestor.py       # ‚ùå PascalCase en archivo
manager_usuario.py     # ‚ùå Orden incorrecto
```

### **7. Rutas/Endpoints**
```python
‚úÖ BIEN - kebab-case (guiones), plurales para recursos
@auth_bp.route('/registro', methods=['POST'])
@usuario_bp.route('/perfil', methods=['GET'])
@usuario_bp.route('/cambiar-curso', methods=['PUT'])
@leccion_bp.route('/', methods=['GET'])  # /api/lecciones
@leccion_bp.route('/<leccion_id>', methods=['GET'])
@progreso_bp.route('/racha-actual', methods=['GET'])

‚ùå MAL
@auth_bp.route('/Registro')              # ‚ùå PascalCase
@usuario_bp.route('/cambiarcurso')       # ‚ùå Sin separador
@usuario_bp.route('/cambiar_curso')      # ‚ùå snake_case
@leccion_bp.route('/leccion/<id>')       # ‚ùå Singular inconsistente
```

---

## üóÑÔ∏è Base de Datos (MySQL/SQLAlchemy)

### **1. Nombres de Tablas**
```python
‚úÖ BIEN - Plural, snake_case
__tablename__ = 'usuarios'
__tablename__ = 'perfiles_usuario'
__tablename__ = 'lecciones'
__tablename__ = 'progresos'
__tablename__ = 'recompensas'
__tablename__ = 'reportes_falla'
__tablename__ = 'tareas_mantenimiento'

‚ùå MAL
__tablename__ = 'Usuario'           # ‚ùå Singular + PascalCase
__tablename__ = 'usuario'           # ‚ùå Singular
__tablename__ = 'perfil_usuarios'   # ‚ùå Inconsistente
__tablename__ = 'users'             # ‚ùå Ingl√©s
```

### **2. Nombres de Columnas**
```python
‚úÖ BIEN - snake_case, descriptivas
id = db.Column(db.Integer, primary_key=True)
nombre_completo = db.Column(db.String(100))
email = db.Column(db.String(120), unique=True)
password_hash = db.Column(db.String(255))
fecha_registro = db.Column(db.DateTime)
fecha_nacimiento = db.Column(db.Date)
es_activo = db.Column(db.Boolean, default=True)
nivel_actual = db.Column(db.String(50))
puntos_acumulados = db.Column(db.Integer, default=0)

# Claves for√°neas con sufijo _id
usuario_id = db.Column(db.Integer, db.ForeignKey('usuarios.id'))
leccion_id = db.Column(db.Integer, db.ForeignKey('lecciones.id'))

‚ùå MAL
Nombre = db.Column(...)              # ‚ùå PascalCase
nombreCompleto = db.Column(...)      # ‚ùå camelCase
name = db.Column(...)                # ‚ùå Ingl√©s
n = db.Column(...)                   # ‚ùå Abreviaci√≥n
created_at = db.Column(...)          # ‚ùå Ingl√©s (usar fecha_creacion)
isActive = db.Column(...)            # ‚ùå camelCase + ingl√©s
```

### **3. √çndices y Constraints**
```python
‚úÖ BIEN
db.Index('idx_usuarios_email', 'email')
db.Index('idx_lecciones_nivel', 'nivel')
db.UniqueConstraint('email', name='uq_usuarios_email')
db.ForeignKeyConstraint(['usuario_id'], ['usuarios.id'], name='fk_progreso_usuario')

‚ùå MAL
db.Index('index1', 'email')          # ‚ùå No descriptivo
db.Index('email_idx', 'email')       # ‚ùå Orden incorrecto
```

### **4. Relaciones SQLAlchemy**
```python
‚úÖ BIEN
# En Usuario
perfil = db.relationship('PerfilUsuario', backref='usuario', uselist=False)
lecciones_completadas = db.relationship('Progreso', backref='usuario')
recompensas = db.relationship('Recompensa', backref='usuario')

# En Leccion
actividades = db.relationship('Actividad', backref='leccion', cascade='all, delete-orphan')

‚ùå MAL
prof = db.relationship(...)          # ‚ùå Abreviaci√≥n
leccionesCompletadas = db.relationship(...)  # ‚ùå camelCase
```

---

## ‚öõÔ∏è Frontend (React/Next.js/TypeScript)

### **1. Archivos y Carpetas**
```
‚úÖ BIEN - kebab-case para archivos, PascalCase para componentes
app/
‚îú‚îÄ‚îÄ login/page.tsx                    ‚úÖ
‚îú‚îÄ‚îÄ registro/page.tsx                 ‚úÖ
‚îú‚îÄ‚îÄ recuperar-contrasena/page.tsx     ‚úÖ
‚îú‚îÄ‚îÄ dashboard/page.tsx                ‚úÖ

components/
‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx                 ‚úÖ Componente
‚îÇ   ‚îú‚îÄ‚îÄ RegisterForm.tsx              ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ login-form.tsx                ‚úÖ Alternativa v√°lida
‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx                    ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ button.tsx                    ‚úÖ shadcn/ui usa min√∫sculas

hooks/
‚îú‚îÄ‚îÄ use-user-data.ts                  ‚úÖ
‚îú‚îÄ‚îÄ use-auth.ts                       ‚úÖ

‚ùå MAL
app/Login/page.tsx                    # ‚ùå PascalCase en carpeta
components/login_form.tsx             # ‚ùå snake_case
components/loginForm.tsx              # ‚ùå camelCase
hooks/useUserData.ts                  # ‚ùå camelCase sin guion
```

### **2. Componentes React**
```tsx
‚úÖ BIEN - PascalCase
export function LoginForm() {}
export function DashboardHeader() {}
export function LessonCard() {}
export function UserProfileSettings() {}

// Componentes internos (no exportados)
function LoadingSpinner() {}

‚ùå MAL
export function loginForm() {}        # ‚ùå camelCase
export function login_form() {}       # ‚ùå snake_case
export function LOGINFORM() {}        # ‚ùå MAY√öSCULAS
```

### **3. Props y State**
```tsx
‚úÖ BIEN - camelCase
interface LoginFormProps {
  initialEmail?: string;
  onSubmit: (data: LoginData) => void;
  isLoading: boolean;
  errorMessage?: string;
}

function LoginForm({ initialEmail, onSubmit, isLoading }: LoginFormProps) {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [showPassword, setShowPassword] = useState(false);
}

‚ùå MAL
interface Props {                     # ‚ùå Demasiado gen√©rico
  InitialEmail?: string;              # ‚ùå PascalCase
  on_submit: () => void;              # ‚ùå snake_case
}

const [Email, SetEmail] = useState(); # ‚ùå PascalCase
const [show_password, set_show_password] = useState(); # ‚ùå snake_case
```

### **4. Hooks Personalizados**
```tsx
‚úÖ BIEN - prefijo use + camelCase
export function useAuth() {}
export function useUserData() {}
export function useLessons() {}
export function useLocalStorage() {}

‚ùå MAL
export function auth() {}             # ‚ùå Sin prefijo use
export function UseAuth() {}          # ‚ùå PascalCase
export function use_auth() {}         # ‚ùå snake_case
```

### **5. Tipos e Interfaces TypeScript**
```tsx
‚úÖ BIEN - PascalCase
interface Usuario {
  id: string;
  nombre: string;
  email: string;
}

type NivelCurso = 'principiante' | 'intermedio' | 'avanzado';

type LeccionEstado = 'pendiente' | 'en_progreso' | 'completada';

interface PropsFormularioRegistro {
  onSuccess: () => void;
}

‚ùå MAL
interface usuario {}                  # ‚ùå min√∫sculas
type nivel_curso = string;            # ‚ùå snake_case
interface propsFormularioRegistro {}  # ‚ùå camelCase
```

### **6. Constantes**
```tsx
‚úÖ BIEN - MAY√öSCULAS con gui√≥n bajo
const API_BASE_URL = 'http://localhost:5000/api';
const MAX_LOGIN_ATTEMPTS = 3;
const TOKEN_STORAGE_KEY = 'auth_token';
const NIVELES_DISPONIBLES = ['principiante', 'intermedio', 'avanzado'];

‚ùå MAL
const apiBaseUrl = '...';             # ‚ùå camelCase
const max_login_attempts = 3;         # ‚ùå snake_case min√∫sculas
const MaxLoginAttempts = 3;           # ‚ùå PascalCase
```

### **7. Funciones de Utilidad**
```tsx
‚úÖ BIEN - camelCase, verbos descriptivos
export function formatearFecha(fecha: Date): string {}
export function validarEmail(email: string): boolean {}
export function calcularNivel(puntos: number): number {}
export function obtenerToken(): string | null {}

‚ùå MAL
export function FormatearFecha() {}   # ‚ùå PascalCase
export function formatear_fecha() {}  # ‚ùå snake_case
export function format() {}           # ‚ùå No descriptivo
export function fmt() {}              # ‚ùå Abreviaci√≥n
```

### **8. Rutas Next.js**
```
‚úÖ BIEN - kebab-case
app/
‚îú‚îÄ‚îÄ login/                            ‚úÖ /login
‚îú‚îÄ‚îÄ registro/                         ‚úÖ /registro
‚îú‚îÄ‚îÄ recuperar-contrasena/             ‚úÖ /recuperar-contrasena
‚îú‚îÄ‚îÄ perfil/                           ‚úÖ /perfil
‚îú‚îÄ‚îÄ lecciones/
‚îÇ   ‚îî‚îÄ‚îÄ [id]/                         ‚úÖ /lecciones/123
‚îî‚îÄ‚îÄ admin/
    ‚îî‚îÄ‚îÄ usuarios/
        ‚îî‚îÄ‚îÄ [id]/
            ‚îî‚îÄ‚îÄ editar/               ‚úÖ /admin/usuarios/123/editar

‚ùå MAL
app/Login/                            # ‚ùå PascalCase
app/recuperar_contrasena/             # ‚ùå snake_case
app/recuperarContrasena/              # ‚ùå camelCase
```

---

## üåê Variables de Entorno (.env)
```bash
‚úÖ BIEN - MAY√öSCULAS con gui√≥n bajo
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=loquesea2013
DB_NAME=SpeakLexi
JWT_SECRET_KEY=clave_secreta
JWT_ACCESS_TOKEN_EXPIRES=3600
MAIL_SERVER=smtp.gmail.com
MAIL_USERNAME=donitasdechocolate01@gmail.com
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

‚ùå MAL
db_host=localhost                     # ‚ùå Min√∫sculas
DbHost=localhost                      # ‚ùå PascalCase
dbHost=localhost                      # ‚ùå camelCase
DATABASE-HOST=localhost               # ‚ùå Guiones en lugar de _
```

---

## üìÅ Estructura de Carpetas
```
‚úÖ BIEN - snake_case o kebab-case
back-end/                             ‚úÖ
‚îú‚îÄ‚îÄ config/                           ‚úÖ
‚îú‚îÄ‚îÄ models/                           ‚úÖ
‚îú‚îÄ‚îÄ routes/                           ‚úÖ
‚îú‚îÄ‚îÄ services/                         ‚úÖ
‚îî‚îÄ‚îÄ utils/                            ‚úÖ

front-end/                            ‚úÖ
‚îú‚îÄ‚îÄ app/                              ‚úÖ
‚îú‚îÄ‚îÄ components/                       ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ auth/                         ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/                    ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ ui/                           ‚úÖ
‚îú‚îÄ‚îÄ hooks/                            ‚úÖ
‚îî‚îÄ‚îÄ lib/                              ‚úÖ

‚ùå MAL
BackEnd/                              # ‚ùå PascalCase
back_End/                             # ‚ùå Inconsistente
BACKEND/                              # ‚ùå MAY√öSCULAS
componentes/                          # ‚ùå Espa√±ol inconsistente con proyecto
```

---

## üé® Clases CSS (Tailwind)
```tsx
‚úÖ BIEN - kebab-case para clases personalizadas
<div className="bg-blue-500 text-white p-4 rounded-lg">
  {/* Tailwind usa clases predefinidas */}
</div>

// En globals.css
.boton-primario {
  @apply bg-blue-500 text-white px-4 py-2 rounded;
}

.tarjeta-leccion {
  @apply border rounded-lg shadow-md p-6;
}

‚ùå MAL
.botonPrimario {}                     # ‚ùå camelCase
.boton_primario {}                    # ‚ùå snake_case (no est√°ndar en CSS)
.BotonPrimario {}                     # ‚ùå PascalCase
```

---

## üìä Resumen de Convenciones

| Elemento | Convenci√≥n | Ejemplo |
|----------|-----------|---------|
| **Archivos Python** | snake_case | `gestor_usuarios.py` |
| **Clases Python** | PascalCase | `class Usuario:` |
| **Funciones Python** | snake_case | `def registrar_usuario():` |
| **Variables Python** | snake_case | `usuario_id = "123"` |
| **Constantes Python** | MAY√öSCULAS | `MAX_INTENTOS = 3` |
| **Tablas BD** | snake_case plural | `usuarios`, `lecciones` |
| **Columnas BD** | snake_case | `nombre_completo`, `email` |
| **Archivos React** | kebab-case / PascalCase | `LoginForm.tsx`, `login-form.tsx` |
| **Componentes React** | PascalCase | `function LoginForm()` |
| **Props/State** | camelCase | `isLoading`, `userName` |
| **Hooks** | use + camelCase | `useAuth()`, `useUserData()` |
| **Tipos TS** | PascalCase | `interface Usuario {}` |
| **Funciones TS** | camelCase | `validarEmail()` |
| **Rutas Next.js** | kebab-case | `/recuperar-contrasena` |
| **Variables ENV** | MAY√öSCULAS | `DB_HOST`, `JWT_SECRET_KEY` |
| **Clases CSS** | kebab-case | `.boton-primario` |

---

## üö® Errores Comunes a Evitar

### 1. **Mezclar Idiomas**
```python
‚ùå MAL
def register_usuario(data):  # ‚ùå Ingl√©s + Espa√±ol
    user_email = data['correo']  # ‚ùå Ingl√©s + Espa√±ol
    
‚úÖ BIEN
def registrar_usuario(data):
    email_usuario = data['email']
```

### 2. **Abreviaciones No Claras**
```python
‚ùå MAL
usr_id = "123"
msg = "Hola"
btn_clk = True

‚úÖ BIEN
usuario_id = "123"
mensaje = "Hola"
boton_clickeado = True
```

### 3. **Inconsistencia en el Proyecto**
```python
‚ùå MAL - Inconsistente
# En un archivo
class Usuario:
    pass

# En otro archivo
class user_profile:
    pass

‚úÖ BIEN - Consistente
class Usuario:
    pass

class PerfilUsuario:
    pass
```

### 4. **Nombres Demasiado Gen√©ricos**
```python
‚ùå MAL
def handle():
    data = get()
    process(data)
    
‚úÖ BIEN
def manejar_registro_usuario():
    datos_formulario = obtener_datos_formulario()
    procesar_registro(datos_formulario)
```

---

## ‚úÖ Checklist de Nombres

Antes de crear un archivo, variable o funci√≥n, preg√∫ntate:

- [ ] ¬øSigue la convenci√≥n correcta (snake_case, PascalCase, camelCase)?
- [ ] ¬øEs descriptivo y claro?
- [ ] ¬øEst√° en espa√±ol (excepto t√©rminos t√©cnicos)?
- [ ] ¬øEs consistente con el resto del proyecto?
- [ ] ¬øEvita abreviaciones confusas?
- [ ] ¬øNo usa palabras reservadas del lenguaje?

---

## üìö Referencias

- **PEP 8** (Python): https://pep8.org/
- **Google TypeScript Style Guide**: https://google.github.io/styleguide/tsguide.html
- **Airbnb JavaScript Style Guide**: https://github.com/airbnb/javascript

---

**Actualizado:** Octubre 2025  
**Proyecto:** SpeakLexi v1.0.0


================================================================================
# ARCHIVO: docs/guidelines/requisitos-funcionales.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/guidelines/requisitos-funcionales.md
================================================================================

# üìã Tabla de Requisitos Funcionales del Sistema

| **M√≥dulo** | **Actividad** | **ID** | **Requisito Funcional** | **Descripci√≥n Breve** |
|-------------|----------------|---------|---------------------------|------------------------|
| **Gesti√≥n de Usuarios** | Implementar requisitos, CRUD de usuario y validaciones | **RF-1** | Iniciar sesi√≥n | El usuario podr√° acceder al sistema ingresando su correo electr√≥nico y contrase√±a. |
|  |  | **RF-2** | Recuperar contrase√±a | El sistema permitir√° recuperar la contrase√±a mediante un enlace enviado al correo electr√≥nico. |
|  |  | **RF-3** | Autenticar usuario | El sistema debe permitir enviar autom√°ticamente un mensaje de verificaci√≥n al correo electr√≥nico del usuario para validar su identidad. |
|  |  | **RF-4** | Registrar usuario | El usuario podr√° crear una cuenta proporcionando informaci√≥n b√°sica como nombre, correo electr√≥nico, contrase√±a y otros datos personales necesarios. |
|  |  | **RF-5** | Asignar usuario | Despu√©s del registro, el sistema clasificar√° al usuario seg√∫n su nivel de dominio del idioma, asign√°ndolo al curso o m√≥dulo correspondiente. |
|  |  | **RF-6** | Cambiar curso | El sistema debe permitir al usuario cambiar el curso de idioma. |
|  |  | **RF-7** | Eliminar cuenta | El usuario tendr√° la opci√≥n de borrar su cuenta y todos sus datos asociados del sistema de forma definitiva. |

---

| **M√≥dulo** | **Actividad** | **ID** | **Requisito Funcional** | **Descripci√≥n Breve** |
|-------------|----------------|---------|---------------------------|------------------------|
| **Gesti√≥n de Lecciones y Contenidos** | Implementar requisitos, CRUD de usuario y validaciones | **RF-8** | Crear nuevas lecciones | El sistema debe permitir al administrador de contenido crear nuevas lecciones mediante preguntas con actividades din√°micas de juego. |
|  |  | **RF-9** | Agregar Multimedia | El sistema debe permitir agregar recursos multimedia (audio, video, im√°genes) dentro de las lecciones. |

---

| **M√≥dulo** | **Actividad** | **ID** | **Requisito Funcional** | **Descripci√≥n Breve** |
|-------------|----------------|---------|---------------------------|------------------------|
| **Gesti√≥n del Aprendizaje** | Implementar requisitos, CRUD de usuario y validaciones | **RF-10** | Registrar progreso | El sistema debe registrar el progreso del alumno al acabar cada lecci√≥n. |
|  |  | **RF-11** | Otorgar recompensas | El sistema debe otorgar recompensas con el objetivo de incentivar al alumno. |
|  |  | **RF-12** | Generar tablas | El sistema debe generar tablas de clasificaci√≥n a partir de desaf√≠os entre diferentes alumnos. |

---

| **M√≥dulo** | **Actividad** | **ID** | **Requisito Funcional** | **Descripci√≥n Breve** |
|-------------|----------------|---------|---------------------------|------------------------|
| **Gesti√≥n de Desempe√±o y Retroalimentaci√≥n** | Implementar requisitos, an√°lisis y reportes | **RF-13** | Consultar estad√≠sticas de progreso | Permite al profesor visualizar el rendimiento de los alumnos (promedio, racha y tiempo de estudio) mediante reportes autom√°ticos. |
|  |  | **RF-14** | Revisar retroalimentaci√≥n | Permite al profesor revisar y responder comentarios enviados por los alumnos sobre las lecciones. |
|  |  | **RF-15** | Planificar nuevos contenidos | Genera planes personalizados de estudio seg√∫n las √°reas de mejora detectadas en las estad√≠sticas. |

---

| **M√≥dulo** | **Actividad** | **ID** | **Requisito Funcional** | **Descripci√≥n Breve** |
|-------------|----------------|---------|---------------------------|------------------------|
| **Gesti√≥n de Soporte y Mantenimiento** | Implementar requisitos, CRUD y validaciones | **RF-16** | Consultar reportes de fallas | El sistema debe permitir al personal de mantenimiento consultar reportes de fallas del sistema para identificar errores. |
|  |  | **RF-17** | Programar tareas | El sistema debe permitir al personal de mantenimiento programar tareas de mantenimiento preventivo. |



================================================================================
# ARCHIVO: docs/workflows/lession-creation.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/lession-creation.md
================================================================================




================================================================================
# ARCHIVO: docs/workflows/user-registration.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/docs/workflows/user-registration.md
================================================================================




################################################################################
# OTROS
################################################################################


================================================================================
# ARCHIVO: README.md
# URL: https://raw.githubusercontent.com/sTr4yDev/speakLexi/main/README.md
================================================================================

# üìö SpeakLexi - Plataforma de Aprendizaje de Idiomas


## üìã Descripci√≥n del Proyecto

SpeakLexi es una plataforma web educativa inspirada en Duolingo, dise√±ada para el aprendizaje interactivo de idiomas. El sistema incluye gesti√≥n de usuarios, lecciones interactivas, gamificaci√≥n con logros y clasificaciones, y paneles administrativos para diferentes roles.

### üéØ Objetivo

Proporcionar una experiencia de aprendizaje de idiomas gamificada y personalizada, permitiendo a los estudiantes progresar a su propio ritmo mientras los profesores y administradores pueden gestionar contenido y monitorear el progreso.

---

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### Backend
- **Lenguaje:** Python 3.9+
- **Framework:** Flask 2.3.0
- **Base de Datos:** MySQL 8.0
- **ORM:** SQLAlchemy
- **Autenticaci√≥n:** Flask-JWT-Extended
- **Validaci√≥n:** Flask-WTF
- **Email:** Flask-Mail
- **Encriptaci√≥n:** Werkzeug Security (bcrypt)

### Frontend
- **Framework:** Next.js 14 (React 18)
- **Lenguaje:** TypeScript
- **Estilos:** Tailwind CSS
- **Componentes UI:** Shadcn/ui
- **Estado:** React Hooks
- **Iconos:** Lucide React
- **Gr√°ficos:** Recharts

### Herramientas de Desarrollo
- **Control de Versiones:** Git/GitHub
- **Gesti√≥n de Dependencias:** pip (Python), npm (Node.js)
- **Variables de Entorno:** python-dotenv

---

## üìÅ Estructura del Proyecto

```
speakLexi/
‚îú‚îÄ‚îÄ back-end/
‚îÇ   ‚îú‚îÄ‚îÄ app.py                    # Archivo principal de la aplicaci√≥n Flask
‚îÇ   ‚îú‚îÄ‚îÄ extensions.py             # Inicializaci√≥n de extensiones
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py          # Configuraci√≥n de base de datos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.py          # Configuraci√≥n general
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuario.py           # Modelo de Usuario
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py              # Rutas de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usuario_routes.py   # Rutas de gesti√≥n de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ correo_service.py   # Servicio de env√≠o de correos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ gestor_usuarios.py  # L√≥gica de negocio de usuarios
‚îÇ   ‚îî‚îÄ‚îÄ .env                     # Variables de entorno (NO INCLUIR EN GIT)
‚îÇ
‚îú‚îÄ‚îÄ front-end/
‚îÇ   ‚îú‚îÄ‚îÄ app/                     # P√°ginas de Next.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/              # Panel administrativo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ profesor/           # Panel de profesores
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/          # Dashboard de estudiantes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ lecciones/          # Sistema de lecciones
‚îÇ   ‚îú‚îÄ‚îÄ components/             # Componentes reutilizables
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                  # Custom hooks
‚îÇ   ‚îî‚îÄ‚îÄ styles/                 # Estilos globales
‚îÇ
‚îî‚îÄ‚îÄ README.md
```

---

## ‚öôÔ∏è Instalaci√≥n y Configuraci√≥n

### Prerrequisitos

Antes de comenzar, aseg√∫rate de tener instalado:
- Python 3.9 o superior
- Node.js 18 o superior
- MySQL 8.0
- Git

### 1. Copiar los archivos



### 2. Configuraci√≥n del Backend

#### 2.1 Crear entorno virtual

```bash
cd back-end
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

#### 2.2 Instalar dependencias

```bash
pip install flask flask-sqlalchemy flask-jwt-extended flask-mail flask-cors python-dotenv werkzeug
```

#### 2.3 Configurar variables de entorno

Crea un archivo `.env` en la carpeta `back-end/` con el siguiente contenido:

```env
# Base de Datos
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=tu_contrase√±a
DB_NAME=speaklexi_db

# Aplicaci√≥n
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=clave_secreta_super_segura_123
PORT=5000
DEBUG=True

# Correo Electr√≥nico
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=tu_correo@gmail.com
MAIL_PASSWORD=tu_contrase√±a_de_aplicacion
MAIL_DEFAULT_SENDER=tu_correo@gmail.com

# JWT
JWT_SECRET_KEY=clave_jwt_secreta_456
JWT_ACCESS_TOKEN_EXPIRES=3600
```

**Variables principales explicadas:**
- `DB_HOST`: Direcci√≥n del servidor MySQL (localhost para desarrollo local)
- `DB_NAME`: Nombre de la base de datos
- `SECRET_KEY`: Clave para encriptar sesiones de Flask
- `MAIL_USERNAME/PASSWORD`: Credenciales de Gmail (usar contrase√±a de aplicaci√≥n)
- `JWT_SECRET_KEY`: Clave para generar tokens de autenticaci√≥n

#### 2.4 Crear la base de datos

```bash
# Conectarse a MySQL
mysql -u root -p

# Crear la base de datos
CREATE DATABASE speaklexi_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE speaklexi_db;
exit;
```

#### 2.5 Ejecutar el backend

```bash
flask run
# O
python app.py
```

El servidor backend estar√° corriendo en: `http://localhost:5000`

### 3. Configuraci√≥n del Frontend

#### 3.1 Instalar dependencias

```bash
cd ../front-end
npm install
```

#### 3.2 Configurar variables de entorno

Crea un archivo `.env.local` en la carpeta `front-end/`:

```env
NEXT_PUBLIC_API_URL=http://localhost:5000/api
```

#### 3.3 Ejecutar el frontend

```bash
npm run dev
```

El frontend estar√° corriendo en: `http://localhost:3000`

---

## üöÄ Funcionalidades Implementadas

### üë§ Gesti√≥n de Usuarios (CRUD Completo)

**Endpoints Backend:**

| M√©todo | Ruta | Descripci√≥n |
|--------|------|-------------|
| POST | `/api/auth/register` | Registrar nuevo usuario |
| POST | `/api/auth/login` | Iniciar sesi√≥n |
| GET | `/api/usuarios` | Listar todos los usuarios (Admin) |
| GET | `/api/usuarios/<id>` | Obtener usuario espec√≠fico |
| PUT | `/api/usuarios/<id>` | Actualizar informaci√≥n del usuario |
| DELETE | `/api/usuarios/<id>` | Eliminar usuario |
| POST | `/api/auth/verificar-email` | Verificar correo electr√≥nico |
| POST | `/api/auth/recuperar-contrasena` | Solicitar recuperaci√≥n de contrase√±a |
| POST | `/api/auth/restablecer-contrasena` | Restablecer contrase√±a |

**Validaciones implementadas:**
- ‚úÖ Correo electr√≥nico √∫nico
- ‚úÖ Formato v√°lido de email
- ‚úÖ Contrase√±a m√≠nima de 8 caracteres
- ‚úÖ Encriptaci√≥n de contrase√±as con bcrypt
- ‚úÖ Verificaci√≥n por correo electr√≥nico
- ‚úÖ Tokens JWT para autenticaci√≥n
- ‚úÖ Roles de usuario (estudiante, profesor, admin, mantenimiento)

### üìñ Sistema de Lecciones

**P√°ginas Frontend:**
- `/lecciones` - Lista de lecciones disponibles
- `/lecciones/[id]` - Visualizador de lecci√≥n interactiva
- `/admin/lecciones` - Gesti√≥n de lecciones (Admin)
- `/admin/lecciones/crear` - Crear nueva lecci√≥n
- `/admin/lecciones/[id]/editar` - Editar lecci√≥n existente

**Tipos de actividades:**
1. **Multiple Choice** - Selecci√≥n m√∫ltiple
2. **Fill in the Blank** - Completar espacios
3. **Translation** - Traducci√≥n de frases
4. **Matching** - Emparejar palabras
5. **Listen & Repeat** - Escuchar y repetir
6. **Word Order** - Ordenar palabras
7. **True/False** - Verdadero o falso

### üéÆ Sistema de Gamificaci√≥n

- **Logros y medallas** (`/logros`)
- **Tabla de clasificaci√≥n** (`/clasificacion`)
- **Sistema de puntos (XP)**
- **Niveles de progreso**
- **Rachas de estudio**

### üë®‚Äçüè´ Panel de Profesores

- **Dashboard** (`/profesor/dashboard`)
- **Estad√≠sticas de estudiantes** (`/profesor/estadisticas`)
- **Planificaci√≥n de clases** (`/profesor/planificacion`)
- **Retroalimentaci√≥n** (`/profesor/retroalimentacion`)

### üë®‚Äçüíº Panel Administrativo

- **Dashboard** (`/admin/dashboard`)
- **Gesti√≥n de usuarios** (`/admin/usuarios`)
- **Gesti√≥n de lecciones** (`/admin/lecciones`)
- **Estad√≠sticas generales**

### üîß Panel de Mantenimiento

- **Dashboard** (`/mantenimiento/dashboard`)
- **Gesti√≥n de reportes** (`/mantenimiento/reportes`)
- **Tareas de mantenimiento** (`/mantenimiento/tareas`)

---

## üß™ Pruebas y Validaciones

### Pruebas Realizadas

1. **Registro de usuarios:**
   - ‚úÖ Validaci√≥n de correo duplicado
   - ‚úÖ Validaci√≥n de formato de email
   - ‚úÖ Validaci√≥n de contrase√±a segura
   - ‚úÖ Env√≠o de correo de verificaci√≥n

2. **Inicio de sesi√≥n:**
   - ‚úÖ Validaci√≥n de credenciales
   - ‚úÖ Generaci√≥n de token JWT
   - ‚úÖ Redirecci√≥n seg√∫n rol de usuario

3. **Recuperaci√≥n de contrase√±a:**
   - ‚úÖ Generaci√≥n de token de recuperaci√≥n
   - ‚úÖ Env√≠o de correo con enlace
   - ‚úÖ Validaci√≥n de token y actualizaci√≥n

4. **Gesti√≥n de lecciones:**
   - ‚úÖ CRUD completo de lecciones
   - ‚úÖ Filtrado por nivel y categor√≠a
   - ‚úÖ Guardado de progreso del usuario

### Archivos de Prueba

- `back-end/test_password.py` - Pruebas de encriptaci√≥n
- `back-end/test_routes.py` - Pruebas de endpoints

---

## üì∏ Evidencias

### Capturas de Pantalla
TODO: Agregar links de las capturas
#### 1. Pantalla de Inicio de Sesi√≥n
![Login](https://via.placeholder.com/800x400?text=Login+Screen)

#### 2. Dashboard de Estudiante
![Dashboard](https://via.placeholder.com/800x400?text=Student+Dashboard)

#### 3. Sistema de Lecciones
![Lecciones](https://via.placeholder.com/800x400?text=Lessons+System)

#### 4. Panel Administrativo
![Admin](https://via.placeholder.com/800x400?text=Admin+Panel)

### Conexi√≥n a la Base de Datos

![DB Connection](https://via.placeholder.com/600x300?text=Database+Connection+Success)

**Salida de consola:**
```
 * Running on http://127.0.0.1:5000
 * Connected to database: speaklexi_db
 * Environment: development
 * Debug mode: on
```

### Video Demostrativo

üé• [Ver video de funcionamiento completo](Poner video demostrativo aqui)

---

## üìö Documentaci√≥n Adicional

### Modelo de Base de Datos

**Tabla: usuarios**

TODO: Agregar la tabla cuando ya este finalizado.

### Roles y Permisos

| Rol | Permisos |
|-----|----------|
| **Estudiante** | Ver lecciones, completar actividades, ver progreso, participar en clasificaci√≥n |
| **Profesor** | Todo lo de estudiante + ver estad√≠sticas de alumnos, crear planificaciones, dar retroalimentaci√≥n |
| **Admin** | Todo + gestionar usuarios, crear/editar/eliminar lecciones, ver estad√≠sticas globales |
| **Mantenimiento** | Gestionar reportes t√©cnicos, crear tareas de mantenimiento, revisar logs del sistema |

---

## üîí Seguridad

- **Contrase√±as:** Encriptadas con bcrypt (Werkzeug Security)
- **Autenticaci√≥n:** JWT (JSON Web Tokens) con expiraci√≥n
- **CORS:** Configurado para permitir solo or√≠genes confiables
- **SQL Injection:** Protegido con SQLAlchemy ORM
- **XSS:** Sanitizaci√≥n de inputs en frontend
- **Variables sensibles:** Almacenadas en archivos .env (no versionados)

---

## üêõ Soluci√≥n de Problemas Comunes

### Error: "No se puede conectar a la base de datos"
**Soluci√≥n:** Verifica que MySQL est√© corriendo y las credenciales en `.env` sean correctas.

### Error: "Port 5000 already in use"
**Soluci√≥n:** 
```bash
# Windows
netstat -ano | findstr :5000
taskkill /PID [n√∫mero] /F

# Linux/Mac
lsof -ti:5000 | xargs kill -9
```

### Error: "Module not found"
**Soluci√≥n:** 
```bash
# Backend
pip install -r requirements.txt

# Frontend
npm install
```

---

## üìù Pr√≥ximas Mejoras


---

## üë• Autores

Sergio Olivares Sotelo

---

## üìÑ Licencia

Este proyecto fue desarrollado con fines educativos para el Instituto Tecnologico de Zacatepec - [2025].

---




**√öltima actualizaci√≥n:** Octubre 2025
**Versi√≥n:** 1.0.0

